function QD(i,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in i)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(i,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();function IA(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var vm={exports:{}},nl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT;function ZD(){if(VT)return nl;VT=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:i,type:n,key:l,ref:s!==void 0?s:null,props:a}}return nl.Fragment=t,nl.jsx=e,nl.jsxs=e,nl}var GT;function JD(){return GT||(GT=1,vm.exports=ZD()),vm.exports}var J=JD(),Sm={exports:{}},il={},Tm={exports:{}},Em={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HT;function tI(){return HT||(HT=1,function(i){function t(B,H){var et=B.length;B.push(H);t:for(;0<et;){var X=et-1>>>1,O=B[X];if(0<s(O,H))B[X]=H,B[et]=O,et=X;else break t}}function e(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var H=B[0],et=B.pop();if(et!==H){B[0]=et;t:for(var X=0,O=B.length,q=O>>>1;X<q;){var st=2*(X+1)-1,at=B[st],dt=st+1,gt=B[dt];if(0>s(at,et))dt<O&&0>s(gt,at)?(B[X]=gt,B[dt]=et,X=dt):(B[X]=at,B[st]=et,X=st);else if(dt<O&&0>s(gt,et))B[X]=gt,B[dt]=et,X=dt;else break t}}return H}function s(B,H){var et=B.sortIndex-H.sortIndex;return et!==0?et:B.id-H.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();i.unstable_now=function(){return l.now()-u}}var d=[],f=[],h=1,g=null,y=3,S=!1,v=!1,E=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function I(B){for(var H=e(f);H!==null;){if(H.callback===null)n(f);else if(H.startTime<=B)n(f),H.sortIndex=H.expirationTime,t(d,H);else break;H=e(f)}}function _(B){if(E=!1,I(B),!v)if(e(d)!==null)v=!0,P||(P=!0,Q());else{var H=e(f);H!==null&&it(_,H.startTime-B)}}var P=!1,M=-1,k=5,F=-1;function R(){return x?!0:!(i.unstable_now()-F<k)}function $(){if(x=!1,P){var B=i.unstable_now();F=B;var H=!0;try{t:{v=!1,E&&(E=!1,D(M),M=-1),S=!0;var et=y;try{e:{for(I(B),g=e(d);g!==null&&!(g.expirationTime>B&&R());){var X=g.callback;if(typeof X=="function"){g.callback=null,y=g.priorityLevel;var O=X(g.expirationTime<=B);if(B=i.unstable_now(),typeof O=="function"){g.callback=O,I(B),H=!0;break e}g===e(d)&&n(d),I(B)}else n(d);g=e(d)}if(g!==null)H=!0;else{var q=e(f);q!==null&&it(_,q.startTime-B),H=!1}}break t}finally{g=null,y=et,S=!1}H=void 0}}finally{H?Q():P=!1}}}var Q;if(typeof L=="function")Q=function(){L($)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,ct=ft.port2;ft.port1.onmessage=$,Q=function(){ct.postMessage(null)}}else Q=function(){b($,0)};function it(B,H){M=b(function(){B(i.unstable_now())},H)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(B){B.callback=null},i.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<B?Math.floor(1e3/B):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_next=function(B){switch(y){case 1:case 2:case 3:var H=3;break;default:H=y}var et=y;y=H;try{return B()}finally{y=et}},i.unstable_requestPaint=function(){x=!0},i.unstable_runWithPriority=function(B,H){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var et=y;y=B;try{return H()}finally{y=et}},i.unstable_scheduleCallback=function(B,H,et){var X=i.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?X+et:X):et=X,B){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=et+O,B={id:h++,callback:H,priorityLevel:B,startTime:et,expirationTime:O,sortIndex:-1},et>X?(B.sortIndex=et,t(f,B),e(d)===null&&B===e(f)&&(E?(D(M),M=-1):E=!0,it(_,et-X))):(B.sortIndex=O,t(d,B),v||S||(v=!0,P||(P=!0,Q()))),B},i.unstable_shouldYield=R,i.unstable_wrapCallback=function(B){var H=y;return function(){var et=y;y=H;try{return B.apply(this,arguments)}finally{y=et}}}}(Em)),Em}var jT;function eI(){return jT||(jT=1,Tm.exports=tI()),Tm.exports}var xm={exports:{}},It={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT;function nI(){if(KT)return It;KT=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.iterator;function y(O){return O===null||typeof O!="object"?null:(O=g&&O[g]||O["@@iterator"],typeof O=="function"?O:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,E={};function x(O,q,st){this.props=O,this.context=q,this.refs=E,this.updater=st||S}x.prototype.isReactComponent={},x.prototype.setState=function(O,q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,q,"setState")},x.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function b(){}b.prototype=x.prototype;function D(O,q,st){this.props=O,this.context=q,this.refs=E,this.updater=st||S}var L=D.prototype=new b;L.constructor=D,v(L,x.prototype),L.isPureReactComponent=!0;var I=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function M(O,q,st,at,dt,gt){return st=gt.ref,{$$typeof:i,type:O,key:q,ref:st!==void 0?st:null,props:gt}}function k(O,q){return M(O.type,q,void 0,void 0,void 0,O.props)}function F(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function R(O){var q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(st){return q[st]})}var $=/\/+/g;function Q(O,q){return typeof O=="object"&&O!==null&&O.key!=null?R(""+O.key):q.toString(36)}function ft(){}function ct(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(ft,ft):(O.status="pending",O.then(function(q){O.status==="pending"&&(O.status="fulfilled",O.value=q)},function(q){O.status==="pending"&&(O.status="rejected",O.reason=q)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function it(O,q,st,at,dt){var gt=typeof O;(gt==="undefined"||gt==="boolean")&&(O=null);var ht=!1;if(O===null)ht=!0;else switch(gt){case"bigint":case"string":case"number":ht=!0;break;case"object":switch(O.$$typeof){case i:case t:ht=!0;break;case h:return ht=O._init,it(ht(O._payload),q,st,at,dt)}}if(ht)return dt=dt(O),ht=at===""?"."+Q(O,0):at,I(dt)?(st="",ht!=null&&(st=ht.replace($,"$&/")+"/"),it(dt,q,st,"",function(Ee){return Ee})):dt!=null&&(F(dt)&&(dt=k(dt,st+(dt.key==null||O&&O.key===dt.key?"":(""+dt.key).replace($,"$&/")+"/")+ht)),q.push(dt)),1;ht=0;var Ft=at===""?".":at+":";if(I(O))for(var Ct=0;Ct<O.length;Ct++)at=O[Ct],gt=Ft+Q(at,Ct),ht+=it(at,q,st,gt,dt);else if(Ct=y(O),typeof Ct=="function")for(O=Ct.call(O),Ct=0;!(at=O.next()).done;)at=at.value,gt=Ft+Q(at,Ct++),ht+=it(at,q,st,gt,dt);else if(gt==="object"){if(typeof O.then=="function")return it(ct(O),q,st,at,dt);throw q=String(O),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return ht}function B(O,q,st){if(O==null)return O;var at=[],dt=0;return it(O,at,"","",function(gt){return q.call(st,gt,dt++)}),at}function H(O){if(O._status===-1){var q=O._result;q=q(),q.then(function(st){(O._status===0||O._status===-1)&&(O._status=1,O._result=st)},function(st){(O._status===0||O._status===-1)&&(O._status=2,O._result=st)}),O._status===-1&&(O._status=0,O._result=q)}if(O._status===1)return O._result.default;throw O._result}var et=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function X(){}return It.Children={map:B,forEach:function(O,q,st){B(O,function(){q.apply(this,arguments)},st)},count:function(O){var q=0;return B(O,function(){q++}),q},toArray:function(O){return B(O,function(q){return q})||[]},only:function(O){if(!F(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},It.Component=x,It.Fragment=e,It.Profiler=s,It.PureComponent=D,It.StrictMode=n,It.Suspense=d,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,It.__COMPILER_RUNTIME={__proto__:null,c:function(O){return _.H.useMemoCache(O)}},It.cache=function(O){return function(){return O.apply(null,arguments)}},It.cloneElement=function(O,q,st){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var at=v({},O.props),dt=O.key,gt=void 0;if(q!=null)for(ht in q.ref!==void 0&&(gt=void 0),q.key!==void 0&&(dt=""+q.key),q)!P.call(q,ht)||ht==="key"||ht==="__self"||ht==="__source"||ht==="ref"&&q.ref===void 0||(at[ht]=q[ht]);var ht=arguments.length-2;if(ht===1)at.children=st;else if(1<ht){for(var Ft=Array(ht),Ct=0;Ct<ht;Ct++)Ft[Ct]=arguments[Ct+2];at.children=Ft}return M(O.type,dt,void 0,void 0,gt,at)},It.createContext=function(O){return O={$$typeof:l,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:a,_context:O},O},It.createElement=function(O,q,st){var at,dt={},gt=null;if(q!=null)for(at in q.key!==void 0&&(gt=""+q.key),q)P.call(q,at)&&at!=="key"&&at!=="__self"&&at!=="__source"&&(dt[at]=q[at]);var ht=arguments.length-2;if(ht===1)dt.children=st;else if(1<ht){for(var Ft=Array(ht),Ct=0;Ct<ht;Ct++)Ft[Ct]=arguments[Ct+2];dt.children=Ft}if(O&&O.defaultProps)for(at in ht=O.defaultProps,ht)dt[at]===void 0&&(dt[at]=ht[at]);return M(O,gt,void 0,void 0,null,dt)},It.createRef=function(){return{current:null}},It.forwardRef=function(O){return{$$typeof:u,render:O}},It.isValidElement=F,It.lazy=function(O){return{$$typeof:h,_payload:{_status:-1,_result:O},_init:H}},It.memo=function(O,q){return{$$typeof:f,type:O,compare:q===void 0?null:q}},It.startTransition=function(O){var q=_.T,st={};_.T=st;try{var at=O(),dt=_.S;dt!==null&&dt(st,at),typeof at=="object"&&at!==null&&typeof at.then=="function"&&at.then(X,et)}catch(gt){et(gt)}finally{_.T=q}},It.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},It.use=function(O){return _.H.use(O)},It.useActionState=function(O,q,st){return _.H.useActionState(O,q,st)},It.useCallback=function(O,q){return _.H.useCallback(O,q)},It.useContext=function(O){return _.H.useContext(O)},It.useDebugValue=function(){},It.useDeferredValue=function(O,q){return _.H.useDeferredValue(O,q)},It.useEffect=function(O,q,st){var at=_.H;if(typeof st=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return at.useEffect(O,q)},It.useId=function(){return _.H.useId()},It.useImperativeHandle=function(O,q,st){return _.H.useImperativeHandle(O,q,st)},It.useInsertionEffect=function(O,q){return _.H.useInsertionEffect(O,q)},It.useLayoutEffect=function(O,q){return _.H.useLayoutEffect(O,q)},It.useMemo=function(O,q){return _.H.useMemo(O,q)},It.useOptimistic=function(O,q){return _.H.useOptimistic(O,q)},It.useReducer=function(O,q,st){return _.H.useReducer(O,q,st)},It.useRef=function(O){return _.H.useRef(O)},It.useState=function(O){return _.H.useState(O)},It.useSyncExternalStore=function(O,q,st){return _.H.useSyncExternalStore(O,q,st)},It.useTransition=function(){return _.H.useTransition()},It.version="19.1.0",It}var zT;function Lp(){return zT||(zT=1,xm.exports=nI()),xm.exports}var bm={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YT;function iI(){if(YT)return en;YT=1;var i=Lp();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(d,f,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:d,containerInfo:f,implementation:h}}var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,en.createPortal=function(d,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(d,f,null,h)},en.flushSync=function(d){var f=l.T,h=n.p;try{if(l.T=null,n.p=2,d)return d()}finally{l.T=f,n.p=h,n.d.f()}},en.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},en.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},en.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var h=f.as,g=u(h,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,S=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:S}):h==="script"&&n.d.X(d,{crossOrigin:g,integrity:y,fetchPriority:S,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},en.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=u(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},en.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,g=u(h,f.crossOrigin);n.d.L(d,h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},en.preloadModule=function(d,f){if(typeof d=="string")if(f){var h=u(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},en.requestFormReset=function(d){n.d.r(d)},en.unstable_batchedUpdates=function(d,f){return d(f)},en.useFormState=function(d,f,h){return l.H.useFormState(d,f,h)},en.useFormStatus=function(){return l.H.useHostTransitionStatus()},en.version="19.1.0",en}var qT;function wA(){if(qT)return bm.exports;qT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),bm.exports=iI(),bm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XT;function sI(){if(XT)return il;XT=1;var i=eI(),t=Lp(),e=wA();function n(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,c=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(c=o.return),r=o.return;while(r)}return o.tag===3?c:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function u(r){if(a(r)!==r)throw Error(n(188))}function d(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(n(188));return o!==r?null:r}for(var c=r,m=o;;){var p=c.return;if(p===null)break;var T=p.alternate;if(T===null){if(m=p.return,m!==null){c=m;continue}break}if(p.child===T.child){for(T=p.child;T;){if(T===c)return u(p),r;if(T===m)return u(p),o;T=T.sibling}throw Error(n(188))}if(c.return!==m.return)c=p,m=T;else{for(var C=!1,w=p.child;w;){if(w===c){C=!0,c=p,m=T;break}if(w===m){C=!0,m=p,c=T;break}w=w.sibling}if(!C){for(w=T.child;w;){if(w===c){C=!0,c=T,m=p;break}if(w===m){C=!0,m=T,c=p;break}w=w.sibling}if(!C)throw Error(n(189))}}if(c.alternate!==m)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?r:o}function f(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=f(r),o!==null)return o;r=r.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),L=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function Q(r){return r===null||typeof r!="object"?null:(r=$&&r[$]||r["@@iterator"],typeof r=="function"?r:null)}var ft=Symbol.for("react.client.reference");function ct(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ft?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case v:return"Fragment";case x:return"Profiler";case E:return"StrictMode";case _:return"Suspense";case P:return"SuspenseList";case F:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case S:return"Portal";case L:return(r.displayName||"Context")+".Provider";case D:return(r._context.displayName||"Context")+".Consumer";case I:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case M:return o=r.displayName||null,o!==null?o:ct(r.type)||"Memo";case k:o=r._payload,r=r._init;try{return ct(r(o))}catch{}}return null}var it=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et={pending:!1,data:null,method:null,action:null},X=[],O=-1;function q(r){return{current:r}}function st(r){0>O||(r.current=X[O],X[O]=null,O--)}function at(r,o){O++,X[O]=r.current,r.current=o}var dt=q(null),gt=q(null),ht=q(null),Ft=q(null);function Ct(r,o){switch(at(ht,o),at(gt,r),at(dt,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?gT(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=gT(o),r=pT(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}st(dt),at(dt,r)}function Ee(){st(dt),st(gt),st(ht)}function ui(r){r.memoizedState!==null&&at(Ft,r);var o=dt.current,c=pT(o,r.type);o!==c&&(at(gt,r),at(dt,c))}function ci(r){gt.current===r&&(st(dt),st(gt)),Ft.current===r&&(st(Ft),Qo._currentValue=et)}var ki=Object.prototype.hasOwnProperty,Ne=i.unstable_scheduleCallback,ue=i.unstable_cancelCallback,Mr=i.unstable_shouldYield,Nt=i.unstable_requestPaint,Ut=i.unstable_now,Ce=i.unstable_getCurrentPriorityLevel,Pn=i.unstable_ImmediatePriority,Ke=i.unstable_UserBlockingPriority,Tn=i.unstable_NormalPriority,bt=i.unstable_LowPriority,so=i.unstable_IdlePriority,Pr=i.log,au=i.unstable_setDisableYieldValue,ei=null,Qe=null;function fi(r){if(typeof Pr=="function"&&au(r),Qe&&typeof Qe.setStrictMode=="function")try{Qe.setStrictMode(ei,r)}catch{}}var Ze=Math.clz32?Math.clz32:BC,ou=Math.log,Ws=Math.LN2;function BC(r){return r>>>=0,r===0?32:31-(ou(r)/Ws|0)|0}var lu=256,uu=4194304;function Qs(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function cu(r,o,c){var m=r.pendingLanes;if(m===0)return 0;var p=0,T=r.suspendedLanes,C=r.pingedLanes;r=r.warmLanes;var w=m&134217727;return w!==0?(m=w&~T,m!==0?p=Qs(m):(C&=w,C!==0?p=Qs(C):c||(c=w&~r,c!==0&&(p=Qs(c))))):(w=m&~T,w!==0?p=Qs(w):C!==0?p=Qs(C):c||(c=m&~r,c!==0&&(p=Qs(c)))),p===0?0:o!==0&&o!==p&&(o&T)===0&&(T=p&-p,c=o&-o,T>=c||T===32&&(c&4194048)!==0)?o:p}function ro(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function FC(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z0(){var r=lu;return lu<<=1,(lu&4194048)===0&&(lu=256),r}function J0(){var r=uu;return uu<<=1,(uu&62914560)===0&&(uu=4194304),r}function od(r){for(var o=[],c=0;31>c;c++)o.push(r);return o}function ao(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function UC(r,o,c,m,p,T){var C=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var w=r.entanglements,N=r.expirationTimes,Y=r.hiddenUpdates;for(c=C&~c;0<c;){var rt=31-Ze(c),ut=1<<rt;w[rt]=0,N[rt]=-1;var W=Y[rt];if(W!==null)for(Y[rt]=null,rt=0;rt<W.length;rt++){var Z=W[rt];Z!==null&&(Z.lane&=-536870913)}c&=~ut}m!==0&&ty(r,m,0),T!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=T&~(C&~o))}function ty(r,o,c){r.pendingLanes|=o,r.suspendedLanes&=~o;var m=31-Ze(o);r.entangledLanes|=o,r.entanglements[m]=r.entanglements[m]|1073741824|c&4194090}function ey(r,o){var c=r.entangledLanes|=o;for(r=r.entanglements;c;){var m=31-Ze(c),p=1<<m;p&o|r[m]&o&&(r[m]|=o),c&=~p}}function ld(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ud(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ny(){var r=H.p;return r!==0?r:(r=window.event,r===void 0?32:kT(r.type))}function $C(r,o){var c=H.p;try{return H.p=r,o()}finally{H.p=c}}var ms=Math.random().toString(36).slice(2),Je="__reactFiber$"+ms,un="__reactProps$"+ms,kr="__reactContainer$"+ms,cd="__reactEvents$"+ms,VC="__reactListeners$"+ms,GC="__reactHandles$"+ms,iy="__reactResources$"+ms,oo="__reactMarker$"+ms;function fd(r){delete r[Je],delete r[un],delete r[cd],delete r[VC],delete r[GC]}function Nr(r){var o=r[Je];if(o)return o;for(var c=r.parentNode;c;){if(o=c[kr]||c[Je]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(r=TT(r);r!==null;){if(c=r[Je])return c;r=TT(r)}return o}r=c,c=r.parentNode}return null}function Br(r){if(r=r[Je]||r[kr]){var o=r.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return r}return null}function lo(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(n(33))}function Fr(r){var o=r[iy];return o||(o=r[iy]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Be(r){r[oo]=!0}var sy=new Set,ry={};function Zs(r,o){Ur(r,o),Ur(r+"Capture",o)}function Ur(r,o){for(ry[r]=o,r=0;r<o.length;r++)sy.add(o[r])}var HC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ay={},oy={};function jC(r){return ki.call(oy,r)?!0:ki.call(ay,r)?!1:HC.test(r)?oy[r]=!0:(ay[r]=!0,!1)}function fu(r,o,c){if(jC(o))if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+c)}}function du(r,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+c)}}function Ni(r,o,c,m){if(m===null)r.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(o,c,""+m)}}var dd,ly;function $r(r){if(dd===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);dd=o&&o[1]||"",ly=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+dd+r+ly}var hd=!1;function md(r,o){if(!r||hd)return"";hd=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var ut=function(){throw Error()};if(Object.defineProperty(ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ut,[])}catch(Z){var W=Z}Reflect.construct(r,[],ut)}else{try{ut.call()}catch(Z){W=Z}r.call(ut.prototype)}}else{try{throw Error()}catch(Z){W=Z}(ut=r())&&typeof ut.catch=="function"&&ut.catch(function(){})}}catch(Z){if(Z&&W&&typeof Z.stack=="string")return[Z.stack,W.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=m.DetermineComponentFrameRoot(),C=T[0],w=T[1];if(C&&w){var N=C.split(`
`),Y=w.split(`
`);for(p=m=0;m<N.length&&!N[m].includes("DetermineComponentFrameRoot");)m++;for(;p<Y.length&&!Y[p].includes("DetermineComponentFrameRoot");)p++;if(m===N.length||p===Y.length)for(m=N.length-1,p=Y.length-1;1<=m&&0<=p&&N[m]!==Y[p];)p--;for(;1<=m&&0<=p;m--,p--)if(N[m]!==Y[p]){if(m!==1||p!==1)do if(m--,p--,0>p||N[m]!==Y[p]){var rt=`
`+N[m].replace(" at new "," at ");return r.displayName&&rt.includes("<anonymous>")&&(rt=rt.replace("<anonymous>",r.displayName)),rt}while(1<=m&&0<=p);break}}}finally{hd=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?$r(c):""}function KC(r){switch(r.tag){case 26:case 27:case 5:return $r(r.type);case 16:return $r("Lazy");case 13:return $r("Suspense");case 19:return $r("SuspenseList");case 0:case 15:return md(r.type,!1);case 11:return md(r.type.render,!1);case 1:return md(r.type,!0);case 31:return $r("Activity");default:return""}}function uy(r){try{var o="";do o+=KC(r),r=r.return;while(r);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function kn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function cy(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function zC(r){var o=cy(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),m=""+r[o];if(!r.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,T=c.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return p.call(this)},set:function(C){m=""+C,T.call(this,C)}}),Object.defineProperty(r,o,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(C){m=""+C},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function hu(r){r._valueTracker||(r._valueTracker=zC(r))}function fy(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var c=o.getValue(),m="";return r&&(m=cy(r)?r.checked?"true":"false":r.value),r=m,r!==c?(o.setValue(r),!0):!1}function mu(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var YC=/[\n"\\]/g;function Nn(r){return r.replace(YC,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function gd(r,o,c,m,p,T,C,w){r.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.type=C:r.removeAttribute("type"),o!=null?C==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+kn(o)):r.value!==""+kn(o)&&(r.value=""+kn(o)):C!=="submit"&&C!=="reset"||r.removeAttribute("value"),o!=null?pd(r,C,kn(o)):c!=null?pd(r,C,kn(c)):m!=null&&r.removeAttribute("value"),p==null&&T!=null&&(r.defaultChecked=!!T),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.name=""+kn(w):r.removeAttribute("name")}function dy(r,o,c,m,p,T,C,w){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.type=T),o!=null||c!=null){if(!(T!=="submit"&&T!=="reset"||o!=null))return;c=c!=null?""+kn(c):"",o=o!=null?""+kn(o):c,w||o===r.value||(r.value=o),r.defaultValue=o}m=m??p,m=typeof m!="function"&&typeof m!="symbol"&&!!m,r.checked=w?r.checked:!!m,r.defaultChecked=!!m,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(r.name=C)}function pd(r,o,c){o==="number"&&mu(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function Vr(r,o,c,m){if(r=r.options,o){o={};for(var p=0;p<c.length;p++)o["$"+c[p]]=!0;for(c=0;c<r.length;c++)p=o.hasOwnProperty("$"+r[c].value),r[c].selected!==p&&(r[c].selected=p),p&&m&&(r[c].defaultSelected=!0)}else{for(c=""+kn(c),o=null,p=0;p<r.length;p++){if(r[p].value===c){r[p].selected=!0,m&&(r[p].defaultSelected=!0);return}o!==null||r[p].disabled||(o=r[p])}o!==null&&(o.selected=!0)}}function hy(r,o,c){if(o!=null&&(o=""+kn(o),o!==r.value&&(r.value=o),c==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=c!=null?""+kn(c):""}function my(r,o,c,m){if(o==null){if(m!=null){if(c!=null)throw Error(n(92));if(it(m)){if(1<m.length)throw Error(n(93));m=m[0]}c=m}c==null&&(c=""),o=c}c=kn(o),r.defaultValue=c,m=r.textContent,m===c&&m!==""&&m!==null&&(r.value=m)}function Gr(r,o){if(o){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=o;return}}r.textContent=o}var qC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gy(r,o,c){var m=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?m?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":m?r.setProperty(o,c):typeof c!="number"||c===0||qC.has(o)?o==="float"?r.cssFloat=c:r[o]=(""+c).trim():r[o]=c+"px"}function py(r,o,c){if(o!=null&&typeof o!="object")throw Error(n(62));if(r=r.style,c!=null){for(var m in c)!c.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?r.setProperty(m,""):m==="float"?r.cssFloat="":r[m]="");for(var p in o)m=o[p],o.hasOwnProperty(p)&&c[p]!==m&&gy(r,p,m)}else for(var T in o)o.hasOwnProperty(T)&&gy(r,T,o[T])}function yd(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),WC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gu(r){return WC.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var vd=null;function Sd(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Hr=null,jr=null;function yy(r){var o=Br(r);if(o&&(r=o.stateNode)){var c=r[un]||null;t:switch(r=o.stateNode,o.type){case"input":if(gd(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Nn(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var m=c[o];if(m!==r&&m.form===r.form){var p=m[un]||null;if(!p)throw Error(n(90));gd(m,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(o=0;o<c.length;o++)m=c[o],m.form===r.form&&fy(m)}break t;case"textarea":hy(r,c.value,c.defaultValue);break t;case"select":o=c.value,o!=null&&Vr(r,!!c.multiple,o,!1)}}}var Td=!1;function vy(r,o,c){if(Td)return r(o,c);Td=!0;try{var m=r(o);return m}finally{if(Td=!1,(Hr!==null||jr!==null)&&(tc(),Hr&&(o=Hr,r=jr,jr=Hr=null,yy(o),r)))for(o=0;o<r.length;o++)yy(r[o])}}function uo(r,o){var c=r.stateNode;if(c===null)return null;var m=c[un]||null;if(m===null)return null;c=m[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break t;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(n(231,o,typeof c));return c}var Bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ed=!1;if(Bi)try{var co={};Object.defineProperty(co,"passive",{get:function(){Ed=!0}}),window.addEventListener("test",co,co),window.removeEventListener("test",co,co)}catch{Ed=!1}var gs=null,xd=null,pu=null;function Sy(){if(pu)return pu;var r,o=xd,c=o.length,m,p="value"in gs?gs.value:gs.textContent,T=p.length;for(r=0;r<c&&o[r]===p[r];r++);var C=c-r;for(m=1;m<=C&&o[c-m]===p[T-m];m++);return pu=p.slice(r,1<m?1-m:void 0)}function yu(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function vu(){return!0}function Ty(){return!1}function cn(r){function o(c,m,p,T,C){this._reactName=c,this._targetInst=p,this.type=m,this.nativeEvent=T,this.target=C,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(c=r[w],this[w]=c?c(T):T[w]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?vu:Ty,this.isPropagationStopped=Ty,this}return h(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=vu)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=vu)},persist:function(){},isPersistent:vu}),o}var Js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Su=cn(Js),fo=h({},Js,{view:0,detail:0}),QC=cn(fo),bd,Ad,ho,Tu=h({},fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ld,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ho&&(ho&&r.type==="mousemove"?(bd=r.screenX-ho.screenX,Ad=r.screenY-ho.screenY):Ad=bd=0,ho=r),bd)},movementY:function(r){return"movementY"in r?r.movementY:Ad}}),Ey=cn(Tu),ZC=h({},Tu,{dataTransfer:0}),JC=cn(ZC),t_=h({},fo,{relatedTarget:0}),Rd=cn(t_),e_=h({},Js,{animationName:0,elapsedTime:0,pseudoElement:0}),n_=cn(e_),i_=h({},Js,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),s_=cn(i_),r_=h({},Js,{data:0}),xy=cn(r_),a_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u_(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=l_[r])?!!o[r]:!1}function Ld(){return u_}var c_=h({},fo,{key:function(r){if(r.key){var o=a_[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=yu(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?o_[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ld,charCode:function(r){return r.type==="keypress"?yu(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?yu(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),f_=cn(c_),d_=h({},Tu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),by=cn(d_),h_=h({},fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ld}),m_=cn(h_),g_=h({},Js,{propertyName:0,elapsedTime:0,pseudoElement:0}),p_=cn(g_),y_=h({},Tu,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),v_=cn(y_),S_=h({},Js,{newState:0,oldState:0}),T_=cn(S_),E_=[9,13,27,32],Cd=Bi&&"CompositionEvent"in window,mo=null;Bi&&"documentMode"in document&&(mo=document.documentMode);var x_=Bi&&"TextEvent"in window&&!mo,Ay=Bi&&(!Cd||mo&&8<mo&&11>=mo),Ry=" ",Ly=!1;function Cy(r,o){switch(r){case"keyup":return E_.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _y(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Kr=!1;function b_(r,o){switch(r){case"compositionend":return _y(o);case"keypress":return o.which!==32?null:(Ly=!0,Ry);case"textInput":return r=o.data,r===Ry&&Ly?null:r;default:return null}}function A_(r,o){if(Kr)return r==="compositionend"||!Cd&&Cy(r,o)?(r=Sy(),pu=xd=gs=null,Kr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ay&&o.locale!=="ko"?null:o.data;default:return null}}var R_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dy(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!R_[r.type]:o==="textarea"}function Iy(r,o,c,m){Hr?jr?jr.push(m):jr=[m]:Hr=m,o=ac(o,"onChange"),0<o.length&&(c=new Su("onChange","change",null,c,m),r.push({event:c,listeners:o}))}var go=null,po=null;function L_(r){cT(r,0)}function Eu(r){var o=lo(r);if(fy(o))return r}function wy(r,o){if(r==="change")return o}var Oy=!1;if(Bi){var _d;if(Bi){var Dd="oninput"in document;if(!Dd){var My=document.createElement("div");My.setAttribute("oninput","return;"),Dd=typeof My.oninput=="function"}_d=Dd}else _d=!1;Oy=_d&&(!document.documentMode||9<document.documentMode)}function Py(){go&&(go.detachEvent("onpropertychange",ky),po=go=null)}function ky(r){if(r.propertyName==="value"&&Eu(po)){var o=[];Iy(o,po,r,Sd(r)),vy(L_,o)}}function C_(r,o,c){r==="focusin"?(Py(),go=o,po=c,go.attachEvent("onpropertychange",ky)):r==="focusout"&&Py()}function __(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Eu(po)}function D_(r,o){if(r==="click")return Eu(o)}function I_(r,o){if(r==="input"||r==="change")return Eu(o)}function w_(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var En=typeof Object.is=="function"?Object.is:w_;function yo(r,o){if(En(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var c=Object.keys(r),m=Object.keys(o);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var p=c[m];if(!ki.call(o,p)||!En(r[p],o[p]))return!1}return!0}function Ny(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function By(r,o){var c=Ny(r);r=0;for(var m;c;){if(c.nodeType===3){if(m=r+c.textContent.length,r<=o&&m>=o)return{node:c,offset:o-r};r=m}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=Ny(c)}}function Fy(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?Fy(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function Uy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=mu(r.document);o instanceof r.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)r=o.contentWindow;else break;o=mu(r.document)}return o}function Id(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var O_=Bi&&"documentMode"in document&&11>=document.documentMode,zr=null,wd=null,vo=null,Od=!1;function $y(r,o,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Od||zr==null||zr!==mu(m)||(m=zr,"selectionStart"in m&&Id(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),vo&&yo(vo,m)||(vo=m,m=ac(wd,"onSelect"),0<m.length&&(o=new Su("onSelect","select",null,o,c),r.push({event:o,listeners:m}),o.target=zr)))}function tr(r,o){var c={};return c[r.toLowerCase()]=o.toLowerCase(),c["Webkit"+r]="webkit"+o,c["Moz"+r]="moz"+o,c}var Yr={animationend:tr("Animation","AnimationEnd"),animationiteration:tr("Animation","AnimationIteration"),animationstart:tr("Animation","AnimationStart"),transitionrun:tr("Transition","TransitionRun"),transitionstart:tr("Transition","TransitionStart"),transitioncancel:tr("Transition","TransitionCancel"),transitionend:tr("Transition","TransitionEnd")},Md={},Vy={};Bi&&(Vy=document.createElement("div").style,"AnimationEvent"in window||(delete Yr.animationend.animation,delete Yr.animationiteration.animation,delete Yr.animationstart.animation),"TransitionEvent"in window||delete Yr.transitionend.transition);function er(r){if(Md[r])return Md[r];if(!Yr[r])return r;var o=Yr[r],c;for(c in o)if(o.hasOwnProperty(c)&&c in Vy)return Md[r]=o[c];return r}var Gy=er("animationend"),Hy=er("animationiteration"),jy=er("animationstart"),M_=er("transitionrun"),P_=er("transitionstart"),k_=er("transitioncancel"),Ky=er("transitionend"),zy=new Map,Pd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pd.push("scrollEnd");function ni(r,o){zy.set(r,o),Zs(o,[r])}var Yy=new WeakMap;function Bn(r,o){if(typeof r=="object"&&r!==null){var c=Yy.get(r);return c!==void 0?c:(o={value:r,source:o,stack:uy(o)},Yy.set(r,o),o)}return{value:r,source:o,stack:uy(o)}}var Fn=[],qr=0,kd=0;function xu(){for(var r=qr,o=kd=qr=0;o<r;){var c=Fn[o];Fn[o++]=null;var m=Fn[o];Fn[o++]=null;var p=Fn[o];Fn[o++]=null;var T=Fn[o];if(Fn[o++]=null,m!==null&&p!==null){var C=m.pending;C===null?p.next=p:(p.next=C.next,C.next=p),m.pending=p}T!==0&&qy(c,p,T)}}function bu(r,o,c,m){Fn[qr++]=r,Fn[qr++]=o,Fn[qr++]=c,Fn[qr++]=m,kd|=m,r.lanes|=m,r=r.alternate,r!==null&&(r.lanes|=m)}function Nd(r,o,c,m){return bu(r,o,c,m),Au(r)}function Xr(r,o){return bu(r,null,null,o),Au(r)}function qy(r,o,c){r.lanes|=c;var m=r.alternate;m!==null&&(m.lanes|=c);for(var p=!1,T=r.return;T!==null;)T.childLanes|=c,m=T.alternate,m!==null&&(m.childLanes|=c),T.tag===22&&(r=T.stateNode,r===null||r._visibility&1||(p=!0)),r=T,T=T.return;return r.tag===3?(T=r.stateNode,p&&o!==null&&(p=31-Ze(c),r=T.hiddenUpdates,m=r[p],m===null?r[p]=[o]:m.push(o),o.lane=c|536870912),T):null}function Au(r){if(50<Ho)throw Ho=0,Gh=null,Error(n(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Wr={};function N_(r,o,c,m){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(r,o,c,m){return new N_(r,o,c,m)}function Bd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Fi(r,o){var c=r.alternate;return c===null?(c=xn(r.tag,o,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=o,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,o=r.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function Xy(r,o){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,o=c.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Ru(r,o,c,m,p,T){var C=0;if(m=r,typeof r=="function")Bd(r)&&(C=1);else if(typeof r=="string")C=FD(r,c,dt.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case F:return r=xn(31,c,o,p),r.elementType=F,r.lanes=T,r;case v:return nr(c.children,p,T,o);case E:C=8,p|=24;break;case x:return r=xn(12,c,o,p|2),r.elementType=x,r.lanes=T,r;case _:return r=xn(13,c,o,p),r.elementType=_,r.lanes=T,r;case P:return r=xn(19,c,o,p),r.elementType=P,r.lanes=T,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case b:case L:C=10;break t;case D:C=9;break t;case I:C=11;break t;case M:C=14;break t;case k:C=16,m=null;break t}C=29,c=Error(n(130,r===null?"null":typeof r,"")),m=null}return o=xn(C,c,o,p),o.elementType=r,o.type=m,o.lanes=T,o}function nr(r,o,c,m){return r=xn(7,r,m,o),r.lanes=c,r}function Fd(r,o,c){return r=xn(6,r,null,o),r.lanes=c,r}function Ud(r,o,c){return o=xn(4,r.children!==null?r.children:[],r.key,o),o.lanes=c,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var Qr=[],Zr=0,Lu=null,Cu=0,Un=[],$n=0,ir=null,Ui=1,$i="";function sr(r,o){Qr[Zr++]=Cu,Qr[Zr++]=Lu,Lu=r,Cu=o}function Wy(r,o,c){Un[$n++]=Ui,Un[$n++]=$i,Un[$n++]=ir,ir=r;var m=Ui;r=$i;var p=32-Ze(m)-1;m&=~(1<<p),c+=1;var T=32-Ze(o)+p;if(30<T){var C=p-p%5;T=(m&(1<<C)-1).toString(32),m>>=C,p-=C,Ui=1<<32-Ze(o)+p|c<<p|m,$i=T+r}else Ui=1<<T|c<<p|m,$i=r}function $d(r){r.return!==null&&(sr(r,1),Wy(r,1,0))}function Vd(r){for(;r===Lu;)Lu=Qr[--Zr],Qr[Zr]=null,Cu=Qr[--Zr],Qr[Zr]=null;for(;r===ir;)ir=Un[--$n],Un[$n]=null,$i=Un[--$n],Un[$n]=null,Ui=Un[--$n],Un[$n]=null}var on=null,ge=null,Gt=!1,rr=null,di=!1,Gd=Error(n(519));function ar(r){var o=Error(n(418,""));throw Eo(Bn(o,r)),Gd}function Qy(r){var o=r.stateNode,c=r.type,m=r.memoizedProps;switch(o[Je]=r,o[un]=m,c){case"dialog":kt("cancel",o),kt("close",o);break;case"iframe":case"object":case"embed":kt("load",o);break;case"video":case"audio":for(c=0;c<Ko.length;c++)kt(Ko[c],o);break;case"source":kt("error",o);break;case"img":case"image":case"link":kt("error",o),kt("load",o);break;case"details":kt("toggle",o);break;case"input":kt("invalid",o),dy(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),hu(o);break;case"select":kt("invalid",o);break;case"textarea":kt("invalid",o),my(o,m.value,m.defaultValue,m.children),hu(o)}c=m.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||m.suppressHydrationWarning===!0||mT(o.textContent,c)?(m.popover!=null&&(kt("beforetoggle",o),kt("toggle",o)),m.onScroll!=null&&kt("scroll",o),m.onScrollEnd!=null&&kt("scrollend",o),m.onClick!=null&&(o.onclick=oc),o=!0):o=!1,o||ar(r)}function Zy(r){for(on=r.return;on;)switch(on.tag){case 5:case 13:di=!1;return;case 27:case 3:di=!0;return;default:on=on.return}}function So(r){if(r!==on)return!1;if(!Gt)return Zy(r),Gt=!0,!1;var o=r.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||sm(r.type,r.memoizedProps)),c=!c),c&&ge&&ar(r),Zy(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));t:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8)if(c=r.data,c==="/$"){if(o===0){ge=si(r.nextSibling);break t}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;r=r.nextSibling}ge=null}}else o===27?(o=ge,ws(r.type)?(r=lm,lm=null,ge=r):ge=o):ge=on?si(r.stateNode.nextSibling):null;return!0}function To(){ge=on=null,Gt=!1}function Jy(){var r=rr;return r!==null&&(hn===null?hn=r:hn.push.apply(hn,r),rr=null),r}function Eo(r){rr===null?rr=[r]:rr.push(r)}var Hd=q(null),or=null,Vi=null;function ps(r,o,c){at(Hd,o._currentValue),o._currentValue=c}function Gi(r){r._currentValue=Hd.current,st(Hd)}function jd(r,o,c){for(;r!==null;){var m=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),r===c)break;r=r.return}}function Kd(r,o,c,m){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var T=p.dependencies;if(T!==null){var C=p.child;T=T.firstContext;t:for(;T!==null;){var w=T;T=p;for(var N=0;N<o.length;N++)if(w.context===o[N]){T.lanes|=c,w=T.alternate,w!==null&&(w.lanes|=c),jd(T.return,c,r),m||(C=null);break t}T=w.next}}else if(p.tag===18){if(C=p.return,C===null)throw Error(n(341));C.lanes|=c,T=C.alternate,T!==null&&(T.lanes|=c),jd(C,c,r),C=null}else C=p.child;if(C!==null)C.return=p;else for(C=p;C!==null;){if(C===r){C=null;break}if(p=C.sibling,p!==null){p.return=C.return,C=p;break}C=C.return}p=C}}function xo(r,o,c,m){r=null;for(var p=o,T=!1;p!==null;){if(!T){if((p.flags&524288)!==0)T=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var C=p.alternate;if(C===null)throw Error(n(387));if(C=C.memoizedProps,C!==null){var w=p.type;En(p.pendingProps.value,C.value)||(r!==null?r.push(w):r=[w])}}else if(p===Ft.current){if(C=p.alternate,C===null)throw Error(n(387));C.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(Qo):r=[Qo])}p=p.return}r!==null&&Kd(o,r,c,m),o.flags|=262144}function _u(r){for(r=r.firstContext;r!==null;){if(!En(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function lr(r){or=r,Vi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function tn(r){return tv(or,r)}function Du(r,o){return or===null&&lr(r),tv(r,o)}function tv(r,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Vi===null){if(r===null)throw Error(n(308));Vi=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else Vi=Vi.next=o;return c}var B_=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(c,m){r.push(m)}};this.abort=function(){o.aborted=!0,r.forEach(function(c){return c()})}},F_=i.unstable_scheduleCallback,U_=i.unstable_NormalPriority,Oe={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zd(){return{controller:new B_,data:new Map,refCount:0}}function bo(r){r.refCount--,r.refCount===0&&F_(U_,function(){r.controller.abort()})}var Ao=null,Yd=0,Jr=0,ta=null;function $_(r,o){if(Ao===null){var c=Ao=[];Yd=0,Jr=Xh(),ta={status:"pending",value:void 0,then:function(m){c.push(m)}}}return Yd++,o.then(ev,ev),o}function ev(){if(--Yd===0&&Ao!==null){ta!==null&&(ta.status="fulfilled");var r=Ao;Ao=null,Jr=0,ta=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function V_(r,o){var c=[],m={status:"pending",value:null,reason:null,then:function(p){c.push(p)}};return r.then(function(){m.status="fulfilled",m.value=o;for(var p=0;p<c.length;p++)(0,c[p])(o)},function(p){for(m.status="rejected",m.reason=p,p=0;p<c.length;p++)(0,c[p])(void 0)}),m}var nv=B.S;B.S=function(r,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&$_(r,o),nv!==null&&nv(r,o)};var ur=q(null);function qd(){var r=ur.current;return r!==null?r:re.pooledCache}function Iu(r,o){o===null?at(ur,ur.current):at(ur,o.pool)}function iv(){var r=qd();return r===null?null:{parent:Oe._currentValue,pool:r}}var Ro=Error(n(460)),sv=Error(n(474)),wu=Error(n(542)),Xd={then:function(){}};function rv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Ou(){}function av(r,o,c){switch(c=r[c],c===void 0?r.push(o):c!==o&&(o.then(Ou,Ou),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,lv(r),r;default:if(typeof o.status=="string")o.then(Ou,Ou);else{if(r=re,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=o,r.status="pending",r.then(function(m){if(o.status==="pending"){var p=o;p.status="fulfilled",p.value=m}},function(m){if(o.status==="pending"){var p=o;p.status="rejected",p.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,lv(r),r}throw Lo=o,Ro}}var Lo=null;function ov(){if(Lo===null)throw Error(n(459));var r=Lo;return Lo=null,r}function lv(r){if(r===Ro||r===wu)throw Error(n(483))}var ys=!1;function Wd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qd(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function vs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ss(r,o,c){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(qt&2)!==0){var p=m.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),m.pending=o,o=Au(r),qy(r,null,c),o}return bu(r,m,o,c),Au(r)}function Co(r,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var m=o.lanes;m&=r.pendingLanes,c|=m,o.lanes=c,ey(r,c)}}function Zd(r,o){var c=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var p=null,T=null;if(c=c.firstBaseUpdate,c!==null){do{var C={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};T===null?p=T=C:T=T.next=C,c=c.next}while(c!==null);T===null?p=T=o:T=T.next=o}else p=T=o;c={baseState:m.baseState,firstBaseUpdate:p,lastBaseUpdate:T,shared:m.shared,callbacks:m.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=o:r.next=o,c.lastBaseUpdate=o}var Jd=!1;function _o(){if(Jd){var r=ta;if(r!==null)throw r}}function Do(r,o,c,m){Jd=!1;var p=r.updateQueue;ys=!1;var T=p.firstBaseUpdate,C=p.lastBaseUpdate,w=p.shared.pending;if(w!==null){p.shared.pending=null;var N=w,Y=N.next;N.next=null,C===null?T=Y:C.next=Y,C=N;var rt=r.alternate;rt!==null&&(rt=rt.updateQueue,w=rt.lastBaseUpdate,w!==C&&(w===null?rt.firstBaseUpdate=Y:w.next=Y,rt.lastBaseUpdate=N))}if(T!==null){var ut=p.baseState;C=0,rt=Y=N=null,w=T;do{var W=w.lane&-536870913,Z=W!==w.lane;if(Z?(Bt&W)===W:(m&W)===W){W!==0&&W===Jr&&(Jd=!0),rt!==null&&(rt=rt.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});t:{var At=r,Tt=w;W=o;var Jt=c;switch(Tt.tag){case 1:if(At=Tt.payload,typeof At=="function"){ut=At.call(Jt,ut,W);break t}ut=At;break t;case 3:At.flags=At.flags&-65537|128;case 0:if(At=Tt.payload,W=typeof At=="function"?At.call(Jt,ut,W):At,W==null)break t;ut=h({},ut,W);break t;case 2:ys=!0}}W=w.callback,W!==null&&(r.flags|=64,Z&&(r.flags|=8192),Z=p.callbacks,Z===null?p.callbacks=[W]:Z.push(W))}else Z={lane:W,tag:w.tag,payload:w.payload,callback:w.callback,next:null},rt===null?(Y=rt=Z,N=ut):rt=rt.next=Z,C|=W;if(w=w.next,w===null){if(w=p.shared.pending,w===null)break;Z=w,w=Z.next,Z.next=null,p.lastBaseUpdate=Z,p.shared.pending=null}}while(!0);rt===null&&(N=ut),p.baseState=N,p.firstBaseUpdate=Y,p.lastBaseUpdate=rt,T===null&&(p.shared.lanes=0),Cs|=C,r.lanes=C,r.memoizedState=ut}}function uv(r,o){if(typeof r!="function")throw Error(n(191,r));r.call(o)}function cv(r,o){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)uv(c[r],o)}var ea=q(null),Mu=q(0);function fv(r,o){r=Xi,at(Mu,r),at(ea,o),Xi=r|o.baseLanes}function th(){at(Mu,Xi),at(ea,ea.current)}function eh(){Xi=Mu.current,st(ea),st(Mu)}var Ts=0,wt=null,Qt=null,_e=null,Pu=!1,na=!1,cr=!1,ku=0,Io=0,ia=null,G_=0;function xe(){throw Error(n(321))}function nh(r,o){if(o===null)return!1;for(var c=0;c<o.length&&c<r.length;c++)if(!En(r[c],o[c]))return!1;return!0}function ih(r,o,c,m,p,T){return Ts=T,wt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,B.H=r===null||r.memoizedState===null?qv:Xv,cr=!1,T=c(m,p),cr=!1,na&&(T=hv(o,c,m,p)),dv(r),T}function dv(r){B.H=Vu;var o=Qt!==null&&Qt.next!==null;if(Ts=0,_e=Qt=wt=null,Pu=!1,Io=0,ia=null,o)throw Error(n(300));r===null||Fe||(r=r.dependencies,r!==null&&_u(r)&&(Fe=!0))}function hv(r,o,c,m){wt=r;var p=0;do{if(na&&(ia=null),Io=0,na=!1,25<=p)throw Error(n(301));if(p+=1,_e=Qt=null,r.updateQueue!=null){var T=r.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}B.H=X_,T=o(c,m)}while(na);return T}function H_(){var r=B.H,o=r.useState()[0];return o=typeof o.then=="function"?wo(o):o,r=r.useState()[0],(Qt!==null?Qt.memoizedState:null)!==r&&(wt.flags|=1024),o}function sh(){var r=ku!==0;return ku=0,r}function rh(r,o,c){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~c}function ah(r){if(Pu){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Pu=!1}Ts=0,_e=Qt=wt=null,na=!1,Io=ku=0,ia=null}function fn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _e===null?wt.memoizedState=_e=r:_e=_e.next=r,_e}function De(){if(Qt===null){var r=wt.alternate;r=r!==null?r.memoizedState:null}else r=Qt.next;var o=_e===null?wt.memoizedState:_e.next;if(o!==null)_e=o,Qt=r;else{if(r===null)throw wt.alternate===null?Error(n(467)):Error(n(310));Qt=r,r={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},_e===null?wt.memoizedState=_e=r:_e=_e.next=r}return _e}function oh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wo(r){var o=Io;return Io+=1,ia===null&&(ia=[]),r=av(ia,r,o),o=wt,(_e===null?o.memoizedState:_e.next)===null&&(o=o.alternate,B.H=o===null||o.memoizedState===null?qv:Xv),r}function Nu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return wo(r);if(r.$$typeof===L)return tn(r)}throw Error(n(438,String(r)))}function lh(r){var o=null,c=wt.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var m=wt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(p){return p.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=oh(),wt.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(r),m=0;m<r;m++)c[m]=R;return o.index++,c}function Hi(r,o){return typeof o=="function"?o(r):o}function Bu(r){var o=De();return uh(o,Qt,r)}function uh(r,o,c){var m=r.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=c;var p=r.baseQueue,T=m.pending;if(T!==null){if(p!==null){var C=p.next;p.next=T.next,T.next=C}o.baseQueue=p=T,m.pending=null}if(T=r.baseState,p===null)r.memoizedState=T;else{o=p.next;var w=C=null,N=null,Y=o,rt=!1;do{var ut=Y.lane&-536870913;if(ut!==Y.lane?(Bt&ut)===ut:(Ts&ut)===ut){var W=Y.revertLane;if(W===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ut===Jr&&(rt=!0);else if((Ts&W)===W){Y=Y.next,W===Jr&&(rt=!0);continue}else ut={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},N===null?(w=N=ut,C=T):N=N.next=ut,wt.lanes|=W,Cs|=W;ut=Y.action,cr&&c(T,ut),T=Y.hasEagerState?Y.eagerState:c(T,ut)}else W={lane:ut,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},N===null?(w=N=W,C=T):N=N.next=W,wt.lanes|=ut,Cs|=ut;Y=Y.next}while(Y!==null&&Y!==o);if(N===null?C=T:N.next=w,!En(T,r.memoizedState)&&(Fe=!0,rt&&(c=ta,c!==null)))throw c;r.memoizedState=T,r.baseState=C,r.baseQueue=N,m.lastRenderedState=T}return p===null&&(m.lanes=0),[r.memoizedState,m.dispatch]}function ch(r){var o=De(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var m=c.dispatch,p=c.pending,T=o.memoizedState;if(p!==null){c.pending=null;var C=p=p.next;do T=r(T,C.action),C=C.next;while(C!==p);En(T,o.memoizedState)||(Fe=!0),o.memoizedState=T,o.baseQueue===null&&(o.baseState=T),c.lastRenderedState=T}return[T,m]}function mv(r,o,c){var m=wt,p=De(),T=Gt;if(T){if(c===void 0)throw Error(n(407));c=c()}else c=o();var C=!En((Qt||p).memoizedState,c);C&&(p.memoizedState=c,Fe=!0),p=p.queue;var w=yv.bind(null,m,p,r);if(Oo(2048,8,w,[r]),p.getSnapshot!==o||C||_e!==null&&_e.memoizedState.tag&1){if(m.flags|=2048,sa(9,Fu(),pv.bind(null,m,p,c,o),null),re===null)throw Error(n(349));T||(Ts&124)!==0||gv(m,o,c)}return c}function gv(r,o,c){r.flags|=16384,r={getSnapshot:o,value:c},o=wt.updateQueue,o===null?(o=oh(),wt.updateQueue=o,o.stores=[r]):(c=o.stores,c===null?o.stores=[r]:c.push(r))}function pv(r,o,c,m){o.value=c,o.getSnapshot=m,vv(o)&&Sv(r)}function yv(r,o,c){return c(function(){vv(o)&&Sv(r)})}function vv(r){var o=r.getSnapshot;r=r.value;try{var c=o();return!En(r,c)}catch{return!0}}function Sv(r){var o=Xr(r,2);o!==null&&Cn(o,r,2)}function fh(r){var o=fn();if(typeof r=="function"){var c=r;if(r=c(),cr){fi(!0);try{c()}finally{fi(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:r},o}function Tv(r,o,c,m){return r.baseState=c,uh(r,Qt,typeof m=="function"?m:Hi)}function j_(r,o,c,m,p){if($u(r))throw Error(n(485));if(r=o.action,r!==null){var T={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){T.listeners.push(C)}};B.T!==null?c(!0):T.isTransition=!1,m(T),c=o.pending,c===null?(T.next=o.pending=T,Ev(o,T)):(T.next=c.next,o.pending=c.next=T)}}function Ev(r,o){var c=o.action,m=o.payload,p=r.state;if(o.isTransition){var T=B.T,C={};B.T=C;try{var w=c(p,m),N=B.S;N!==null&&N(C,w),xv(r,o,w)}catch(Y){dh(r,o,Y)}finally{B.T=T}}else try{T=c(p,m),xv(r,o,T)}catch(Y){dh(r,o,Y)}}function xv(r,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(m){bv(r,o,m)},function(m){return dh(r,o,m)}):bv(r,o,c)}function bv(r,o,c){o.status="fulfilled",o.value=c,Av(o),r.state=c,o=r.pending,o!==null&&(c=o.next,c===o?r.pending=null:(c=c.next,o.next=c,Ev(r,c)))}function dh(r,o,c){var m=r.pending;if(r.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=c,Av(o),o=o.next;while(o!==m)}r.action=null}function Av(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function Rv(r,o){return o}function Lv(r,o){if(Gt){var c=re.formState;if(c!==null){t:{var m=wt;if(Gt){if(ge){e:{for(var p=ge,T=di;p.nodeType!==8;){if(!T){p=null;break e}if(p=si(p.nextSibling),p===null){p=null;break e}}T=p.data,p=T==="F!"||T==="F"?p:null}if(p){ge=si(p.nextSibling),m=p.data==="F!";break t}}ar(m)}m=!1}m&&(o=c[0])}}return c=fn(),c.memoizedState=c.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rv,lastRenderedState:o},c.queue=m,c=Kv.bind(null,wt,m),m.dispatch=c,m=fh(!1),T=yh.bind(null,wt,!1,m.queue),m=fn(),p={state:o,dispatch:null,action:r,pending:null},m.queue=p,c=j_.bind(null,wt,p,T,c),p.dispatch=c,m.memoizedState=r,[o,c,!1]}function Cv(r){var o=De();return _v(o,Qt,r)}function _v(r,o,c){if(o=uh(r,o,Rv)[0],r=Bu(Hi)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=wo(o)}catch(C){throw C===Ro?wu:C}else m=o;o=De();var p=o.queue,T=p.dispatch;return c!==o.memoizedState&&(wt.flags|=2048,sa(9,Fu(),K_.bind(null,p,c),null)),[m,T,r]}function K_(r,o){r.action=o}function Dv(r){var o=De(),c=Qt;if(c!==null)return _v(o,c,r);De(),o=o.memoizedState,c=De();var m=c.queue.dispatch;return c.memoizedState=r,[o,m,!1]}function sa(r,o,c,m){return r={tag:r,create:c,deps:m,inst:o,next:null},o=wt.updateQueue,o===null&&(o=oh(),wt.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=r.next=r:(m=c.next,c.next=r,r.next=m,o.lastEffect=r),r}function Fu(){return{destroy:void 0,resource:void 0}}function Iv(){return De().memoizedState}function Uu(r,o,c,m){var p=fn();m=m===void 0?null:m,wt.flags|=r,p.memoizedState=sa(1|o,Fu(),c,m)}function Oo(r,o,c,m){var p=De();m=m===void 0?null:m;var T=p.memoizedState.inst;Qt!==null&&m!==null&&nh(m,Qt.memoizedState.deps)?p.memoizedState=sa(o,T,c,m):(wt.flags|=r,p.memoizedState=sa(1|o,T,c,m))}function wv(r,o){Uu(8390656,8,r,o)}function Ov(r,o){Oo(2048,8,r,o)}function Mv(r,o){return Oo(4,2,r,o)}function Pv(r,o){return Oo(4,4,r,o)}function kv(r,o){if(typeof o=="function"){r=r();var c=o(r);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function Nv(r,o,c){c=c!=null?c.concat([r]):null,Oo(4,4,kv.bind(null,o,r),c)}function hh(){}function Bv(r,o){var c=De();o=o===void 0?null:o;var m=c.memoizedState;return o!==null&&nh(o,m[1])?m[0]:(c.memoizedState=[r,o],r)}function Fv(r,o){var c=De();o=o===void 0?null:o;var m=c.memoizedState;if(o!==null&&nh(o,m[1]))return m[0];if(m=r(),cr){fi(!0);try{r()}finally{fi(!1)}}return c.memoizedState=[m,o],m}function mh(r,o,c){return c===void 0||(Ts&1073741824)!==0?r.memoizedState=o:(r.memoizedState=c,r=VS(),wt.lanes|=r,Cs|=r,c)}function Uv(r,o,c,m){return En(c,o)?c:ea.current!==null?(r=mh(r,c,m),En(r,o)||(Fe=!0),r):(Ts&42)===0?(Fe=!0,r.memoizedState=c):(r=VS(),wt.lanes|=r,Cs|=r,o)}function $v(r,o,c,m,p){var T=H.p;H.p=T!==0&&8>T?T:8;var C=B.T,w={};B.T=w,yh(r,!1,o,c);try{var N=p(),Y=B.S;if(Y!==null&&Y(w,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var rt=V_(N,m);Mo(r,o,rt,Ln(r))}else Mo(r,o,m,Ln(r))}catch(ut){Mo(r,o,{then:function(){},status:"rejected",reason:ut},Ln())}finally{H.p=T,B.T=C}}function z_(){}function gh(r,o,c,m){if(r.tag!==5)throw Error(n(476));var p=Vv(r).queue;$v(r,p,o,et,c===null?z_:function(){return Gv(r),c(m)})}function Vv(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:et,baseState:et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:et},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:c},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function Gv(r){var o=Vv(r).next.queue;Mo(r,o,{},Ln())}function ph(){return tn(Qo)}function Hv(){return De().memoizedState}function jv(){return De().memoizedState}function Y_(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var c=Ln();r=vs(c);var m=Ss(o,r,c);m!==null&&(Cn(m,o,c),Co(m,o,c)),o={cache:zd()},r.payload=o;return}o=o.return}}function q_(r,o,c){var m=Ln();c={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},$u(r)?zv(o,c):(c=Nd(r,o,c,m),c!==null&&(Cn(c,r,m),Yv(c,o,m)))}function Kv(r,o,c){var m=Ln();Mo(r,o,c,m)}function Mo(r,o,c,m){var p={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if($u(r))zv(o,p);else{var T=r.alternate;if(r.lanes===0&&(T===null||T.lanes===0)&&(T=o.lastRenderedReducer,T!==null))try{var C=o.lastRenderedState,w=T(C,c);if(p.hasEagerState=!0,p.eagerState=w,En(w,C))return bu(r,o,p,0),re===null&&xu(),!1}catch{}finally{}if(c=Nd(r,o,p,m),c!==null)return Cn(c,r,m),Yv(c,o,m),!0}return!1}function yh(r,o,c,m){if(m={lane:2,revertLane:Xh(),action:m,hasEagerState:!1,eagerState:null,next:null},$u(r)){if(o)throw Error(n(479))}else o=Nd(r,c,m,2),o!==null&&Cn(o,r,2)}function $u(r){var o=r.alternate;return r===wt||o!==null&&o===wt}function zv(r,o){na=Pu=!0;var c=r.pending;c===null?o.next=o:(o.next=c.next,c.next=o),r.pending=o}function Yv(r,o,c){if((c&4194048)!==0){var m=o.lanes;m&=r.pendingLanes,c|=m,o.lanes=c,ey(r,c)}}var Vu={readContext:tn,use:Nu,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useLayoutEffect:xe,useInsertionEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useSyncExternalStore:xe,useId:xe,useHostTransitionStatus:xe,useFormState:xe,useActionState:xe,useOptimistic:xe,useMemoCache:xe,useCacheRefresh:xe},qv={readContext:tn,use:Nu,useCallback:function(r,o){return fn().memoizedState=[r,o===void 0?null:o],r},useContext:tn,useEffect:wv,useImperativeHandle:function(r,o,c){c=c!=null?c.concat([r]):null,Uu(4194308,4,kv.bind(null,o,r),c)},useLayoutEffect:function(r,o){return Uu(4194308,4,r,o)},useInsertionEffect:function(r,o){Uu(4,2,r,o)},useMemo:function(r,o){var c=fn();o=o===void 0?null:o;var m=r();if(cr){fi(!0);try{r()}finally{fi(!1)}}return c.memoizedState=[m,o],m},useReducer:function(r,o,c){var m=fn();if(c!==void 0){var p=c(o);if(cr){fi(!0);try{c(o)}finally{fi(!1)}}}else p=o;return m.memoizedState=m.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},m.queue=r,r=r.dispatch=q_.bind(null,wt,r),[m.memoizedState,r]},useRef:function(r){var o=fn();return r={current:r},o.memoizedState=r},useState:function(r){r=fh(r);var o=r.queue,c=Kv.bind(null,wt,o);return o.dispatch=c,[r.memoizedState,c]},useDebugValue:hh,useDeferredValue:function(r,o){var c=fn();return mh(c,r,o)},useTransition:function(){var r=fh(!1);return r=$v.bind(null,wt,r.queue,!0,!1),fn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,c){var m=wt,p=fn();if(Gt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=o(),re===null)throw Error(n(349));(Bt&124)!==0||gv(m,o,c)}p.memoizedState=c;var T={value:c,getSnapshot:o};return p.queue=T,wv(yv.bind(null,m,T,r),[r]),m.flags|=2048,sa(9,Fu(),pv.bind(null,m,T,c,o),null),c},useId:function(){var r=fn(),o=re.identifierPrefix;if(Gt){var c=$i,m=Ui;c=(m&~(1<<32-Ze(m)-1)).toString(32)+c,o="«"+o+"R"+c,c=ku++,0<c&&(o+="H"+c.toString(32)),o+="»"}else c=G_++,o="«"+o+"r"+c.toString(32)+"»";return r.memoizedState=o},useHostTransitionStatus:ph,useFormState:Lv,useActionState:Lv,useOptimistic:function(r){var o=fn();o.memoizedState=o.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=yh.bind(null,wt,!0,c),c.dispatch=o,[r,o]},useMemoCache:lh,useCacheRefresh:function(){return fn().memoizedState=Y_.bind(null,wt)}},Xv={readContext:tn,use:Nu,useCallback:Bv,useContext:tn,useEffect:Ov,useImperativeHandle:Nv,useInsertionEffect:Mv,useLayoutEffect:Pv,useMemo:Fv,useReducer:Bu,useRef:Iv,useState:function(){return Bu(Hi)},useDebugValue:hh,useDeferredValue:function(r,o){var c=De();return Uv(c,Qt.memoizedState,r,o)},useTransition:function(){var r=Bu(Hi)[0],o=De().memoizedState;return[typeof r=="boolean"?r:wo(r),o]},useSyncExternalStore:mv,useId:Hv,useHostTransitionStatus:ph,useFormState:Cv,useActionState:Cv,useOptimistic:function(r,o){var c=De();return Tv(c,Qt,r,o)},useMemoCache:lh,useCacheRefresh:jv},X_={readContext:tn,use:Nu,useCallback:Bv,useContext:tn,useEffect:Ov,useImperativeHandle:Nv,useInsertionEffect:Mv,useLayoutEffect:Pv,useMemo:Fv,useReducer:ch,useRef:Iv,useState:function(){return ch(Hi)},useDebugValue:hh,useDeferredValue:function(r,o){var c=De();return Qt===null?mh(c,r,o):Uv(c,Qt.memoizedState,r,o)},useTransition:function(){var r=ch(Hi)[0],o=De().memoizedState;return[typeof r=="boolean"?r:wo(r),o]},useSyncExternalStore:mv,useId:Hv,useHostTransitionStatus:ph,useFormState:Dv,useActionState:Dv,useOptimistic:function(r,o){var c=De();return Qt!==null?Tv(c,Qt,r,o):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:lh,useCacheRefresh:jv},ra=null,Po=0;function Gu(r){var o=Po;return Po+=1,ra===null&&(ra=[]),av(ra,r,o)}function ko(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Hu(r,o){throw o.$$typeof===g?Error(n(525)):(r=Object.prototype.toString.call(o),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function Wv(r){var o=r._init;return o(r._payload)}function Qv(r){function o(G,U){if(r){var K=G.deletions;K===null?(G.deletions=[U],G.flags|=16):K.push(U)}}function c(G,U){if(!r)return null;for(;U!==null;)o(G,U),U=U.sibling;return null}function m(G){for(var U=new Map;G!==null;)G.key!==null?U.set(G.key,G):U.set(G.index,G),G=G.sibling;return U}function p(G,U){return G=Fi(G,U),G.index=0,G.sibling=null,G}function T(G,U,K){return G.index=K,r?(K=G.alternate,K!==null?(K=K.index,K<U?(G.flags|=67108866,U):K):(G.flags|=67108866,U)):(G.flags|=1048576,U)}function C(G){return r&&G.alternate===null&&(G.flags|=67108866),G}function w(G,U,K,lt){return U===null||U.tag!==6?(U=Fd(K,G.mode,lt),U.return=G,U):(U=p(U,K),U.return=G,U)}function N(G,U,K,lt){var pt=K.type;return pt===v?rt(G,U,K.props.children,lt,K.key):U!==null&&(U.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===k&&Wv(pt)===U.type)?(U=p(U,K.props),ko(U,K),U.return=G,U):(U=Ru(K.type,K.key,K.props,null,G.mode,lt),ko(U,K),U.return=G,U)}function Y(G,U,K,lt){return U===null||U.tag!==4||U.stateNode.containerInfo!==K.containerInfo||U.stateNode.implementation!==K.implementation?(U=Ud(K,G.mode,lt),U.return=G,U):(U=p(U,K.children||[]),U.return=G,U)}function rt(G,U,K,lt,pt){return U===null||U.tag!==7?(U=nr(K,G.mode,lt,pt),U.return=G,U):(U=p(U,K),U.return=G,U)}function ut(G,U,K){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Fd(""+U,G.mode,K),U.return=G,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case y:return K=Ru(U.type,U.key,U.props,null,G.mode,K),ko(K,U),K.return=G,K;case S:return U=Ud(U,G.mode,K),U.return=G,U;case k:var lt=U._init;return U=lt(U._payload),ut(G,U,K)}if(it(U)||Q(U))return U=nr(U,G.mode,K,null),U.return=G,U;if(typeof U.then=="function")return ut(G,Gu(U),K);if(U.$$typeof===L)return ut(G,Du(G,U),K);Hu(G,U)}return null}function W(G,U,K,lt){var pt=U!==null?U.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return pt!==null?null:w(G,U,""+K,lt);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case y:return K.key===pt?N(G,U,K,lt):null;case S:return K.key===pt?Y(G,U,K,lt):null;case k:return pt=K._init,K=pt(K._payload),W(G,U,K,lt)}if(it(K)||Q(K))return pt!==null?null:rt(G,U,K,lt,null);if(typeof K.then=="function")return W(G,U,Gu(K),lt);if(K.$$typeof===L)return W(G,U,Du(G,K),lt);Hu(G,K)}return null}function Z(G,U,K,lt,pt){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return G=G.get(K)||null,w(U,G,""+lt,pt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case y:return G=G.get(lt.key===null?K:lt.key)||null,N(U,G,lt,pt);case S:return G=G.get(lt.key===null?K:lt.key)||null,Y(U,G,lt,pt);case k:var Ot=lt._init;return lt=Ot(lt._payload),Z(G,U,K,lt,pt)}if(it(lt)||Q(lt))return G=G.get(K)||null,rt(U,G,lt,pt,null);if(typeof lt.then=="function")return Z(G,U,K,Gu(lt),pt);if(lt.$$typeof===L)return Z(G,U,K,Du(U,lt),pt);Hu(U,lt)}return null}function At(G,U,K,lt){for(var pt=null,Ot=null,St=U,Et=U=0,$e=null;St!==null&&Et<K.length;Et++){St.index>Et?($e=St,St=null):$e=St.sibling;var $t=W(G,St,K[Et],lt);if($t===null){St===null&&(St=$e);break}r&&St&&$t.alternate===null&&o(G,St),U=T($t,U,Et),Ot===null?pt=$t:Ot.sibling=$t,Ot=$t,St=$e}if(Et===K.length)return c(G,St),Gt&&sr(G,Et),pt;if(St===null){for(;Et<K.length;Et++)St=ut(G,K[Et],lt),St!==null&&(U=T(St,U,Et),Ot===null?pt=St:Ot.sibling=St,Ot=St);return Gt&&sr(G,Et),pt}for(St=m(St);Et<K.length;Et++)$e=Z(St,G,Et,K[Et],lt),$e!==null&&(r&&$e.alternate!==null&&St.delete($e.key===null?Et:$e.key),U=T($e,U,Et),Ot===null?pt=$e:Ot.sibling=$e,Ot=$e);return r&&St.forEach(function(Ns){return o(G,Ns)}),Gt&&sr(G,Et),pt}function Tt(G,U,K,lt){if(K==null)throw Error(n(151));for(var pt=null,Ot=null,St=U,Et=U=0,$e=null,$t=K.next();St!==null&&!$t.done;Et++,$t=K.next()){St.index>Et?($e=St,St=null):$e=St.sibling;var Ns=W(G,St,$t.value,lt);if(Ns===null){St===null&&(St=$e);break}r&&St&&Ns.alternate===null&&o(G,St),U=T(Ns,U,Et),Ot===null?pt=Ns:Ot.sibling=Ns,Ot=Ns,St=$e}if($t.done)return c(G,St),Gt&&sr(G,Et),pt;if(St===null){for(;!$t.done;Et++,$t=K.next())$t=ut(G,$t.value,lt),$t!==null&&(U=T($t,U,Et),Ot===null?pt=$t:Ot.sibling=$t,Ot=$t);return Gt&&sr(G,Et),pt}for(St=m(St);!$t.done;Et++,$t=K.next())$t=Z(St,G,Et,$t.value,lt),$t!==null&&(r&&$t.alternate!==null&&St.delete($t.key===null?Et:$t.key),U=T($t,U,Et),Ot===null?pt=$t:Ot.sibling=$t,Ot=$t);return r&&St.forEach(function(WD){return o(G,WD)}),Gt&&sr(G,Et),pt}function Jt(G,U,K,lt){if(typeof K=="object"&&K!==null&&K.type===v&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case y:t:{for(var pt=K.key;U!==null;){if(U.key===pt){if(pt=K.type,pt===v){if(U.tag===7){c(G,U.sibling),lt=p(U,K.props.children),lt.return=G,G=lt;break t}}else if(U.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===k&&Wv(pt)===U.type){c(G,U.sibling),lt=p(U,K.props),ko(lt,K),lt.return=G,G=lt;break t}c(G,U);break}else o(G,U);U=U.sibling}K.type===v?(lt=nr(K.props.children,G.mode,lt,K.key),lt.return=G,G=lt):(lt=Ru(K.type,K.key,K.props,null,G.mode,lt),ko(lt,K),lt.return=G,G=lt)}return C(G);case S:t:{for(pt=K.key;U!==null;){if(U.key===pt)if(U.tag===4&&U.stateNode.containerInfo===K.containerInfo&&U.stateNode.implementation===K.implementation){c(G,U.sibling),lt=p(U,K.children||[]),lt.return=G,G=lt;break t}else{c(G,U);break}else o(G,U);U=U.sibling}lt=Ud(K,G.mode,lt),lt.return=G,G=lt}return C(G);case k:return pt=K._init,K=pt(K._payload),Jt(G,U,K,lt)}if(it(K))return At(G,U,K,lt);if(Q(K)){if(pt=Q(K),typeof pt!="function")throw Error(n(150));return K=pt.call(K),Tt(G,U,K,lt)}if(typeof K.then=="function")return Jt(G,U,Gu(K),lt);if(K.$$typeof===L)return Jt(G,U,Du(G,K),lt);Hu(G,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,U!==null&&U.tag===6?(c(G,U.sibling),lt=p(U,K),lt.return=G,G=lt):(c(G,U),lt=Fd(K,G.mode,lt),lt.return=G,G=lt),C(G)):c(G,U)}return function(G,U,K,lt){try{Po=0;var pt=Jt(G,U,K,lt);return ra=null,pt}catch(St){if(St===Ro||St===wu)throw St;var Ot=xn(29,St,null,G.mode);return Ot.lanes=lt,Ot.return=G,Ot}finally{}}}var aa=Qv(!0),Zv=Qv(!1),Vn=q(null),hi=null;function Es(r){var o=r.alternate;at(Me,Me.current&1),at(Vn,r),hi===null&&(o===null||ea.current!==null||o.memoizedState!==null)&&(hi=r)}function Jv(r){if(r.tag===22){if(at(Me,Me.current),at(Vn,r),hi===null){var o=r.alternate;o!==null&&o.memoizedState!==null&&(hi=r)}}else xs()}function xs(){at(Me,Me.current),at(Vn,Vn.current)}function ji(r){st(Vn),hi===r&&(hi=null),st(Me)}var Me=q(0);function ju(r){for(var o=r;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||om(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function vh(r,o,c,m){o=r.memoizedState,c=c(m,o),c=c==null?o:h({},o,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Sh={enqueueSetState:function(r,o,c){r=r._reactInternals;var m=Ln(),p=vs(m);p.payload=o,c!=null&&(p.callback=c),o=Ss(r,p,m),o!==null&&(Cn(o,r,m),Co(o,r,m))},enqueueReplaceState:function(r,o,c){r=r._reactInternals;var m=Ln(),p=vs(m);p.tag=1,p.payload=o,c!=null&&(p.callback=c),o=Ss(r,p,m),o!==null&&(Cn(o,r,m),Co(o,r,m))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var c=Ln(),m=vs(c);m.tag=2,o!=null&&(m.callback=o),o=Ss(r,m,c),o!==null&&(Cn(o,r,c),Co(o,r,c))}};function tS(r,o,c,m,p,T,C){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,T,C):o.prototype&&o.prototype.isPureReactComponent?!yo(c,m)||!yo(p,T):!0}function eS(r,o,c,m){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,m),o.state!==r&&Sh.enqueueReplaceState(o,o.state,null)}function fr(r,o){var c=o;if("ref"in o){c={};for(var m in o)m!=="ref"&&(c[m]=o[m])}if(r=r.defaultProps){c===o&&(c=h({},c));for(var p in r)c[p]===void 0&&(c[p]=r[p])}return c}var Ku=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function nS(r){Ku(r)}function iS(r){console.error(r)}function sS(r){Ku(r)}function zu(r,o){try{var c=r.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function rS(r,o,c){try{var m=r.onCaughtError;m(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Th(r,o,c){return c=vs(c),c.tag=3,c.payload={element:null},c.callback=function(){zu(r,o)},c}function aS(r){return r=vs(r),r.tag=3,r}function oS(r,o,c,m){var p=c.type.getDerivedStateFromError;if(typeof p=="function"){var T=m.value;r.payload=function(){return p(T)},r.callback=function(){rS(o,c,m)}}var C=c.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(r.callback=function(){rS(o,c,m),typeof p!="function"&&(_s===null?_s=new Set([this]):_s.add(this));var w=m.stack;this.componentDidCatch(m.value,{componentStack:w!==null?w:""})})}function W_(r,o,c,m,p){if(c.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=c.alternate,o!==null&&xo(o,c,p,!0),c=Vn.current,c!==null){switch(c.tag){case 13:return hi===null?jh():c.alternate===null&&pe===0&&(pe=3),c.flags&=-257,c.flags|=65536,c.lanes=p,m===Xd?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([m]):o.add(m),zh(r,m,p)),!1;case 22:return c.flags|=65536,m===Xd?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([m]):c.add(m)),zh(r,m,p)),!1}throw Error(n(435,c.tag))}return zh(r,m,p),jh(),!1}if(Gt)return o=Vn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=p,m!==Gd&&(r=Error(n(422),{cause:m}),Eo(Bn(r,c)))):(m!==Gd&&(o=Error(n(423),{cause:m}),Eo(Bn(o,c))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,m=Bn(m,c),p=Th(r.stateNode,m,p),Zd(r,p),pe!==4&&(pe=2)),!1;var T=Error(n(520),{cause:m});if(T=Bn(T,c),Go===null?Go=[T]:Go.push(T),pe!==4&&(pe=2),o===null)return!0;m=Bn(m,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,r=p&-p,c.lanes|=r,r=Th(c.stateNode,m,r),Zd(c,r),!1;case 1:if(o=c.type,T=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(_s===null||!_s.has(T))))return c.flags|=65536,p&=-p,c.lanes|=p,p=aS(p),oS(p,r,c,m),Zd(c,p),!1}c=c.return}while(c!==null);return!1}var lS=Error(n(461)),Fe=!1;function ze(r,o,c,m){o.child=r===null?Zv(o,null,c,m):aa(o,r.child,c,m)}function uS(r,o,c,m,p){c=c.render;var T=o.ref;if("ref"in m){var C={};for(var w in m)w!=="ref"&&(C[w]=m[w])}else C=m;return lr(o),m=ih(r,o,c,C,T,p),w=sh(),r!==null&&!Fe?(rh(r,o,p),Ki(r,o,p)):(Gt&&w&&$d(o),o.flags|=1,ze(r,o,m,p),o.child)}function cS(r,o,c,m,p){if(r===null){var T=c.type;return typeof T=="function"&&!Bd(T)&&T.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=T,fS(r,o,T,m,p)):(r=Ru(c.type,null,m,o,o.mode,p),r.ref=o.ref,r.return=o,o.child=r)}if(T=r.child,!_h(r,p)){var C=T.memoizedProps;if(c=c.compare,c=c!==null?c:yo,c(C,m)&&r.ref===o.ref)return Ki(r,o,p)}return o.flags|=1,r=Fi(T,m),r.ref=o.ref,r.return=o,o.child=r}function fS(r,o,c,m,p){if(r!==null){var T=r.memoizedProps;if(yo(T,m)&&r.ref===o.ref)if(Fe=!1,o.pendingProps=m=T,_h(r,p))(r.flags&131072)!==0&&(Fe=!0);else return o.lanes=r.lanes,Ki(r,o,p)}return Eh(r,o,c,m,p)}function dS(r,o,c){var m=o.pendingProps,p=m.children,T=r!==null?r.memoizedState:null;if(m.mode==="hidden"){if((o.flags&128)!==0){if(m=T!==null?T.baseLanes|c:c,r!==null){for(p=o.child=r.child,T=0;p!==null;)T=T|p.lanes|p.childLanes,p=p.sibling;o.childLanes=T&~m}else o.childLanes=0,o.child=null;return hS(r,o,m,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Iu(o,T!==null?T.cachePool:null),T!==null?fv(o,T):th(),Jv(o);else return o.lanes=o.childLanes=536870912,hS(r,o,T!==null?T.baseLanes|c:c,c)}else T!==null?(Iu(o,T.cachePool),fv(o,T),xs(),o.memoizedState=null):(r!==null&&Iu(o,null),th(),xs());return ze(r,o,p,c),o.child}function hS(r,o,c,m){var p=qd();return p=p===null?null:{parent:Oe._currentValue,pool:p},o.memoizedState={baseLanes:c,cachePool:p},r!==null&&Iu(o,null),th(),Jv(o),r!==null&&xo(r,o,m,!0),null}function Yu(r,o){var c=o.ref;if(c===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(r===null||r.ref!==c)&&(o.flags|=4194816)}}function Eh(r,o,c,m,p){return lr(o),c=ih(r,o,c,m,void 0,p),m=sh(),r!==null&&!Fe?(rh(r,o,p),Ki(r,o,p)):(Gt&&m&&$d(o),o.flags|=1,ze(r,o,c,p),o.child)}function mS(r,o,c,m,p,T){return lr(o),o.updateQueue=null,c=hv(o,m,c,p),dv(r),m=sh(),r!==null&&!Fe?(rh(r,o,T),Ki(r,o,T)):(Gt&&m&&$d(o),o.flags|=1,ze(r,o,c,T),o.child)}function gS(r,o,c,m,p){if(lr(o),o.stateNode===null){var T=Wr,C=c.contextType;typeof C=="object"&&C!==null&&(T=tn(C)),T=new c(m,T),o.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Sh,o.stateNode=T,T._reactInternals=o,T=o.stateNode,T.props=m,T.state=o.memoizedState,T.refs={},Wd(o),C=c.contextType,T.context=typeof C=="object"&&C!==null?tn(C):Wr,T.state=o.memoizedState,C=c.getDerivedStateFromProps,typeof C=="function"&&(vh(o,c,C,m),T.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(C=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),C!==T.state&&Sh.enqueueReplaceState(T,T.state,null),Do(o,m,T,p),_o(),T.state=o.memoizedState),typeof T.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(r===null){T=o.stateNode;var w=o.memoizedProps,N=fr(c,w);T.props=N;var Y=T.context,rt=c.contextType;C=Wr,typeof rt=="object"&&rt!==null&&(C=tn(rt));var ut=c.getDerivedStateFromProps;rt=typeof ut=="function"||typeof T.getSnapshotBeforeUpdate=="function",w=o.pendingProps!==w,rt||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(w||Y!==C)&&eS(o,T,m,C),ys=!1;var W=o.memoizedState;T.state=W,Do(o,m,T,p),_o(),Y=o.memoizedState,w||W!==Y||ys?(typeof ut=="function"&&(vh(o,c,ut,m),Y=o.memoizedState),(N=ys||tS(o,c,N,m,W,Y,C))?(rt||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=Y),T.props=m,T.state=Y,T.context=C,m=N):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{T=o.stateNode,Qd(r,o),C=o.memoizedProps,rt=fr(c,C),T.props=rt,ut=o.pendingProps,W=T.context,Y=c.contextType,N=Wr,typeof Y=="object"&&Y!==null&&(N=tn(Y)),w=c.getDerivedStateFromProps,(Y=typeof w=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==ut||W!==N)&&eS(o,T,m,N),ys=!1,W=o.memoizedState,T.state=W,Do(o,m,T,p),_o();var Z=o.memoizedState;C!==ut||W!==Z||ys||r!==null&&r.dependencies!==null&&_u(r.dependencies)?(typeof w=="function"&&(vh(o,c,w,m),Z=o.memoizedState),(rt=ys||tS(o,c,rt,m,W,Z,N)||r!==null&&r.dependencies!==null&&_u(r.dependencies))?(Y||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(m,Z,N),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(m,Z,N)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||C===r.memoizedProps&&W===r.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&W===r.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=Z),T.props=m,T.state=Z,T.context=N,m=rt):(typeof T.componentDidUpdate!="function"||C===r.memoizedProps&&W===r.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&W===r.memoizedState||(o.flags|=1024),m=!1)}return T=m,Yu(r,o),m=(o.flags&128)!==0,T||m?(T=o.stateNode,c=m&&typeof c.getDerivedStateFromError!="function"?null:T.render(),o.flags|=1,r!==null&&m?(o.child=aa(o,r.child,null,p),o.child=aa(o,null,c,p)):ze(r,o,c,p),o.memoizedState=T.state,r=o.child):r=Ki(r,o,p),r}function pS(r,o,c,m){return To(),o.flags|=256,ze(r,o,c,m),o.child}var xh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bh(r){return{baseLanes:r,cachePool:iv()}}function Ah(r,o,c){return r=r!==null?r.childLanes&~c:0,o&&(r|=Gn),r}function yS(r,o,c){var m=o.pendingProps,p=!1,T=(o.flags&128)!==0,C;if((C=T)||(C=r!==null&&r.memoizedState===null?!1:(Me.current&2)!==0),C&&(p=!0,o.flags&=-129),C=(o.flags&32)!==0,o.flags&=-33,r===null){if(Gt){if(p?Es(o):xs(),Gt){var w=ge,N;if(N=w){t:{for(N=w,w=di;N.nodeType!==8;){if(!w){w=null;break t}if(N=si(N.nextSibling),N===null){w=null;break t}}w=N}w!==null?(o.memoizedState={dehydrated:w,treeContext:ir!==null?{id:Ui,overflow:$i}:null,retryLane:536870912,hydrationErrors:null},N=xn(18,null,null,0),N.stateNode=w,N.return=o,o.child=N,on=o,ge=null,N=!0):N=!1}N||ar(o)}if(w=o.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return om(w)?o.lanes=32:o.lanes=536870912,null;ji(o)}return w=m.children,m=m.fallback,p?(xs(),p=o.mode,w=qu({mode:"hidden",children:w},p),m=nr(m,p,c,null),w.return=o,m.return=o,w.sibling=m,o.child=w,p=o.child,p.memoizedState=bh(c),p.childLanes=Ah(r,C,c),o.memoizedState=xh,m):(Es(o),Rh(o,w))}if(N=r.memoizedState,N!==null&&(w=N.dehydrated,w!==null)){if(T)o.flags&256?(Es(o),o.flags&=-257,o=Lh(r,o,c)):o.memoizedState!==null?(xs(),o.child=r.child,o.flags|=128,o=null):(xs(),p=m.fallback,w=o.mode,m=qu({mode:"visible",children:m.children},w),p=nr(p,w,c,null),p.flags|=2,m.return=o,p.return=o,m.sibling=p,o.child=m,aa(o,r.child,null,c),m=o.child,m.memoizedState=bh(c),m.childLanes=Ah(r,C,c),o.memoizedState=xh,o=p);else if(Es(o),om(w)){if(C=w.nextSibling&&w.nextSibling.dataset,C)var Y=C.dgst;C=Y,m=Error(n(419)),m.stack="",m.digest=C,Eo({value:m,source:null,stack:null}),o=Lh(r,o,c)}else if(Fe||xo(r,o,c,!1),C=(c&r.childLanes)!==0,Fe||C){if(C=re,C!==null&&(m=c&-c,m=(m&42)!==0?1:ld(m),m=(m&(C.suspendedLanes|c))!==0?0:m,m!==0&&m!==N.retryLane))throw N.retryLane=m,Xr(r,m),Cn(C,r,m),lS;w.data==="$?"||jh(),o=Lh(r,o,c)}else w.data==="$?"?(o.flags|=192,o.child=r.child,o=null):(r=N.treeContext,ge=si(w.nextSibling),on=o,Gt=!0,rr=null,di=!1,r!==null&&(Un[$n++]=Ui,Un[$n++]=$i,Un[$n++]=ir,Ui=r.id,$i=r.overflow,ir=o),o=Rh(o,m.children),o.flags|=4096);return o}return p?(xs(),p=m.fallback,w=o.mode,N=r.child,Y=N.sibling,m=Fi(N,{mode:"hidden",children:m.children}),m.subtreeFlags=N.subtreeFlags&65011712,Y!==null?p=Fi(Y,p):(p=nr(p,w,c,null),p.flags|=2),p.return=o,m.return=o,m.sibling=p,o.child=m,m=p,p=o.child,w=r.child.memoizedState,w===null?w=bh(c):(N=w.cachePool,N!==null?(Y=Oe._currentValue,N=N.parent!==Y?{parent:Y,pool:Y}:N):N=iv(),w={baseLanes:w.baseLanes|c,cachePool:N}),p.memoizedState=w,p.childLanes=Ah(r,C,c),o.memoizedState=xh,m):(Es(o),c=r.child,r=c.sibling,c=Fi(c,{mode:"visible",children:m.children}),c.return=o,c.sibling=null,r!==null&&(C=o.deletions,C===null?(o.deletions=[r],o.flags|=16):C.push(r)),o.child=c,o.memoizedState=null,c)}function Rh(r,o){return o=qu({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function qu(r,o){return r=xn(22,r,null,o),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Lh(r,o,c){return aa(o,r.child,null,c),r=Rh(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function vS(r,o,c){r.lanes|=o;var m=r.alternate;m!==null&&(m.lanes|=o),jd(r.return,o,c)}function Ch(r,o,c,m,p){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:p}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=c,T.tailMode=p)}function SS(r,o,c){var m=o.pendingProps,p=m.revealOrder,T=m.tail;if(ze(r,o,m.children,c),m=Me.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&vS(r,c,o);else if(r.tag===19)vS(r,c,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break t;for(;r.sibling===null;){if(r.return===null||r.return===o)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}m&=1}switch(at(Me,m),p){case"forwards":for(c=o.child,p=null;c!==null;)r=c.alternate,r!==null&&ju(r)===null&&(p=c),c=c.sibling;c=p,c===null?(p=o.child,o.child=null):(p=c.sibling,c.sibling=null),Ch(o,!1,p,c,T);break;case"backwards":for(c=null,p=o.child,o.child=null;p!==null;){if(r=p.alternate,r!==null&&ju(r)===null){o.child=p;break}r=p.sibling,p.sibling=c,c=p,p=r}Ch(o,!0,c,null,T);break;case"together":Ch(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ki(r,o,c){if(r!==null&&(o.dependencies=r.dependencies),Cs|=o.lanes,(c&o.childLanes)===0)if(r!==null){if(xo(r,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(n(153));if(o.child!==null){for(r=o.child,c=Fi(r,r.pendingProps),o.child=c,c.return=o;r.sibling!==null;)r=r.sibling,c=c.sibling=Fi(r,r.pendingProps),c.return=o;c.sibling=null}return o.child}function _h(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&_u(r)))}function Q_(r,o,c){switch(o.tag){case 3:Ct(o,o.stateNode.containerInfo),ps(o,Oe,r.memoizedState.cache),To();break;case 27:case 5:ui(o);break;case 4:Ct(o,o.stateNode.containerInfo);break;case 10:ps(o,o.type,o.memoizedProps.value);break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(Es(o),o.flags|=128,null):(c&o.child.childLanes)!==0?yS(r,o,c):(Es(o),r=Ki(r,o,c),r!==null?r.sibling:null);Es(o);break;case 19:var p=(r.flags&128)!==0;if(m=(c&o.childLanes)!==0,m||(xo(r,o,c,!1),m=(c&o.childLanes)!==0),p){if(m)return SS(r,o,c);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),at(Me,Me.current),m)break;return null;case 22:case 23:return o.lanes=0,dS(r,o,c);case 24:ps(o,Oe,r.memoizedState.cache)}return Ki(r,o,c)}function TS(r,o,c){if(r!==null)if(r.memoizedProps!==o.pendingProps)Fe=!0;else{if(!_h(r,c)&&(o.flags&128)===0)return Fe=!1,Q_(r,o,c);Fe=(r.flags&131072)!==0}else Fe=!1,Gt&&(o.flags&1048576)!==0&&Wy(o,Cu,o.index);switch(o.lanes=0,o.tag){case 16:t:{r=o.pendingProps;var m=o.elementType,p=m._init;if(m=p(m._payload),o.type=m,typeof m=="function")Bd(m)?(r=fr(m,r),o.tag=1,o=gS(null,o,m,r,c)):(o.tag=0,o=Eh(null,o,m,r,c));else{if(m!=null){if(p=m.$$typeof,p===I){o.tag=11,o=uS(null,o,m,r,c);break t}else if(p===M){o.tag=14,o=cS(null,o,m,r,c);break t}}throw o=ct(m)||m,Error(n(306,o,""))}}return o;case 0:return Eh(r,o,o.type,o.pendingProps,c);case 1:return m=o.type,p=fr(m,o.pendingProps),gS(r,o,m,p,c);case 3:t:{if(Ct(o,o.stateNode.containerInfo),r===null)throw Error(n(387));m=o.pendingProps;var T=o.memoizedState;p=T.element,Qd(r,o),Do(o,m,null,c);var C=o.memoizedState;if(m=C.cache,ps(o,Oe,m),m!==T.cache&&Kd(o,[Oe],c,!0),_o(),m=C.element,T.isDehydrated)if(T={element:m,isDehydrated:!1,cache:C.cache},o.updateQueue.baseState=T,o.memoizedState=T,o.flags&256){o=pS(r,o,m,c);break t}else if(m!==p){p=Bn(Error(n(424)),o),Eo(p),o=pS(r,o,m,c);break t}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(ge=si(r.firstChild),on=o,Gt=!0,rr=null,di=!0,c=Zv(o,null,m,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(To(),m===p){o=Ki(r,o,c);break t}ze(r,o,m,c)}o=o.child}return o;case 26:return Yu(r,o),r===null?(c=AT(o.type,null,o.pendingProps,null))?o.memoizedState=c:Gt||(c=o.type,r=o.pendingProps,m=lc(ht.current).createElement(c),m[Je]=o,m[un]=r,qe(m,c,r),Be(m),o.stateNode=m):o.memoizedState=AT(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return ui(o),r===null&&Gt&&(m=o.stateNode=ET(o.type,o.pendingProps,ht.current),on=o,di=!0,p=ge,ws(o.type)?(lm=p,ge=si(m.firstChild)):ge=p),ze(r,o,o.pendingProps.children,c),Yu(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&Gt&&((p=m=ge)&&(m=RD(m,o.type,o.pendingProps,di),m!==null?(o.stateNode=m,on=o,ge=si(m.firstChild),di=!1,p=!0):p=!1),p||ar(o)),ui(o),p=o.type,T=o.pendingProps,C=r!==null?r.memoizedProps:null,m=T.children,sm(p,T)?m=null:C!==null&&sm(p,C)&&(o.flags|=32),o.memoizedState!==null&&(p=ih(r,o,H_,null,null,c),Qo._currentValue=p),Yu(r,o),ze(r,o,m,c),o.child;case 6:return r===null&&Gt&&((r=c=ge)&&(c=LD(c,o.pendingProps,di),c!==null?(o.stateNode=c,on=o,ge=null,r=!0):r=!1),r||ar(o)),null;case 13:return yS(r,o,c);case 4:return Ct(o,o.stateNode.containerInfo),m=o.pendingProps,r===null?o.child=aa(o,null,m,c):ze(r,o,m,c),o.child;case 11:return uS(r,o,o.type,o.pendingProps,c);case 7:return ze(r,o,o.pendingProps,c),o.child;case 8:return ze(r,o,o.pendingProps.children,c),o.child;case 12:return ze(r,o,o.pendingProps.children,c),o.child;case 10:return m=o.pendingProps,ps(o,o.type,m.value),ze(r,o,m.children,c),o.child;case 9:return p=o.type._context,m=o.pendingProps.children,lr(o),p=tn(p),m=m(p),o.flags|=1,ze(r,o,m,c),o.child;case 14:return cS(r,o,o.type,o.pendingProps,c);case 15:return fS(r,o,o.type,o.pendingProps,c);case 19:return SS(r,o,c);case 31:return m=o.pendingProps,c=o.mode,m={mode:m.mode,children:m.children},r===null?(c=qu(m,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=Fi(r.child,m),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return dS(r,o,c);case 24:return lr(o),m=tn(Oe),r===null?(p=qd(),p===null&&(p=re,T=zd(),p.pooledCache=T,T.refCount++,T!==null&&(p.pooledCacheLanes|=c),p=T),o.memoizedState={parent:m,cache:p},Wd(o),ps(o,Oe,p)):((r.lanes&c)!==0&&(Qd(r,o),Do(o,null,null,c),_o()),p=r.memoizedState,T=o.memoizedState,p.parent!==m?(p={parent:m,cache:m},o.memoizedState=p,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=p),ps(o,Oe,m)):(m=T.cache,ps(o,Oe,m),m!==p.cache&&Kd(o,[Oe],c,!0))),ze(r,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function zi(r){r.flags|=4}function ES(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!DT(o)){if(o=Vn.current,o!==null&&((Bt&4194048)===Bt?hi!==null:(Bt&62914560)!==Bt&&(Bt&536870912)===0||o!==hi))throw Lo=Xd,sv;r.flags|=8192}}function Xu(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?J0():536870912,r.lanes|=o,ca|=o)}function No(r,o){if(!Gt)switch(r.tailMode){case"hidden":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function ce(r){var o=r.alternate!==null&&r.alternate.child===r.child,c=0,m=0;if(o)for(var p=r.child;p!==null;)c|=p.lanes|p.childLanes,m|=p.subtreeFlags&65011712,m|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)c|=p.lanes|p.childLanes,m|=p.subtreeFlags,m|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=m,r.childLanes=c,o}function Z_(r,o,c){var m=o.pendingProps;switch(Vd(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ce(o),null;case 1:return ce(o),null;case 3:return c=o.stateNode,m=null,r!==null&&(m=r.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),Gi(Oe),Ee(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(So(o)?zi(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Jy())),ce(o),null;case 26:return c=o.memoizedState,r===null?(zi(o),c!==null?(ce(o),ES(o,c)):(ce(o),o.flags&=-16777217)):c?c!==r.memoizedState?(zi(o),ce(o),ES(o,c)):(ce(o),o.flags&=-16777217):(r.memoizedProps!==m&&zi(o),ce(o),o.flags&=-16777217),null;case 27:ci(o),c=ht.current;var p=o.type;if(r!==null&&o.stateNode!=null)r.memoizedProps!==m&&zi(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return ce(o),null}r=dt.current,So(o)?Qy(o):(r=ET(p,m,c),o.stateNode=r,zi(o))}return ce(o),null;case 5:if(ci(o),c=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==m&&zi(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return ce(o),null}if(r=dt.current,So(o))Qy(o);else{switch(p=lc(ht.current),r){case 1:r=p.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:r=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":r=p.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":r=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":r=p.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof m.is=="string"?p.createElement("select",{is:m.is}):p.createElement("select"),m.multiple?r.multiple=!0:m.size&&(r.size=m.size);break;default:r=typeof m.is=="string"?p.createElement(c,{is:m.is}):p.createElement(c)}}r[Je]=o,r[un]=m;t:for(p=o.child;p!==null;){if(p.tag===5||p.tag===6)r.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===o)break t;for(;p.sibling===null;){if(p.return===null||p.return===o)break t;p=p.return}p.sibling.return=p.return,p=p.sibling}o.stateNode=r;t:switch(qe(r,c,m),c){case"button":case"input":case"select":case"textarea":r=!!m.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&zi(o)}}return ce(o),o.flags&=-16777217,null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==m&&zi(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(n(166));if(r=ht.current,So(o)){if(r=o.stateNode,c=o.memoizedProps,m=null,p=on,p!==null)switch(p.tag){case 27:case 5:m=p.memoizedProps}r[Je]=o,r=!!(r.nodeValue===c||m!==null&&m.suppressHydrationWarning===!0||mT(r.nodeValue,c)),r||ar(o)}else r=lc(r).createTextNode(m),r[Je]=o,o.stateNode=r}return ce(o),null;case 13:if(m=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=So(o),m!==null&&m.dehydrated!==null){if(r===null){if(!p)throw Error(n(318));if(p=o.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Je]=o}else To(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ce(o),p=!1}else p=Jy(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return o.flags&256?(ji(o),o):(ji(o),null)}if(ji(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=m!==null,r=r!==null&&r.memoizedState!==null,c){m=o.child,p=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(p=m.alternate.memoizedState.cachePool.pool);var T=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(T=m.memoizedState.cachePool.pool),T!==p&&(m.flags|=2048)}return c!==r&&c&&(o.child.flags|=8192),Xu(o,o.updateQueue),ce(o),null;case 4:return Ee(),r===null&&Jh(o.stateNode.containerInfo),ce(o),null;case 10:return Gi(o.type),ce(o),null;case 19:if(st(Me),p=o.memoizedState,p===null)return ce(o),null;if(m=(o.flags&128)!==0,T=p.rendering,T===null)if(m)No(p,!1);else{if(pe!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(T=ju(r),T!==null){for(o.flags|=128,No(p,!1),r=T.updateQueue,o.updateQueue=r,Xu(o,r),o.subtreeFlags=0,r=c,c=o.child;c!==null;)Xy(c,r),c=c.sibling;return at(Me,Me.current&1|2),o.child}r=r.sibling}p.tail!==null&&Ut()>Zu&&(o.flags|=128,m=!0,No(p,!1),o.lanes=4194304)}else{if(!m)if(r=ju(T),r!==null){if(o.flags|=128,m=!0,r=r.updateQueue,o.updateQueue=r,Xu(o,r),No(p,!0),p.tail===null&&p.tailMode==="hidden"&&!T.alternate&&!Gt)return ce(o),null}else 2*Ut()-p.renderingStartTime>Zu&&c!==536870912&&(o.flags|=128,m=!0,No(p,!1),o.lanes=4194304);p.isBackwards?(T.sibling=o.child,o.child=T):(r=p.last,r!==null?r.sibling=T:o.child=T,p.last=T)}return p.tail!==null?(o=p.tail,p.rendering=o,p.tail=o.sibling,p.renderingStartTime=Ut(),o.sibling=null,r=Me.current,at(Me,m?r&1|2:r&1),o):(ce(o),null);case 22:case 23:return ji(o),eh(),m=o.memoizedState!==null,r!==null?r.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(c&536870912)!==0&&(o.flags&128)===0&&(ce(o),o.subtreeFlags&6&&(o.flags|=8192)):ce(o),c=o.updateQueue,c!==null&&Xu(o,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==c&&(o.flags|=2048),r!==null&&st(ur),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Gi(Oe),ce(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function J_(r,o){switch(Vd(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Gi(Oe),Ee(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return ci(o),null;case 13:if(ji(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(n(340));To()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return st(Me),null;case 4:return Ee(),null;case 10:return Gi(o.type),null;case 22:case 23:return ji(o),eh(),r!==null&&st(ur),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Gi(Oe),null;case 25:return null;default:return null}}function xS(r,o){switch(Vd(o),o.tag){case 3:Gi(Oe),Ee();break;case 26:case 27:case 5:ci(o);break;case 4:Ee();break;case 13:ji(o);break;case 19:st(Me);break;case 10:Gi(o.type);break;case 22:case 23:ji(o),eh(),r!==null&&st(ur);break;case 24:Gi(Oe)}}function Bo(r,o){try{var c=o.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var p=m.next;c=p;do{if((c.tag&r)===r){m=void 0;var T=c.create,C=c.inst;m=T(),C.destroy=m}c=c.next}while(c!==p)}}catch(w){ee(o,o.return,w)}}function bs(r,o,c){try{var m=o.updateQueue,p=m!==null?m.lastEffect:null;if(p!==null){var T=p.next;m=T;do{if((m.tag&r)===r){var C=m.inst,w=C.destroy;if(w!==void 0){C.destroy=void 0,p=o;var N=c,Y=w;try{Y()}catch(rt){ee(p,N,rt)}}}m=m.next}while(m!==T)}}catch(rt){ee(o,o.return,rt)}}function bS(r){var o=r.updateQueue;if(o!==null){var c=r.stateNode;try{cv(o,c)}catch(m){ee(r,r.return,m)}}}function AS(r,o,c){c.props=fr(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(m){ee(r,o,m)}}function Fo(r,o){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var m=r.stateNode;break;case 30:m=r.stateNode;break;default:m=r.stateNode}typeof c=="function"?r.refCleanup=c(m):c.current=m}}catch(p){ee(r,o,p)}}function mi(r,o){var c=r.ref,m=r.refCleanup;if(c!==null)if(typeof m=="function")try{m()}catch(p){ee(r,o,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(p){ee(r,o,p)}else c.current=null}function RS(r){var o=r.type,c=r.memoizedProps,m=r.stateNode;try{t:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&m.focus();break t;case"img":c.src?m.src=c.src:c.srcSet&&(m.srcset=c.srcSet)}}catch(p){ee(r,r.return,p)}}function Dh(r,o,c){try{var m=r.stateNode;TD(m,r.type,c,o),m[un]=o}catch(p){ee(r,r.return,p)}}function LS(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ws(r.type)||r.tag===4}function Ih(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||LS(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ws(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function wh(r,o,c){var m=r.tag;if(m===5||m===6)r=r.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(r),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=oc));else if(m!==4&&(m===27&&ws(r.type)&&(c=r.stateNode,o=null),r=r.child,r!==null))for(wh(r,o,c),r=r.sibling;r!==null;)wh(r,o,c),r=r.sibling}function Wu(r,o,c){var m=r.tag;if(m===5||m===6)r=r.stateNode,o?c.insertBefore(r,o):c.appendChild(r);else if(m!==4&&(m===27&&ws(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(Wu(r,o,c),r=r.sibling;r!==null;)Wu(r,o,c),r=r.sibling}function CS(r){var o=r.stateNode,c=r.memoizedProps;try{for(var m=r.type,p=o.attributes;p.length;)o.removeAttributeNode(p[0]);qe(o,m,c),o[Je]=r,o[un]=c}catch(T){ee(r,r.return,T)}}var Yi=!1,be=!1,Oh=!1,_S=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function tD(r,o){if(r=r.containerInfo,nm=mc,r=Uy(r),Id(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else t:{c=(c=r.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var p=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{c.nodeType,T.nodeType}catch{c=null;break t}var C=0,w=-1,N=-1,Y=0,rt=0,ut=r,W=null;e:for(;;){for(var Z;ut!==c||p!==0&&ut.nodeType!==3||(w=C+p),ut!==T||m!==0&&ut.nodeType!==3||(N=C+m),ut.nodeType===3&&(C+=ut.nodeValue.length),(Z=ut.firstChild)!==null;)W=ut,ut=Z;for(;;){if(ut===r)break e;if(W===c&&++Y===p&&(w=C),W===T&&++rt===m&&(N=C),(Z=ut.nextSibling)!==null)break;ut=W,W=ut.parentNode}ut=Z}c=w===-1||N===-1?null:{start:w,end:N}}else c=null}c=c||{start:0,end:0}}else c=null;for(im={focusedElem:r,selectionRange:c},mc=!1,Ue=o;Ue!==null;)if(o=Ue,r=o.child,(o.subtreeFlags&1024)!==0&&r!==null)r.return=o,Ue=r;else for(;Ue!==null;){switch(o=Ue,T=o.alternate,r=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&T!==null){r=void 0,c=o,p=T.memoizedProps,T=T.memoizedState,m=c.stateNode;try{var At=fr(c.type,p,c.elementType===c.type);r=m.getSnapshotBeforeUpdate(At,T),m.__reactInternalSnapshotBeforeUpdate=r}catch(Tt){ee(c,c.return,Tt)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,c=r.nodeType,c===9)am(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":am(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=o.sibling,r!==null){r.return=o.return,Ue=r;break}Ue=o.return}}function DS(r,o,c){var m=c.flags;switch(c.tag){case 0:case 11:case 15:As(r,c),m&4&&Bo(5,c);break;case 1:if(As(r,c),m&4)if(r=c.stateNode,o===null)try{r.componentDidMount()}catch(C){ee(c,c.return,C)}else{var p=fr(c.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(p,o,r.__reactInternalSnapshotBeforeUpdate)}catch(C){ee(c,c.return,C)}}m&64&&bS(c),m&512&&Fo(c,c.return);break;case 3:if(As(r,c),m&64&&(r=c.updateQueue,r!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{cv(r,o)}catch(C){ee(c,c.return,C)}}break;case 27:o===null&&m&4&&CS(c);case 26:case 5:As(r,c),o===null&&m&4&&RS(c),m&512&&Fo(c,c.return);break;case 12:As(r,c);break;case 13:As(r,c),m&4&&OS(r,c),m&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=uD.bind(null,c),CD(r,c))));break;case 22:if(m=c.memoizedState!==null||Yi,!m){o=o!==null&&o.memoizedState!==null||be,p=Yi;var T=be;Yi=m,(be=o)&&!T?Rs(r,c,(c.subtreeFlags&8772)!==0):As(r,c),Yi=p,be=T}break;case 30:break;default:As(r,c)}}function IS(r){var o=r.alternate;o!==null&&(r.alternate=null,IS(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&fd(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ae=null,dn=!1;function qi(r,o,c){for(c=c.child;c!==null;)wS(r,o,c),c=c.sibling}function wS(r,o,c){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(ei,c)}catch{}switch(c.tag){case 26:be||mi(c,o),qi(r,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:be||mi(c,o);var m=ae,p=dn;ws(c.type)&&(ae=c.stateNode,dn=!1),qi(r,o,c),Yo(c.stateNode),ae=m,dn=p;break;case 5:be||mi(c,o);case 6:if(m=ae,p=dn,ae=null,qi(r,o,c),ae=m,dn=p,ae!==null)if(dn)try{(ae.nodeType===9?ae.body:ae.nodeName==="HTML"?ae.ownerDocument.body:ae).removeChild(c.stateNode)}catch(T){ee(c,o,T)}else try{ae.removeChild(c.stateNode)}catch(T){ee(c,o,T)}break;case 18:ae!==null&&(dn?(r=ae,ST(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),el(r)):ST(ae,c.stateNode));break;case 4:m=ae,p=dn,ae=c.stateNode.containerInfo,dn=!0,qi(r,o,c),ae=m,dn=p;break;case 0:case 11:case 14:case 15:be||bs(2,c,o),be||bs(4,c,o),qi(r,o,c);break;case 1:be||(mi(c,o),m=c.stateNode,typeof m.componentWillUnmount=="function"&&AS(c,o,m)),qi(r,o,c);break;case 21:qi(r,o,c);break;case 22:be=(m=be)||c.memoizedState!==null,qi(r,o,c),be=m;break;default:qi(r,o,c)}}function OS(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{el(r)}catch(c){ee(o,o.return,c)}}function eD(r){switch(r.tag){case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new _S),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new _S),o;default:throw Error(n(435,r.tag))}}function Mh(r,o){var c=eD(r);o.forEach(function(m){var p=cD.bind(null,r,m);c.has(m)||(c.add(m),m.then(p,p))})}function bn(r,o){var c=o.deletions;if(c!==null)for(var m=0;m<c.length;m++){var p=c[m],T=r,C=o,w=C;t:for(;w!==null;){switch(w.tag){case 27:if(ws(w.type)){ae=w.stateNode,dn=!1;break t}break;case 5:ae=w.stateNode,dn=!1;break t;case 3:case 4:ae=w.stateNode.containerInfo,dn=!0;break t}w=w.return}if(ae===null)throw Error(n(160));wS(T,C,p),ae=null,dn=!1,T=p.alternate,T!==null&&(T.return=null),p.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)MS(o,r),o=o.sibling}var ii=null;function MS(r,o){var c=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:bn(o,r),An(r),m&4&&(bs(3,r,r.return),Bo(3,r),bs(5,r,r.return));break;case 1:bn(o,r),An(r),m&512&&(be||c===null||mi(c,c.return)),m&64&&Yi&&(r=r.updateQueue,r!==null&&(m=r.callbacks,m!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?m:c.concat(m))));break;case 26:var p=ii;if(bn(o,r),An(r),m&512&&(be||c===null||mi(c,c.return)),m&4){var T=c!==null?c.memoizedState:null;if(m=r.memoizedState,c===null)if(m===null)if(r.stateNode===null){t:{m=r.type,c=r.memoizedProps,p=p.ownerDocument||p;e:switch(m){case"title":T=p.getElementsByTagName("title")[0],(!T||T[oo]||T[Je]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=p.createElement(m),p.head.insertBefore(T,p.querySelector("head > title"))),qe(T,m,c),T[Je]=r,Be(T),m=T;break t;case"link":var C=CT("link","href",p).get(m+(c.href||""));if(C){for(var w=0;w<C.length;w++)if(T=C[w],T.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&T.getAttribute("rel")===(c.rel==null?null:c.rel)&&T.getAttribute("title")===(c.title==null?null:c.title)&&T.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){C.splice(w,1);break e}}T=p.createElement(m),qe(T,m,c),p.head.appendChild(T);break;case"meta":if(C=CT("meta","content",p).get(m+(c.content||""))){for(w=0;w<C.length;w++)if(T=C[w],T.getAttribute("content")===(c.content==null?null:""+c.content)&&T.getAttribute("name")===(c.name==null?null:c.name)&&T.getAttribute("property")===(c.property==null?null:c.property)&&T.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&T.getAttribute("charset")===(c.charSet==null?null:c.charSet)){C.splice(w,1);break e}}T=p.createElement(m),qe(T,m,c),p.head.appendChild(T);break;default:throw Error(n(468,m))}T[Je]=r,Be(T),m=T}r.stateNode=m}else _T(p,r.type,r.stateNode);else r.stateNode=LT(p,m,r.memoizedProps);else T!==m?(T===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):T.count--,m===null?_T(p,r.type,r.stateNode):LT(p,m,r.memoizedProps)):m===null&&r.stateNode!==null&&Dh(r,r.memoizedProps,c.memoizedProps)}break;case 27:bn(o,r),An(r),m&512&&(be||c===null||mi(c,c.return)),c!==null&&m&4&&Dh(r,r.memoizedProps,c.memoizedProps);break;case 5:if(bn(o,r),An(r),m&512&&(be||c===null||mi(c,c.return)),r.flags&32){p=r.stateNode;try{Gr(p,"")}catch(Z){ee(r,r.return,Z)}}m&4&&r.stateNode!=null&&(p=r.memoizedProps,Dh(r,p,c!==null?c.memoizedProps:p)),m&1024&&(Oh=!0);break;case 6:if(bn(o,r),An(r),m&4){if(r.stateNode===null)throw Error(n(162));m=r.memoizedProps,c=r.stateNode;try{c.nodeValue=m}catch(Z){ee(r,r.return,Z)}}break;case 3:if(fc=null,p=ii,ii=uc(o.containerInfo),bn(o,r),ii=p,An(r),m&4&&c!==null&&c.memoizedState.isDehydrated)try{el(o.containerInfo)}catch(Z){ee(r,r.return,Z)}Oh&&(Oh=!1,PS(r));break;case 4:m=ii,ii=uc(r.stateNode.containerInfo),bn(o,r),An(r),ii=m;break;case 12:bn(o,r),An(r);break;case 13:bn(o,r),An(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Uh=Ut()),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,Mh(r,m)));break;case 22:p=r.memoizedState!==null;var N=c!==null&&c.memoizedState!==null,Y=Yi,rt=be;if(Yi=Y||p,be=rt||N,bn(o,r),be=rt,Yi=Y,An(r),m&8192)t:for(o=r.stateNode,o._visibility=p?o._visibility&-2:o._visibility|1,p&&(c===null||N||Yi||be||dr(r)),c=null,o=r;;){if(o.tag===5||o.tag===26){if(c===null){N=c=o;try{if(T=N.stateNode,p)C=T.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{w=N.stateNode;var ut=N.memoizedProps.style,W=ut!=null&&ut.hasOwnProperty("display")?ut.display:null;w.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(Z){ee(N,N.return,Z)}}}else if(o.tag===6){if(c===null){N=o;try{N.stateNode.nodeValue=p?"":N.memoizedProps}catch(Z){ee(N,N.return,Z)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break t;for(;o.sibling===null;){if(o.return===null||o.return===r)break t;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=r.updateQueue,m!==null&&(c=m.retryQueue,c!==null&&(m.retryQueue=null,Mh(r,c))));break;case 19:bn(o,r),An(r),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,Mh(r,m)));break;case 30:break;case 21:break;default:bn(o,r),An(r)}}function An(r){var o=r.flags;if(o&2){try{for(var c,m=r.return;m!==null;){if(LS(m)){c=m;break}m=m.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var p=c.stateNode,T=Ih(r);Wu(r,T,p);break;case 5:var C=c.stateNode;c.flags&32&&(Gr(C,""),c.flags&=-33);var w=Ih(r);Wu(r,w,C);break;case 3:case 4:var N=c.stateNode.containerInfo,Y=Ih(r);wh(r,Y,N);break;default:throw Error(n(161))}}catch(rt){ee(r,r.return,rt)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function PS(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;PS(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function As(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)DS(r,o.alternate,o),o=o.sibling}function dr(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:bs(4,o,o.return),dr(o);break;case 1:mi(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&AS(o,o.return,c),dr(o);break;case 27:Yo(o.stateNode);case 26:case 5:mi(o,o.return),dr(o);break;case 22:o.memoizedState===null&&dr(o);break;case 30:dr(o);break;default:dr(o)}r=r.sibling}}function Rs(r,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,p=r,T=o,C=T.flags;switch(T.tag){case 0:case 11:case 15:Rs(p,T,c),Bo(4,T);break;case 1:if(Rs(p,T,c),m=T,p=m.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(Y){ee(m,m.return,Y)}if(m=T,p=m.updateQueue,p!==null){var w=m.stateNode;try{var N=p.shared.hiddenCallbacks;if(N!==null)for(p.shared.hiddenCallbacks=null,p=0;p<N.length;p++)uv(N[p],w)}catch(Y){ee(m,m.return,Y)}}c&&C&64&&bS(T),Fo(T,T.return);break;case 27:CS(T);case 26:case 5:Rs(p,T,c),c&&m===null&&C&4&&RS(T),Fo(T,T.return);break;case 12:Rs(p,T,c);break;case 13:Rs(p,T,c),c&&C&4&&OS(p,T);break;case 22:T.memoizedState===null&&Rs(p,T,c),Fo(T,T.return);break;case 30:break;default:Rs(p,T,c)}o=o.sibling}}function Ph(r,o){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&bo(c))}function kh(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&bo(r))}function gi(r,o,c,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)kS(r,o,c,m),o=o.sibling}function kS(r,o,c,m){var p=o.flags;switch(o.tag){case 0:case 11:case 15:gi(r,o,c,m),p&2048&&Bo(9,o);break;case 1:gi(r,o,c,m);break;case 3:gi(r,o,c,m),p&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&bo(r)));break;case 12:if(p&2048){gi(r,o,c,m),r=o.stateNode;try{var T=o.memoizedProps,C=T.id,w=T.onPostCommit;typeof w=="function"&&w(C,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(N){ee(o,o.return,N)}}else gi(r,o,c,m);break;case 13:gi(r,o,c,m);break;case 23:break;case 22:T=o.stateNode,C=o.alternate,o.memoizedState!==null?T._visibility&2?gi(r,o,c,m):Uo(r,o):T._visibility&2?gi(r,o,c,m):(T._visibility|=2,oa(r,o,c,m,(o.subtreeFlags&10256)!==0)),p&2048&&Ph(C,o);break;case 24:gi(r,o,c,m),p&2048&&kh(o.alternate,o);break;default:gi(r,o,c,m)}}function oa(r,o,c,m,p){for(p=p&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var T=r,C=o,w=c,N=m,Y=C.flags;switch(C.tag){case 0:case 11:case 15:oa(T,C,w,N,p),Bo(8,C);break;case 23:break;case 22:var rt=C.stateNode;C.memoizedState!==null?rt._visibility&2?oa(T,C,w,N,p):Uo(T,C):(rt._visibility|=2,oa(T,C,w,N,p)),p&&Y&2048&&Ph(C.alternate,C);break;case 24:oa(T,C,w,N,p),p&&Y&2048&&kh(C.alternate,C);break;default:oa(T,C,w,N,p)}o=o.sibling}}function Uo(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=r,m=o,p=m.flags;switch(m.tag){case 22:Uo(c,m),p&2048&&Ph(m.alternate,m);break;case 24:Uo(c,m),p&2048&&kh(m.alternate,m);break;default:Uo(c,m)}o=o.sibling}}var $o=8192;function la(r){if(r.subtreeFlags&$o)for(r=r.child;r!==null;)NS(r),r=r.sibling}function NS(r){switch(r.tag){case 26:la(r),r.flags&$o&&r.memoizedState!==null&&$D(ii,r.memoizedState,r.memoizedProps);break;case 5:la(r);break;case 3:case 4:var o=ii;ii=uc(r.stateNode.containerInfo),la(r),ii=o;break;case 22:r.memoizedState===null&&(o=r.alternate,o!==null&&o.memoizedState!==null?(o=$o,$o=16777216,la(r),$o=o):la(r));break;default:la(r)}}function BS(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Vo(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var m=o[c];Ue=m,US(m,r)}BS(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)FS(r),r=r.sibling}function FS(r){switch(r.tag){case 0:case 11:case 15:Vo(r),r.flags&2048&&bs(9,r,r.return);break;case 3:Vo(r);break;case 12:Vo(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,Qu(r)):Vo(r);break;default:Vo(r)}}function Qu(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var m=o[c];Ue=m,US(m,r)}BS(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:bs(8,o,o.return),Qu(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Qu(o));break;default:Qu(o)}r=r.sibling}}function US(r,o){for(;Ue!==null;){var c=Ue;switch(c.tag){case 0:case 11:case 15:bs(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var m=c.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:bo(c.memoizedState.cache)}if(m=c.child,m!==null)m.return=c,Ue=m;else t:for(c=r;Ue!==null;){m=Ue;var p=m.sibling,T=m.return;if(IS(m),m===c){Ue=null;break t}if(p!==null){p.return=T,Ue=p;break t}Ue=T}}}var nD={getCacheForType:function(r){var o=tn(Oe),c=o.data.get(r);return c===void 0&&(c=r(),o.data.set(r,c)),c}},iD=typeof WeakMap=="function"?WeakMap:Map,qt=0,re=null,Pt=null,Bt=0,Xt=0,Rn=null,Ls=!1,ua=!1,Nh=!1,Xi=0,pe=0,Cs=0,hr=0,Bh=0,Gn=0,ca=0,Go=null,hn=null,Fh=!1,Uh=0,Zu=1/0,Ju=null,_s=null,Ye=0,Ds=null,fa=null,da=0,$h=0,Vh=null,$S=null,Ho=0,Gh=null;function Ln(){if((qt&2)!==0&&Bt!==0)return Bt&-Bt;if(B.T!==null){var r=Jr;return r!==0?r:Xh()}return ny()}function VS(){Gn===0&&(Gn=(Bt&536870912)===0||Gt?Z0():536870912);var r=Vn.current;return r!==null&&(r.flags|=32),Gn}function Cn(r,o,c){(r===re&&(Xt===2||Xt===9)||r.cancelPendingCommit!==null)&&(ha(r,0),Is(r,Bt,Gn,!1)),ao(r,c),((qt&2)===0||r!==re)&&(r===re&&((qt&2)===0&&(hr|=c),pe===4&&Is(r,Bt,Gn,!1)),pi(r))}function GS(r,o,c){if((qt&6)!==0)throw Error(n(327));var m=!c&&(o&124)===0&&(o&r.expiredLanes)===0||ro(r,o),p=m?aD(r,o):Kh(r,o,!0),T=m;do{if(p===0){ua&&!m&&Is(r,o,0,!1);break}else{if(c=r.current.alternate,T&&!sD(c)){p=Kh(r,o,!1),T=!1;continue}if(p===2){if(T=o,r.errorRecoveryDisabledLanes&T)var C=0;else C=r.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){o=C;t:{var w=r;p=Go;var N=w.current.memoizedState.isDehydrated;if(N&&(ha(w,C).flags|=256),C=Kh(w,C,!1),C!==2){if(Nh&&!N){w.errorRecoveryDisabledLanes|=T,hr|=T,p=4;break t}T=hn,hn=p,T!==null&&(hn===null?hn=T:hn.push.apply(hn,T))}p=C}if(T=!1,p!==2)continue}}if(p===1){ha(r,0),Is(r,o,0,!0);break}t:{switch(m=r,T=p,T){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:Is(m,o,Gn,!Ls);break t;case 2:hn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(p=Uh+300-Ut(),10<p)){if(Is(m,o,Gn,!Ls),cu(m,0,!0)!==0)break t;m.timeoutHandle=yT(HS.bind(null,m,c,hn,Ju,Fh,o,Gn,hr,ca,Ls,T,2,-0,0),p);break t}HS(m,c,hn,Ju,Fh,o,Gn,hr,ca,Ls,T,0,-0,0)}}break}while(!0);pi(r)}function HS(r,o,c,m,p,T,C,w,N,Y,rt,ut,W,Z){if(r.timeoutHandle=-1,ut=o.subtreeFlags,(ut&8192||(ut&16785408)===16785408)&&(Wo={stylesheets:null,count:0,unsuspend:UD},NS(o),ut=VD(),ut!==null)){r.cancelPendingCommit=ut(WS.bind(null,r,o,T,c,m,p,C,w,N,rt,1,W,Z)),Is(r,T,C,!Y);return}WS(r,o,T,c,m,p,C,w,N)}function sD(r){for(var o=r;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var m=0;m<c.length;m++){var p=c[m],T=p.getSnapshot;p=p.value;try{if(!En(T(),p))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Is(r,o,c,m){o&=~Bh,o&=~hr,r.suspendedLanes|=o,r.pingedLanes&=~o,m&&(r.warmLanes|=o),m=r.expirationTimes;for(var p=o;0<p;){var T=31-Ze(p),C=1<<T;m[T]=-1,p&=~C}c!==0&&ty(r,c,o)}function tc(){return(qt&6)===0?(jo(0),!1):!0}function Hh(){if(Pt!==null){if(Xt===0)var r=Pt.return;else r=Pt,Vi=or=null,ah(r),ra=null,Po=0,r=Pt;for(;r!==null;)xS(r.alternate,r),r=r.return;Pt=null}}function ha(r,o){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,xD(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),Hh(),re=r,Pt=c=Fi(r.current,null),Bt=o,Xt=0,Rn=null,Ls=!1,ua=ro(r,o),Nh=!1,ca=Gn=Bh=hr=Cs=pe=0,hn=Go=null,Fh=!1,(o&8)!==0&&(o|=o&32);var m=r.entangledLanes;if(m!==0)for(r=r.entanglements,m&=o;0<m;){var p=31-Ze(m),T=1<<p;o|=r[p],m&=~T}return Xi=o,xu(),c}function jS(r,o){wt=null,B.H=Vu,o===Ro||o===wu?(o=ov(),Xt=3):o===sv?(o=ov(),Xt=4):Xt=o===lS?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Rn=o,Pt===null&&(pe=1,zu(r,Bn(o,r.current)))}function KS(){var r=B.H;return B.H=Vu,r===null?Vu:r}function zS(){var r=B.A;return B.A=nD,r}function jh(){pe=4,Ls||(Bt&4194048)!==Bt&&Vn.current!==null||(ua=!0),(Cs&134217727)===0&&(hr&134217727)===0||re===null||Is(re,Bt,Gn,!1)}function Kh(r,o,c){var m=qt;qt|=2;var p=KS(),T=zS();(re!==r||Bt!==o)&&(Ju=null,ha(r,o)),o=!1;var C=pe;t:do try{if(Xt!==0&&Pt!==null){var w=Pt,N=Rn;switch(Xt){case 8:Hh(),C=6;break t;case 3:case 2:case 9:case 6:Vn.current===null&&(o=!0);var Y=Xt;if(Xt=0,Rn=null,ma(r,w,N,Y),c&&ua){C=0;break t}break;default:Y=Xt,Xt=0,Rn=null,ma(r,w,N,Y)}}rD(),C=pe;break}catch(rt){jS(r,rt)}while(!0);return o&&r.shellSuspendCounter++,Vi=or=null,qt=m,B.H=p,B.A=T,Pt===null&&(re=null,Bt=0,xu()),C}function rD(){for(;Pt!==null;)YS(Pt)}function aD(r,o){var c=qt;qt|=2;var m=KS(),p=zS();re!==r||Bt!==o?(Ju=null,Zu=Ut()+500,ha(r,o)):ua=ro(r,o);t:do try{if(Xt!==0&&Pt!==null){o=Pt;var T=Rn;e:switch(Xt){case 1:Xt=0,Rn=null,ma(r,o,T,1);break;case 2:case 9:if(rv(T)){Xt=0,Rn=null,qS(o);break}o=function(){Xt!==2&&Xt!==9||re!==r||(Xt=7),pi(r)},T.then(o,o);break t;case 3:Xt=7;break t;case 4:Xt=5;break t;case 7:rv(T)?(Xt=0,Rn=null,qS(o)):(Xt=0,Rn=null,ma(r,o,T,7));break;case 5:var C=null;switch(Pt.tag){case 26:C=Pt.memoizedState;case 5:case 27:var w=Pt;if(!C||DT(C)){Xt=0,Rn=null;var N=w.sibling;if(N!==null)Pt=N;else{var Y=w.return;Y!==null?(Pt=Y,ec(Y)):Pt=null}break e}}Xt=0,Rn=null,ma(r,o,T,5);break;case 6:Xt=0,Rn=null,ma(r,o,T,6);break;case 8:Hh(),pe=6;break t;default:throw Error(n(462))}}oD();break}catch(rt){jS(r,rt)}while(!0);return Vi=or=null,B.H=m,B.A=p,qt=c,Pt!==null?0:(re=null,Bt=0,xu(),pe)}function oD(){for(;Pt!==null&&!Mr();)YS(Pt)}function YS(r){var o=TS(r.alternate,r,Xi);r.memoizedProps=r.pendingProps,o===null?ec(r):Pt=o}function qS(r){var o=r,c=o.alternate;switch(o.tag){case 15:case 0:o=mS(c,o,o.pendingProps,o.type,void 0,Bt);break;case 11:o=mS(c,o,o.pendingProps,o.type.render,o.ref,Bt);break;case 5:ah(o);default:xS(c,o),o=Pt=Xy(o,Xi),o=TS(c,o,Xi)}r.memoizedProps=r.pendingProps,o===null?ec(r):Pt=o}function ma(r,o,c,m){Vi=or=null,ah(o),ra=null,Po=0;var p=o.return;try{if(W_(r,p,o,c,Bt)){pe=1,zu(r,Bn(c,r.current)),Pt=null;return}}catch(T){if(p!==null)throw Pt=p,T;pe=1,zu(r,Bn(c,r.current)),Pt=null;return}o.flags&32768?(Gt||m===1?r=!0:ua||(Bt&536870912)!==0?r=!1:(Ls=r=!0,(m===2||m===9||m===3||m===6)&&(m=Vn.current,m!==null&&m.tag===13&&(m.flags|=16384))),XS(o,r)):ec(o)}function ec(r){var o=r;do{if((o.flags&32768)!==0){XS(o,Ls);return}r=o.return;var c=Z_(o.alternate,o,Xi);if(c!==null){Pt=c;return}if(o=o.sibling,o!==null){Pt=o;return}Pt=o=r}while(o!==null);pe===0&&(pe=5)}function XS(r,o){do{var c=J_(r.alternate,r);if(c!==null){c.flags&=32767,Pt=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(r=r.sibling,r!==null)){Pt=r;return}Pt=r=c}while(r!==null);pe=6,Pt=null}function WS(r,o,c,m,p,T,C,w,N){r.cancelPendingCommit=null;do nc();while(Ye!==0);if((qt&6)!==0)throw Error(n(327));if(o!==null){if(o===r.current)throw Error(n(177));if(T=o.lanes|o.childLanes,T|=kd,UC(r,c,T,C,w,N),r===re&&(Pt=re=null,Bt=0),fa=o,Ds=r,da=c,$h=T,Vh=p,$S=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,fD(Tn,function(){return eT(),null})):(r.callbackNode=null,r.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=B.T,B.T=null,p=H.p,H.p=2,C=qt,qt|=4;try{tD(r,o,c)}finally{qt=C,H.p=p,B.T=m}}Ye=1,QS(),ZS(),JS()}}function QS(){if(Ye===1){Ye=0;var r=Ds,o=fa,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=B.T,B.T=null;var m=H.p;H.p=2;var p=qt;qt|=4;try{MS(o,r);var T=im,C=Uy(r.containerInfo),w=T.focusedElem,N=T.selectionRange;if(C!==w&&w&&w.ownerDocument&&Fy(w.ownerDocument.documentElement,w)){if(N!==null&&Id(w)){var Y=N.start,rt=N.end;if(rt===void 0&&(rt=Y),"selectionStart"in w)w.selectionStart=Y,w.selectionEnd=Math.min(rt,w.value.length);else{var ut=w.ownerDocument||document,W=ut&&ut.defaultView||window;if(W.getSelection){var Z=W.getSelection(),At=w.textContent.length,Tt=Math.min(N.start,At),Jt=N.end===void 0?Tt:Math.min(N.end,At);!Z.extend&&Tt>Jt&&(C=Jt,Jt=Tt,Tt=C);var G=By(w,Tt),U=By(w,Jt);if(G&&U&&(Z.rangeCount!==1||Z.anchorNode!==G.node||Z.anchorOffset!==G.offset||Z.focusNode!==U.node||Z.focusOffset!==U.offset)){var K=ut.createRange();K.setStart(G.node,G.offset),Z.removeAllRanges(),Tt>Jt?(Z.addRange(K),Z.extend(U.node,U.offset)):(K.setEnd(U.node,U.offset),Z.addRange(K))}}}}for(ut=[],Z=w;Z=Z.parentNode;)Z.nodeType===1&&ut.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ut.length;w++){var lt=ut[w];lt.element.scrollLeft=lt.left,lt.element.scrollTop=lt.top}}mc=!!nm,im=nm=null}finally{qt=p,H.p=m,B.T=c}}r.current=o,Ye=2}}function ZS(){if(Ye===2){Ye=0;var r=Ds,o=fa,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=B.T,B.T=null;var m=H.p;H.p=2;var p=qt;qt|=4;try{DS(r,o.alternate,o)}finally{qt=p,H.p=m,B.T=c}}Ye=3}}function JS(){if(Ye===4||Ye===3){Ye=0,Nt();var r=Ds,o=fa,c=da,m=$S;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ye=5:(Ye=0,fa=Ds=null,tT(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(_s=null),ud(c),o=o.stateNode,Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(ei,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=B.T,p=H.p,H.p=2,B.T=null;try{for(var T=r.onRecoverableError,C=0;C<m.length;C++){var w=m[C];T(w.value,{componentStack:w.stack})}}finally{B.T=o,H.p=p}}(da&3)!==0&&nc(),pi(r),p=r.pendingLanes,(c&4194090)!==0&&(p&42)!==0?r===Gh?Ho++:(Ho=0,Gh=r):Ho=0,jo(0)}}function tT(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,bo(o)))}function nc(r){return QS(),ZS(),JS(),eT()}function eT(){if(Ye!==5)return!1;var r=Ds,o=$h;$h=0;var c=ud(da),m=B.T,p=H.p;try{H.p=32>c?32:c,B.T=null,c=Vh,Vh=null;var T=Ds,C=da;if(Ye=0,fa=Ds=null,da=0,(qt&6)!==0)throw Error(n(331));var w=qt;if(qt|=4,FS(T.current),kS(T,T.current,C,c),qt=w,jo(0,!1),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(ei,T)}catch{}return!0}finally{H.p=p,B.T=m,tT(r,o)}}function nT(r,o,c){o=Bn(c,o),o=Th(r.stateNode,o,2),r=Ss(r,o,2),r!==null&&(ao(r,2),pi(r))}function ee(r,o,c){if(r.tag===3)nT(r,r,c);else for(;o!==null;){if(o.tag===3){nT(o,r,c);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(_s===null||!_s.has(m))){r=Bn(c,r),c=aS(2),m=Ss(o,c,2),m!==null&&(oS(c,m,o,r),ao(m,2),pi(m));break}}o=o.return}}function zh(r,o,c){var m=r.pingCache;if(m===null){m=r.pingCache=new iD;var p=new Set;m.set(o,p)}else p=m.get(o),p===void 0&&(p=new Set,m.set(o,p));p.has(c)||(Nh=!0,p.add(c),r=lD.bind(null,r,o,c),o.then(r,r))}function lD(r,o,c){var m=r.pingCache;m!==null&&m.delete(o),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,re===r&&(Bt&c)===c&&(pe===4||pe===3&&(Bt&62914560)===Bt&&300>Ut()-Uh?(qt&2)===0&&ha(r,0):Bh|=c,ca===Bt&&(ca=0)),pi(r)}function iT(r,o){o===0&&(o=J0()),r=Xr(r,o),r!==null&&(ao(r,o),pi(r))}function uD(r){var o=r.memoizedState,c=0;o!==null&&(c=o.retryLane),iT(r,c)}function cD(r,o){var c=0;switch(r.tag){case 13:var m=r.stateNode,p=r.memoizedState;p!==null&&(c=p.retryLane);break;case 19:m=r.stateNode;break;case 22:m=r.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(o),iT(r,c)}function fD(r,o){return Ne(r,o)}var ic=null,ga=null,Yh=!1,sc=!1,qh=!1,mr=0;function pi(r){r!==ga&&r.next===null&&(ga===null?ic=ga=r:ga=ga.next=r),sc=!0,Yh||(Yh=!0,hD())}function jo(r,o){if(!qh&&sc){qh=!0;do for(var c=!1,m=ic;m!==null;){if(r!==0){var p=m.pendingLanes;if(p===0)var T=0;else{var C=m.suspendedLanes,w=m.pingedLanes;T=(1<<31-Ze(42|r)+1)-1,T&=p&~(C&~w),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(c=!0,oT(m,T))}else T=Bt,T=cu(m,m===re?T:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(T&3)===0||ro(m,T)||(c=!0,oT(m,T));m=m.next}while(c);qh=!1}}function dD(){sT()}function sT(){sc=Yh=!1;var r=0;mr!==0&&(ED()&&(r=mr),mr=0);for(var o=Ut(),c=null,m=ic;m!==null;){var p=m.next,T=rT(m,o);T===0?(m.next=null,c===null?ic=p:c.next=p,p===null&&(ga=c)):(c=m,(r!==0||(T&3)!==0)&&(sc=!0)),m=p}jo(r)}function rT(r,o){for(var c=r.suspendedLanes,m=r.pingedLanes,p=r.expirationTimes,T=r.pendingLanes&-62914561;0<T;){var C=31-Ze(T),w=1<<C,N=p[C];N===-1?((w&c)===0||(w&m)!==0)&&(p[C]=FC(w,o)):N<=o&&(r.expiredLanes|=w),T&=~w}if(o=re,c=Bt,c=cu(r,r===o?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m=r.callbackNode,c===0||r===o&&(Xt===2||Xt===9)||r.cancelPendingCommit!==null)return m!==null&&m!==null&&ue(m),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||ro(r,c)){if(o=c&-c,o===r.callbackPriority)return o;switch(m!==null&&ue(m),ud(c)){case 2:case 8:c=Ke;break;case 32:c=Tn;break;case 268435456:c=so;break;default:c=Tn}return m=aT.bind(null,r),c=Ne(c,m),r.callbackPriority=o,r.callbackNode=c,o}return m!==null&&m!==null&&ue(m),r.callbackPriority=2,r.callbackNode=null,2}function aT(r,o){if(Ye!==0&&Ye!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(nc()&&r.callbackNode!==c)return null;var m=Bt;return m=cu(r,r===re?m:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m===0?null:(GS(r,m,o),rT(r,Ut()),r.callbackNode!=null&&r.callbackNode===c?aT.bind(null,r):null)}function oT(r,o){if(nc())return null;GS(r,o,!0)}function hD(){bD(function(){(qt&6)!==0?Ne(Pn,dD):sT()})}function Xh(){return mr===0&&(mr=Z0()),mr}function lT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:gu(""+r)}function uT(r,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,r.id&&c.setAttribute("form",r.id),o.parentNode.insertBefore(c,o),r=new FormData(r),c.parentNode.removeChild(c),r}function mD(r,o,c,m,p){if(o==="submit"&&c&&c.stateNode===p){var T=lT((p[un]||null).action),C=m.submitter;C&&(o=(o=C[un]||null)?lT(o.formAction):C.getAttribute("formAction"),o!==null&&(T=o,C=null));var w=new Su("action","action",null,m,p);r.push({event:w,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(mr!==0){var N=C?uT(p,C):new FormData(p);gh(c,{pending:!0,data:N,method:p.method,action:T},null,N)}}else typeof T=="function"&&(w.preventDefault(),N=C?uT(p,C):new FormData(p),gh(c,{pending:!0,data:N,method:p.method,action:T},T,N))},currentTarget:p}]})}}for(var Wh=0;Wh<Pd.length;Wh++){var Qh=Pd[Wh],gD=Qh.toLowerCase(),pD=Qh[0].toUpperCase()+Qh.slice(1);ni(gD,"on"+pD)}ni(Gy,"onAnimationEnd"),ni(Hy,"onAnimationIteration"),ni(jy,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(M_,"onTransitionRun"),ni(P_,"onTransitionStart"),ni(k_,"onTransitionCancel"),ni(Ky,"onTransitionEnd"),Ur("onMouseEnter",["mouseout","mouseover"]),Ur("onMouseLeave",["mouseout","mouseover"]),Ur("onPointerEnter",["pointerout","pointerover"]),Ur("onPointerLeave",["pointerout","pointerover"]),Zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ko));function cT(r,o){o=(o&4)!==0;for(var c=0;c<r.length;c++){var m=r[c],p=m.event;m=m.listeners;t:{var T=void 0;if(o)for(var C=m.length-1;0<=C;C--){var w=m[C],N=w.instance,Y=w.currentTarget;if(w=w.listener,N!==T&&p.isPropagationStopped())break t;T=w,p.currentTarget=Y;try{T(p)}catch(rt){Ku(rt)}p.currentTarget=null,T=N}else for(C=0;C<m.length;C++){if(w=m[C],N=w.instance,Y=w.currentTarget,w=w.listener,N!==T&&p.isPropagationStopped())break t;T=w,p.currentTarget=Y;try{T(p)}catch(rt){Ku(rt)}p.currentTarget=null,T=N}}}}function kt(r,o){var c=o[cd];c===void 0&&(c=o[cd]=new Set);var m=r+"__bubble";c.has(m)||(fT(o,r,2,!1),c.add(m))}function Zh(r,o,c){var m=0;o&&(m|=4),fT(c,r,m,o)}var rc="_reactListening"+Math.random().toString(36).slice(2);function Jh(r){if(!r[rc]){r[rc]=!0,sy.forEach(function(c){c!=="selectionchange"&&(yD.has(c)||Zh(c,!1,r),Zh(c,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[rc]||(o[rc]=!0,Zh("selectionchange",!1,o))}}function fT(r,o,c,m){switch(kT(o)){case 2:var p=jD;break;case 8:p=KD;break;default:p=hm}c=p.bind(null,o,c,r),p=void 0,!Ed||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),m?p!==void 0?r.addEventListener(o,c,{capture:!0,passive:p}):r.addEventListener(o,c,!0):p!==void 0?r.addEventListener(o,c,{passive:p}):r.addEventListener(o,c,!1)}function tm(r,o,c,m,p){var T=m;if((o&1)===0&&(o&2)===0&&m!==null)t:for(;;){if(m===null)return;var C=m.tag;if(C===3||C===4){var w=m.stateNode.containerInfo;if(w===p)break;if(C===4)for(C=m.return;C!==null;){var N=C.tag;if((N===3||N===4)&&C.stateNode.containerInfo===p)return;C=C.return}for(;w!==null;){if(C=Nr(w),C===null)return;if(N=C.tag,N===5||N===6||N===26||N===27){m=T=C;continue t}w=w.parentNode}}m=m.return}vy(function(){var Y=T,rt=Sd(c),ut=[];t:{var W=zy.get(r);if(W!==void 0){var Z=Su,At=r;switch(r){case"keypress":if(yu(c)===0)break t;case"keydown":case"keyup":Z=f_;break;case"focusin":At="focus",Z=Rd;break;case"focusout":At="blur",Z=Rd;break;case"beforeblur":case"afterblur":Z=Rd;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Ey;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=JC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=m_;break;case Gy:case Hy:case jy:Z=n_;break;case Ky:Z=p_;break;case"scroll":case"scrollend":Z=QC;break;case"wheel":Z=v_;break;case"copy":case"cut":case"paste":Z=s_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=by;break;case"toggle":case"beforetoggle":Z=T_}var Tt=(o&4)!==0,Jt=!Tt&&(r==="scroll"||r==="scrollend"),G=Tt?W!==null?W+"Capture":null:W;Tt=[];for(var U=Y,K;U!==null;){var lt=U;if(K=lt.stateNode,lt=lt.tag,lt!==5&&lt!==26&&lt!==27||K===null||G===null||(lt=uo(U,G),lt!=null&&Tt.push(zo(U,lt,K))),Jt)break;U=U.return}0<Tt.length&&(W=new Z(W,At,null,c,rt),ut.push({event:W,listeners:Tt}))}}if((o&7)===0){t:{if(W=r==="mouseover"||r==="pointerover",Z=r==="mouseout"||r==="pointerout",W&&c!==vd&&(At=c.relatedTarget||c.fromElement)&&(Nr(At)||At[kr]))break t;if((Z||W)&&(W=rt.window===rt?rt:(W=rt.ownerDocument)?W.defaultView||W.parentWindow:window,Z?(At=c.relatedTarget||c.toElement,Z=Y,At=At?Nr(At):null,At!==null&&(Jt=a(At),Tt=At.tag,At!==Jt||Tt!==5&&Tt!==27&&Tt!==6)&&(At=null)):(Z=null,At=Y),Z!==At)){if(Tt=Ey,lt="onMouseLeave",G="onMouseEnter",U="mouse",(r==="pointerout"||r==="pointerover")&&(Tt=by,lt="onPointerLeave",G="onPointerEnter",U="pointer"),Jt=Z==null?W:lo(Z),K=At==null?W:lo(At),W=new Tt(lt,U+"leave",Z,c,rt),W.target=Jt,W.relatedTarget=K,lt=null,Nr(rt)===Y&&(Tt=new Tt(G,U+"enter",At,c,rt),Tt.target=K,Tt.relatedTarget=Jt,lt=Tt),Jt=lt,Z&&At)e:{for(Tt=Z,G=At,U=0,K=Tt;K;K=pa(K))U++;for(K=0,lt=G;lt;lt=pa(lt))K++;for(;0<U-K;)Tt=pa(Tt),U--;for(;0<K-U;)G=pa(G),K--;for(;U--;){if(Tt===G||G!==null&&Tt===G.alternate)break e;Tt=pa(Tt),G=pa(G)}Tt=null}else Tt=null;Z!==null&&dT(ut,W,Z,Tt,!1),At!==null&&Jt!==null&&dT(ut,Jt,At,Tt,!0)}}t:{if(W=Y?lo(Y):window,Z=W.nodeName&&W.nodeName.toLowerCase(),Z==="select"||Z==="input"&&W.type==="file")var pt=wy;else if(Dy(W))if(Oy)pt=I_;else{pt=__;var Ot=C_}else Z=W.nodeName,!Z||Z.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?Y&&yd(Y.elementType)&&(pt=wy):pt=D_;if(pt&&(pt=pt(r,Y))){Iy(ut,pt,c,rt);break t}Ot&&Ot(r,W,Y),r==="focusout"&&Y&&W.type==="number"&&Y.memoizedProps.value!=null&&pd(W,"number",W.value)}switch(Ot=Y?lo(Y):window,r){case"focusin":(Dy(Ot)||Ot.contentEditable==="true")&&(zr=Ot,wd=Y,vo=null);break;case"focusout":vo=wd=zr=null;break;case"mousedown":Od=!0;break;case"contextmenu":case"mouseup":case"dragend":Od=!1,$y(ut,c,rt);break;case"selectionchange":if(O_)break;case"keydown":case"keyup":$y(ut,c,rt)}var St;if(Cd)t:{switch(r){case"compositionstart":var Et="onCompositionStart";break t;case"compositionend":Et="onCompositionEnd";break t;case"compositionupdate":Et="onCompositionUpdate";break t}Et=void 0}else Kr?Cy(r,c)&&(Et="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Et="onCompositionStart");Et&&(Ay&&c.locale!=="ko"&&(Kr||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&Kr&&(St=Sy()):(gs=rt,xd="value"in gs?gs.value:gs.textContent,Kr=!0)),Ot=ac(Y,Et),0<Ot.length&&(Et=new xy(Et,r,null,c,rt),ut.push({event:Et,listeners:Ot}),St?Et.data=St:(St=_y(c),St!==null&&(Et.data=St)))),(St=x_?b_(r,c):A_(r,c))&&(Et=ac(Y,"onBeforeInput"),0<Et.length&&(Ot=new xy("onBeforeInput","beforeinput",null,c,rt),ut.push({event:Ot,listeners:Et}),Ot.data=St)),mD(ut,r,Y,c,rt)}cT(ut,o)})}function zo(r,o,c){return{instance:r,listener:o,currentTarget:c}}function ac(r,o){for(var c=o+"Capture",m=[];r!==null;){var p=r,T=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||T===null||(p=uo(r,c),p!=null&&m.unshift(zo(r,p,T)),p=uo(r,o),p!=null&&m.push(zo(r,p,T))),r.tag===3)return m;r=r.return}return[]}function pa(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function dT(r,o,c,m,p){for(var T=o._reactName,C=[];c!==null&&c!==m;){var w=c,N=w.alternate,Y=w.stateNode;if(w=w.tag,N!==null&&N===m)break;w!==5&&w!==26&&w!==27||Y===null||(N=Y,p?(Y=uo(c,T),Y!=null&&C.unshift(zo(c,Y,N))):p||(Y=uo(c,T),Y!=null&&C.push(zo(c,Y,N)))),c=c.return}C.length!==0&&r.push({event:o,listeners:C})}var vD=/\r\n?/g,SD=/\u0000|\uFFFD/g;function hT(r){return(typeof r=="string"?r:""+r).replace(vD,`
`).replace(SD,"")}function mT(r,o){return o=hT(o),hT(r)===o}function oc(){}function Zt(r,o,c,m,p,T){switch(c){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||Gr(r,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&Gr(r,""+m);break;case"className":du(r,"class",m);break;case"tabIndex":du(r,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":du(r,c,m);break;case"style":py(r,m,T);break;case"data":if(o!=="object"){du(r,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||c!=="href")){r.removeAttribute(c);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(c);break}m=gu(""+m),r.setAttribute(c,m);break;case"action":case"formAction":if(typeof m=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(c==="formAction"?(o!=="input"&&Zt(r,o,"name",p.name,p,null),Zt(r,o,"formEncType",p.formEncType,p,null),Zt(r,o,"formMethod",p.formMethod,p,null),Zt(r,o,"formTarget",p.formTarget,p,null)):(Zt(r,o,"encType",p.encType,p,null),Zt(r,o,"method",p.method,p,null),Zt(r,o,"target",p.target,p,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(c);break}m=gu(""+m),r.setAttribute(c,m);break;case"onClick":m!=null&&(r.onclick=oc);break;case"onScroll":m!=null&&kt("scroll",r);break;case"onScrollEnd":m!=null&&kt("scrollend",r);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(c=m.__html,c!=null){if(p.children!=null)throw Error(n(60));r.innerHTML=c}}break;case"multiple":r.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":r.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){r.removeAttribute("xlink:href");break}c=gu(""+m),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(c,""+m):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":m===!0?r.setAttribute(c,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(c,m):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?r.setAttribute(c,m):r.removeAttribute(c);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?r.removeAttribute(c):r.setAttribute(c,m);break;case"popover":kt("beforetoggle",r),kt("toggle",r),fu(r,"popover",m);break;case"xlinkActuate":Ni(r,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Ni(r,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Ni(r,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Ni(r,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Ni(r,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Ni(r,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Ni(r,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Ni(r,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Ni(r,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":fu(r,"is",m);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=XC.get(c)||c,fu(r,c,m))}}function em(r,o,c,m,p,T){switch(c){case"style":py(r,m,T);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(c=m.__html,c!=null){if(p.children!=null)throw Error(n(60));r.innerHTML=c}}break;case"children":typeof m=="string"?Gr(r,m):(typeof m=="number"||typeof m=="bigint")&&Gr(r,""+m);break;case"onScroll":m!=null&&kt("scroll",r);break;case"onScrollEnd":m!=null&&kt("scrollend",r);break;case"onClick":m!=null&&(r.onclick=oc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ry.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(p=c.endsWith("Capture"),o=c.slice(2,p?c.length-7:void 0),T=r[un]||null,T=T!=null?T[c]:null,typeof T=="function"&&r.removeEventListener(o,T,p),typeof m=="function")){typeof T!="function"&&T!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(o,m,p);break t}c in r?r[c]=m:m===!0?r.setAttribute(c,""):fu(r,c,m)}}}function qe(r,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kt("error",r),kt("load",r);var m=!1,p=!1,T;for(T in c)if(c.hasOwnProperty(T)){var C=c[T];if(C!=null)switch(T){case"src":m=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Zt(r,o,T,C,c,null)}}p&&Zt(r,o,"srcSet",c.srcSet,c,null),m&&Zt(r,o,"src",c.src,c,null);return;case"input":kt("invalid",r);var w=T=C=p=null,N=null,Y=null;for(m in c)if(c.hasOwnProperty(m)){var rt=c[m];if(rt!=null)switch(m){case"name":p=rt;break;case"type":C=rt;break;case"checked":N=rt;break;case"defaultChecked":Y=rt;break;case"value":T=rt;break;case"defaultValue":w=rt;break;case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(n(137,o));break;default:Zt(r,o,m,rt,c,null)}}dy(r,T,w,N,Y,C,p,!1),hu(r);return;case"select":kt("invalid",r),m=C=T=null;for(p in c)if(c.hasOwnProperty(p)&&(w=c[p],w!=null))switch(p){case"value":T=w;break;case"defaultValue":C=w;break;case"multiple":m=w;default:Zt(r,o,p,w,c,null)}o=T,c=C,r.multiple=!!m,o!=null?Vr(r,!!m,o,!1):c!=null&&Vr(r,!!m,c,!0);return;case"textarea":kt("invalid",r),T=p=m=null;for(C in c)if(c.hasOwnProperty(C)&&(w=c[C],w!=null))switch(C){case"value":m=w;break;case"defaultValue":p=w;break;case"children":T=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(n(91));break;default:Zt(r,o,C,w,c,null)}my(r,m,p,T),hu(r);return;case"option":for(N in c)if(c.hasOwnProperty(N)&&(m=c[N],m!=null))switch(N){case"selected":r.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Zt(r,o,N,m,c,null)}return;case"dialog":kt("beforetoggle",r),kt("toggle",r),kt("cancel",r),kt("close",r);break;case"iframe":case"object":kt("load",r);break;case"video":case"audio":for(m=0;m<Ko.length;m++)kt(Ko[m],r);break;case"image":kt("error",r),kt("load",r);break;case"details":kt("toggle",r);break;case"embed":case"source":case"link":kt("error",r),kt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in c)if(c.hasOwnProperty(Y)&&(m=c[Y],m!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Zt(r,o,Y,m,c,null)}return;default:if(yd(o)){for(rt in c)c.hasOwnProperty(rt)&&(m=c[rt],m!==void 0&&em(r,o,rt,m,c,void 0));return}}for(w in c)c.hasOwnProperty(w)&&(m=c[w],m!=null&&Zt(r,o,w,m,c,null))}function TD(r,o,c,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,T=null,C=null,w=null,N=null,Y=null,rt=null;for(Z in c){var ut=c[Z];if(c.hasOwnProperty(Z)&&ut!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":N=ut;default:m.hasOwnProperty(Z)||Zt(r,o,Z,null,m,ut)}}for(var W in m){var Z=m[W];if(ut=c[W],m.hasOwnProperty(W)&&(Z!=null||ut!=null))switch(W){case"type":T=Z;break;case"name":p=Z;break;case"checked":Y=Z;break;case"defaultChecked":rt=Z;break;case"value":C=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(137,o));break;default:Z!==ut&&Zt(r,o,W,Z,m,ut)}}gd(r,C,w,N,Y,rt,T,p);return;case"select":Z=C=w=W=null;for(T in c)if(N=c[T],c.hasOwnProperty(T)&&N!=null)switch(T){case"value":break;case"multiple":Z=N;default:m.hasOwnProperty(T)||Zt(r,o,T,null,m,N)}for(p in m)if(T=m[p],N=c[p],m.hasOwnProperty(p)&&(T!=null||N!=null))switch(p){case"value":W=T;break;case"defaultValue":w=T;break;case"multiple":C=T;default:T!==N&&Zt(r,o,p,T,m,N)}o=w,c=C,m=Z,W!=null?Vr(r,!!c,W,!1):!!m!=!!c&&(o!=null?Vr(r,!!c,o,!0):Vr(r,!!c,c?[]:"",!1));return;case"textarea":Z=W=null;for(w in c)if(p=c[w],c.hasOwnProperty(w)&&p!=null&&!m.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Zt(r,o,w,null,m,p)}for(C in m)if(p=m[C],T=c[C],m.hasOwnProperty(C)&&(p!=null||T!=null))switch(C){case"value":W=p;break;case"defaultValue":Z=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(n(91));break;default:p!==T&&Zt(r,o,C,p,m,T)}hy(r,W,Z);return;case"option":for(var At in c)if(W=c[At],c.hasOwnProperty(At)&&W!=null&&!m.hasOwnProperty(At))switch(At){case"selected":r.selected=!1;break;default:Zt(r,o,At,null,m,W)}for(N in m)if(W=m[N],Z=c[N],m.hasOwnProperty(N)&&W!==Z&&(W!=null||Z!=null))switch(N){case"selected":r.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:Zt(r,o,N,W,m,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tt in c)W=c[Tt],c.hasOwnProperty(Tt)&&W!=null&&!m.hasOwnProperty(Tt)&&Zt(r,o,Tt,null,m,W);for(Y in m)if(W=m[Y],Z=c[Y],m.hasOwnProperty(Y)&&W!==Z&&(W!=null||Z!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(n(137,o));break;default:Zt(r,o,Y,W,m,Z)}return;default:if(yd(o)){for(var Jt in c)W=c[Jt],c.hasOwnProperty(Jt)&&W!==void 0&&!m.hasOwnProperty(Jt)&&em(r,o,Jt,void 0,m,W);for(rt in m)W=m[rt],Z=c[rt],!m.hasOwnProperty(rt)||W===Z||W===void 0&&Z===void 0||em(r,o,rt,W,m,Z);return}}for(var G in c)W=c[G],c.hasOwnProperty(G)&&W!=null&&!m.hasOwnProperty(G)&&Zt(r,o,G,null,m,W);for(ut in m)W=m[ut],Z=c[ut],!m.hasOwnProperty(ut)||W===Z||W==null&&Z==null||Zt(r,o,ut,W,m,Z)}var nm=null,im=null;function lc(r){return r.nodeType===9?r:r.ownerDocument}function gT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pT(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function sm(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var rm=null;function ED(){var r=window.event;return r&&r.type==="popstate"?r===rm?!1:(rm=r,!0):(rm=null,!1)}var yT=typeof setTimeout=="function"?setTimeout:void 0,xD=typeof clearTimeout=="function"?clearTimeout:void 0,vT=typeof Promise=="function"?Promise:void 0,bD=typeof queueMicrotask=="function"?queueMicrotask:typeof vT<"u"?function(r){return vT.resolve(null).then(r).catch(AD)}:yT;function AD(r){setTimeout(function(){throw r})}function ws(r){return r==="head"}function ST(r,o){var c=o,m=0,p=0;do{var T=c.nextSibling;if(r.removeChild(c),T&&T.nodeType===8)if(c=T.data,c==="/$"){if(0<m&&8>m){c=m;var C=r.ownerDocument;if(c&1&&Yo(C.documentElement),c&2&&Yo(C.body),c&4)for(c=C.head,Yo(c),C=c.firstChild;C;){var w=C.nextSibling,N=C.nodeName;C[oo]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&C.rel.toLowerCase()==="stylesheet"||c.removeChild(C),C=w}}if(p===0){r.removeChild(T),el(o);return}p--}else c==="$"||c==="$?"||c==="$!"?p++:m=c.charCodeAt(0)-48;else m=0;c=T}while(c);el(o)}function am(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":am(c),fd(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function RD(r,o,c,m){for(;r.nodeType===1;){var p=c;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(m){if(!r[oo])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(T=r.getAttribute("rel"),T==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(T!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(T=r.getAttribute("src"),(T!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&T&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var T=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===T)return r}else return r;if(r=si(r.nextSibling),r===null)break}return null}function LD(r,o,c){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=si(r.nextSibling),r===null))return null;return r}function om(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function CD(r,o){var c=r.ownerDocument;if(r.data!=="$?"||c.readyState==="complete")o();else{var m=function(){o(),c.removeEventListener("DOMContentLoaded",m)};c.addEventListener("DOMContentLoaded",m),r._reactRetry=m}}function si(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return r}var lm=null;function TT(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return r;o--}else c==="/$"&&o++}r=r.previousSibling}return null}function ET(r,o,c){switch(o=lc(c),r){case"html":if(r=o.documentElement,!r)throw Error(n(452));return r;case"head":if(r=o.head,!r)throw Error(n(453));return r;case"body":if(r=o.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function Yo(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);fd(r)}var Hn=new Map,xT=new Set;function uc(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Wi=H.d;H.d={f:_D,r:DD,D:ID,C:wD,L:OD,m:MD,X:kD,S:PD,M:ND};function _D(){var r=Wi.f(),o=tc();return r||o}function DD(r){var o=Br(r);o!==null&&o.tag===5&&o.type==="form"?Gv(o):Wi.r(r)}var ya=typeof document>"u"?null:document;function bT(r,o,c){var m=ya;if(m&&typeof o=="string"&&o){var p=Nn(o);p='link[rel="'+r+'"][href="'+p+'"]',typeof c=="string"&&(p+='[crossorigin="'+c+'"]'),xT.has(p)||(xT.add(p),r={rel:r,crossOrigin:c,href:o},m.querySelector(p)===null&&(o=m.createElement("link"),qe(o,"link",r),Be(o),m.head.appendChild(o)))}}function ID(r){Wi.D(r),bT("dns-prefetch",r,null)}function wD(r,o){Wi.C(r,o),bT("preconnect",r,o)}function OD(r,o,c){Wi.L(r,o,c);var m=ya;if(m&&r&&o){var p='link[rel="preload"][as="'+Nn(o)+'"]';o==="image"&&c&&c.imageSrcSet?(p+='[imagesrcset="'+Nn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(p+='[imagesizes="'+Nn(c.imageSizes)+'"]')):p+='[href="'+Nn(r)+'"]';var T=p;switch(o){case"style":T=va(r);break;case"script":T=Sa(r)}Hn.has(T)||(r=h({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:r,as:o},c),Hn.set(T,r),m.querySelector(p)!==null||o==="style"&&m.querySelector(qo(T))||o==="script"&&m.querySelector(Xo(T))||(o=m.createElement("link"),qe(o,"link",r),Be(o),m.head.appendChild(o)))}}function MD(r,o){Wi.m(r,o);var c=ya;if(c&&r){var m=o&&typeof o.as=="string"?o.as:"script",p='link[rel="modulepreload"][as="'+Nn(m)+'"][href="'+Nn(r)+'"]',T=p;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Sa(r)}if(!Hn.has(T)&&(r=h({rel:"modulepreload",href:r},o),Hn.set(T,r),c.querySelector(p)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Xo(T)))return}m=c.createElement("link"),qe(m,"link",r),Be(m),c.head.appendChild(m)}}}function PD(r,o,c){Wi.S(r,o,c);var m=ya;if(m&&r){var p=Fr(m).hoistableStyles,T=va(r);o=o||"default";var C=p.get(T);if(!C){var w={loading:0,preload:null};if(C=m.querySelector(qo(T)))w.loading=5;else{r=h({rel:"stylesheet",href:r,"data-precedence":o},c),(c=Hn.get(T))&&um(r,c);var N=C=m.createElement("link");Be(N),qe(N,"link",r),N._p=new Promise(function(Y,rt){N.onload=Y,N.onerror=rt}),N.addEventListener("load",function(){w.loading|=1}),N.addEventListener("error",function(){w.loading|=2}),w.loading|=4,cc(C,o,m)}C={type:"stylesheet",instance:C,count:1,state:w},p.set(T,C)}}}function kD(r,o){Wi.X(r,o);var c=ya;if(c&&r){var m=Fr(c).hoistableScripts,p=Sa(r),T=m.get(p);T||(T=c.querySelector(Xo(p)),T||(r=h({src:r,async:!0},o),(o=Hn.get(p))&&cm(r,o),T=c.createElement("script"),Be(T),qe(T,"link",r),c.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(p,T))}}function ND(r,o){Wi.M(r,o);var c=ya;if(c&&r){var m=Fr(c).hoistableScripts,p=Sa(r),T=m.get(p);T||(T=c.querySelector(Xo(p)),T||(r=h({src:r,async:!0,type:"module"},o),(o=Hn.get(p))&&cm(r,o),T=c.createElement("script"),Be(T),qe(T,"link",r),c.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(p,T))}}function AT(r,o,c,m){var p=(p=ht.current)?uc(p):null;if(!p)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=va(c.href),c=Fr(p).hoistableStyles,m=c.get(o),m||(m={type:"style",instance:null,count:0,state:null},c.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=va(c.href);var T=Fr(p).hoistableStyles,C=T.get(r);if(C||(p=p.ownerDocument||p,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(r,C),(T=p.querySelector(qo(r)))&&!T._p&&(C.instance=T,C.state.loading=5),Hn.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Hn.set(r,c),T||BD(p,r,c,C.state))),o&&m===null)throw Error(n(528,""));return C}if(o&&m!==null)throw Error(n(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Sa(c),c=Fr(p).hoistableScripts,m=c.get(o),m||(m={type:"script",instance:null,count:0,state:null},c.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function va(r){return'href="'+Nn(r)+'"'}function qo(r){return'link[rel="stylesheet"]['+r+"]"}function RT(r){return h({},r,{"data-precedence":r.precedence,precedence:null})}function BD(r,o,c,m){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=r.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),qe(o,"link",c),Be(o),r.head.appendChild(o))}function Sa(r){return'[src="'+Nn(r)+'"]'}function Xo(r){return"script[async]"+r}function LT(r,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var m=r.querySelector('style[data-href~="'+Nn(c.href)+'"]');if(m)return o.instance=m,Be(m),m;var p=h({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return m=(r.ownerDocument||r).createElement("style"),Be(m),qe(m,"style",p),cc(m,c.precedence,r),o.instance=m;case"stylesheet":p=va(c.href);var T=r.querySelector(qo(p));if(T)return o.state.loading|=4,o.instance=T,Be(T),T;m=RT(c),(p=Hn.get(p))&&um(m,p),T=(r.ownerDocument||r).createElement("link"),Be(T);var C=T;return C._p=new Promise(function(w,N){C.onload=w,C.onerror=N}),qe(T,"link",m),o.state.loading|=4,cc(T,c.precedence,r),o.instance=T;case"script":return T=Sa(c.src),(p=r.querySelector(Xo(T)))?(o.instance=p,Be(p),p):(m=c,(p=Hn.get(T))&&(m=h({},c),cm(m,p)),r=r.ownerDocument||r,p=r.createElement("script"),Be(p),qe(p,"link",m),r.head.appendChild(p),o.instance=p);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,cc(m,c.precedence,r));return o.instance}function cc(r,o,c){for(var m=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=m.length?m[m.length-1]:null,T=p,C=0;C<m.length;C++){var w=m[C];if(w.dataset.precedence===o)T=w;else if(T!==p)break}T?T.parentNode.insertBefore(r,T.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(r,o.firstChild))}function um(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function cm(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var fc=null;function CT(r,o,c){if(fc===null){var m=new Map,p=fc=new Map;p.set(c,m)}else p=fc,m=p.get(c),m||(m=new Map,p.set(c,m));if(m.has(r))return m;for(m.set(r,null),c=c.getElementsByTagName(r),p=0;p<c.length;p++){var T=c[p];if(!(T[oo]||T[Je]||r==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var C=T.getAttribute(o)||"";C=r+C;var w=m.get(C);w?w.push(T):m.set(C,[T])}}return m}function _T(r,o,c){r=r.ownerDocument||r,r.head.insertBefore(c,o==="title"?r.querySelector("head > title"):null)}function FD(r,o,c){if(c===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function DT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Wo=null;function UD(){}function $D(r,o,c){if(Wo===null)throw Error(n(475));var m=Wo;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=va(c.href),T=r.querySelector(qo(p));if(T){r=T._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(m.count++,m=dc.bind(m),r.then(m,m)),o.state.loading|=4,o.instance=T,Be(T);return}T=r.ownerDocument||r,c=RT(c),(p=Hn.get(p))&&um(c,p),T=T.createElement("link"),Be(T);var C=T;C._p=new Promise(function(w,N){C.onload=w,C.onerror=N}),qe(T,"link",c),o.instance=T}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(m.count++,o=dc.bind(m),r.addEventListener("load",o),r.addEventListener("error",o))}}function VD(){if(Wo===null)throw Error(n(475));var r=Wo;return r.stylesheets&&r.count===0&&fm(r,r.stylesheets),0<r.count?function(o){var c=setTimeout(function(){if(r.stylesheets&&fm(r,r.stylesheets),r.unsuspend){var m=r.unsuspend;r.unsuspend=null,m()}},6e4);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(c)}}:null}function dc(){if(this.count--,this.count===0){if(this.stylesheets)fm(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var hc=null;function fm(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,hc=new Map,o.forEach(GD,r),hc=null,dc.call(r))}function GD(r,o){if(!(o.state.loading&4)){var c=hc.get(r);if(c)var m=c.get(null);else{c=new Map,hc.set(r,c);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<p.length;T++){var C=p[T];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(c.set(C.dataset.precedence,C),m=C)}m&&c.set(null,m)}p=o.instance,C=p.getAttribute("data-precedence"),T=c.get(C)||m,T===m&&c.set(null,p),c.set(C,p),this.count++,m=dc.bind(this),p.addEventListener("load",m),p.addEventListener("error",m),T?T.parentNode.insertBefore(p,T.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),o.state.loading|=4}}var Qo={$$typeof:L,Provider:null,Consumer:null,_currentValue:et,_currentValue2:et,_threadCount:0};function HD(r,o,c,m,p,T,C,w){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=od(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=od(0),this.hiddenUpdates=od(null),this.identifierPrefix=m,this.onUncaughtError=p,this.onCaughtError=T,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function IT(r,o,c,m,p,T,C,w,N,Y,rt,ut){return r=new HD(r,o,c,C,w,N,Y,ut),o=1,T===!0&&(o|=24),T=xn(3,null,null,o),r.current=T,T.stateNode=r,o=zd(),o.refCount++,r.pooledCache=o,o.refCount++,T.memoizedState={element:m,isDehydrated:c,cache:o},Wd(T),r}function wT(r){return r?(r=Wr,r):Wr}function OT(r,o,c,m,p,T){p=wT(p),m.context===null?m.context=p:m.pendingContext=p,m=vs(o),m.payload={element:c},T=T===void 0?null:T,T!==null&&(m.callback=T),c=Ss(r,m,o),c!==null&&(Cn(c,r,o),Co(c,r,o))}function MT(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<o?c:o}}function dm(r,o){MT(r,o),(r=r.alternate)&&MT(r,o)}function PT(r){if(r.tag===13){var o=Xr(r,67108864);o!==null&&Cn(o,r,67108864),dm(r,67108864)}}var mc=!0;function jD(r,o,c,m){var p=B.T;B.T=null;var T=H.p;try{H.p=2,hm(r,o,c,m)}finally{H.p=T,B.T=p}}function KD(r,o,c,m){var p=B.T;B.T=null;var T=H.p;try{H.p=8,hm(r,o,c,m)}finally{H.p=T,B.T=p}}function hm(r,o,c,m){if(mc){var p=mm(m);if(p===null)tm(r,o,m,gc,c),NT(r,m);else if(YD(p,r,o,c,m))m.stopPropagation();else if(NT(r,m),o&4&&-1<zD.indexOf(r)){for(;p!==null;){var T=Br(p);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var C=Qs(T.pendingLanes);if(C!==0){var w=T;for(w.pendingLanes|=2,w.entangledLanes|=2;C;){var N=1<<31-Ze(C);w.entanglements[1]|=N,C&=~N}pi(T),(qt&6)===0&&(Zu=Ut()+500,jo(0))}}break;case 13:w=Xr(T,2),w!==null&&Cn(w,T,2),tc(),dm(T,2)}if(T=mm(m),T===null&&tm(r,o,m,gc,c),T===p)break;p=T}p!==null&&m.stopPropagation()}else tm(r,o,m,null,c)}}function mm(r){return r=Sd(r),gm(r)}var gc=null;function gm(r){if(gc=null,r=Nr(r),r!==null){var o=a(r);if(o===null)r=null;else{var c=o.tag;if(c===13){if(r=l(o),r!==null)return r;r=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return gc=r,null}function kT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ce()){case Pn:return 2;case Ke:return 8;case Tn:case bt:return 32;case so:return 268435456;default:return 32}default:return 32}}var pm=!1,Os=null,Ms=null,Ps=null,Zo=new Map,Jo=new Map,ks=[],zD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function NT(r,o){switch(r){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":Ms=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":Zo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jo.delete(o.pointerId)}}function tl(r,o,c,m,p,T){return r===null||r.nativeEvent!==T?(r={blockedOn:o,domEventName:c,eventSystemFlags:m,nativeEvent:T,targetContainers:[p]},o!==null&&(o=Br(o),o!==null&&PT(o)),r):(r.eventSystemFlags|=m,o=r.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),r)}function YD(r,o,c,m,p){switch(o){case"focusin":return Os=tl(Os,r,o,c,m,p),!0;case"dragenter":return Ms=tl(Ms,r,o,c,m,p),!0;case"mouseover":return Ps=tl(Ps,r,o,c,m,p),!0;case"pointerover":var T=p.pointerId;return Zo.set(T,tl(Zo.get(T)||null,r,o,c,m,p)),!0;case"gotpointercapture":return T=p.pointerId,Jo.set(T,tl(Jo.get(T)||null,r,o,c,m,p)),!0}return!1}function BT(r){var o=Nr(r.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){r.blockedOn=o,$C(r.priority,function(){if(c.tag===13){var m=Ln();m=ld(m);var p=Xr(c,m);p!==null&&Cn(p,c,m),dm(c,m)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function pc(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var c=mm(r.nativeEvent);if(c===null){c=r.nativeEvent;var m=new c.constructor(c.type,c);vd=m,c.target.dispatchEvent(m),vd=null}else return o=Br(c),o!==null&&PT(o),r.blockedOn=c,!1;o.shift()}return!0}function FT(r,o,c){pc(r)&&c.delete(o)}function qD(){pm=!1,Os!==null&&pc(Os)&&(Os=null),Ms!==null&&pc(Ms)&&(Ms=null),Ps!==null&&pc(Ps)&&(Ps=null),Zo.forEach(FT),Jo.forEach(FT)}function yc(r,o){r.blockedOn===o&&(r.blockedOn=null,pm||(pm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,qD)))}var vc=null;function UT(r){vc!==r&&(vc=r,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){vc===r&&(vc=null);for(var o=0;o<r.length;o+=3){var c=r[o],m=r[o+1],p=r[o+2];if(typeof m!="function"){if(gm(m||c)===null)continue;break}var T=Br(c);T!==null&&(r.splice(o,3),o-=3,gh(T,{pending:!0,data:p,method:c.method,action:m},m,p))}}))}function el(r){function o(N){return yc(N,r)}Os!==null&&yc(Os,r),Ms!==null&&yc(Ms,r),Ps!==null&&yc(Ps,r),Zo.forEach(o),Jo.forEach(o);for(var c=0;c<ks.length;c++){var m=ks[c];m.blockedOn===r&&(m.blockedOn=null)}for(;0<ks.length&&(c=ks[0],c.blockedOn===null);)BT(c),c.blockedOn===null&&ks.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(m=0;m<c.length;m+=3){var p=c[m],T=c[m+1],C=p[un]||null;if(typeof T=="function")C||UT(c);else if(C){var w=null;if(T&&T.hasAttribute("formAction")){if(p=T,C=T[un]||null)w=C.formAction;else if(gm(p)!==null)continue}else w=C.action;typeof w=="function"?c[m+1]=w:(c.splice(m,3),m-=3),UT(c)}}}function ym(r){this._internalRoot=r}Sc.prototype.render=ym.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(n(409));var c=o.current,m=Ln();OT(c,m,r,o,null,null)},Sc.prototype.unmount=ym.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;OT(r.current,2,null,r,null,null),tc(),o[kr]=null}};function Sc(r){this._internalRoot=r}Sc.prototype.unstable_scheduleHydration=function(r){if(r){var o=ny();r={blockedOn:null,target:r,priority:o};for(var c=0;c<ks.length&&o!==0&&o<ks[c].priority;c++);ks.splice(c,0,r),c===0&&BT(r)}};var $T=t.version;if($T!=="19.1.0")throw Error(n(527,$T,"19.1.0"));H.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=d(o),r=r!==null?f(r):null,r=r===null?null:r.stateNode,r};var XD={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tc.isDisabled&&Tc.supportsFiber)try{ei=Tc.inject(XD),Qe=Tc}catch{}}return il.createRoot=function(r,o){if(!s(r))throw Error(n(299));var c=!1,m="",p=nS,T=iS,C=sS,w=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(w=o.unstable_transitionCallbacks)),o=IT(r,1,!1,null,null,c,m,p,T,C,w,null),r[kr]=o.current,Jh(r),new ym(o)},il.hydrateRoot=function(r,o,c){if(!s(r))throw Error(n(299));var m=!1,p="",T=nS,C=iS,w=sS,N=null,Y=null;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(T=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(w=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(N=c.unstable_transitionCallbacks),c.formState!==void 0&&(Y=c.formState)),o=IT(r,1,!0,o,c??null,m,p,T,C,w,N,Y),o.context=wT(null),c=o.current,m=Ln(),m=ld(m),p=vs(m),p.callback=null,Ss(c,p,m),c=m,o.current.lanes=c,ao(o,c),pi(o),r[kr]=o.current,Jh(r),new Sc(o)},il.version="19.1.0",il}var WT;function rI(){if(WT)return Sm.exports;WT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Sm.exports=sI(),Sm.exports}var aI=rI(),V=Lp();const Wn=IA(V),vg=QD({__proto__:null,default:Wn},[V]);function qs(i,t,e=void 0){const n={};for(const s in i){const a=i[s];let l="",u=!0;for(let d=0;d<a.length;d+=1){const f=a[d];f&&(l+=(u===!0?"":" ")+t(f),u=!1,e&&e[f]&&(l+=" "+e[f]))}n[s]=l}return n}const oI=typeof window<"u"?V.useLayoutEffect:V.useEffect;function Rr(i){const t=V.useRef(i);return oI(()=>{t.current=i}),V.useRef((...e)=>(0,t.current)(...e)).current}const QT={};function OA(i,t){const e=V.useRef(QT);return e.current===QT&&(e.current=i(t)),e}const lI=[];function uI(i){V.useEffect(i,lI)}class Cp{static create(){return new Cp}currentId=null;start(t,e){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,e()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function _p(){const i=OA(Cp.create).current;return uI(i.disposeEffect),i}function Sg(i,t=[]){if(i===void 0)return{};const e={};return Object.keys(i).filter(n=>n.match(/^on[A-Z]/)&&typeof i[n]=="function"&&!t.includes(n)).forEach(n=>{e[n]=i[n]}),e}function cI(i={}){const{autoHideDuration:t=null,disableWindowBlurListener:e=!1,onClose:n,open:s,resumeHideDuration:a}=i,l=_p();V.useEffect(()=>{if(!s)return;function b(D){D.defaultPrevented||D.key==="Escape"&&n?.(D,"escapeKeyDown")}return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[s,n]);const u=Rr((b,D)=>{n?.(b,D)}),d=Rr(b=>{!n||b==null||l.start(b,()=>{u(null,"timeout")})});V.useEffect(()=>(s&&d(t),l.clear),[s,t,d,l]);const f=b=>{n?.(b,"clickaway")},h=l.clear,g=V.useCallback(()=>{t!=null&&d(a??t*.5)},[t,a,d]),y=b=>D=>{const L=b.onBlur;L?.(D),g()},S=b=>D=>{const L=b.onFocus;L?.(D),h()},v=b=>D=>{const L=b.onMouseEnter;L?.(D),h()},E=b=>D=>{const L=b.onMouseLeave;L?.(D),g()};return V.useEffect(()=>{if(!e&&s)return window.addEventListener("focus",g),window.addEventListener("blur",h),()=>{window.removeEventListener("focus",g),window.removeEventListener("blur",h)}},[e,s,g,h]),{getRootProps:(b={})=>{const D={...Sg(i),...Sg(b)};return{role:"presentation",...b,...D,onBlur:y(D),onFocus:S(D),onMouseEnter:v(D),onMouseLeave:E(D)}},onClickAway:f}}function Am(i){return i&&i.ownerDocument||document}function Rl(...i){const t=V.useRef(void 0),e=V.useCallback(n=>{const s=i.map(a=>{if(a==null)return null;if(typeof a=="function"){const l=a,u=l(n);return typeof u=="function"?u:()=>{l(null)}}return a.current=n,()=>{a.current=null}});return()=>{s.forEach(a=>a?.())}},i);return V.useMemo(()=>i.every(n=>n==null)?null:n=>{t.current&&(t.current(),t.current=void 0),n!=null&&(t.current=e(n))},i)}function MA(i){return parseInt(V.version,10)>=19?i?.props?.ref||null:i?.ref||null}function ZT(i){return i.substring(2).toLowerCase()}function fI(i,t){return t.documentElement.clientWidth<i.clientX||t.documentElement.clientHeight<i.clientY}function dI(i){const{children:t,disableReactTree:e=!1,mouseEvent:n="onClick",onClickAway:s,touchEvent:a="onTouchEnd"}=i,l=V.useRef(!1),u=V.useRef(null),d=V.useRef(!1),f=V.useRef(!1);V.useEffect(()=>(setTimeout(()=>{d.current=!0},0),()=>{d.current=!1}),[]);const h=Rl(MA(t),u),g=Rr(v=>{const E=f.current;f.current=!1;const x=Am(u.current);if(!d.current||!u.current||"clientX"in v&&fI(v,x))return;if(l.current){l.current=!1;return}let b;v.composedPath?b=v.composedPath().includes(u.current):b=!x.documentElement.contains(v.target)||u.current.contains(v.target),!b&&(e||!E)&&s(v)}),y=v=>E=>{f.current=!0;const x=t.props[v];x&&x(E)},S={ref:h};return a!==!1&&(S[a]=y(a)),V.useEffect(()=>{if(a!==!1){const v=ZT(a),E=Am(u.current),x=()=>{l.current=!0};return E.addEventListener(v,g),E.addEventListener("touchmove",x),()=>{E.removeEventListener(v,g),E.removeEventListener("touchmove",x)}}},[g,a]),n!==!1&&(S[n]=y(n)),V.useEffect(()=>{if(n!==!1){const v=ZT(n),E=Am(u.current);return E.addEventListener(v,g),()=>{E.removeEventListener(v,g)}}},[g,n]),V.cloneElement(t,S)}function Ir(i,...t){const e=new URL(`https://mui.com/production-error/?code=${i}`);return t.forEach(n=>e.searchParams.append("args[]",n)),`Minified MUI error #${i}; visit ${e} for the full message.`}function he(i){if(typeof i!="string")throw new Error(Ir(7));return i.charAt(0).toUpperCase()+i.slice(1)}var Rm={exports:{}},te={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT;function hI(){if(JT)return te;JT=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),S=Symbol.for("react.client.reference");function v(E){if(typeof E=="object"&&E!==null){var x=E.$$typeof;switch(x){case i:switch(E=E.type,E){case e:case s:case n:case d:case f:case y:return E;default:switch(E=E&&E.$$typeof,E){case l:case u:case g:case h:return E;case a:return E;default:return x}}case t:return x}}}return te.ContextConsumer=a,te.ContextProvider=l,te.Element=i,te.ForwardRef=u,te.Fragment=e,te.Lazy=g,te.Memo=h,te.Portal=t,te.Profiler=s,te.StrictMode=n,te.Suspense=d,te.SuspenseList=f,te.isContextConsumer=function(E){return v(E)===a},te.isContextProvider=function(E){return v(E)===l},te.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===i},te.isForwardRef=function(E){return v(E)===u},te.isFragment=function(E){return v(E)===e},te.isLazy=function(E){return v(E)===g},te.isMemo=function(E){return v(E)===h},te.isPortal=function(E){return v(E)===t},te.isProfiler=function(E){return v(E)===s},te.isStrictMode=function(E){return v(E)===n},te.isSuspense=function(E){return v(E)===d},te.isSuspenseList=function(E){return v(E)===f},te.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===e||E===s||E===n||E===d||E===f||typeof E=="object"&&E!==null&&(E.$$typeof===g||E.$$typeof===h||E.$$typeof===l||E.$$typeof===a||E.$$typeof===u||E.$$typeof===S||E.getModuleId!==void 0)},te.typeOf=v,te}var tE;function mI(){return tE||(tE=1,Rm.exports=hI()),Rm.exports}var PA=mI();function ss(i){if(typeof i!="object"||i===null)return!1;const t=Object.getPrototypeOf(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)}function kA(i){if(V.isValidElement(i)||PA.isValidElementType(i)||!ss(i))return i;const t={};return Object.keys(i).forEach(e=>{t[e]=kA(i[e])}),t}function wn(i,t,e={clone:!0}){const n=e.clone?{...i}:i;return ss(i)&&ss(t)&&Object.keys(t).forEach(s=>{V.isValidElement(t[s])||PA.isValidElementType(t[s])?n[s]=t[s]:ss(t[s])&&Object.prototype.hasOwnProperty.call(i,s)&&ss(i[s])?n[s]=wn(i[s],t[s],e):e.clone?n[s]=ss(t[s])?kA(t[s]):t[s]:n[s]=t[s]}),n}function pl(i,t){return t?wn(i,t,{clone:!1}):i}function gI(i,t){if(!i.containerQueries)return t;const e=Object.keys(t).filter(n=>n.startsWith("@container")).sort((n,s)=>{const a=/min-width:\s*([0-9.]+)/;return+(n.match(a)?.[1]||0)-+(s.match(a)?.[1]||0)});return e.length?e.reduce((n,s)=>{const a=t[s];return delete n[s],n[s]=a,n},{...t}):t}function pI(i,t){return t==="@"||t.startsWith("@")&&(i.some(e=>t.startsWith(`@${e}`))||!!t.match(/^@\d/))}function yI(i,t){const e=t.match(/^@([^/]+)?\/?(.+)?$/);if(!e)return null;const[,n,s]=e,a=Number.isNaN(+n)?n||0:+n;return i.containerQueries(s).up(a)}function vI(i){const t=(a,l)=>a.replace("@media",l?`@container ${l}`:"@container");function e(a,l){a.up=(...u)=>t(i.breakpoints.up(...u),l),a.down=(...u)=>t(i.breakpoints.down(...u),l),a.between=(...u)=>t(i.breakpoints.between(...u),l),a.only=(...u)=>t(i.breakpoints.only(...u),l),a.not=(...u)=>{const d=t(i.breakpoints.not(...u),l);return d.includes("not all and")?d.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):d}}const n={},s=a=>(e(n,a),n);return e(s),{...i,containerQueries:s}}const Pf={xs:0,sm:600,md:900,lg:1200,xl:1536},eE={keys:["xs","sm","md","lg","xl"],up:i=>`@media (min-width:${Pf[i]}px)`},SI={containerQueries:i=>({up:t=>{let e=typeof t=="number"?t:Pf[t]||t;return typeof e=="number"&&(e=`${e}px`),i?`@container ${i} (min-width:${e})`:`@container (min-width:${e})`}})};function rs(i,t,e){const n=i.theme||{};if(Array.isArray(t)){const a=n.breakpoints||eE;return t.reduce((l,u,d)=>(l[a.up(a.keys[d])]=e(t[d]),l),{})}if(typeof t=="object"){const a=n.breakpoints||eE;return Object.keys(t).reduce((l,u)=>{if(pI(a.keys,u)){const d=yI(n.containerQueries?n:SI,u);d&&(l[d]=e(t[u],u))}else if(Object.keys(a.values||Pf).includes(u)){const d=a.up(u);l[d]=e(t[u],u)}else{const d=u;l[d]=t[d]}return l},{})}return e(t)}function TI(i={}){return i.keys?.reduce((e,n)=>{const s=i.up(n);return e[s]={},e},{})||{}}function EI(i,t){return i.reduce((e,n)=>{const s=e[n];return(!s||Object.keys(s).length===0)&&delete e[n],e},t)}function kf(i,t,e=!0){if(!t||typeof t!="string")return null;if(i&&i.vars&&e){const n=`vars.${t}`.split(".").reduce((s,a)=>s&&s[a]?s[a]:null,i);if(n!=null)return n}return t.split(".").reduce((n,s)=>n&&n[s]!=null?n[s]:null,i)}function ff(i,t,e,n=e){let s;return typeof i=="function"?s=i(e):Array.isArray(i)?s=i[e]||n:s=kf(i,e)||n,t&&(s=t(s,n,i)),s}function Le(i){const{prop:t,cssProperty:e=i.prop,themeKey:n,transform:s}=i,a=l=>{if(l[t]==null)return null;const u=l[t],d=l.theme,f=kf(d,n)||{};return rs(l,u,g=>{let y=ff(f,s,g);return g===y&&typeof g=="string"&&(y=ff(f,s,`${t}${g==="default"?"":he(g)}`,g)),e===!1?y:{[e]:y}})};return a.propTypes={},a.filterProps=[t],a}function xI(i){const t={};return e=>(t[e]===void 0&&(t[e]=i(e)),t[e])}const bI={m:"margin",p:"padding"},AI={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},nE={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},RI=xI(i=>{if(i.length>2)if(nE[i])i=nE[i];else return[i];const[t,e]=i.split(""),n=bI[t],s=AI[e]||"";return Array.isArray(s)?s.map(a=>n+a):[n+s]}),Dp=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Ip=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Dp,...Ip];function Xl(i,t,e,n){const s=kf(i,t,!0)??e;return typeof s=="number"||typeof s=="string"?a=>typeof a=="string"?a:typeof s=="string"?s.startsWith("var(")&&a===0?0:s.startsWith("var(")&&a===1?s:`calc(${a} * ${s})`:s*a:Array.isArray(s)?a=>{if(typeof a=="string")return a;const l=Math.abs(a),u=s[l];return a>=0?u:typeof u=="number"?-u:typeof u=="string"&&u.startsWith("var(")?`calc(-1 * ${u})`:`-${u}`}:typeof s=="function"?s:()=>{}}function wp(i){return Xl(i,"spacing",8)}function Wl(i,t){return typeof t=="string"||t==null?t:i(t)}function LI(i,t){return e=>i.reduce((n,s)=>(n[s]=Wl(t,e),n),{})}function CI(i,t,e,n){if(!t.includes(e))return null;const s=RI(e),a=LI(s,n),l=i[e];return rs(i,l,a)}function NA(i,t){const e=wp(i.theme);return Object.keys(i).map(n=>CI(i,t,n,e)).reduce(pl,{})}function ye(i){return NA(i,Dp)}ye.propTypes={};ye.filterProps=Dp;function ve(i){return NA(i,Ip)}ve.propTypes={};ve.filterProps=Ip;function Nf(...i){const t=i.reduce((n,s)=>(s.filterProps.forEach(a=>{n[a]=s}),n),{}),e=n=>Object.keys(n).reduce((s,a)=>t[a]?pl(s,t[a](n)):s,{});return e.propTypes={},e.filterProps=i.reduce((n,s)=>n.concat(s.filterProps),[]),e}function Xn(i){return typeof i!="number"?i:`${i}px solid`}function ti(i,t){return Le({prop:i,themeKey:"borders",transform:t})}const _I=ti("border",Xn),DI=ti("borderTop",Xn),II=ti("borderRight",Xn),wI=ti("borderBottom",Xn),OI=ti("borderLeft",Xn),MI=ti("borderColor"),PI=ti("borderTopColor"),kI=ti("borderRightColor"),NI=ti("borderBottomColor"),BI=ti("borderLeftColor"),FI=ti("outline",Xn),UI=ti("outlineColor"),Bf=i=>{if(i.borderRadius!==void 0&&i.borderRadius!==null){const t=Xl(i.theme,"shape.borderRadius",4),e=n=>({borderRadius:Wl(t,n)});return rs(i,i.borderRadius,e)}return null};Bf.propTypes={};Bf.filterProps=["borderRadius"];Nf(_I,DI,II,wI,OI,MI,PI,kI,NI,BI,Bf,FI,UI);const Ff=i=>{if(i.gap!==void 0&&i.gap!==null){const t=Xl(i.theme,"spacing",8),e=n=>({gap:Wl(t,n)});return rs(i,i.gap,e)}return null};Ff.propTypes={};Ff.filterProps=["gap"];const Uf=i=>{if(i.columnGap!==void 0&&i.columnGap!==null){const t=Xl(i.theme,"spacing",8),e=n=>({columnGap:Wl(t,n)});return rs(i,i.columnGap,e)}return null};Uf.propTypes={};Uf.filterProps=["columnGap"];const $f=i=>{if(i.rowGap!==void 0&&i.rowGap!==null){const t=Xl(i.theme,"spacing",8),e=n=>({rowGap:Wl(t,n)});return rs(i,i.rowGap,e)}return null};$f.propTypes={};$f.filterProps=["rowGap"];const $I=Le({prop:"gridColumn"}),VI=Le({prop:"gridRow"}),GI=Le({prop:"gridAutoFlow"}),HI=Le({prop:"gridAutoColumns"}),jI=Le({prop:"gridAutoRows"}),KI=Le({prop:"gridTemplateColumns"}),zI=Le({prop:"gridTemplateRows"}),YI=Le({prop:"gridTemplateAreas"}),qI=Le({prop:"gridArea"});Nf(Ff,Uf,$f,$I,VI,GI,HI,jI,KI,zI,YI,qI);function Ua(i,t){return t==="grey"?t:i}const XI=Le({prop:"color",themeKey:"palette",transform:Ua}),WI=Le({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Ua}),QI=Le({prop:"backgroundColor",themeKey:"palette",transform:Ua});Nf(XI,WI,QI);function Dn(i){return i<=1&&i!==0?`${i*100}%`:i}const ZI=Le({prop:"width",transform:Dn}),Op=i=>{if(i.maxWidth!==void 0&&i.maxWidth!==null){const t=e=>{const n=i.theme?.breakpoints?.values?.[e]||Pf[e];return n?i.theme?.breakpoints?.unit!=="px"?{maxWidth:`${n}${i.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:Dn(e)}};return rs(i,i.maxWidth,t)}return null};Op.filterProps=["maxWidth"];const JI=Le({prop:"minWidth",transform:Dn}),tw=Le({prop:"height",transform:Dn}),ew=Le({prop:"maxHeight",transform:Dn}),nw=Le({prop:"minHeight",transform:Dn});Le({prop:"size",cssProperty:"width",transform:Dn});Le({prop:"size",cssProperty:"height",transform:Dn});const iw=Le({prop:"boxSizing"});Nf(ZI,Op,JI,tw,ew,nw,iw);const Vf={border:{themeKey:"borders",transform:Xn},borderTop:{themeKey:"borders",transform:Xn},borderRight:{themeKey:"borders",transform:Xn},borderBottom:{themeKey:"borders",transform:Xn},borderLeft:{themeKey:"borders",transform:Xn},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Xn},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Bf},color:{themeKey:"palette",transform:Ua},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Ua},backgroundColor:{themeKey:"palette",transform:Ua},p:{style:ve},pt:{style:ve},pr:{style:ve},pb:{style:ve},pl:{style:ve},px:{style:ve},py:{style:ve},padding:{style:ve},paddingTop:{style:ve},paddingRight:{style:ve},paddingBottom:{style:ve},paddingLeft:{style:ve},paddingX:{style:ve},paddingY:{style:ve},paddingInline:{style:ve},paddingInlineStart:{style:ve},paddingInlineEnd:{style:ve},paddingBlock:{style:ve},paddingBlockStart:{style:ve},paddingBlockEnd:{style:ve},m:{style:ye},mt:{style:ye},mr:{style:ye},mb:{style:ye},ml:{style:ye},mx:{style:ye},my:{style:ye},margin:{style:ye},marginTop:{style:ye},marginRight:{style:ye},marginBottom:{style:ye},marginLeft:{style:ye},marginX:{style:ye},marginY:{style:ye},marginInline:{style:ye},marginInlineStart:{style:ye},marginInlineEnd:{style:ye},marginBlock:{style:ye},marginBlockStart:{style:ye},marginBlockEnd:{style:ye},displayPrint:{cssProperty:!1,transform:i=>({"@media print":{display:i}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Ff},rowGap:{style:$f},columnGap:{style:Uf},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Dn},maxWidth:{style:Op},minWidth:{transform:Dn},height:{transform:Dn},maxHeight:{transform:Dn},minHeight:{transform:Dn},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function sw(...i){const t=i.reduce((n,s)=>n.concat(Object.keys(s)),[]),e=new Set(t);return i.every(n=>e.size===Object.keys(n).length)}function rw(i,t){return typeof i=="function"?i(t):i}function aw(){function i(e,n,s,a){const l={[e]:n,theme:s},u=a[e];if(!u)return{[e]:n};const{cssProperty:d=e,themeKey:f,transform:h,style:g}=u;if(n==null)return null;if(f==="typography"&&n==="inherit")return{[e]:n};const y=kf(s,f)||{};return g?g(l):rs(l,n,v=>{let E=ff(y,h,v);return v===E&&typeof v=="string"&&(E=ff(y,h,`${e}${v==="default"?"":he(v)}`,v)),d===!1?E:{[d]:E}})}function t(e){const{sx:n,theme:s={}}=e||{};if(!n)return null;const a=s.unstable_sxConfig??Vf;function l(u){let d=u;if(typeof u=="function")d=u(s);else if(typeof u!="object")return u;if(!d)return null;const f=TI(s.breakpoints),h=Object.keys(f);let g=f;return Object.keys(d).forEach(y=>{const S=rw(d[y],s);if(S!=null)if(typeof S=="object")if(a[y])g=pl(g,i(y,S,s,a));else{const v=rs({theme:s},S,E=>({[y]:E}));sw(v,S)?g[y]=t({sx:S,theme:s}):g=pl(g,v)}else g=pl(g,i(y,S,s,a))}),gI(s,EI(h,g))}return Array.isArray(n)?n.map(l):l(n)}return t}const Ka=aw();Ka.filterProps=["sx"];function df(){return df=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)({}).hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},df.apply(null,arguments)}function ow(i){if(i.sheet)return i.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===i)return document.styleSheets[t]}function lw(i){var t=document.createElement("style");return t.setAttribute("data-emotion",i.key),i.nonce!==void 0&&t.setAttribute("nonce",i.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var uw=function(){function i(e){var n=this;this._insertTag=function(s){var a;n.tags.length===0?n.insertionPoint?a=n.insertionPoint.nextSibling:n.prepend?a=n.container.firstChild:a=n.before:a=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(s,a),n.tags.push(s)},this.isSpeedy=e.speedy===void 0?!0:e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=i.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(lw(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var a=ow(s);try{a.insertRule(n,a.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var s;return(s=n.parentNode)==null?void 0:s.removeChild(n)}),this.tags=[],this.ctr=0},i}(),nn="-ms-",hf="-moz-",Ht="-webkit-",BA="comm",Mp="rule",Pp="decl",cw="@import",FA="@keyframes",fw="@layer",dw=Math.abs,Gf=String.fromCharCode,hw=Object.assign;function mw(i,t){return We(i,0)^45?(((t<<2^We(i,0))<<2^We(i,1))<<2^We(i,2))<<2^We(i,3):0}function UA(i){return i.trim()}function gw(i,t){return(i=t.exec(i))?i[0]:i}function jt(i,t,e){return i.replace(t,e)}function Tg(i,t){return i.indexOf(t)}function We(i,t){return i.charCodeAt(t)|0}function Ll(i,t,e){return i.slice(t,e)}function xi(i){return i.length}function kp(i){return i.length}function Ec(i,t){return t.push(i),i}function pw(i,t){return i.map(t).join("")}var Hf=1,za=1,$A=0,Sn=0,we=0,Za="";function jf(i,t,e,n,s,a,l){return{value:i,root:t,parent:e,type:n,props:s,children:a,line:Hf,column:za,length:l,return:""}}function sl(i,t){return hw(jf("",null,null,"",null,null,0),i,{length:-i.length},t)}function yw(){return we}function vw(){return we=Sn>0?We(Za,--Sn):0,za--,we===10&&(za=1,Hf--),we}function On(){return we=Sn<$A?We(Za,Sn++):0,za++,we===10&&(za=1,Hf++),we}function Ii(){return We(Za,Sn)}function Kc(){return Sn}function Ql(i,t){return Ll(Za,i,t)}function Cl(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function VA(i){return Hf=za=1,$A=xi(Za=i),Sn=0,[]}function GA(i){return Za="",i}function zc(i){return UA(Ql(Sn-1,Eg(i===91?i+2:i===40?i+1:i)))}function Sw(i){for(;(we=Ii())&&we<33;)On();return Cl(i)>2||Cl(we)>3?"":" "}function Tw(i,t){for(;--t&&On()&&!(we<48||we>102||we>57&&we<65||we>70&&we<97););return Ql(i,Kc()+(t<6&&Ii()==32&&On()==32))}function Eg(i){for(;On();)switch(we){case i:return Sn;case 34:case 39:i!==34&&i!==39&&Eg(we);break;case 40:i===41&&Eg(i);break;case 92:On();break}return Sn}function Ew(i,t){for(;On()&&i+we!==57;)if(i+we===84&&Ii()===47)break;return"/*"+Ql(t,Sn-1)+"*"+Gf(i===47?i:On())}function xw(i){for(;!Cl(Ii());)On();return Ql(i,Sn)}function bw(i){return GA(Yc("",null,null,null,[""],i=VA(i),0,[0],i))}function Yc(i,t,e,n,s,a,l,u,d){for(var f=0,h=0,g=l,y=0,S=0,v=0,E=1,x=1,b=1,D=0,L="",I=s,_=a,P=n,M=L;x;)switch(v=D,D=On()){case 40:if(v!=108&&We(M,g-1)==58){Tg(M+=jt(zc(D),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:M+=zc(D);break;case 9:case 10:case 13:case 32:M+=Sw(v);break;case 92:M+=Tw(Kc()-1,7);continue;case 47:switch(Ii()){case 42:case 47:Ec(Aw(Ew(On(),Kc()),t,e),d);break;default:M+="/"}break;case 123*E:u[f++]=xi(M)*b;case 125*E:case 59:case 0:switch(D){case 0:case 125:x=0;case 59+h:b==-1&&(M=jt(M,/\f/g,"")),S>0&&xi(M)-g&&Ec(S>32?sE(M+";",n,e,g-1):sE(jt(M," ","")+";",n,e,g-2),d);break;case 59:M+=";";default:if(Ec(P=iE(M,t,e,f,h,s,u,L,I=[],_=[],g),a),D===123)if(h===0)Yc(M,t,P,P,I,a,g,u,_);else switch(y===99&&We(M,3)===110?100:y){case 100:case 108:case 109:case 115:Yc(i,P,P,n&&Ec(iE(i,P,P,0,0,s,u,L,s,I=[],g),_),s,_,g,u,n?I:_);break;default:Yc(M,P,P,P,[""],_,0,u,_)}}f=h=S=0,E=b=1,L=M="",g=l;break;case 58:g=1+xi(M),S=v;default:if(E<1){if(D==123)--E;else if(D==125&&E++==0&&vw()==125)continue}switch(M+=Gf(D),D*E){case 38:b=h>0?1:(M+="\f",-1);break;case 44:u[f++]=(xi(M)-1)*b,b=1;break;case 64:Ii()===45&&(M+=zc(On())),y=Ii(),h=g=xi(L=M+=xw(Kc())),D++;break;case 45:v===45&&xi(M)==2&&(E=0)}}return a}function iE(i,t,e,n,s,a,l,u,d,f,h){for(var g=s-1,y=s===0?a:[""],S=kp(y),v=0,E=0,x=0;v<n;++v)for(var b=0,D=Ll(i,g+1,g=dw(E=l[v])),L=i;b<S;++b)(L=UA(E>0?y[b]+" "+D:jt(D,/&\f/g,y[b])))&&(d[x++]=L);return jf(i,t,e,s===0?Mp:u,d,f,h)}function Aw(i,t,e){return jf(i,t,e,BA,Gf(yw()),Ll(i,2,-2),0)}function sE(i,t,e,n){return jf(i,t,e,Pp,Ll(i,0,n),Ll(i,n+1,-1),n)}function $a(i,t){for(var e="",n=kp(i),s=0;s<n;s++)e+=t(i[s],s,i,t)||"";return e}function Rw(i,t,e,n){switch(i.type){case fw:if(i.children.length)break;case cw:case Pp:return i.return=i.return||i.value;case BA:return"";case FA:return i.return=i.value+"{"+$a(i.children,n)+"}";case Mp:i.value=i.props.join(",")}return xi(e=$a(i.children,n))?i.return=i.value+"{"+e+"}":""}function Lw(i){var t=kp(i);return function(e,n,s,a){for(var l="",u=0;u<t;u++)l+=i[u](e,n,s,a)||"";return l}}function Cw(i){return function(t){t.root||(t=t.return)&&i(t)}}function HA(i){var t=Object.create(null);return function(e){return t[e]===void 0&&(t[e]=i(e)),t[e]}}var _w=function(t,e,n){for(var s=0,a=0;s=a,a=Ii(),s===38&&a===12&&(e[n]=1),!Cl(a);)On();return Ql(t,Sn)},Dw=function(t,e){var n=-1,s=44;do switch(Cl(s)){case 0:s===38&&Ii()===12&&(e[n]=1),t[n]+=_w(Sn-1,e,n);break;case 2:t[n]+=zc(s);break;case 4:if(s===44){t[++n]=Ii()===58?"&\f":"",e[n]=t[n].length;break}default:t[n]+=Gf(s)}while(s=On());return t},Iw=function(t,e){return GA(Dw(VA(t),e))},rE=new WeakMap,ww=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var e=t.value,n=t.parent,s=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&e.charCodeAt(0)!==58&&!rE.get(n))&&!s){rE.set(t,!0);for(var a=[],l=Iw(e,a),u=n.props,d=0,f=0;d<l.length;d++)for(var h=0;h<u.length;h++,f++)t.props[f]=a[d]?l[d].replace(/&\f/g,u[h]):u[h]+" "+l[d]}}},Ow=function(t){if(t.type==="decl"){var e=t.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(t.return="",t.value="")}};function jA(i,t){switch(mw(i,t)){case 5103:return Ht+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ht+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return Ht+i+hf+i+nn+i+i;case 6828:case 4268:return Ht+i+nn+i+i;case 6165:return Ht+i+nn+"flex-"+i+i;case 5187:return Ht+i+jt(i,/(\w+).+(:[^]+)/,Ht+"box-$1$2"+nn+"flex-$1$2")+i;case 5443:return Ht+i+nn+"flex-item-"+jt(i,/flex-|-self/,"")+i;case 4675:return Ht+i+nn+"flex-line-pack"+jt(i,/align-content|flex-|-self/,"")+i;case 5548:return Ht+i+nn+jt(i,"shrink","negative")+i;case 5292:return Ht+i+nn+jt(i,"basis","preferred-size")+i;case 6060:return Ht+"box-"+jt(i,"-grow","")+Ht+i+nn+jt(i,"grow","positive")+i;case 4554:return Ht+jt(i,/([^-])(transform)/g,"$1"+Ht+"$2")+i;case 6187:return jt(jt(jt(i,/(zoom-|grab)/,Ht+"$1"),/(image-set)/,Ht+"$1"),i,"")+i;case 5495:case 3959:return jt(i,/(image-set\([^]*)/,Ht+"$1$`$1");case 4968:return jt(jt(i,/(.+:)(flex-)?(.*)/,Ht+"box-pack:$3"+nn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ht+i+i;case 4095:case 3583:case 4068:case 2532:return jt(i,/(.+)-inline(.+)/,Ht+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(xi(i)-1-t>6)switch(We(i,t+1)){case 109:if(We(i,t+4)!==45)break;case 102:return jt(i,/(.+:)(.+)-([^]+)/,"$1"+Ht+"$2-$3$1"+hf+(We(i,t+3)==108?"$3":"$2-$3"))+i;case 115:return~Tg(i,"stretch")?jA(jt(i,"stretch","fill-available"),t)+i:i}break;case 4949:if(We(i,t+1)!==115)break;case 6444:switch(We(i,xi(i)-3-(~Tg(i,"!important")&&10))){case 107:return jt(i,":",":"+Ht)+i;case 101:return jt(i,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ht+(We(i,14)===45?"inline-":"")+"box$3$1"+Ht+"$2$3$1"+nn+"$2box$3")+i}break;case 5936:switch(We(i,t+11)){case 114:return Ht+i+nn+jt(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return Ht+i+nn+jt(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return Ht+i+nn+jt(i,/[svh]\w+-[tblr]{2}/,"lr")+i}return Ht+i+nn+i+i}return i}var Mw=function(t,e,n,s){if(t.length>-1&&!t.return)switch(t.type){case Pp:t.return=jA(t.value,t.length);break;case FA:return $a([sl(t,{value:jt(t.value,"@","@"+Ht)})],s);case Mp:if(t.length)return pw(t.props,function(a){switch(gw(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return $a([sl(t,{props:[jt(a,/:(read-\w+)/,":"+hf+"$1")]})],s);case"::placeholder":return $a([sl(t,{props:[jt(a,/:(plac\w+)/,":"+Ht+"input-$1")]}),sl(t,{props:[jt(a,/:(plac\w+)/,":"+hf+"$1")]}),sl(t,{props:[jt(a,/:(plac\w+)/,nn+"input-$1")]})],s)}return""})}},Pw=[Mw],kw=function(t){var e=t.key;if(e==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(E){var x=E.getAttribute("data-emotion");x.indexOf(" ")!==-1&&(document.head.appendChild(E),E.setAttribute("data-s",""))})}var s=t.stylisPlugins||Pw,a={},l,u=[];l=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(E){for(var x=E.getAttribute("data-emotion").split(" "),b=1;b<x.length;b++)a[x[b]]=!0;u.push(E)});var d,f=[ww,Ow];{var h,g=[Rw,Cw(function(E){h.insert(E)})],y=Lw(f.concat(s,g)),S=function(x){return $a(bw(x),y)};d=function(x,b,D,L){h=D,S(x?x+"{"+b.styles+"}":b.styles),L&&(v.inserted[b.name]=!0)}}var v={key:e,sheet:new uw({key:e,container:l,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:d};return v.sheet.hydrate(u),v},Lm={exports:{}},Kt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aE;function Nw(){if(aE)return Kt;aE=1;var i=typeof Symbol=="function"&&Symbol.for,t=i?Symbol.for("react.element"):60103,e=i?Symbol.for("react.portal"):60106,n=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,a=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,u=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.async_mode"):60111,f=i?Symbol.for("react.concurrent_mode"):60111,h=i?Symbol.for("react.forward_ref"):60112,g=i?Symbol.for("react.suspense"):60113,y=i?Symbol.for("react.suspense_list"):60120,S=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,E=i?Symbol.for("react.block"):60121,x=i?Symbol.for("react.fundamental"):60117,b=i?Symbol.for("react.responder"):60118,D=i?Symbol.for("react.scope"):60119;function L(_){if(typeof _=="object"&&_!==null){var P=_.$$typeof;switch(P){case t:switch(_=_.type,_){case d:case f:case n:case a:case s:case g:return _;default:switch(_=_&&_.$$typeof,_){case u:case h:case v:case S:case l:return _;default:return P}}case e:return P}}}function I(_){return L(_)===f}return Kt.AsyncMode=d,Kt.ConcurrentMode=f,Kt.ContextConsumer=u,Kt.ContextProvider=l,Kt.Element=t,Kt.ForwardRef=h,Kt.Fragment=n,Kt.Lazy=v,Kt.Memo=S,Kt.Portal=e,Kt.Profiler=a,Kt.StrictMode=s,Kt.Suspense=g,Kt.isAsyncMode=function(_){return I(_)||L(_)===d},Kt.isConcurrentMode=I,Kt.isContextConsumer=function(_){return L(_)===u},Kt.isContextProvider=function(_){return L(_)===l},Kt.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===t},Kt.isForwardRef=function(_){return L(_)===h},Kt.isFragment=function(_){return L(_)===n},Kt.isLazy=function(_){return L(_)===v},Kt.isMemo=function(_){return L(_)===S},Kt.isPortal=function(_){return L(_)===e},Kt.isProfiler=function(_){return L(_)===a},Kt.isStrictMode=function(_){return L(_)===s},Kt.isSuspense=function(_){return L(_)===g},Kt.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===n||_===f||_===a||_===s||_===g||_===y||typeof _=="object"&&_!==null&&(_.$$typeof===v||_.$$typeof===S||_.$$typeof===l||_.$$typeof===u||_.$$typeof===h||_.$$typeof===x||_.$$typeof===b||_.$$typeof===D||_.$$typeof===E)},Kt.typeOf=L,Kt}var oE;function Bw(){return oE||(oE=1,Lm.exports=Nw()),Lm.exports}var Cm,lE;function Fw(){if(lE)return Cm;lE=1;var i=Bw(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[i.ForwardRef]=n,a[i.Memo]=s;function l(v){return i.isMemo(v)?s:a[v.$$typeof]||t}var u=Object.defineProperty,d=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,g=Object.getPrototypeOf,y=Object.prototype;function S(v,E,x){if(typeof E!="string"){if(y){var b=g(E);b&&b!==y&&S(v,b,x)}var D=d(E);f&&(D=D.concat(f(E)));for(var L=l(v),I=l(E),_=0;_<D.length;++_){var P=D[_];if(!e[P]&&!(x&&x[P])&&!(I&&I[P])&&!(L&&L[P])){var M=h(E,P);try{u(v,P,M)}catch{}}}}return v}return Cm=S,Cm}Fw();var Uw=!0;function KA(i,t,e){var n="";return e.split(" ").forEach(function(s){i[s]!==void 0?t.push(i[s]+";"):s&&(n+=s+" ")}),n}var Np=function(t,e,n){var s=t.key+"-"+e.name;(n===!1||Uw===!1)&&t.registered[s]===void 0&&(t.registered[s]=e.styles)},zA=function(t,e,n){Np(t,e,n);var s=t.key+"-"+e.name;if(t.inserted[e.name]===void 0){var a=e;do t.insert(e===a?"."+s:"",a,t.sheet,!0),a=a.next;while(a!==void 0)}};function $w(i){for(var t=0,e,n=0,s=i.length;s>=4;++n,s-=4)e=i.charCodeAt(n)&255|(i.charCodeAt(++n)&255)<<8|(i.charCodeAt(++n)&255)<<16|(i.charCodeAt(++n)&255)<<24,e=(e&65535)*1540483477+((e>>>16)*59797<<16),e^=e>>>24,t=(e&65535)*1540483477+((e>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(i.charCodeAt(n+2)&255)<<16;case 2:t^=(i.charCodeAt(n+1)&255)<<8;case 1:t^=i.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Vw={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Gw=/[A-Z]|^ms/g,Hw=/_EMO_([^_]+?)_([^]*?)_EMO_/g,YA=function(t){return t.charCodeAt(1)===45},uE=function(t){return t!=null&&typeof t!="boolean"},_m=HA(function(i){return YA(i)?i:i.replace(Gw,"-$&").toLowerCase()}),cE=function(t,e){switch(t){case"animation":case"animationName":if(typeof e=="string")return e.replace(Hw,function(n,s,a){return bi={name:s,styles:a,next:bi},s})}return Vw[t]!==1&&!YA(t)&&typeof e=="number"&&e!==0?e+"px":e};function _l(i,t,e){if(e==null)return"";var n=e;if(n.__emotion_styles!==void 0)return n;switch(typeof e){case"boolean":return"";case"object":{var s=e;if(s.anim===1)return bi={name:s.name,styles:s.styles,next:bi},s.name;var a=e;if(a.styles!==void 0){var l=a.next;if(l!==void 0)for(;l!==void 0;)bi={name:l.name,styles:l.styles,next:bi},l=l.next;var u=a.styles+";";return u}return jw(i,t,e)}case"function":{if(i!==void 0){var d=bi,f=e(i);return bi=d,_l(i,t,f)}break}}var h=e;if(t==null)return h;var g=t[h];return g!==void 0?g:h}function jw(i,t,e){var n="";if(Array.isArray(e))for(var s=0;s<e.length;s++)n+=_l(i,t,e[s])+";";else for(var a in e){var l=e[a];if(typeof l!="object"){var u=l;t!=null&&t[u]!==void 0?n+=a+"{"+t[u]+"}":uE(u)&&(n+=_m(a)+":"+cE(a,u)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(t==null||t[l[0]]===void 0))for(var d=0;d<l.length;d++)uE(l[d])&&(n+=_m(a)+":"+cE(a,l[d])+";");else{var f=_l(i,t,l);switch(a){case"animation":case"animationName":{n+=_m(a)+":"+f+";";break}default:n+=a+"{"+f+"}"}}}return n}var fE=/label:\s*([^\s;{]+)\s*(;|$)/g,bi;function Kf(i,t,e){if(i.length===1&&typeof i[0]=="object"&&i[0]!==null&&i[0].styles!==void 0)return i[0];var n=!0,s="";bi=void 0;var a=i[0];if(a==null||a.raw===void 0)n=!1,s+=_l(e,t,a);else{var l=a;s+=l[0]}for(var u=1;u<i.length;u++)if(s+=_l(e,t,i[u]),n){var d=a;s+=d[u]}fE.lastIndex=0;for(var f="",h;(h=fE.exec(s))!==null;)f+="-"+h[1];var g=$w(s)+f;return{name:g,styles:s,next:bi}}var Kw=function(t){return t()},zw=vg.useInsertionEffect?vg.useInsertionEffect:!1,qA=zw||Kw,XA=V.createContext(typeof HTMLElement<"u"?kw({key:"css"}):null);XA.Provider;var WA=function(t){return V.forwardRef(function(e,n){var s=V.useContext(XA);return t(e,s,n)})},Bp=V.createContext({}),Fp={}.hasOwnProperty,xg="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Yw=function(t,e){var n={};for(var s in e)Fp.call(e,s)&&(n[s]=e[s]);return n[xg]=t,n},qw=function(t){var e=t.cache,n=t.serialized,s=t.isStringTag;return Np(e,n,s),qA(function(){return zA(e,n,s)}),null},Xw=WA(function(i,t,e){var n=i.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var s=i[xg],a=[n],l="";typeof i.className=="string"?l=KA(t.registered,a,i.className):i.className!=null&&(l=i.className+" ");var u=Kf(a,void 0,V.useContext(Bp));l+=t.key+"-"+u.name;var d={};for(var f in i)Fp.call(i,f)&&f!=="css"&&f!==xg&&(d[f]=i[f]);return d.className=l,e&&(d.ref=e),V.createElement(V.Fragment,null,V.createElement(qw,{cache:t,serialized:u,isStringTag:typeof s=="string"}),V.createElement(s,d))}),Ww=Xw,dE=function(t,e){var n=arguments;if(e==null||!Fp.call(e,"css"))return V.createElement.apply(void 0,n);var s=n.length,a=new Array(s);a[0]=Ww,a[1]=Yw(t,e);for(var l=2;l<s;l++)a[l]=n[l];return V.createElement.apply(null,a)};(function(i){var t;t||(t=i.JSX||(i.JSX={}))})(dE||(dE={}));function Up(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return Kf(t)}function Zl(){var i=Up.apply(void 0,arguments),t="animation-"+i.name;return{name:t,styles:"@keyframes "+t+"{"+i.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Qw=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Zw=HA(function(i){return Qw.test(i)||i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)<91}),Jw=Zw,tO=function(t){return t!=="theme"},hE=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Jw:tO},mE=function(t,e,n){var s;if(e){var a=e.shouldForwardProp;s=t.__emotion_forwardProp&&a?function(l){return t.__emotion_forwardProp(l)&&a(l)}:a}return typeof s!="function"&&n&&(s=t.__emotion_forwardProp),s},eO=function(t){var e=t.cache,n=t.serialized,s=t.isStringTag;return Np(e,n,s),qA(function(){return zA(e,n,s)}),null},nO=function i(t,e){var n=t.__emotion_real===t,s=n&&t.__emotion_base||t,a,l;e!==void 0&&(a=e.label,l=e.target);var u=mE(t,e,n),d=u||hE(s),f=!d("as");return function(){var h=arguments,g=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(a!==void 0&&g.push("label:"+a+";"),h[0]==null||h[0].raw===void 0)g.push.apply(g,h);else{var y=h[0];g.push(y[0]);for(var S=h.length,v=1;v<S;v++)g.push(h[v],y[v])}var E=WA(function(x,b,D){var L=f&&x.as||s,I="",_=[],P=x;if(x.theme==null){P={};for(var M in x)P[M]=x[M];P.theme=V.useContext(Bp)}typeof x.className=="string"?I=KA(b.registered,_,x.className):x.className!=null&&(I=x.className+" ");var k=Kf(g.concat(_),b.registered,P);I+=b.key+"-"+k.name,l!==void 0&&(I+=" "+l);var F=f&&u===void 0?hE(L):d,R={};for(var $ in x)f&&$==="as"||F($)&&(R[$]=x[$]);return R.className=I,D&&(R.ref=D),V.createElement(V.Fragment,null,V.createElement(eO,{cache:b,serialized:k,isStringTag:typeof L=="string"}),V.createElement(L,R))});return E.displayName=a!==void 0?a:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",E.defaultProps=t.defaultProps,E.__emotion_real=E,E.__emotion_base=s,E.__emotion_styles=g,E.__emotion_forwardProp=u,Object.defineProperty(E,"toString",{value:function(){return"."+l}}),E.withComponent=function(x,b){var D=i(x,df({},e,b,{shouldForwardProp:mE(E,b,!0)}));return D.apply(void 0,g)},E}},iO=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],bg=nO.bind(null);iO.forEach(function(i){bg[i]=bg(i)});function sO(i,t){return bg(i,t)}function rO(i,t){Array.isArray(i.__emotion_styles)&&(i.__emotion_styles=t(i.__emotion_styles))}const gE=[];function pE(i){return gE[0]=i,Kf(gE)}const aO=i=>{const t=Object.keys(i).map(e=>({key:e,val:i[e]}))||[];return t.sort((e,n)=>e.val-n.val),t.reduce((e,n)=>({...e,[n.key]:n.val}),{})};function oO(i){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:e="px",step:n=5,...s}=i,a=aO(t),l=Object.keys(a);function u(y){return`@media (min-width:${typeof t[y]=="number"?t[y]:y}${e})`}function d(y){return`@media (max-width:${(typeof t[y]=="number"?t[y]:y)-n/100}${e})`}function f(y,S){const v=l.indexOf(S);return`@media (min-width:${typeof t[y]=="number"?t[y]:y}${e}) and (max-width:${(v!==-1&&typeof t[l[v]]=="number"?t[l[v]]:S)-n/100}${e})`}function h(y){return l.indexOf(y)+1<l.length?f(y,l[l.indexOf(y)+1]):u(y)}function g(y){const S=l.indexOf(y);return S===0?u(l[1]):S===l.length-1?d(l[S]):f(y,l[l.indexOf(y)+1]).replace("@media","@media not all and")}return{keys:l,values:a,up:u,down:d,between:f,only:h,not:g,unit:e,...s}}const lO={borderRadius:4};function QA(i=8,t=wp({spacing:i})){if(i.mui)return i;const e=(...n)=>(n.length===0?[1]:n).map(a=>{const l=t(a);return typeof l=="number"?`${l}px`:l}).join(" ");return e.mui=!0,e}function uO(i,t){const e=this;if(e.vars){if(!e.colorSchemes?.[i]||typeof e.getColorSchemeSelector!="function")return{};let n=e.getColorSchemeSelector(i);return n==="&"?t:((n.includes("data-")||n.includes("."))&&(n=`*:where(${n.replace(/\s*&$/,"")}) &`),{[n]:t})}return e.palette.mode===i?t:{}}function $p(i={},...t){const{breakpoints:e={},palette:n={},spacing:s,shape:a={},...l}=i,u=oO(e),d=QA(s);let f=wn({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:d,shape:{...lO,...a}},l);return f=vI(f),f.applyStyles=uO,f=t.reduce((h,g)=>wn(h,g),f),f.unstable_sxConfig={...Vf,...l?.unstable_sxConfig},f.unstable_sx=function(g){return Ka({sx:g,theme:this})},f}function cO(i){return Object.keys(i).length===0}function fO(i=null){const t=V.useContext(Bp);return!t||cO(t)?i:t}const dO=$p();function hO(i=dO){return fO(i)}const yE=i=>i,mO=()=>{let i=yE;return{configure(t){i=t},generate(t){return i(t)},reset(){i=yE}}},gO=mO();function ZA(i){var t,e,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var s=i.length;for(t=0;t<s;t++)i[t]&&(e=ZA(i[t]))&&(n&&(n+=" "),n+=e)}else for(e in i)i[e]&&(n&&(n+=" "),n+=e);return n}function Ge(){for(var i,t,e=0,n="",s=arguments.length;e<s;e++)(i=arguments[e])&&(t=ZA(i))&&(n&&(n+=" "),n+=t);return n}const pO={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function us(i,t,e="Mui"){const n=pO[t];return n?`${e}-${n}`:`${gO.generate(i)}-${t}`}function cs(i,t,e="Mui"){const n={};return t.forEach(s=>{n[s]=us(i,s,e)}),n}function JA(i){const{variants:t,...e}=i,n={variants:t,style:pE(e),isProcessed:!0};return n.style===e||t&&t.forEach(s=>{typeof s.style!="function"&&(s.style=pE(s.style))}),n}const yO=$p();function Dm(i){return i!=="ownerState"&&i!=="theme"&&i!=="sx"&&i!=="as"}function vO(i){return i?(t,e)=>e[i]:null}function SO(i,t,e){i.theme=xO(i.theme)?e:i.theme[t]||i.theme}function qc(i,t){const e=typeof t=="function"?t(i):t;if(Array.isArray(e))return e.flatMap(n=>qc(i,n));if(Array.isArray(e?.variants)){let n;if(e.isProcessed)n=e.style;else{const{variants:s,...a}=e;n=a}return t1(i,e.variants,[n])}return e?.isProcessed?e.style:e}function t1(i,t,e=[]){let n;t:for(let s=0;s<t.length;s+=1){const a=t[s];if(typeof a.props=="function"){if(n??={...i,...i.ownerState,ownerState:i.ownerState},!a.props(n))continue}else for(const l in a.props)if(i[l]!==a.props[l]&&i.ownerState?.[l]!==a.props[l])continue t;typeof a.style=="function"?(n??={...i,...i.ownerState,ownerState:i.ownerState},e.push(a.style(n))):e.push(a.style)}return e}function TO(i={}){const{themeId:t,defaultTheme:e=yO,rootShouldForwardProp:n=Dm,slotShouldForwardProp:s=Dm}=i;function a(u){SO(u,t,e)}return(u,d={})=>{rO(u,_=>_.filter(P=>P!==Ka));const{name:f,slot:h,skipVariantsResolver:g,skipSx:y,overridesResolver:S=vO(AO(h)),...v}=d,E=g!==void 0?g:h&&h!=="Root"&&h!=="root"||!1,x=y||!1;let b=Dm;h==="Root"||h==="root"?b=n:h?b=s:bO(u)&&(b=void 0);const D=sO(u,{shouldForwardProp:b,label:EO(),...v}),L=_=>{if(_.__emotion_real===_)return _;if(typeof _=="function")return function(M){return qc(M,_)};if(ss(_)){const P=JA(_);return P.variants?function(k){return qc(k,P)}:P.style}return _},I=(..._)=>{const P=[],M=_.map(L),k=[];if(P.push(a),f&&S&&k.push(function(Q){const ct=Q.theme.components?.[f]?.styleOverrides;if(!ct)return null;const it={};for(const B in ct)it[B]=qc(Q,ct[B]);return S(Q,it)}),f&&!E&&k.push(function(Q){const ct=Q.theme?.components?.[f]?.variants;return ct?t1(Q,ct):null}),x||k.push(Ka),Array.isArray(M[0])){const $=M.shift(),Q=new Array(P.length).fill(""),ft=new Array(k.length).fill("");let ct;ct=[...Q,...$,...ft],ct.raw=[...Q,...$.raw,...ft],P.unshift(ct)}const F=[...P,...M,...k],R=D(...F);return u.muiName&&(R.muiName=u.muiName),R};return D.withConfig&&(I.withConfig=D.withConfig),I}}function EO(i,t){return void 0}function xO(i){for(const t in i)return!1;return!0}function bO(i){return typeof i=="string"&&i.charCodeAt(0)>96}function AO(i){return i&&i.charAt(0).toLowerCase()+i.slice(1)}function Ag(i,t){const e={...t};for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n)){const s=n;if(s==="components"||s==="slots")e[s]={...i[s],...e[s]};else if(s==="componentsProps"||s==="slotProps"){const a=i[s],l=t[s];if(!l)e[s]=a||{};else if(!a)e[s]=l;else{e[s]={...l};for(const u in a)if(Object.prototype.hasOwnProperty.call(a,u)){const d=u;e[s][d]=Ag(a[d],l[d])}}}else e[s]===void 0&&(e[s]=i[s])}return e}function RO(i,t=Number.MIN_SAFE_INTEGER,e=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(i,e))}function Vp(i,t=0,e=1){return RO(i,t,e)}function LO(i){i=i.slice(1);const t=new RegExp(`.{1,${i.length>=6?2:1}}`,"g");let e=i.match(t);return e&&e[0].length===1&&(e=e.map(n=>n+n)),e?`rgb${e.length===4?"a":""}(${e.map((n,s)=>s<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function Hs(i){if(i.type)return i;if(i.charAt(0)==="#")return Hs(LO(i));const t=i.indexOf("("),e=i.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(e))throw new Error(Ir(9,i));let n=i.substring(t+1,i.length-1),s;if(e==="color"){if(n=n.split(" "),s=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(Ir(10,s))}else n=n.split(",");return n=n.map(a=>parseFloat(a)),{type:e,values:n,colorSpace:s}}const CO=i=>{const t=Hs(i);return t.values.slice(0,3).map((e,n)=>t.type.includes("hsl")&&n!==0?`${e}%`:e).join(" ")},ul=(i,t)=>{try{return CO(i)}catch{return i}};function zf(i){const{type:t,colorSpace:e}=i;let{values:n}=i;return t.includes("rgb")?n=n.map((s,a)=>a<3?parseInt(s,10):s):t.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.includes("color")?n=`${e} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function e1(i){i=Hs(i);const{values:t}=i,e=t[0],n=t[1]/100,s=t[2]/100,a=n*Math.min(s,1-s),l=(f,h=(f+e/30)%12)=>s-a*Math.max(Math.min(h-3,9-h,1),-1);let u="rgb";const d=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return i.type==="hsla"&&(u+="a",d.push(t[3])),zf({type:u,values:d})}function Rg(i){i=Hs(i);let t=i.type==="hsl"||i.type==="hsla"?Hs(e1(i)).values:i.values;return t=t.map(e=>(i.type!=="color"&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function _O(i,t){const e=Rg(i),n=Rg(t);return(Math.max(e,n)+.05)/(Math.min(e,n)+.05)}function Dl(i,t){return i=Hs(i),t=Vp(t),(i.type==="rgb"||i.type==="hsl")&&(i.type+="a"),i.type==="color"?i.values[3]=`/${t}`:i.values[3]=t,zf(i)}function xc(i,t,e){try{return Dl(i,t)}catch{return i}}function Il(i,t){if(i=Hs(i),t=Vp(t),i.type.includes("hsl"))i.values[2]*=1-t;else if(i.type.includes("rgb")||i.type.includes("color"))for(let e=0;e<3;e+=1)i.values[e]*=1-t;return zf(i)}function ne(i,t,e){try{return Il(i,t)}catch{return i}}function wl(i,t){if(i=Hs(i),t=Vp(t),i.type.includes("hsl"))i.values[2]+=(100-i.values[2])*t;else if(i.type.includes("rgb"))for(let e=0;e<3;e+=1)i.values[e]+=(255-i.values[e])*t;else if(i.type.includes("color"))for(let e=0;e<3;e+=1)i.values[e]+=(1-i.values[e])*t;return zf(i)}function ie(i,t,e){try{return wl(i,t)}catch{return i}}function Lg(i,t=.15){return Rg(i)>.5?Il(i,t):wl(i,t)}function bc(i,t,e){try{return Lg(i,t)}catch{return i}}const DO=V.createContext(void 0);function IO(i){const{theme:t,name:e,props:n}=i;if(!t||!t.components||!t.components[e])return n;const s=t.components[e];return s.defaultProps?Ag(s.defaultProps,n):!s.styleOverrides&&!s.variants?Ag(s,n):n}function wO({props:i,name:t}){const e=V.useContext(DO);return IO({props:i,name:t,theme:{components:e}})}const vE={theme:void 0};function OO(i){let t,e;return function(s){let a=t;return(a===void 0||s.theme!==e)&&(vE.theme=s.theme,a=JA(i(vE)),t=a,e=s.theme),a}}function MO(i=""){function t(...n){if(!n.length)return"";const s=n[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${i?`${i}-`:""}${s}${t(...n.slice(1))})`:`, ${s}`}return(n,...s)=>`var(--${i?`${i}-`:""}${n}${t(...s)})`}const SE=(i,t,e,n=[])=>{let s=i;t.forEach((a,l)=>{l===t.length-1?Array.isArray(s)?s[Number(a)]=e:s&&typeof s=="object"&&(s[a]=e):s&&typeof s=="object"&&(s[a]||(s[a]=n.includes(a)?[]:{}),s=s[a])})},PO=(i,t,e)=>{function n(s,a=[],l=[]){Object.entries(s).forEach(([u,d])=>{(!e||e&&!e([...a,u]))&&d!=null&&(typeof d=="object"&&Object.keys(d).length>0?n(d,[...a,u],Array.isArray(d)?[...l,u]:l):t([...a,u],d,l))})}n(i)},kO=(i,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>i.includes(n))||i[i.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function Im(i,t){const{prefix:e,shouldSkipGeneratingVar:n}=t||{},s={},a={},l={};return PO(i,(u,d,f)=>{if((typeof d=="string"||typeof d=="number")&&(!n||!n(u,d))){const h=`--${e?`${e}-`:""}${u.join("-")}`,g=kO(u,d);Object.assign(s,{[h]:g}),SE(a,u,`var(${h})`,f),SE(l,u,`var(${h}, ${g})`,f)}},u=>u[0]==="vars"),{css:s,vars:a,varsWithDefaults:l}}function NO(i,t={}){const{getSelector:e=x,disableCssColorScheme:n,colorSchemeSelector:s}=t,{colorSchemes:a={},components:l,defaultColorScheme:u="light",...d}=i,{vars:f,css:h,varsWithDefaults:g}=Im(d,t);let y=g;const S={},{[u]:v,...E}=a;if(Object.entries(E||{}).forEach(([L,I])=>{const{vars:_,css:P,varsWithDefaults:M}=Im(I,t);y=wn(y,M),S[L]={css:P,vars:_}}),v){const{css:L,vars:I,varsWithDefaults:_}=Im(v,t);y=wn(y,_),S[u]={css:L,vars:I}}function x(L,I){let _=s;if(s==="class"&&(_=".%s"),s==="data"&&(_="[data-%s]"),s?.startsWith("data-")&&!s.includes("%s")&&(_=`[${s}="%s"]`),L){if(_==="media")return i.defaultColorScheme===L?":root":{[`@media (prefers-color-scheme: ${a[L]?.palette?.mode||L})`]:{":root":I}};if(_)return i.defaultColorScheme===L?`:root, ${_.replace("%s",String(L))}`:_.replace("%s",String(L))}return":root"}return{vars:y,generateThemeVars:()=>{let L={...f};return Object.entries(S).forEach(([,{vars:I}])=>{L=wn(L,I)}),L},generateStyleSheets:()=>{const L=[],I=i.defaultColorScheme||"light";function _(k,F){Object.keys(F).length&&L.push(typeof k=="string"?{[k]:{...F}}:k)}_(e(void 0,{...h}),h);const{[I]:P,...M}=S;if(P){const{css:k}=P,F=a[I]?.palette?.mode,R=!n&&F?{colorScheme:F,...k}:{...k};_(e(I,{...R}),R)}return Object.entries(M).forEach(([k,{css:F}])=>{const R=a[k]?.palette?.mode,$=!n&&R?{colorScheme:R,...F}:{...F};_(e(k,{...$}),$)}),L}}}function BO(i){return function(e){return i==="media"?`@media (prefers-color-scheme: ${e})`:i?i.startsWith("data-")&&!i.includes("%s")?`[${i}="${e}"] &`:i==="class"?`.${e} &`:i==="data"?`[data-${e}] &`:`${i.replace("%s",e)} &`:"&"}}const Ol={black:"#000",white:"#fff"},FO={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Ta={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Ea={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},rl={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},xa={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},ba={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Aa={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function n1(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Ol.white,default:Ol.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const UO=n1();function i1(){return{text:{primary:Ol.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Ol.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const TE=i1();function EE(i,t,e,n){const s=n.light||n,a=n.dark||n*1.5;i[t]||(i.hasOwnProperty(e)?i[t]=i[e]:t==="light"?i.light=wl(i.main,s):t==="dark"&&(i.dark=Il(i.main,a)))}function $O(i="light"){return i==="dark"?{main:xa[200],light:xa[50],dark:xa[400]}:{main:xa[700],light:xa[400],dark:xa[800]}}function VO(i="light"){return i==="dark"?{main:Ta[200],light:Ta[50],dark:Ta[400]}:{main:Ta[500],light:Ta[300],dark:Ta[700]}}function GO(i="light"){return i==="dark"?{main:Ea[500],light:Ea[300],dark:Ea[700]}:{main:Ea[700],light:Ea[400],dark:Ea[800]}}function HO(i="light"){return i==="dark"?{main:ba[400],light:ba[300],dark:ba[700]}:{main:ba[700],light:ba[500],dark:ba[900]}}function jO(i="light"){return i==="dark"?{main:Aa[400],light:Aa[300],dark:Aa[700]}:{main:Aa[800],light:Aa[500],dark:Aa[900]}}function KO(i="light"){return i==="dark"?{main:rl[400],light:rl[300],dark:rl[700]}:{main:"#ed6c02",light:rl[500],dark:rl[900]}}function Gp(i){const{mode:t="light",contrastThreshold:e=3,tonalOffset:n=.2,...s}=i,a=i.primary||$O(t),l=i.secondary||VO(t),u=i.error||GO(t),d=i.info||HO(t),f=i.success||jO(t),h=i.warning||KO(t);function g(E){return _O(E,TE.text.primary)>=e?TE.text.primary:UO.text.primary}const y=({color:E,name:x,mainShade:b=500,lightShade:D=300,darkShade:L=700})=>{if(E={...E},!E.main&&E[b]&&(E.main=E[b]),!E.hasOwnProperty("main"))throw new Error(Ir(11,x?` (${x})`:"",b));if(typeof E.main!="string")throw new Error(Ir(12,x?` (${x})`:"",JSON.stringify(E.main)));return EE(E,"light",D,n),EE(E,"dark",L,n),E.contrastText||(E.contrastText=g(E.main)),E};let S;return t==="light"?S=n1():t==="dark"&&(S=i1()),wn({common:{...Ol},mode:t,primary:y({color:a,name:"primary"}),secondary:y({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:y({color:u,name:"error"}),warning:y({color:h,name:"warning"}),info:y({color:d,name:"info"}),success:y({color:f,name:"success"}),grey:FO,contrastThreshold:e,getContrastText:g,augmentColor:y,tonalOffset:n,...S},s)}function zO(i){const t={};return Object.entries(i).forEach(n=>{const[s,a]=n;typeof a=="object"&&(t[s]=`${a.fontStyle?`${a.fontStyle} `:""}${a.fontVariant?`${a.fontVariant} `:""}${a.fontWeight?`${a.fontWeight} `:""}${a.fontStretch?`${a.fontStretch} `:""}${a.fontSize||""}${a.lineHeight?`/${a.lineHeight} `:""}${a.fontFamily||""}`)}),t}function YO(i,t){return{toolbar:{minHeight:56,[i.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[i.up("sm")]:{minHeight:64}},...t}}function qO(i){return Math.round(i*1e5)/1e5}const xE={textTransform:"uppercase"},bE='"Roboto", "Helvetica", "Arial", sans-serif';function XO(i,t){const{fontFamily:e=bE,fontSize:n=14,fontWeightLight:s=300,fontWeightRegular:a=400,fontWeightMedium:l=500,fontWeightBold:u=700,htmlFontSize:d=16,allVariants:f,pxToRem:h,...g}=typeof t=="function"?t(i):t,y=n/14,S=h||(x=>`${x/d*y}rem`),v=(x,b,D,L,I)=>({fontFamily:e,fontWeight:x,fontSize:S(b),lineHeight:D,...e===bE?{letterSpacing:`${qO(L/b)}em`}:{},...I,...f}),E={h1:v(s,96,1.167,-1.5),h2:v(s,60,1.2,-.5),h3:v(a,48,1.167,0),h4:v(a,34,1.235,.25),h5:v(a,24,1.334,0),h6:v(l,20,1.6,.15),subtitle1:v(a,16,1.75,.15),subtitle2:v(l,14,1.57,.1),body1:v(a,16,1.5,.15),body2:v(a,14,1.43,.15),button:v(l,14,1.75,.4,xE),caption:v(a,12,1.66,.4),overline:v(a,12,2.66,1,xE),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return wn({htmlFontSize:d,pxToRem:S,fontFamily:e,fontSize:n,fontWeightLight:s,fontWeightRegular:a,fontWeightMedium:l,fontWeightBold:u,...E},g,{clone:!1})}const WO=.2,QO=.14,ZO=.12;function oe(...i){return[`${i[0]}px ${i[1]}px ${i[2]}px ${i[3]}px rgba(0,0,0,${WO})`,`${i[4]}px ${i[5]}px ${i[6]}px ${i[7]}px rgba(0,0,0,${QO})`,`${i[8]}px ${i[9]}px ${i[10]}px ${i[11]}px rgba(0,0,0,${ZO})`].join(",")}const JO=["none",oe(0,2,1,-1,0,1,1,0,0,1,3,0),oe(0,3,1,-2,0,2,2,0,0,1,5,0),oe(0,3,3,-2,0,3,4,0,0,1,8,0),oe(0,2,4,-1,0,4,5,0,0,1,10,0),oe(0,3,5,-1,0,5,8,0,0,1,14,0),oe(0,3,5,-1,0,6,10,0,0,1,18,0),oe(0,4,5,-2,0,7,10,1,0,2,16,1),oe(0,5,5,-3,0,8,10,1,0,3,14,2),oe(0,5,6,-3,0,9,12,1,0,3,16,2),oe(0,6,6,-3,0,10,14,1,0,4,18,3),oe(0,6,7,-4,0,11,15,1,0,4,20,3),oe(0,7,8,-4,0,12,17,2,0,5,22,4),oe(0,7,8,-4,0,13,19,2,0,5,24,4),oe(0,7,9,-4,0,14,21,2,0,5,26,4),oe(0,8,9,-5,0,15,22,2,0,6,28,5),oe(0,8,10,-5,0,16,24,2,0,6,30,5),oe(0,8,11,-5,0,17,26,2,0,6,32,5),oe(0,9,11,-5,0,18,28,2,0,7,34,6),oe(0,9,12,-6,0,19,29,2,0,7,36,6),oe(0,10,13,-6,0,20,31,3,0,8,38,7),oe(0,10,13,-6,0,21,33,3,0,8,40,7),oe(0,10,14,-6,0,22,35,3,0,8,42,7),oe(0,11,14,-7,0,23,36,3,0,9,44,8),oe(0,11,15,-7,0,24,38,3,0,9,46,8)],tM={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},eM={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function AE(i){return`${Math.round(i)}ms`}function nM(i){if(!i)return 0;const t=i/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function iM(i){const t={...tM,...i.easing},e={...eM,...i.duration};return{getAutoHeightDuration:nM,create:(s=["all"],a={})=>{const{duration:l=e.standard,easing:u=t.easeInOut,delay:d=0,...f}=a;return(Array.isArray(s)?s:[s]).map(h=>`${h} ${typeof l=="string"?l:AE(l)} ${u} ${typeof d=="string"?d:AE(d)}`).join(",")},...i,easing:t,duration:e}}const sM={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function rM(i){return ss(i)||typeof i>"u"||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||Array.isArray(i)}function s1(i={}){const t={...i};function e(n){const s=Object.entries(n);for(let a=0;a<s.length;a++){const[l,u]=s[a];!rM(u)||l.startsWith("unstable_")?delete n[l]:ss(u)&&(n[l]={...u},e(n[l]))}}return e(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function Cg(i={},...t){const{breakpoints:e,mixins:n={},spacing:s,palette:a={},transitions:l={},typography:u={},shape:d,...f}=i;if(i.vars&&i.generateThemeVars===void 0)throw new Error(Ir(20));const h=Gp(a),g=$p(i);let y=wn(g,{mixins:YO(g.breakpoints,n),palette:h,shadows:JO.slice(),typography:XO(h,u),transitions:iM(l),zIndex:{...sM}});return y=wn(y,f),y=t.reduce((S,v)=>wn(S,v),y),y.unstable_sxConfig={...Vf,...f?.unstable_sxConfig},y.unstable_sx=function(v){return Ka({sx:v,theme:this})},y.toRuntimeSource=s1,y}function _g(i){let t;return i<1?t=5.11916*i**2:t=4.5*Math.log(i+1)+2,Math.round(t*10)/1e3}const aM=[...Array(25)].map((i,t)=>{if(t===0)return"none";const e=_g(t);return`linear-gradient(rgba(255 255 255 / ${e}), rgba(255 255 255 / ${e}))`});function r1(i){return{inputPlaceholder:i==="dark"?.5:.42,inputUnderline:i==="dark"?.7:.42,switchTrackDisabled:i==="dark"?.2:.12,switchTrack:i==="dark"?.3:.38}}function a1(i){return i==="dark"?aM:[]}function oM(i){const{palette:t={mode:"light"},opacity:e,overlays:n,...s}=i,a=Gp(t);return{palette:a,opacity:{...r1(a.mode),...e},overlays:n||a1(a.mode),...s}}function lM(i){return!!i[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!i[0].match(/sxConfig$/)||i[0]==="palette"&&!!i[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const uM=i=>[...[...Array(25)].map((t,e)=>`--${i?`${i}-`:""}overlays-${e}`),`--${i?`${i}-`:""}palette-AppBar-darkBg`,`--${i?`${i}-`:""}palette-AppBar-darkColor`],cM=i=>(t,e)=>{const n=i.rootSelector||":root",s=i.colorSchemeSelector;let a=s;if(s==="class"&&(a=".%s"),s==="data"&&(a="[data-%s]"),s?.startsWith("data-")&&!s.includes("%s")&&(a=`[${s}="%s"]`),i.defaultColorScheme===t){if(t==="dark"){const l={};return uM(i.cssVarPrefix).forEach(u=>{l[u]=e[u],delete e[u]}),a==="media"?{[n]:e,"@media (prefers-color-scheme: dark)":{[n]:l}}:a?{[a.replace("%s",t)]:l,[`${n}, ${a.replace("%s",t)}`]:e}:{[n]:{...e,...l}}}if(a&&a!=="media")return`${n}, ${a.replace("%s",String(t))}`}else if(t){if(a==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[n]:e}};if(a)return a.replace("%s",String(t))}return n};function fM(i,t){t.forEach(e=>{i[e]||(i[e]={})})}function nt(i,t,e){!i[t]&&e&&(i[t]=e)}function cl(i){return typeof i!="string"||!i.startsWith("hsl")?i:e1(i)}function Qi(i,t){`${t}Channel`in i||(i[`${t}Channel`]=ul(cl(i[t])))}function dM(i){return typeof i=="number"?`${i}px`:typeof i=="string"||typeof i=="function"||Array.isArray(i)?i:"8px"}const yi=i=>{try{return i()}catch{}},hM=(i="mui")=>MO(i);function wm(i,t,e,n){if(!t)return;t=t===!0?{}:t;const s=n==="dark"?"dark":"light";if(!e){i[n]=oM({...t,palette:{mode:s,...t?.palette}});return}const{palette:a,...l}=Cg({...e,palette:{mode:s,...t?.palette}});return i[n]={...t,palette:a,opacity:{...r1(s),...t?.opacity},overlays:t?.overlays||a1(s)},l}function mM(i={},...t){const{colorSchemes:e={light:!0},defaultColorScheme:n,disableCssColorScheme:s=!1,cssVarPrefix:a="mui",shouldSkipGeneratingVar:l=lM,colorSchemeSelector:u=e.light&&e.dark?"media":void 0,rootSelector:d=":root",...f}=i,h=Object.keys(e)[0],g=n||(e.light&&h!=="light"?"light":h),y=hM(a),{[g]:S,light:v,dark:E,...x}=e,b={...x};let D=S;if((g==="dark"&&!("dark"in e)||g==="light"&&!("light"in e))&&(D=!0),!D)throw new Error(Ir(21,g));const L=wm(b,D,f,g);v&&!b.light&&wm(b,v,void 0,"light"),E&&!b.dark&&wm(b,E,void 0,"dark");let I={defaultColorScheme:g,...L,cssVarPrefix:a,colorSchemeSelector:u,rootSelector:d,getCssVar:y,colorSchemes:b,font:{...zO(L.typography),...L.font},spacing:dM(f.spacing)};Object.keys(I.colorSchemes).forEach(F=>{const R=I.colorSchemes[F].palette,$=Q=>{const ft=Q.split("-"),ct=ft[1],it=ft[2];return y(Q,R[ct][it])};if(R.mode==="light"&&(nt(R.common,"background","#fff"),nt(R.common,"onBackground","#000")),R.mode==="dark"&&(nt(R.common,"background","#000"),nt(R.common,"onBackground","#fff")),fM(R,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),R.mode==="light"){nt(R.Alert,"errorColor",ne(R.error.light,.6)),nt(R.Alert,"infoColor",ne(R.info.light,.6)),nt(R.Alert,"successColor",ne(R.success.light,.6)),nt(R.Alert,"warningColor",ne(R.warning.light,.6)),nt(R.Alert,"errorFilledBg",$("palette-error-main")),nt(R.Alert,"infoFilledBg",$("palette-info-main")),nt(R.Alert,"successFilledBg",$("palette-success-main")),nt(R.Alert,"warningFilledBg",$("palette-warning-main")),nt(R.Alert,"errorFilledColor",yi(()=>R.getContrastText(R.error.main))),nt(R.Alert,"infoFilledColor",yi(()=>R.getContrastText(R.info.main))),nt(R.Alert,"successFilledColor",yi(()=>R.getContrastText(R.success.main))),nt(R.Alert,"warningFilledColor",yi(()=>R.getContrastText(R.warning.main))),nt(R.Alert,"errorStandardBg",ie(R.error.light,.9)),nt(R.Alert,"infoStandardBg",ie(R.info.light,.9)),nt(R.Alert,"successStandardBg",ie(R.success.light,.9)),nt(R.Alert,"warningStandardBg",ie(R.warning.light,.9)),nt(R.Alert,"errorIconColor",$("palette-error-main")),nt(R.Alert,"infoIconColor",$("palette-info-main")),nt(R.Alert,"successIconColor",$("palette-success-main")),nt(R.Alert,"warningIconColor",$("palette-warning-main")),nt(R.AppBar,"defaultBg",$("palette-grey-100")),nt(R.Avatar,"defaultBg",$("palette-grey-400")),nt(R.Button,"inheritContainedBg",$("palette-grey-300")),nt(R.Button,"inheritContainedHoverBg",$("palette-grey-A100")),nt(R.Chip,"defaultBorder",$("palette-grey-400")),nt(R.Chip,"defaultAvatarColor",$("palette-grey-700")),nt(R.Chip,"defaultIconColor",$("palette-grey-700")),nt(R.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),nt(R.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),nt(R.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),nt(R.LinearProgress,"primaryBg",ie(R.primary.main,.62)),nt(R.LinearProgress,"secondaryBg",ie(R.secondary.main,.62)),nt(R.LinearProgress,"errorBg",ie(R.error.main,.62)),nt(R.LinearProgress,"infoBg",ie(R.info.main,.62)),nt(R.LinearProgress,"successBg",ie(R.success.main,.62)),nt(R.LinearProgress,"warningBg",ie(R.warning.main,.62)),nt(R.Skeleton,"bg",`rgba(${$("palette-text-primaryChannel")} / 0.11)`),nt(R.Slider,"primaryTrack",ie(R.primary.main,.62)),nt(R.Slider,"secondaryTrack",ie(R.secondary.main,.62)),nt(R.Slider,"errorTrack",ie(R.error.main,.62)),nt(R.Slider,"infoTrack",ie(R.info.main,.62)),nt(R.Slider,"successTrack",ie(R.success.main,.62)),nt(R.Slider,"warningTrack",ie(R.warning.main,.62));const Q=bc(R.background.default,.8);nt(R.SnackbarContent,"bg",Q),nt(R.SnackbarContent,"color",yi(()=>R.getContrastText(Q))),nt(R.SpeedDialAction,"fabHoverBg",bc(R.background.paper,.15)),nt(R.StepConnector,"border",$("palette-grey-400")),nt(R.StepContent,"border",$("palette-grey-400")),nt(R.Switch,"defaultColor",$("palette-common-white")),nt(R.Switch,"defaultDisabledColor",$("palette-grey-100")),nt(R.Switch,"primaryDisabledColor",ie(R.primary.main,.62)),nt(R.Switch,"secondaryDisabledColor",ie(R.secondary.main,.62)),nt(R.Switch,"errorDisabledColor",ie(R.error.main,.62)),nt(R.Switch,"infoDisabledColor",ie(R.info.main,.62)),nt(R.Switch,"successDisabledColor",ie(R.success.main,.62)),nt(R.Switch,"warningDisabledColor",ie(R.warning.main,.62)),nt(R.TableCell,"border",ie(xc(R.divider,1),.88)),nt(R.Tooltip,"bg",xc(R.grey[700],.92))}if(R.mode==="dark"){nt(R.Alert,"errorColor",ie(R.error.light,.6)),nt(R.Alert,"infoColor",ie(R.info.light,.6)),nt(R.Alert,"successColor",ie(R.success.light,.6)),nt(R.Alert,"warningColor",ie(R.warning.light,.6)),nt(R.Alert,"errorFilledBg",$("palette-error-dark")),nt(R.Alert,"infoFilledBg",$("palette-info-dark")),nt(R.Alert,"successFilledBg",$("palette-success-dark")),nt(R.Alert,"warningFilledBg",$("palette-warning-dark")),nt(R.Alert,"errorFilledColor",yi(()=>R.getContrastText(R.error.dark))),nt(R.Alert,"infoFilledColor",yi(()=>R.getContrastText(R.info.dark))),nt(R.Alert,"successFilledColor",yi(()=>R.getContrastText(R.success.dark))),nt(R.Alert,"warningFilledColor",yi(()=>R.getContrastText(R.warning.dark))),nt(R.Alert,"errorStandardBg",ne(R.error.light,.9)),nt(R.Alert,"infoStandardBg",ne(R.info.light,.9)),nt(R.Alert,"successStandardBg",ne(R.success.light,.9)),nt(R.Alert,"warningStandardBg",ne(R.warning.light,.9)),nt(R.Alert,"errorIconColor",$("palette-error-main")),nt(R.Alert,"infoIconColor",$("palette-info-main")),nt(R.Alert,"successIconColor",$("palette-success-main")),nt(R.Alert,"warningIconColor",$("palette-warning-main")),nt(R.AppBar,"defaultBg",$("palette-grey-900")),nt(R.AppBar,"darkBg",$("palette-background-paper")),nt(R.AppBar,"darkColor",$("palette-text-primary")),nt(R.Avatar,"defaultBg",$("palette-grey-600")),nt(R.Button,"inheritContainedBg",$("palette-grey-800")),nt(R.Button,"inheritContainedHoverBg",$("palette-grey-700")),nt(R.Chip,"defaultBorder",$("palette-grey-700")),nt(R.Chip,"defaultAvatarColor",$("palette-grey-300")),nt(R.Chip,"defaultIconColor",$("palette-grey-300")),nt(R.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),nt(R.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),nt(R.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),nt(R.LinearProgress,"primaryBg",ne(R.primary.main,.5)),nt(R.LinearProgress,"secondaryBg",ne(R.secondary.main,.5)),nt(R.LinearProgress,"errorBg",ne(R.error.main,.5)),nt(R.LinearProgress,"infoBg",ne(R.info.main,.5)),nt(R.LinearProgress,"successBg",ne(R.success.main,.5)),nt(R.LinearProgress,"warningBg",ne(R.warning.main,.5)),nt(R.Skeleton,"bg",`rgba(${$("palette-text-primaryChannel")} / 0.13)`),nt(R.Slider,"primaryTrack",ne(R.primary.main,.5)),nt(R.Slider,"secondaryTrack",ne(R.secondary.main,.5)),nt(R.Slider,"errorTrack",ne(R.error.main,.5)),nt(R.Slider,"infoTrack",ne(R.info.main,.5)),nt(R.Slider,"successTrack",ne(R.success.main,.5)),nt(R.Slider,"warningTrack",ne(R.warning.main,.5));const Q=bc(R.background.default,.98);nt(R.SnackbarContent,"bg",Q),nt(R.SnackbarContent,"color",yi(()=>R.getContrastText(Q))),nt(R.SpeedDialAction,"fabHoverBg",bc(R.background.paper,.15)),nt(R.StepConnector,"border",$("palette-grey-600")),nt(R.StepContent,"border",$("palette-grey-600")),nt(R.Switch,"defaultColor",$("palette-grey-300")),nt(R.Switch,"defaultDisabledColor",$("palette-grey-600")),nt(R.Switch,"primaryDisabledColor",ne(R.primary.main,.55)),nt(R.Switch,"secondaryDisabledColor",ne(R.secondary.main,.55)),nt(R.Switch,"errorDisabledColor",ne(R.error.main,.55)),nt(R.Switch,"infoDisabledColor",ne(R.info.main,.55)),nt(R.Switch,"successDisabledColor",ne(R.success.main,.55)),nt(R.Switch,"warningDisabledColor",ne(R.warning.main,.55)),nt(R.TableCell,"border",ne(xc(R.divider,1),.68)),nt(R.Tooltip,"bg",xc(R.grey[700],.92))}Qi(R.background,"default"),Qi(R.background,"paper"),Qi(R.common,"background"),Qi(R.common,"onBackground"),Qi(R,"divider"),Object.keys(R).forEach(Q=>{const ft=R[Q];Q!=="tonalOffset"&&ft&&typeof ft=="object"&&(ft.main&&nt(R[Q],"mainChannel",ul(cl(ft.main))),ft.light&&nt(R[Q],"lightChannel",ul(cl(ft.light))),ft.dark&&nt(R[Q],"darkChannel",ul(cl(ft.dark))),ft.contrastText&&nt(R[Q],"contrastTextChannel",ul(cl(ft.contrastText))),Q==="text"&&(Qi(R[Q],"primary"),Qi(R[Q],"secondary")),Q==="action"&&(ft.active&&Qi(R[Q],"active"),ft.selected&&Qi(R[Q],"selected")))})}),I=t.reduce((F,R)=>wn(F,R),I);const _={prefix:a,disableCssColorScheme:s,shouldSkipGeneratingVar:l,getSelector:cM(I)},{vars:P,generateThemeVars:M,generateStyleSheets:k}=NO(I,_);return I.vars=P,Object.entries(I.colorSchemes[I.defaultColorScheme]).forEach(([F,R])=>{I[F]=R}),I.generateThemeVars=M,I.generateStyleSheets=k,I.generateSpacing=function(){return QA(f.spacing,wp(this))},I.getColorSchemeSelector=BO(u),I.spacing=I.generateSpacing(),I.shouldSkipGeneratingVar=l,I.unstable_sxConfig={...Vf,...f?.unstable_sxConfig},I.unstable_sx=function(R){return Ka({sx:R,theme:this})},I.toRuntimeSource=s1,I}function RE(i,t,e){i.colorSchemes&&e&&(i.colorSchemes[t]={...e!==!0&&e,palette:Gp({...e===!0?{}:e.palette,mode:t})})}function gM(i={},...t){const{palette:e,cssVariables:n=!1,colorSchemes:s=e?void 0:{light:!0},defaultColorScheme:a=e?.mode,...l}=i,u=a||"light",d=s?.[u],f={...s,...e?{[u]:{...typeof d!="boolean"&&d,palette:e}}:void 0};if(n===!1){if(!("colorSchemes"in i))return Cg(i,...t);let h=e;"palette"in i||f[u]&&(f[u]!==!0?h=f[u].palette:u==="dark"&&(h={mode:"dark"}));const g=Cg({...i,palette:h},...t);return g.defaultColorScheme=u,g.colorSchemes=f,g.palette.mode==="light"&&(g.colorSchemes.light={...f.light!==!0&&f.light,palette:g.palette},RE(g,"dark",f.dark)),g.palette.mode==="dark"&&(g.colorSchemes.dark={...f.dark!==!0&&f.dark,palette:g.palette},RE(g,"light",f.light)),g}return!e&&!("light"in f)&&u==="light"&&(f.light=!0),mM({...l,colorSchemes:f,defaultColorScheme:u,...typeof n!="boolean"&&n},...t)}const o1=gM(),l1="$$material";function Hp(){const i=hO(o1);return i[l1]||i}function pM(i){return i!=="ownerState"&&i!=="theme"&&i!=="sx"&&i!=="as"}const yM=i=>pM(i)&&i!=="classes",je=TO({themeId:l1,defaultTheme:o1,rootShouldForwardProp:yM}),as=OO;function fs(i){return wO(i)}function u1(i,t){if(i==null)return{};var e={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(t.indexOf(n)!==-1)continue;e[n]=i[n]}return e}function Dg(i,t){return Dg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},Dg(i,t)}function c1(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,Dg(i,t)}var vM=wA();const Ac=IA(vM),LE={disabled:!1},mf=Wn.createContext(null);var SM=function(t){return t.scrollTop},fl="unmounted",yr="exited",vr="entering",wa="entered",Ig="exiting",ds=function(i){c1(t,i);function t(n,s){var a;a=i.call(this,n,s)||this;var l=s,u=l&&!l.isMounting?n.enter:n.appear,d;return a.appearStatus=null,n.in?u?(d=yr,a.appearStatus=vr):d=wa:n.unmountOnExit||n.mountOnEnter?d=fl:d=yr,a.state={status:d},a.nextCallback=null,a}t.getDerivedStateFromProps=function(s,a){var l=s.in;return l&&a.status===fl?{status:yr}:null};var e=t.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(s){var a=null;if(s!==this.props){var l=this.state.status;this.props.in?l!==vr&&l!==wa&&(a=vr):(l===vr||l===wa)&&(a=Ig)}this.updateStatus(!1,a)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var s=this.props.timeout,a,l,u;return a=l=u=s,s!=null&&typeof s!="number"&&(a=s.exit,l=s.enter,u=s.appear!==void 0?s.appear:l),{exit:a,enter:l,appear:u}},e.updateStatus=function(s,a){if(s===void 0&&(s=!1),a!==null)if(this.cancelNextCallback(),a===vr){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:Ac.findDOMNode(this);l&&SM(l)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===yr&&this.setState({status:fl})},e.performEnter=function(s){var a=this,l=this.props.enter,u=this.context?this.context.isMounting:s,d=this.props.nodeRef?[u]:[Ac.findDOMNode(this),u],f=d[0],h=d[1],g=this.getTimeouts(),y=u?g.appear:g.enter;if(!s&&!l||LE.disabled){this.safeSetState({status:wa},function(){a.props.onEntered(f)});return}this.props.onEnter(f,h),this.safeSetState({status:vr},function(){a.props.onEntering(f,h),a.onTransitionEnd(y,function(){a.safeSetState({status:wa},function(){a.props.onEntered(f,h)})})})},e.performExit=function(){var s=this,a=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:Ac.findDOMNode(this);if(!a||LE.disabled){this.safeSetState({status:yr},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:Ig},function(){s.props.onExiting(u),s.onTransitionEnd(l.exit,function(){s.safeSetState({status:yr},function(){s.props.onExited(u)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(s,a){a=this.setNextCallback(a),this.setState(s,a)},e.setNextCallback=function(s){var a=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,a.nextCallback=null,s(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},e.onTransitionEnd=function(s,a){this.setNextCallback(a);var l=this.props.nodeRef?this.props.nodeRef.current:Ac.findDOMNode(this),u=s==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],f=d[0],h=d[1];this.props.addEndListener(f,h)}s!=null&&setTimeout(this.nextCallback,s)},e.render=function(){var s=this.state.status;if(s===fl)return null;var a=this.props,l=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var u=u1(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Wn.createElement(mf.Provider,{value:null},typeof l=="function"?l(s,u):Wn.cloneElement(Wn.Children.only(l),u))},t}(Wn.Component);ds.contextType=mf;ds.propTypes={};function Ra(){}ds.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ra,onEntering:Ra,onEntered:Ra,onExit:Ra,onExiting:Ra,onExited:Ra};ds.UNMOUNTED=fl;ds.EXITED=yr;ds.ENTERING=vr;ds.ENTERED=wa;ds.EXITING=Ig;function TM(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function jp(i,t){var e=function(a){return t&&V.isValidElement(a)?t(a):a},n=Object.create(null);return i&&V.Children.map(i,function(s){return s}).forEach(function(s){n[s.key]=e(s)}),n}function EM(i,t){i=i||{},t=t||{};function e(h){return h in t?t[h]:i[h]}var n=Object.create(null),s=[];for(var a in i)a in t?s.length&&(n[a]=s,s=[]):s.push(a);var l,u={};for(var d in t){if(n[d])for(l=0;l<n[d].length;l++){var f=n[d][l];u[n[d][l]]=e(f)}u[d]=e(d)}for(l=0;l<s.length;l++)u[s[l]]=e(s[l]);return u}function Er(i,t,e){return e[t]!=null?e[t]:i.props[t]}function xM(i,t){return jp(i.children,function(e){return V.cloneElement(e,{onExited:t.bind(null,e),in:!0,appear:Er(e,"appear",i),enter:Er(e,"enter",i),exit:Er(e,"exit",i)})})}function bM(i,t,e){var n=jp(i.children),s=EM(t,n);return Object.keys(s).forEach(function(a){var l=s[a];if(V.isValidElement(l)){var u=a in t,d=a in n,f=t[a],h=V.isValidElement(f)&&!f.props.in;d&&(!u||h)?s[a]=V.cloneElement(l,{onExited:e.bind(null,l),in:!0,exit:Er(l,"exit",i),enter:Er(l,"enter",i)}):!d&&u&&!h?s[a]=V.cloneElement(l,{in:!1}):d&&u&&V.isValidElement(f)&&(s[a]=V.cloneElement(l,{onExited:e.bind(null,l),in:f.props.in,exit:Er(l,"exit",i),enter:Er(l,"enter",i)}))}}),s}var AM=Object.values||function(i){return Object.keys(i).map(function(t){return i[t]})},RM={component:"div",childFactory:function(t){return t}},Kp=function(i){c1(t,i);function t(n,s){var a;a=i.call(this,n,s)||this;var l=a.handleExited.bind(TM(a));return a.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},a}var e=t.prototype;return e.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},e.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(s,a){var l=a.children,u=a.handleExited,d=a.firstRender;return{children:d?xM(s,u):bM(s,l,u),firstRender:!1}},e.handleExited=function(s,a){var l=jp(this.props.children);s.key in l||(s.props.onExited&&s.props.onExited(a),this.mounted&&this.setState(function(u){var d=df({},u.children);return delete d[s.key],{children:d}}))},e.render=function(){var s=this.props,a=s.component,l=s.childFactory,u=u1(s,["component","childFactory"]),d=this.state.contextValue,f=AM(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,a===null?Wn.createElement(mf.Provider,{value:d},f):Wn.createElement(mf.Provider,{value:d},Wn.createElement(a,u,f))},t}(Wn.Component);Kp.propTypes={};Kp.defaultProps=RM;const LM=i=>i.scrollTop;function CE(i,t){const{timeout:e,easing:n,style:s={}}=i;return{duration:s.transitionDuration??(typeof e=="number"?e:e[t.mode]||0),easing:s.transitionTimingFunction??(typeof n=="object"?n[t.mode]:n),delay:s.transitionDelay}}function wg(i){return`scale(${i}, ${i**2})`}const CM={entering:{opacity:1,transform:wg(1)},entered:{opacity:1,transform:"none"}},Om=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Og=V.forwardRef(function(t,e){const{addEndListener:n,appear:s=!0,children:a,easing:l,in:u,onEnter:d,onEntered:f,onEntering:h,onExit:g,onExited:y,onExiting:S,style:v,timeout:E="auto",TransitionComponent:x=ds,...b}=t,D=_p(),L=V.useRef(),I=Hp(),_=V.useRef(null),P=Rl(_,MA(a),e),M=it=>B=>{if(it){const H=_.current;B===void 0?it(H):it(H,B)}},k=M(h),F=M((it,B)=>{LM(it);const{duration:H,delay:et,easing:X}=CE({style:v,timeout:E,easing:l},{mode:"enter"});let O;E==="auto"?(O=I.transitions.getAutoHeightDuration(it.clientHeight),L.current=O):O=H,it.style.transition=[I.transitions.create("opacity",{duration:O,delay:et}),I.transitions.create("transform",{duration:Om?O:O*.666,delay:et,easing:X})].join(","),d&&d(it,B)}),R=M(f),$=M(S),Q=M(it=>{const{duration:B,delay:H,easing:et}=CE({style:v,timeout:E,easing:l},{mode:"exit"});let X;E==="auto"?(X=I.transitions.getAutoHeightDuration(it.clientHeight),L.current=X):X=B,it.style.transition=[I.transitions.create("opacity",{duration:X,delay:H}),I.transitions.create("transform",{duration:Om?X:X*.666,delay:Om?H:H||X*.333,easing:et})].join(","),it.style.opacity=0,it.style.transform=wg(.75),g&&g(it)}),ft=M(y),ct=it=>{E==="auto"&&D.start(L.current||0,it),n&&n(_.current,it)};return J.jsx(x,{appear:s,in:u,nodeRef:_,onEnter:F,onEntered:R,onEntering:k,onExit:Q,onExited:ft,onExiting:$,addEndListener:ct,timeout:E==="auto"?null:E,...b,children:(it,{ownerState:B,...H})=>V.cloneElement(a,{style:{opacity:0,transform:wg(.75),visibility:it==="exited"&&!u?"hidden":void 0,...CM[it],...v,...a.props.style},ref:P,...H})})});Og&&(Og.muiSupportAuto=!0);function _M(i){return us("MuiPaper",i)}cs("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const DM=i=>{const{square:t,elevation:e,variant:n,classes:s}=i,a={root:["root",n,!t&&"rounded",n==="elevation"&&`elevation${e}`]};return qs(a,_M,s)},IM=je("div",{name:"MuiPaper",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,t[e.variant],!e.square&&t.rounded,e.variant==="elevation"&&t[`elevation${e.elevation}`]]}})(as(({theme:i})=>({backgroundColor:(i.vars||i).palette.background.paper,color:(i.vars||i).palette.text.primary,transition:i.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:i.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(i.vars||i).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),f1=V.forwardRef(function(t,e){const n=fs({props:t,name:"MuiPaper"}),s=Hp(),{className:a,component:l="div",elevation:u=1,square:d=!1,variant:f="elevation",...h}=n,g={...n,component:l,elevation:u,square:d,variant:f},y=DM(g);return J.jsx(IM,{as:l,ownerState:g,className:Ge(y.root,a),ref:e,...h,style:{...f==="elevation"&&{"--Paper-shadow":(s.vars||s).shadows[u],...s.vars&&{"--Paper-overlay":s.vars.overlays?.[u]},...!s.vars&&s.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Dl("#fff",_g(u))}, ${Dl("#fff",_g(u))})`}},...h.style}})});function wM(i){return us("MuiSnackbarContent",i)}cs("MuiSnackbarContent",["root","message","action"]);const OM=i=>{const{classes:t}=i;return qs({root:["root"],action:["action"],message:["message"]},wM,t)},MM=je(f1,{name:"MuiSnackbarContent",slot:"Root"})(as(({theme:i})=>{const t=i.palette.mode==="light"?.8:.98;return{...i.typography.body2,color:i.vars?i.vars.palette.SnackbarContent.color:i.palette.getContrastText(Lg(i.palette.background.default,t)),backgroundColor:i.vars?i.vars.palette.SnackbarContent.bg:Lg(i.palette.background.default,t),display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",flexGrow:1,[i.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),PM=je("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),kM=je("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),NM=V.forwardRef(function(t,e){const n=fs({props:t,name:"MuiSnackbarContent"}),{action:s,className:a,message:l,role:u="alert",...d}=n,f=n,h=OM(f);return J.jsxs(MM,{role:u,elevation:6,className:Ge(h.root,a),ownerState:f,ref:e,...d,children:[J.jsx(PM,{className:h.message,ownerState:f,children:l}),s?J.jsx(kM,{className:h.action,ownerState:f,children:s}):null]})});function BM(i){return us("MuiSnackbar",i)}cs("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);function FM(i){return typeof i=="string"}function UM(i,t,e){return i===void 0||FM(i)?t:{...t,ownerState:{...t.ownerState,...e}}}function $M(i,t,e){return typeof i=="function"?i(t,e):i}function _E(i){if(i===void 0)return{};const t={};return Object.keys(i).filter(e=>!(e.match(/^on[A-Z]/)&&typeof i[e]=="function")).forEach(e=>{t[e]=i[e]}),t}function VM(i){const{getSlotProps:t,additionalProps:e,externalSlotProps:n,externalForwardedProps:s,className:a}=i;if(!t){const S=Ge(e?.className,a,s?.className,n?.className),v={...e?.style,...s?.style,...n?.style},E={...e,...s,...n};return S.length>0&&(E.className=S),Object.keys(v).length>0&&(E.style=v),{props:E,internalRef:void 0}}const l=Sg({...s,...n}),u=_E(n),d=_E(s),f=t(l),h=Ge(f?.className,e?.className,a,s?.className,n?.className),g={...f?.style,...e?.style,...s?.style,...n?.style},y={...f,...e,...d,...u};return h.length>0&&(y.className=h),Object.keys(g).length>0&&(y.style=g),{props:y,internalRef:f.ref}}function Ai(i,t){const{className:e,elementType:n,ownerState:s,externalForwardedProps:a,internalForwardedProps:l,shouldForwardComponentProp:u=!1,...d}=t,{component:f,slots:h={[i]:void 0},slotProps:g={[i]:void 0},...y}=a,S=h[i]||n,v=$M(g[i],s),{props:{component:E,...x},internalRef:b}=VM({className:e,...d,externalForwardedProps:i==="root"?y:void 0,externalSlotProps:v}),D=Rl(b,v?.ref,t.ref),L=i==="root"?E||f:E,I=UM(S,{...i==="root"&&!f&&!h[i]&&l,...i!=="root"&&!h[i]&&l,...x,...L&&!u&&{as:L},...L&&u&&{component:L},ref:D},s);return[S,I]}const GM=i=>{const{classes:t,anchorOrigin:e}=i,n={root:["root",`anchorOrigin${he(e.vertical)}${he(e.horizontal)}`]};return qs(n,BM,t)},HM=je("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,t[`anchorOrigin${he(e.anchorOrigin.vertical)}${he(e.anchorOrigin.horizontal)}`]]}})(as(({theme:i})=>({zIndex:(i.vars||i).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:t})=>t.anchorOrigin.vertical==="top",style:{top:8,[i.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:t})=>t.anchorOrigin.vertical!=="top",style:{bottom:8,[i.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[i.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[i.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="center",style:{[i.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),jM=V.forwardRef(function(t,e){const n=fs({props:t,name:"MuiSnackbar"}),s=Hp(),a={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{action:l,anchorOrigin:{vertical:u,horizontal:d}={vertical:"bottom",horizontal:"left"},autoHideDuration:f=null,children:h,className:g,ClickAwayListenerProps:y,ContentProps:S,disableWindowBlurListener:v=!1,message:E,onBlur:x,onClose:b,onFocus:D,onMouseEnter:L,onMouseLeave:I,open:_,resumeHideDuration:P,slots:M={},slotProps:k={},TransitionComponent:F,transitionDuration:R=a,TransitionProps:{onEnter:$,onExited:Q,...ft}={},...ct}=n,it={...n,anchorOrigin:{vertical:u,horizontal:d},autoHideDuration:f,disableWindowBlurListener:v,TransitionComponent:F,transitionDuration:R},B=GM(it),{getRootProps:H,onClickAway:et}=cI({...it}),[X,O]=V.useState(!0),q=Ne=>{O(!0),Q&&Q(Ne)},st=(Ne,ue)=>{O(!1),$&&$(Ne,ue)},at={slots:{transition:F,...M},slotProps:{content:S,clickAwayListener:y,transition:ft,...k}},[dt,gt]=Ai("root",{ref:e,className:[B.root,g],elementType:HM,getSlotProps:H,externalForwardedProps:{...at,...ct},ownerState:it}),[ht,{ownerState:Ft,...Ct}]=Ai("clickAwayListener",{elementType:dI,externalForwardedProps:at,getSlotProps:Ne=>({onClickAway:(...ue)=>{const Mr=ue[0];Ne.onClickAway?.(...ue),!Mr?.defaultMuiPrevented&&et(...ue)}}),ownerState:it}),[Ee,ui]=Ai("content",{elementType:NM,shouldForwardComponentProp:!0,externalForwardedProps:at,additionalProps:{message:E,action:l},ownerState:it}),[ci,ki]=Ai("transition",{elementType:Og,externalForwardedProps:at,getSlotProps:Ne=>({onEnter:(...ue)=>{Ne.onEnter?.(...ue),st(...ue)},onExited:(...ue)=>{Ne.onExited?.(...ue),q(...ue)}}),additionalProps:{appear:!0,in:_,timeout:R,direction:u==="top"?"down":"up"},ownerState:it});return!_&&X?null:J.jsx(ht,{...Ct,...M.clickAwayListener&&{ownerState:Ft},children:J.jsx(dt,{...gt,children:J.jsx(ci,{...ki,children:h||J.jsx(Ee,{...ui})})})})});function KM(i){return typeof i.main=="string"}function zM(i,t=[]){if(!KM(i))return!1;for(const e of t)if(!i.hasOwnProperty(e)||typeof i[e]!="string")return!1;return!0}function Va(i=[]){return([,t])=>t&&zM(t,i)}function YM(i){return us("MuiAlert",i)}const DE=cs("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function qM(i){return us("MuiSvgIcon",i)}cs("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const XM=i=>{const{color:t,fontSize:e,classes:n}=i,s={root:["root",t!=="inherit"&&`color${he(t)}`,`fontSize${he(e)}`]};return qs(s,qM,n)},WM=je("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,e.color!=="inherit"&&t[`color${he(e.color)}`],t[`fontSize${he(e.fontSize)}`]]}})(as(({theme:i})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:i.transitions?.create?.("fill",{duration:(i.vars??i).transitions?.duration?.shorter}),variants:[{props:t=>!t.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:i.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:i.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:i.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((i.vars??i).palette).filter(([,t])=>t&&t.main).map(([t])=>({props:{color:t},style:{color:(i.vars??i).palette?.[t]?.main}})),{props:{color:"action"},style:{color:(i.vars??i).palette?.action?.active}},{props:{color:"disabled"},style:{color:(i.vars??i).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),Mg=V.forwardRef(function(t,e){const n=fs({props:t,name:"MuiSvgIcon"}),{children:s,className:a,color:l="inherit",component:u="svg",fontSize:d="medium",htmlColor:f,inheritViewBox:h=!1,titleAccess:g,viewBox:y="0 0 24 24",...S}=n,v=V.isValidElement(s)&&s.type==="svg",E={...n,color:l,component:u,fontSize:d,instanceFontSize:t.fontSize,inheritViewBox:h,viewBox:y,hasSvgAsChild:v},x={};h||(x.viewBox=y);const b=XM(E);return J.jsxs(WM,{as:u,className:Ge(b.root,a),focusable:"false",color:f,"aria-hidden":g?void 0:!0,role:g?"img":void 0,ref:e,...x,...S,...v&&s.props,ownerState:E,children:[v?s.props.children:s,g?J.jsx("title",{children:g}):null]})});Mg.muiName="SvgIcon";function Jl(i,t){function e(n,s){return J.jsx(Mg,{"data-testid":void 0,ref:s,...n,children:i})}return e.muiName=Mg.muiName,V.memo(V.forwardRef(e))}let IE=0;function QM(i){const[t,e]=V.useState(i),n=i||t;return V.useEffect(()=>{t==null&&(IE+=1,e(`mui-${IE}`))},[t]),n}const ZM={...vg},wE=ZM.useId;function JM(i){if(wE!==void 0){const t=wE();return i??t}return QM(i)}function OE(i){try{return i.matches(":focus-visible")}catch{}return!1}class gf{static create(){return new gf}static use(){const t=OA(gf.create).current,[e,n]=V.useState(!1);return t.shouldMount=e,t.setShouldMount=n,V.useEffect(t.mountEffect,[e]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=eP(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function tP(){return gf.use()}function eP(){let i,t;const e=new Promise((n,s)=>{i=n,t=s});return e.resolve=i,e.reject=t,e}function nP(i){const{className:t,classes:e,pulsate:n=!1,rippleX:s,rippleY:a,rippleSize:l,in:u,onExited:d,timeout:f}=i,[h,g]=V.useState(!1),y=Ge(t,e.ripple,e.rippleVisible,n&&e.ripplePulsate),S={width:l,height:l,top:-(l/2)+a,left:-(l/2)+s},v=Ge(e.child,h&&e.childLeaving,n&&e.childPulsate);return!u&&!h&&g(!0),V.useEffect(()=>{if(!u&&d!=null){const E=setTimeout(d,f);return()=>{clearTimeout(E)}}},[d,u,f]),J.jsx("span",{className:y,style:S,children:J.jsx("span",{className:v})})}const qn=cs("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Pg=550,iP=80,sP=Zl`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,rP=Zl`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,aP=Zl`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,oP=je("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),lP=je(nP,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${qn.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${sP};
    animation-duration: ${Pg}ms;
    animation-timing-function: ${({theme:i})=>i.transitions.easing.easeInOut};
  }

  &.${qn.ripplePulsate} {
    animation-duration: ${({theme:i})=>i.transitions.duration.shorter}ms;
  }

  & .${qn.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${qn.childLeaving} {
    opacity: 0;
    animation-name: ${rP};
    animation-duration: ${Pg}ms;
    animation-timing-function: ${({theme:i})=>i.transitions.easing.easeInOut};
  }

  & .${qn.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${aP};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:i})=>i.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,uP=V.forwardRef(function(t,e){const n=fs({props:t,name:"MuiTouchRipple"}),{center:s=!1,classes:a={},className:l,...u}=n,[d,f]=V.useState([]),h=V.useRef(0),g=V.useRef(null);V.useEffect(()=>{g.current&&(g.current(),g.current=null)},[d]);const y=V.useRef(!1),S=_p(),v=V.useRef(null),E=V.useRef(null),x=V.useCallback(I=>{const{pulsate:_,rippleX:P,rippleY:M,rippleSize:k,cb:F}=I;f(R=>[...R,J.jsx(lP,{classes:{ripple:Ge(a.ripple,qn.ripple),rippleVisible:Ge(a.rippleVisible,qn.rippleVisible),ripplePulsate:Ge(a.ripplePulsate,qn.ripplePulsate),child:Ge(a.child,qn.child),childLeaving:Ge(a.childLeaving,qn.childLeaving),childPulsate:Ge(a.childPulsate,qn.childPulsate)},timeout:Pg,pulsate:_,rippleX:P,rippleY:M,rippleSize:k},h.current)]),h.current+=1,g.current=F},[a]),b=V.useCallback((I={},_={},P=()=>{})=>{const{pulsate:M=!1,center:k=s||_.pulsate,fakeElement:F=!1}=_;if(I?.type==="mousedown"&&y.current){y.current=!1;return}I?.type==="touchstart"&&(y.current=!0);const R=F?null:E.current,$=R?R.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Q,ft,ct;if(k||I===void 0||I.clientX===0&&I.clientY===0||!I.clientX&&!I.touches)Q=Math.round($.width/2),ft=Math.round($.height/2);else{const{clientX:it,clientY:B}=I.touches&&I.touches.length>0?I.touches[0]:I;Q=Math.round(it-$.left),ft=Math.round(B-$.top)}if(k)ct=Math.sqrt((2*$.width**2+$.height**2)/3),ct%2===0&&(ct+=1);else{const it=Math.max(Math.abs((R?R.clientWidth:0)-Q),Q)*2+2,B=Math.max(Math.abs((R?R.clientHeight:0)-ft),ft)*2+2;ct=Math.sqrt(it**2+B**2)}I?.touches?v.current===null&&(v.current=()=>{x({pulsate:M,rippleX:Q,rippleY:ft,rippleSize:ct,cb:P})},S.start(iP,()=>{v.current&&(v.current(),v.current=null)})):x({pulsate:M,rippleX:Q,rippleY:ft,rippleSize:ct,cb:P})},[s,x,S]),D=V.useCallback(()=>{b({},{pulsate:!0})},[b]),L=V.useCallback((I,_)=>{if(S.clear(),I?.type==="touchend"&&v.current){v.current(),v.current=null,S.start(0,()=>{L(I,_)});return}v.current=null,f(P=>P.length>0?P.slice(1):P),g.current=_},[S]);return V.useImperativeHandle(e,()=>({pulsate:D,start:b,stop:L}),[D,b,L]),J.jsx(oP,{className:Ge(qn.root,a.root,l),ref:E,...u,children:J.jsx(Kp,{component:null,exit:!0,children:d})})});function cP(i){return us("MuiButtonBase",i)}const fP=cs("MuiButtonBase",["root","disabled","focusVisible"]),dP=i=>{const{disabled:t,focusVisible:e,focusVisibleClassName:n,classes:s}=i,l=qs({root:["root",t&&"disabled",e&&"focusVisible"]},cP,s);return e&&n&&(l.root+=` ${n}`),l},hP=je("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${fP.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),mP=V.forwardRef(function(t,e){const n=fs({props:t,name:"MuiButtonBase"}),{action:s,centerRipple:a=!1,children:l,className:u,component:d="button",disabled:f=!1,disableRipple:h=!1,disableTouchRipple:g=!1,focusRipple:y=!1,focusVisibleClassName:S,LinkComponent:v="a",onBlur:E,onClick:x,onContextMenu:b,onDragLeave:D,onFocus:L,onFocusVisible:I,onKeyDown:_,onKeyUp:P,onMouseDown:M,onMouseLeave:k,onMouseUp:F,onTouchEnd:R,onTouchMove:$,onTouchStart:Q,tabIndex:ft=0,TouchRippleProps:ct,touchRippleRef:it,type:B,...H}=n,et=V.useRef(null),X=tP(),O=Rl(X.ref,it),[q,st]=V.useState(!1);f&&q&&st(!1),V.useImperativeHandle(s,()=>({focusVisible:()=>{st(!0),et.current.focus()}}),[]);const at=X.shouldMount&&!h&&!f;V.useEffect(()=>{q&&y&&!h&&X.pulsate()},[h,y,q,X]);const dt=Zi(X,"start",M,g),gt=Zi(X,"stop",b,g),ht=Zi(X,"stop",D,g),Ft=Zi(X,"stop",F,g),Ct=Zi(X,"stop",bt=>{q&&bt.preventDefault(),k&&k(bt)},g),Ee=Zi(X,"start",Q,g),ui=Zi(X,"stop",R,g),ci=Zi(X,"stop",$,g),ki=Zi(X,"stop",bt=>{OE(bt.target)||st(!1),E&&E(bt)},!1),Ne=Rr(bt=>{et.current||(et.current=bt.currentTarget),OE(bt.target)&&(st(!0),I&&I(bt)),L&&L(bt)}),ue=()=>{const bt=et.current;return d&&d!=="button"&&!(bt.tagName==="A"&&bt.href)},Mr=Rr(bt=>{y&&!bt.repeat&&q&&bt.key===" "&&X.stop(bt,()=>{X.start(bt)}),bt.target===bt.currentTarget&&ue()&&bt.key===" "&&bt.preventDefault(),_&&_(bt),bt.target===bt.currentTarget&&ue()&&bt.key==="Enter"&&!f&&(bt.preventDefault(),x&&x(bt))}),Nt=Rr(bt=>{y&&bt.key===" "&&q&&!bt.defaultPrevented&&X.stop(bt,()=>{X.pulsate(bt)}),P&&P(bt),x&&bt.target===bt.currentTarget&&ue()&&bt.key===" "&&!bt.defaultPrevented&&x(bt)});let Ut=d;Ut==="button"&&(H.href||H.to)&&(Ut=v);const Ce={};Ut==="button"?(Ce.type=B===void 0?"button":B,Ce.disabled=f):(!H.href&&!H.to&&(Ce.role="button"),f&&(Ce["aria-disabled"]=f));const Pn=Rl(e,et),Ke={...n,centerRipple:a,component:d,disabled:f,disableRipple:h,disableTouchRipple:g,focusRipple:y,tabIndex:ft,focusVisible:q},Tn=dP(Ke);return J.jsxs(hP,{as:Ut,className:Ge(Tn.root,u),ownerState:Ke,onBlur:ki,onClick:x,onContextMenu:gt,onFocus:Ne,onKeyDown:Mr,onKeyUp:Nt,onMouseDown:dt,onMouseLeave:Ct,onMouseUp:Ft,onDragLeave:ht,onTouchEnd:ui,onTouchMove:ci,onTouchStart:Ee,ref:Pn,tabIndex:f?-1:ft,type:B,...Ce,...H,children:[l,at?J.jsx(uP,{ref:O,center:a,...ct}):null]})});function Zi(i,t,e,n=!1){return Rr(s=>(e&&e(s),n||i[t](s),!0))}function gP(i){return us("MuiCircularProgress",i)}cs("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Bs=44,kg=Zl`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,Ng=Zl`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,pP=typeof kg!="string"?Up`
        animation: ${kg} 1.4s linear infinite;
      `:null,yP=typeof Ng!="string"?Up`
        animation: ${Ng} 1.4s ease-in-out infinite;
      `:null,vP=i=>{const{classes:t,variant:e,color:n,disableShrink:s}=i,a={root:["root",e,`color${he(n)}`],svg:["svg"],circle:["circle",`circle${he(e)}`,s&&"circleDisableShrink"]};return qs(a,gP,t)},SP=je("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,t[e.variant],t[`color${he(e.color)}`]]}})(as(({theme:i})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:i.transitions.create("transform")}},{props:{variant:"indeterminate"},style:pP||{animation:`${kg} 1.4s linear infinite`}},...Object.entries(i.palette).filter(Va()).map(([t])=>({props:{color:t},style:{color:(i.vars||i).palette[t].main}}))]}))),TP=je("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),EP=je("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.circle,t[`circle${he(e.variant)}`],e.disableShrink&&t.circleDisableShrink]}})(as(({theme:i})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:i.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:yP||{animation:`${Ng} 1.4s ease-in-out infinite`}}]}))),xP=V.forwardRef(function(t,e){const n=fs({props:t,name:"MuiCircularProgress"}),{className:s,color:a="primary",disableShrink:l=!1,size:u=40,style:d,thickness:f=3.6,value:h=0,variant:g="indeterminate",...y}=n,S={...n,color:a,disableShrink:l,size:u,thickness:f,value:h,variant:g},v=vP(S),E={},x={},b={};if(g==="determinate"){const D=2*Math.PI*((Bs-f)/2);E.strokeDasharray=D.toFixed(3),b["aria-valuenow"]=Math.round(h),E.strokeDashoffset=`${((100-h)/100*D).toFixed(3)}px`,x.transform="rotate(-90deg)"}return J.jsx(SP,{className:Ge(v.root,s),style:{width:u,height:u,...x,...d},ownerState:S,ref:e,role:"progressbar",...b,...y,children:J.jsx(TP,{className:v.svg,ownerState:S,viewBox:`${Bs/2} ${Bs/2} ${Bs} ${Bs}`,children:J.jsx(EP,{className:v.circle,style:E,ownerState:S,cx:Bs,cy:Bs,r:(Bs-f)/2,fill:"none",strokeWidth:f})})})});function bP(i){return us("MuiIconButton",i)}const ME=cs("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),AP=i=>{const{classes:t,disabled:e,color:n,edge:s,size:a,loading:l}=i,u={root:["root",l&&"loading",e&&"disabled",n!=="default"&&`color${he(n)}`,s&&`edge${he(s)}`,`size${he(a)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return qs(u,bP,t)},RP=je(mP,{name:"MuiIconButton",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,e.loading&&t.loading,e.color!=="default"&&t[`color${he(e.color)}`],e.edge&&t[`edge${he(e.edge)}`],t[`size${he(e.size)}`]]}})(as(({theme:i})=>({textAlign:"center",flex:"0 0 auto",fontSize:i.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(i.vars||i).palette.action.active,transition:i.transitions.create("background-color",{duration:i.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":i.vars?`rgba(${i.vars.palette.action.activeChannel} / ${i.vars.palette.action.hoverOpacity})`:Dl(i.palette.action.active,i.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),as(({theme:i})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(i.palette).filter(Va()).map(([t])=>({props:{color:t},style:{color:(i.vars||i).palette[t].main}})),...Object.entries(i.palette).filter(Va()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":i.vars?`rgba(${(i.vars||i).palette[t].mainChannel} / ${i.vars.palette.action.hoverOpacity})`:Dl((i.vars||i).palette[t].main,i.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:i.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:i.typography.pxToRem(28)}}],[`&.${ME.disabled}`]:{backgroundColor:"transparent",color:(i.vars||i).palette.action.disabled},[`&.${ME.loading}`]:{color:"transparent"}}))),LP=je("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:i})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(i.vars||i).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),CP=V.forwardRef(function(t,e){const n=fs({props:t,name:"MuiIconButton"}),{edge:s=!1,children:a,className:l,color:u="default",disabled:d=!1,disableFocusRipple:f=!1,size:h="medium",id:g,loading:y=null,loadingIndicator:S,...v}=n,E=JM(g),x=S??J.jsx(xP,{"aria-labelledby":E,color:"inherit",size:16}),b={...n,edge:s,color:u,disabled:d,disableFocusRipple:f,loading:y,loadingIndicator:x,size:h},D=AP(b);return J.jsxs(RP,{id:y?E:g,className:Ge(D.root,l),centerRipple:!0,focusRipple:!f,disabled:d||y,ref:e,...v,ownerState:b,children:[typeof y=="boolean"&&J.jsx("span",{className:D.loadingWrapper,style:{display:"contents"},children:J.jsx(LP,{className:D.loadingIndicator,ownerState:b,children:y&&x})}),a]})}),_P=Jl(J.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),DP=Jl(J.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),IP=Jl(J.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),wP=Jl(J.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),OP=Jl(J.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),MP=i=>{const{variant:t,color:e,severity:n,classes:s}=i,a={root:["root",`color${he(e||n)}`,`${t}${he(e||n)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return qs(a,YM,s)},PP=je(f1,{name:"MuiAlert",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,t[e.variant],t[`${e.variant}${he(e.color||e.severity)}`]]}})(as(({theme:i})=>{const t=i.palette.mode==="light"?Il:wl,e=i.palette.mode==="light"?wl:Il;return{...i.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(i.palette).filter(Va(["light"])).map(([n])=>({props:{colorSeverity:n,variant:"standard"},style:{color:i.vars?i.vars.palette.Alert[`${n}Color`]:t(i.palette[n].light,.6),backgroundColor:i.vars?i.vars.palette.Alert[`${n}StandardBg`]:e(i.palette[n].light,.9),[`& .${DE.icon}`]:i.vars?{color:i.vars.palette.Alert[`${n}IconColor`]}:{color:i.palette[n].main}}})),...Object.entries(i.palette).filter(Va(["light"])).map(([n])=>({props:{colorSeverity:n,variant:"outlined"},style:{color:i.vars?i.vars.palette.Alert[`${n}Color`]:t(i.palette[n].light,.6),border:`1px solid ${(i.vars||i).palette[n].light}`,[`& .${DE.icon}`]:i.vars?{color:i.vars.palette.Alert[`${n}IconColor`]}:{color:i.palette[n].main}}})),...Object.entries(i.palette).filter(Va(["dark"])).map(([n])=>({props:{colorSeverity:n,variant:"filled"},style:{fontWeight:i.typography.fontWeightMedium,...i.vars?{color:i.vars.palette.Alert[`${n}FilledColor`],backgroundColor:i.vars.palette.Alert[`${n}FilledBg`]}:{backgroundColor:i.palette.mode==="dark"?i.palette[n].dark:i.palette[n].main,color:i.palette.getContrastText(i.palette[n].main)}}}))]}})),kP=je("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),NP=je("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),BP=je("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),PE={success:J.jsx(_P,{fontSize:"inherit"}),warning:J.jsx(DP,{fontSize:"inherit"}),error:J.jsx(IP,{fontSize:"inherit"}),info:J.jsx(wP,{fontSize:"inherit"})},FP=V.forwardRef(function(t,e){const n=fs({props:t,name:"MuiAlert"}),{action:s,children:a,className:l,closeText:u="Close",color:d,components:f={},componentsProps:h={},icon:g,iconMapping:y=PE,onClose:S,role:v="alert",severity:E="success",slotProps:x={},slots:b={},variant:D="standard",...L}=n,I={...n,color:d,severity:E,variant:D,colorSeverity:d||E},_=MP(I),P={slots:{closeButton:f.CloseButton,closeIcon:f.CloseIcon,...b},slotProps:{...h,...x}},[M,k]=Ai("root",{ref:e,shouldForwardComponentProp:!0,className:Ge(_.root,l),elementType:PP,externalForwardedProps:{...P,...L},ownerState:I,additionalProps:{role:v,elevation:0}}),[F,R]=Ai("icon",{className:_.icon,elementType:kP,externalForwardedProps:P,ownerState:I}),[$,Q]=Ai("message",{className:_.message,elementType:NP,externalForwardedProps:P,ownerState:I}),[ft,ct]=Ai("action",{className:_.action,elementType:BP,externalForwardedProps:P,ownerState:I}),[it,B]=Ai("closeButton",{elementType:CP,externalForwardedProps:P,ownerState:I}),[H,et]=Ai("closeIcon",{elementType:OP,externalForwardedProps:P,ownerState:I});return J.jsxs(M,{...k,children:[g!==!1?J.jsx(F,{...R,children:g||y[E]||PE[E]}):null,J.jsx($,{...Q,children:a}),s!=null?J.jsx(ft,{...ct,children:s}):null,s==null&&S?J.jsx(ft,{...ct,children:J.jsx(it,{size:"small","aria-label":u,title:u,color:"inherit",onClick:S,...B,children:J.jsx(H,{fontSize:"small",...et})})}):null]})}),kE=i=>{let t;const e=new Set,n=(f,h)=>{const g=typeof f=="function"?f(t):f;if(!Object.is(g,t)){const y=t;t=h??(typeof g!="object"||g===null)?g:Object.assign({},t,g),e.forEach(S=>S(t,y))}},s=()=>t,u={setState:n,getState:s,getInitialState:()=>d,subscribe:f=>(e.add(f),()=>e.delete(f))},d=t=i(n,s,u);return u},UP=i=>i?kE(i):kE,$P=i=>i;function VP(i,t=$P){const e=Wn.useSyncExternalStore(i.subscribe,()=>t(i.getState()),()=>t(i.getInitialState()));return Wn.useDebugValue(e),e}const NE=i=>{const t=UP(i),e=n=>VP(t,n);return Object.assign(e,t),e},d1=i=>i?NE(i):NE,h1=d1(i=>({notification:{text:"",type:"info",visible:!1},setNotification:t=>i({notification:t})})),GP=()=>{const{notification:i,setNotification:t}=h1(),e=()=>t({...i,visible:!1});return J.jsx(jM,{open:i.visible,autoHideDuration:5e3,onClose:e,children:J.jsx("div",{children:J.jsx(FP,{elevation:6,variant:"filled",onClose:e,severity:i.type,children:i.text})})})},BE=({direction:i,setDirection:t})=>{const e=V.useRef(null),n=h=>{e.current=h.touches[0].clientY},s=h=>{if(e.current===null)return;const g=h.touches[0].clientY-e.current;f(g)},a=()=>{t("neutral"),e.current=null},l=h=>{e.current=h.clientY,window.addEventListener("mousemove",u),window.addEventListener("mouseup",d)},u=h=>{if(e.current===null)return;const g=h.clientY-e.current;f(g)},d=()=>{t("neutral"),e.current=null,window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",d)},f=h=>{h<-20?t("up"):h>20?t("down"):t("neutral")};return J.jsxs("div",{className:`zoom-wrapper ${i==="up"?"active-up":""} ${i==="down"?"active-down":""}`,children:[J.jsx("div",{className:"zoom-label",children:"+"}),J.jsx("div",{className:`zoom-thumb ${i==="up"?"up":i==="down"?"down":""}`,onTouchStart:n,onTouchMove:s,onTouchEnd:a,onMouseDown:l}),J.jsx("div",{className:"zoom-label",children:"−"})]})},FE=({isPressed:i,setIsPressed:t})=>{const e=V.useCallback(u=>{t(u)},[t]),n=V.useCallback(u=>{i===u&&t(null)},[i,t]),s=(u,d)=>{e(d)},a=(u,d)=>{u.preventDefault(),n(d)},l=u=>{if(!u)return"";if(u==="up")return"joystick-container-press-down";if(u==="down")return"joystick-container-press-up";if(u==="left")return"joystick-container-press-left";if(u==="right")return"joystick-container-press-right"};return J.jsxs("div",{className:`joystick-container ${l(i)}`,children:[J.jsx("button",{className:`joystick-button  ${i==="up"?"pressed":""}`,onTouchStart:u=>s(u,"up"),onTouchEnd:u=>a(u,"up"),onMouseDown:()=>e("up"),onMouseUp:()=>n("up"),onMouseLeave:()=>n("up"),children:J.jsx("img",{src:"/icons/up.png",alt:"Up"})}),J.jsx("button",{className:`joystick-button ${i==="left"?"pressed":""}`,onTouchStart:u=>s(u,"left"),onTouchEnd:u=>a(u,"left"),onMouseDown:()=>e("left"),onMouseUp:()=>n("left"),onMouseLeave:()=>n("left"),children:J.jsx("img",{src:"/icons/left.png",alt:"Left"})}),J.jsx("button",{className:`joystick-button ${i==="right"?"pressed":""}`,onTouchStart:u=>s(u,"right"),onTouchEnd:u=>a(u,"right"),onMouseDown:()=>e("right"),onMouseUp:()=>n("right"),onMouseLeave:()=>n("right"),children:J.jsx("img",{src:"/icons/right.png",alt:"Right"})}),J.jsx("button",{className:`joystick-button ${i==="down"?"pressed":""}`,onTouchStart:u=>s(u,"down"),onTouchEnd:u=>a(u,"down"),onMouseDown:()=>e("down"),onMouseUp:()=>n("down"),onMouseLeave:()=>n("down"),children:J.jsx("img",{src:"/icons/down.png",alt:"Down"})})]})},HP="_wrapper_1wzto_1",jP="_firstPresetItem_1wzto_10",KP="_fullPresetItem_1wzto_15",zP="_topRightPresetItem_1wzto_20",YP="_fourPresetWrapper_1wzto_38",qP="_fourPresetItem_1wzto_46",es={wrapper:HP,firstPresetItem:jP,fullPresetItem:KP,topRightPresetItem:zP,fourPresetWrapper:YP,fourPresetItem:qP};var Ci=(i=>(i[i.first=1]="first",i[i.second=2]="second",i[i.third=3]="third",i[i.fourth=4]="fourth",i))(Ci||{});const mt=Number.isFinite||function(i){return typeof i=="number"&&isFinite(i)},XP=Number.isSafeInteger||function(i){return typeof i=="number"&&Math.abs(i)<=WP},WP=Number.MAX_SAFE_INTEGER||9007199254740991;let vt=function(i){return i.NETWORK_ERROR="networkError",i.MEDIA_ERROR="mediaError",i.KEY_SYSTEM_ERROR="keySystemError",i.MUX_ERROR="muxError",i.OTHER_ERROR="otherError",i}({}),z=function(i){return i.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",i.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",i.KEY_SYSTEM_NO_SESSION="keySystemNoSession",i.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",i.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",i.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",i.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",i.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",i.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",i.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",i.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",i.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",i.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",i.MANIFEST_LOAD_ERROR="manifestLoadError",i.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",i.MANIFEST_PARSING_ERROR="manifestParsingError",i.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",i.LEVEL_EMPTY_ERROR="levelEmptyError",i.LEVEL_LOAD_ERROR="levelLoadError",i.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",i.LEVEL_PARSING_ERROR="levelParsingError",i.LEVEL_SWITCH_ERROR="levelSwitchError",i.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",i.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",i.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",i.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",i.FRAG_LOAD_ERROR="fragLoadError",i.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",i.FRAG_DECRYPT_ERROR="fragDecryptError",i.FRAG_PARSING_ERROR="fragParsingError",i.FRAG_GAP="fragGap",i.REMUX_ALLOC_ERROR="remuxAllocError",i.KEY_LOAD_ERROR="keyLoadError",i.KEY_LOAD_TIMEOUT="keyLoadTimeOut",i.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",i.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",i.BUFFER_APPEND_ERROR="bufferAppendError",i.BUFFER_APPENDING_ERROR="bufferAppendingError",i.BUFFER_STALLED_ERROR="bufferStalledError",i.BUFFER_FULL_ERROR="bufferFullError",i.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",i.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",i.ASSET_LIST_LOAD_ERROR="assetListLoadError",i.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",i.ASSET_LIST_PARSING_ERROR="assetListParsingError",i.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",i.INTERNAL_EXCEPTION="internalException",i.INTERNAL_ABORTED="aborted",i.ATTACH_MEDIA_ERROR="attachMediaError",i.UNKNOWN="unknown",i}({}),A=function(i){return i.MEDIA_ATTACHING="hlsMediaAttaching",i.MEDIA_ATTACHED="hlsMediaAttached",i.MEDIA_DETACHING="hlsMediaDetaching",i.MEDIA_DETACHED="hlsMediaDetached",i.MEDIA_ENDED="hlsMediaEnded",i.STALL_RESOLVED="hlsStallResolved",i.BUFFER_RESET="hlsBufferReset",i.BUFFER_CODECS="hlsBufferCodecs",i.BUFFER_CREATED="hlsBufferCreated",i.BUFFER_APPENDING="hlsBufferAppending",i.BUFFER_APPENDED="hlsBufferAppended",i.BUFFER_EOS="hlsBufferEos",i.BUFFERED_TO_END="hlsBufferedToEnd",i.BUFFER_FLUSHING="hlsBufferFlushing",i.BUFFER_FLUSHED="hlsBufferFlushed",i.MANIFEST_LOADING="hlsManifestLoading",i.MANIFEST_LOADED="hlsManifestLoaded",i.MANIFEST_PARSED="hlsManifestParsed",i.LEVEL_SWITCHING="hlsLevelSwitching",i.LEVEL_SWITCHED="hlsLevelSwitched",i.LEVEL_LOADING="hlsLevelLoading",i.LEVEL_LOADED="hlsLevelLoaded",i.LEVEL_UPDATED="hlsLevelUpdated",i.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",i.LEVELS_UPDATED="hlsLevelsUpdated",i.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",i.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",i.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",i.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",i.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",i.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",i.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",i.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",i.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",i.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",i.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",i.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",i.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",i.CUES_PARSED="hlsCuesParsed",i.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",i.INIT_PTS_FOUND="hlsInitPtsFound",i.FRAG_LOADING="hlsFragLoading",i.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",i.FRAG_LOADED="hlsFragLoaded",i.FRAG_DECRYPTED="hlsFragDecrypted",i.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",i.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",i.FRAG_PARSING_METADATA="hlsFragParsingMetadata",i.FRAG_PARSED="hlsFragParsed",i.FRAG_BUFFERED="hlsFragBuffered",i.FRAG_CHANGED="hlsFragChanged",i.FPS_DROP="hlsFpsDrop",i.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",i.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",i.ERROR="hlsError",i.DESTROYING="hlsDestroying",i.KEY_LOADING="hlsKeyLoading",i.KEY_LOADED="hlsKeyLoaded",i.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",i.BACK_BUFFER_REACHED="hlsBackBufferReached",i.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",i.ASSET_LIST_LOADING="hlsAssetListLoading",i.ASSET_LIST_LOADED="hlsAssetListLoaded",i.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",i.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",i.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",i.INTERSTITIAL_STARTED="hlsInterstitialStarted",i.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",i.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",i.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",i.INTERSTITIAL_ENDED="hlsInterstitialEnded",i.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",i.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",i.EVENT_CUE_ENTER="hlsEventCueEnter",i}({});var Mt={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},yt={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class La{constructor(t,e=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=e,this.totalWeight_=n}sample(t,e){const n=Math.pow(this.alpha_,t);this.estimate_=e*(1-n)+n*this.estimate_,this.totalWeight_+=t}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_}}class QP{constructor(t,e,n,s=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new La(t),this.fast_=new La(e),this.defaultTTFB_=s,this.ttfb_=new La(t)}update(t,e){const{slow_:n,fast_:s,ttfb_:a}=this;n.halfLife!==t&&(this.slow_=new La(t,n.getEstimate(),n.getTotalWeight())),s.halfLife!==e&&(this.fast_=new La(e,s.getEstimate(),s.getTotalWeight())),a.halfLife!==t&&(this.ttfb_=new La(t,a.getEstimate(),a.getTotalWeight()))}sample(t,e){t=Math.max(t,this.minDelayMs_);const n=8*e,s=t/1e3,a=n/s;this.fast_.sample(s,a),this.slow_.sample(s,a)}sampleTTFB(t){const e=t/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(e,2)/2);this.ttfb_.sample(n,Math.max(t,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function ZP(i,t,e){return(t=tk(t))in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function Wt(){return Wt=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)({}).hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Wt.apply(null,arguments)}function UE(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function zt(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?UE(Object(e),!0).forEach(function(n){ZP(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):UE(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function JP(i,t){if(typeof i!="object"||!i)return i;var e=i[Symbol.toPrimitive];if(e!==void 0){var n=e.call(i,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function tk(i){var t=JP(i,"string");return typeof t=="symbol"?t:t+""}class hs{constructor(t,e){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${t}]:`;this.trace=Vs,this.debug=e.debug.bind(null,n),this.log=e.log.bind(null,n),this.warn=e.warn.bind(null,n),this.info=e.info.bind(null,n),this.error=e.error.bind(null,n)}}const Vs=function(){},ek={trace:Vs,debug:Vs,log:Vs,warn:Vs,info:Vs,error:Vs};function Bg(){return Wt({},ek)}function nk(i,t){const e=self.console[i];return e?e.bind(self.console,`${t?"["+t+"] ":""}[${i}] >`):Vs}function $E(i,t,e){return t[i]?t[i].bind(t):nk(i,e)}const Fg=Bg();function ik(i,t,e){const n=Bg();if(typeof console=="object"&&i===!0||typeof i=="object"){const s=["debug","log","info","warn","error"];s.forEach(a=>{n[a]=$E(a,i,e)});try{n.log(`Debug logs enabled for "${t}" in hls.js version 1.6.5`)}catch{return Bg()}s.forEach(a=>{Fg[a]=$E(a,i)})}else Wt(Fg,n);return n}const Vt=Fg;function js(i=!0){return typeof self>"u"?void 0:(i||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function sk(i){return typeof self<"u"&&i===self.ManagedMediaSource}function m1(i,t){const e=Object.keys(i),n=Object.keys(t),s=e.length,a=n.length;return!s||!a||s===a&&!e.some(l=>n.indexOf(l)===-1)}function Mn(i,t=!1){if(typeof TextDecoder<"u"){const f=new TextDecoder("utf-8").decode(i);if(t){const h=f.indexOf("\0");return h!==-1?f.substring(0,h):f}return f.replace(/\0/g,"")}const e=i.length;let n,s,a,l="",u=0;for(;u<e;){if(n=i[u++],n===0&&t)return l;if(n===0||n===3)continue;switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(n);break;case 12:case 13:s=i[u++],l+=String.fromCharCode((n&31)<<6|s&63);break;case 14:s=i[u++],a=i[u++],l+=String.fromCharCode((n&15)<<12|(s&63)<<6|(a&63)<<0);break}}return l}const Ei={hexDump:function(i){let t="";for(let e=0;e<i.length;e++){let n=i[e].toString(16);n.length<2&&(n="0"+n),t+=n}return t}};function rk(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Mm={exports:{}},VE;function ak(){return VE||(VE=1,function(i,t){(function(e){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,s=/^(?=([^\/?#]*))\1([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,l=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,u={buildAbsoluteURL:function(d,f,h){if(h=h||{},d=d.trim(),f=f.trim(),!f){if(!h.alwaysNormalize)return d;var g=u.parseURL(d);if(!g)throw new Error("Error trying to parse base URL.");return g.path=u.normalizePath(g.path),u.buildURLFromParts(g)}var y=u.parseURL(f);if(!y)throw new Error("Error trying to parse relative URL.");if(y.scheme)return h.alwaysNormalize?(y.path=u.normalizePath(y.path),u.buildURLFromParts(y)):f;var S=u.parseURL(d);if(!S)throw new Error("Error trying to parse base URL.");if(!S.netLoc&&S.path&&S.path[0]!=="/"){var v=s.exec(S.path);S.netLoc=v[1],S.path=v[2]}S.netLoc&&!S.path&&(S.path="/");var E={scheme:S.scheme,netLoc:y.netLoc,path:null,params:y.params,query:y.query,fragment:y.fragment};if(!y.netLoc&&(E.netLoc=S.netLoc,y.path[0]!=="/"))if(!y.path)E.path=S.path,y.params||(E.params=S.params,y.query||(E.query=S.query));else{var x=S.path,b=x.substring(0,x.lastIndexOf("/")+1)+y.path;E.path=u.normalizePath(b)}return E.path===null&&(E.path=h.alwaysNormalize?u.normalizePath(y.path):y.path),u.buildURLFromParts(E)},parseURL:function(d){var f=n.exec(d);return f?{scheme:f[1]||"",netLoc:f[2]||"",path:f[3]||"",params:f[4]||"",query:f[5]||"",fragment:f[6]||""}:null},normalizePath:function(d){for(d=d.split("").reverse().join("").replace(a,"");d.length!==(d=d.replace(l,"")).length;);return d.split("").reverse().join("")},buildURLFromParts:function(d){return d.scheme+d.netLoc+d.path+d.params+d.query+d.fragment}};i.exports=u})()}(Mm)),Mm.exports}var zp=ak();class Yp{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var se={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class g1{constructor(t){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof t=="string"&&(t={url:t}),this.base=t,lk(this,"stats")}setByteRange(t,e){const n=t.split("@",2);let s;n.length===1?s=e?.byteRangeEndOffset||0:s=parseInt(n[1]),this._byteRange=[s,parseInt(n[0])+s]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[se.AUDIO]:null,[se.VIDEO]:null,[se.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(t){this._streams=t}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new Yp),this._stats}set stats(t){this._stats=t}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=zp.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(t){this._url=t}clearElementaryStreamInfo(){const{elementaryStreams:t}=this;t[se.AUDIO]=null,t[se.VIDEO]=null,t[se.AUDIOVIDEO]=null}}function He(i){return i.sn!=="initSegment"}class Pm extends g1{constructor(t,e){super(e),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=t}get byteLength(){if(this.hasStats){const t=this.stats.total;if(t)return t}if(this.byteRange){const t=this.byteRange[0],e=this.byteRange[1];if(mt(t)&&mt(e))return e-t}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(t){this._bitrate=t}get decryptdata(){const{levelkeys:t}=this;if(!t&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{const n=Object.keys(this.levelkeys);if(n.length===1)return this._decryptdata=this.levelkeys[n[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const t=mt(this.duration)?this.duration:0;return this.programDateTime+t*1e3}get encrypted(){var t;if((t=this._decryptdata)!=null&&t.encrypted)return!0;if(this.levelkeys){const e=Object.keys(this.levelkeys),n=e.length;if(n>1||n===1&&this.levelkeys[e[0]].encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(t){if(!mt(t)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=t}get ref(){return He(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(t){this.setStart(this.start+t)}setStart(t){this.start=t,this._ref&&(this._ref.start=t)}setDuration(t){this.duration=t,this._ref&&(this._ref.duration=t)}setKeyFormat(t){if(this.levelkeys){const e=this.levelkeys[t];e&&!this._decryptdata&&(this._decryptdata=e.getDecryptData(this.sn))}}abortRequests(){var t,e;(t=this.loader)==null||t.abort(),(e=this.keyLoader)==null||e.abort()}setElementaryStreamInfo(t,e,n,s,a,l=!1){const{elementaryStreams:u}=this,d=u[t];if(!d){u[t]={startPTS:e,endPTS:n,startDTS:s,endDTS:a,partial:l};return}d.startPTS=Math.min(d.startPTS,e),d.endPTS=Math.max(d.endPTS,n),d.startDTS=Math.min(d.startDTS,s),d.endDTS=Math.max(d.endDTS,a)}}class ok extends g1{constructor(t,e,n,s,a){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=t.decimalFloatingPoint("DURATION"),this.gap=t.bool("GAP"),this.independent=t.bool("INDEPENDENT"),this.relurl=t.enumeratedString("URI"),this.fragment=e,this.index=s;const l=t.enumeratedString("BYTERANGE");l&&this.setByteRange(l,a),a&&(this.fragOffset=a.fragOffset+a.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:t}=this;return!!(t.audio||t.video||t.audiovideo)}}function p1(i,t){const e=Object.getPrototypeOf(i);if(e){const n=Object.getOwnPropertyDescriptor(e,t);return n||p1(e,t)}}function lk(i,t){const e=p1(i,t);e&&(e.enumerable=!0,Object.defineProperty(i,t,e))}const pf=Math.pow(2,32)-1,uk=[].push,y1={video:1,audio:2,id3:3,text:4};function Pe(i){return String.fromCharCode.apply(null,i)}function v1(i,t){const e=i[t]<<8|i[t+1];return e<0?65536+e:e}function xt(i,t){const e=S1(i,t);return e<0?4294967296+e:e}function GE(i,t){let e=xt(i,t);return e*=Math.pow(2,32),e+=xt(i,t+4),e}function S1(i,t){return i[t]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3]}function km(i,t,e){i[t]=e>>24,i[t+1]=e>>16&255,i[t+2]=e>>8&255,i[t+3]=e&255}function ck(i){const t=i.byteLength;for(let e=0;e<t;){const n=xt(i,e);if(n>8&&i[e+4]===109&&i[e+5]===111&&i[e+6]===111&&i[e+7]===102)return!0;e=n>1?e+n:t}return!1}function _t(i,t){const e=[];if(!t.length)return e;const n=i.byteLength;for(let s=0;s<n;){const a=xt(i,s),l=Pe(i.subarray(s+4,s+8)),u=a>1?s+a:n;if(l===t[0])if(t.length===1)e.push(i.subarray(s+8,u));else{const d=_t(i.subarray(s+8,u),t.slice(1));d.length&&uk.apply(e,d)}s=u}return e}function fk(i){const t=[],e=i[0];let n=8;const s=xt(i,n);n+=4;let a=0,l=0;e===0?(a=xt(i,n),l=xt(i,n+4),n+=8):(a=GE(i,n),l=GE(i,n+8),n+=16),n+=2;let u=i.length+l;const d=v1(i,n);n+=2;for(let f=0;f<d;f++){let h=n;const g=xt(i,h);h+=4;const y=g&2147483647;if((g&2147483648)>>>31===1)return Vt.warn("SIDX has hierarchical references (not supported)"),null;const v=xt(i,h);h+=4,t.push({referenceSize:y,subsegmentDuration:v,info:{duration:v/s,start:u,end:u+y-1}}),u+=y,h+=4,n=h}return{earliestPresentationTime:a,timescale:s,version:e,referencesCount:d,references:t}}function T1(i){const t=[],e=_t(i,["moov","trak"]);for(let s=0;s<e.length;s++){const a=e[s],l=_t(a,["tkhd"])[0];if(l){let u=l[0];const d=xt(l,u===0?12:20),f=_t(a,["mdia","mdhd"])[0];if(f){u=f[0];const h=xt(f,u===0?12:20),g=_t(a,["mdia","hdlr"])[0];if(g){const y=Pe(g.subarray(8,12)),S={soun:se.AUDIO,vide:se.VIDEO}[y],v=_t(a,["mdia","minf","stbl","stsd"])[0],E=dk(v);S?(t[d]={timescale:h,type:S,stsd:E},t[S]=zt({timescale:h,id:d},E)):t[d]={timescale:h,type:y,stsd:E}}}}}return _t(i,["moov","mvex","trex"]).forEach(s=>{const a=xt(s,4),l=t[a];l&&(l.default={duration:xt(s,12),flags:xt(s,20)})}),t}function dk(i){const t=i.subarray(8),e=t.subarray(86),n=Pe(t.subarray(4,8));let s=n,a;const l=n==="enca"||n==="encv";if(l){const f=_t(t,[n])[0].subarray(n==="enca"?28:78);_t(f,["sinf"]).forEach(g=>{const y=_t(g,["schm"])[0];if(y){const S=Pe(y.subarray(4,8));if(S==="cbcs"||S==="cenc"){const v=_t(g,["frma"])[0];v&&(s=Pe(v))}}})}const u=s;switch(s){case"avc1":case"avc2":case"avc3":case"avc4":{const d=_t(e,["avcC"])[0];d&&d.length>3&&(s+="."+Lc(d[1])+Lc(d[2])+Lc(d[3]),a=Rc(u==="avc1"?"dva1":"dvav",e));break}case"mp4a":{const d=_t(t,[n])[0],f=_t(d.subarray(28),["esds"])[0];if(f&&f.length>7){let h=4;if(f[h++]!==3)break;h=Nm(f,h),h+=2;const g=f[h++];if(g&128&&(h+=2),g&64&&(h+=f[h++]),f[h++]!==4)break;h=Nm(f,h);const y=f[h++];if(y===64)s+="."+Lc(y);else break;if(h+=12,f[h++]!==5)break;h=Nm(f,h);const S=f[h++];let v=(S&248)>>3;v===31&&(v+=1+((S&7)<<3)+((f[h]&224)>>5)),s+="."+v}break}case"hvc1":case"hev1":{const d=_t(e,["hvcC"])[0];if(d&&d.length>12){const f=d[1],h=["","A","B","C"][f>>6],g=f&31,y=xt(d,2),S=(f&32)>>5?"H":"L",v=d[12],E=d.subarray(6,12);s+="."+h+g,s+="."+hk(y).toString(16).toUpperCase(),s+="."+S+v;let x="";for(let b=E.length;b--;){const D=E[b];(D||x)&&(x="."+D.toString(16).toUpperCase()+x)}s+=x}a=Rc(u=="hev1"?"dvhe":"dvh1",e);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{s=Rc(s,e)||s;break}case"vp09":{const d=_t(e,["vpcC"])[0];if(d&&d.length>6){const f=d[4],h=d[5],g=d[6]>>4&15;s+="."+Ti(f)+"."+Ti(h)+"."+Ti(g)}break}case"av01":{const d=_t(e,["av1C"])[0];if(d&&d.length>2){const f=d[1]>>>5,h=d[1]&31,g=d[2]>>>7?"H":"M",y=(d[2]&64)>>6,S=(d[2]&32)>>5,v=f===2&&y?S?12:10:y?10:8,E=(d[2]&16)>>4,x=(d[2]&8)>>3,b=(d[2]&4)>>2,D=d[2]&3;s+="."+f+"."+Ti(h)+g+"."+Ti(v)+"."+E+"."+x+b+D+"."+Ti(1)+"."+Ti(1)+"."+Ti(1)+"."+0,a=Rc("dav1",e)}break}}return{codec:s,encrypted:l,supplemental:a}}function Rc(i,t){const e=_t(t,["dvvC"]),n=e.length?e[0]:_t(t,["dvcC"])[0];if(n){const s=n[2]>>1&127,a=n[2]<<5&32|n[3]>>3&31;return i+"."+Ti(s)+"."+Ti(a)}}function hk(i){let t=0;for(let e=0;e<32;e++)t|=(i>>e&1)<<31-e;return t>>>0}function Nm(i,t){const e=t+5;for(;i[t++]&128&&t<e;);return t}function Lc(i){return("0"+i.toString(16).toUpperCase()).slice(-2)}function Ti(i){return(i<10?"0":"")+i}function mk(i,t){if(!i||!t)return i;const e=t.keyId;return e&&t.isCommonEncryption&&_t(i,["moov","trak"]).forEach(s=>{const l=_t(s,["mdia","minf","stbl","stsd"])[0].subarray(8);let u=_t(l,["enca"]);const d=u.length>0;d||(u=_t(l,["encv"])),u.forEach(f=>{const h=d?f.subarray(28):f.subarray(78);_t(h,["sinf"]).forEach(y=>{const S=E1(y);if(S){const v=S.subarray(8,24);v.some(E=>E!==0)||(Vt.log(`[eme] Patching keyId in 'enc${d?"a":"v"}>sinf>>tenc' box: ${Ei.hexDump(v)} -> ${Ei.hexDump(e)}`),S.set(e,8))}})})}),i}function E1(i){const t=_t(i,["schm"])[0];if(t){const e=Pe(t.subarray(4,8));if(e==="cbcs"||e==="cenc")return _t(i,["schi","tenc"])[0]}return null}function gk(i,t,e){const n={},s=_t(i,["moof","traf"]);for(let a=0;a<s.length;a++){const l=s[a],u=_t(l,["tfhd"])[0],d=xt(u,4),f=t[d];if(!f)continue;const h=n[d]||(n[d]={start:NaN,duration:0,sampleCount:0,timescale:f.timescale,type:f.type}),g=_t(l,["tfdt"])[0];if(g){const L=g[0];let I=xt(g,4);L===1&&(I===pf?e.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(I*=pf+1,I+=xt(g,8))),mt(I)&&(!mt(h.start)||I<h.start)&&(h.start=I)}const y=f.default,S=xt(u,0)|y?.flags;let v=y?.duration||0;S&8&&(S&2?v=xt(u,12):v=xt(u,8));const E=_t(l,["trun"]);let x=h.start||0,b=0,D=v;for(let L=0;L<E.length;L++){const I=E[L],_=xt(I,4),P=h.sampleCount;h.sampleCount+=_;const M=I[3]&1,k=I[3]&4,F=I[2]&1,R=I[2]&2,$=I[2]&4,Q=I[2]&8;let ft=8,ct=_;for(M&&(ft+=4),k&&_&&(!(I[ft+1]&1)&&h.keyFrameIndex===void 0&&(h.keyFrameIndex=P),ft+=4,F?(D=xt(I,ft),ft+=4):D=v,R&&(ft+=4),Q&&(ft+=4),x+=D,b+=D,ct--);ct--;)F?(D=xt(I,ft),ft+=4):D=v,R&&(ft+=4),$&&(I[ft+1]&1||h.keyFrameIndex===void 0&&(h.keyFrameIndex=h.sampleCount-(ct+1),h.keyFrameStart=x),ft+=4),Q&&(ft+=4),x+=D,b+=D;!b&&v&&(b+=v*_)}h.duration+=b}if(!Object.keys(n).some(a=>n[a].duration)){let a=1/0,l=0;const u=_t(i,["sidx"]);for(let d=0;d<u.length;d++){const f=fk(u[d]);if(f!=null&&f.references){a=Math.min(a,f.earliestPresentationTime/f.timescale);const h=f.references.reduce((g,y)=>g+y.info.duration||0,0);l=Math.max(l,h+f.earliestPresentationTime/f.timescale)}}l&&mt(l)&&Object.keys(n).forEach(d=>{n[d].duration||(n[d].duration=l*n[d].timescale-n[d].start)})}return n}function pk(i,t,e){_t(t,["moof","traf"]).forEach(n=>{_t(n,["tfhd"]).forEach(s=>{const a=xt(s,4),l=i[a];if(!l)return;const u=l.timescale||9e4;_t(n,["tfdt"]).forEach(d=>{const f=d[0],h=e*u;if(h){let g=xt(d,4);if(f===0)g-=h,g=Math.max(g,0),km(d,4,g);else{g*=Math.pow(2,32),g+=xt(d,8),g-=h,g=Math.max(g,0);const y=Math.floor(g/(pf+1)),S=Math.floor(g%(pf+1));km(d,4,y),km(d,8,S)}}})})})}function yk(i){const t={valid:null,remainder:null},e=_t(i,["moof"]);if(e.length<2)return t.remainder=i,t;const n=e[e.length-1];return t.valid=i.slice(0,n.byteOffset-8),t.remainder=i.slice(n.byteOffset-8),t}function Jn(i,t){const e=new Uint8Array(i.length+t.length);return e.set(i),e.set(t,i.length),e}function HE(i,t){const e=[],n=t.samples,s=t.timescale,a=t.id;let l=!1;return _t(n,["moof"]).map(d=>{const f=d.byteOffset-8;_t(d,["traf"]).map(g=>{const y=_t(g,["tfdt"]).map(S=>{const v=S[0];let E=xt(S,4);return v===1&&(E*=Math.pow(2,32),E+=xt(S,8)),E/s})[0];return y!==void 0&&(i=y),_t(g,["tfhd"]).map(S=>{const v=xt(S,4),E=xt(S,0)&16777215,x=(E&1)!==0,b=(E&2)!==0,D=(E&8)!==0;let L=0;const I=(E&16)!==0;let _=0;const P=(E&32)!==0;let M=8;v===a&&(x&&(M+=8),b&&(M+=4),D&&(L=xt(S,M),M+=4),I&&(_=xt(S,M),M+=4),P&&(M+=4),t.type==="video"&&(l=Yf(t.codec)),_t(g,["trun"]).map(k=>{const F=k[0],R=xt(k,0)&16777215,$=(R&1)!==0;let Q=0;const ft=(R&4)!==0,ct=(R&256)!==0;let it=0;const B=(R&512)!==0;let H=0;const et=(R&1024)!==0,X=(R&2048)!==0;let O=0;const q=xt(k,4);let st=8;$&&(Q=xt(k,st),st+=4),ft&&(st+=4);let at=Q+f;for(let dt=0;dt<q;dt++){if(ct?(it=xt(k,st),st+=4):it=L,B?(H=xt(k,st),st+=4):H=_,et&&(st+=4),X&&(F===0?O=xt(k,st):O=S1(k,st),st+=4),t.type===se.VIDEO){let gt=0;for(;gt<H;){const ht=xt(n,at);if(at+=4,vk(l,n[at])){const Ft=n.subarray(at,at+ht);qp(Ft,l?2:1,i+O/s,e)}at+=ht,gt+=ht+4}}i+=it/s}}))})})}),e}function Yf(i){if(!i)return!1;const t=i.substring(0,4);return t==="hvc1"||t==="hev1"||t==="dvh1"||t==="dvhe"}function vk(i,t){if(i){const e=t>>1&63;return e===39||e===40}else return(t&31)===6}function qp(i,t,e,n){const s=x1(i);let a=0;a+=t;let l=0,u=0,d=0;for(;a<s.length;){l=0;do{if(a>=s.length)break;d=s[a++],l+=d}while(d===255);u=0;do{if(a>=s.length)break;d=s[a++],u+=d}while(d===255);const f=s.length-a;let h=a;if(u<f)a+=u;else if(u>f){Vt.error(`Malformed SEI payload. ${u} is too small, only ${f} bytes left to parse.`);break}if(l===4){if(s[h++]===181){const y=v1(s,h);if(h+=2,y===49){const S=xt(s,h);if(h+=4,S===1195456820){const v=s[h++];if(v===3){const E=s[h++],x=31&E,b=64&E,D=b?2+x*3:0,L=new Uint8Array(D);if(b){L[0]=E;for(let I=1;I<D;I++)L[I]=s[h++]}n.push({type:v,payloadType:l,pts:e,bytes:L})}}}}}else if(l===5&&u>16){const g=[];for(let v=0;v<16;v++){const E=s[h++].toString(16);g.push(E.length==1?"0"+E:E),(v===3||v===5||v===7||v===9)&&g.push("-")}const y=u-16,S=new Uint8Array(y);for(let v=0;v<y;v++)S[v]=s[h++];n.push({payloadType:l,pts:e,uuid:g.join(""),userData:Mn(S),userDataBytes:S})}}}function x1(i){const t=i.byteLength,e=[];let n=1;for(;n<t-2;)i[n]===0&&i[n+1]===0&&i[n+2]===3?(e.push(n+2),n+=2):n++;if(e.length===0)return i;const s=t-e.length,a=new Uint8Array(s);let l=0;for(n=0;n<s;l++,n++)l===e[0]&&(l++,e.shift()),a[n]=i[l];return a}function Sk(i){const t=i[0];let e="",n="",s=0,a=0,l=0,u=0,d=0,f=0;if(t===0){for(;Pe(i.subarray(f,f+1))!=="\0";)e+=Pe(i.subarray(f,f+1)),f+=1;for(e+=Pe(i.subarray(f,f+1)),f+=1;Pe(i.subarray(f,f+1))!=="\0";)n+=Pe(i.subarray(f,f+1)),f+=1;n+=Pe(i.subarray(f,f+1)),f+=1,s=xt(i,12),a=xt(i,16),u=xt(i,20),d=xt(i,24),f=28}else if(t===1){f+=4,s=xt(i,f),f+=4;const g=xt(i,f);f+=4;const y=xt(i,f);for(f+=4,l=2**32*g+y,XP(l)||(l=Number.MAX_SAFE_INTEGER,Vt.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),u=xt(i,f),f+=4,d=xt(i,f),f+=4;Pe(i.subarray(f,f+1))!=="\0";)e+=Pe(i.subarray(f,f+1)),f+=1;for(e+=Pe(i.subarray(f,f+1)),f+=1;Pe(i.subarray(f,f+1))!=="\0";)n+=Pe(i.subarray(f,f+1)),f+=1;n+=Pe(i.subarray(f,f+1)),f+=1}const h=i.subarray(f,i.byteLength);return{schemeIdUri:e,value:n,timeScale:s,presentationTime:l,presentationTimeDelta:a,eventDuration:u,id:d,payload:h}}function Tk(i,...t){const e=t.length;let n=8,s=e;for(;s--;)n+=t[s].byteLength;const a=new Uint8Array(n);for(a[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=n&255,a.set(i,4),s=0,n=8;s<e;s++)a.set(t[s],n),n+=t[s].byteLength;return a}function Ek(i,t,e){if(i.byteLength!==16)throw new RangeError("Invalid system id");let n,s;n=0,s=new Uint8Array;let a;n>0?(a=new Uint8Array(4),t.length>0&&new DataView(a.buffer).setUint32(0,t.length,!1)):a=new Uint8Array;const l=new Uint8Array(4);return e&&e.byteLength>0&&new DataView(l.buffer).setUint32(0,e.byteLength,!1),Tk([112,115,115,104],new Uint8Array([n,0,0,0]),i,a,s,l,e||new Uint8Array)}function xk(i){const t=[];if(i instanceof ArrayBuffer){const e=i.byteLength;let n=0;for(;n+32<e;){const s=new DataView(i,n),a=bk(s);t.push(a),n+=a.size}}return t}function bk(i){const t=i.getUint32(0),e=i.byteOffset,n=i.byteLength;if(n<t)return{offset:e,size:n};if(i.getUint32(4)!==1886614376)return{offset:e,size:t};const a=i.getUint32(8)>>>24;if(a!==0&&a!==1)return{offset:e,size:t};const l=i.buffer,u=Ei.hexDump(new Uint8Array(l,e+12,16)),d=i.getUint32(28);let f=null,h=null;if(a===0){if(t-32<d||d<22)return{offset:e,size:t};h=new Uint8Array(l,e+32,d)}else if(a===1){if(!d||n<e+32+d*16+16)return{offset:e,size:t};f=[];for(let g=0;g<d;g++)f.push(new Uint8Array(l,e+32+g*16,16))}return{version:a,systemId:u,kids:f,data:h,offset:e,size:t}}const b1=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Ya={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function A1(i,t){const e=Ya[t];return!!e&&!!e[i.slice(0,4)]}function Ug(i,t,e=!0){return!i.split(",").some(n=>!R1(n,t,e))}function R1(i,t,e=!0){var n;const s=js(e);return(n=s?.isTypeSupported(Ml(i,t)))!=null?n:!1}function Ml(i,t){return`${t}/mp4;codecs=${i}`}function jE(i){if(i){const t=i.substring(0,4);return Ya.video[t]}return 2}function yf(i){const t=b1();return i.split(",").reduce((e,n)=>{const a=t&&Yf(n)?9:Ya.video[n];return a?(a*2+e)/(e?3:2):(Ya.audio[n]+e)/(e?2:1)},0)}const Bm={};function Ak(i,t=!0){if(Bm[i])return Bm[i];const e={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[i];for(let s=0;s<e.length;s++){var n;if(R1(e[s],"audio",t))return Bm[i]=e[s],e[s];if(e[s]==="mp3"&&(n=js(t))!=null&&n.isTypeSupported("audio/mpeg"))return""}return i}const Rk=/flac|opus|mp4a\.40\.34/i;function vf(i,t=!0){return i.replace(Rk,e=>Ak(e.toLowerCase(),t))}function Lk(i,t){const e=[];if(i){const n=i.split(",");for(let s=0;s<n.length;s++)A1(n[s],"video")||e.push(n[s])}return t&&e.push(t),e.join(",")}function Xc(i,t){if(i&&(i.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(i)!==-1))return i;if(t){const e=t.split(",");if(e.length>1){if(i){for(let n=e.length;n--;)if(e[n].substring(0,4)===i.substring(0,4))return e[n]}return e[0]}}return t||i}function Ck(i){const t=i.split(",");for(let e=0;e<t.length;e++){const n=t[e].split(".");n.length>2&&n[0]==="avc1"&&(t[e]=`avc1.${parseInt(n[1]).toString(16)}${("000"+parseInt(n[2]).toString(16)).slice(-4)}`)}return t.join(",")}function _k(i){if(i.startsWith("av01.")){const t=i.split("."),e=["0","111","01","01","01","0"];for(let n=t.length;n>4&&n<10;n++)t[n]=e[n-4];return t.join(".")}return i}function KE(i){const t=js(i)||{isTypeSupported:()=>!1};return{mpeg:t.isTypeSupported("audio/mpeg"),mp3:t.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:t.isTypeSupported('audio/mp4; codecs="ac-3"')}}function L1(i){return i.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const C1={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function _1(i,t){return{supported:!1,configurations:t,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:i}}const zE={};function Dk(i,t,e,n,s,a){const l=i.audioCodec?i.audioGroups:null,u=a?.audioCodec,d=a?.channels,f=d?parseInt(d):u?1/0:2;let h=null;if(l!=null&&l.length)try{l.length===1&&l[0]?h=t.groups[l[0]].channels:h=l.reduce((g,y)=>{if(y){const S=t.groups[y];if(!S)throw new Error(`Audio track group ${y} not found`);Object.keys(S.channels).forEach(v=>{g[v]=(g[v]||0)+S.channels[v]})}return g},{2:0})}catch{return!0}return i.videoCodec!==void 0&&(i.width>1920&&i.height>1088||i.height>1920&&i.width>1088||i.frameRate>Math.max(n,30)||i.videoRange!=="SDR"&&i.videoRange!==e||i.bitrate>Math.max(s,8e6))||!!h&&mt(f)&&Object.keys(h).some(g=>parseInt(g)>f)}function D1(i,t,e){const n=i.videoCodec,s=i.audioCodec;if(!n&&!s||!e)return Promise.resolve(C1);const a=[];if(n){const l={width:i.width,height:i.height,bitrate:Math.ceil(Math.max(i.bitrate*.9,i.averageBitrate)),framerate:i.frameRate||30},u=i.videoRange;u!=="SDR"&&(l.transferFunction=u.toLowerCase());const d=n.split(","),f=navigator.userAgent;if(d.some(h=>Yf(h))&&b1())return Promise.resolve(_1(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent sting: (${f})`),a));a.push.apply(a,d.map(h=>({type:"media-source",video:zt(zt({},l),{},{contentType:Ml(_k(h),"video")})})))}return s&&i.audioGroups&&i.audioGroups.forEach(l=>{var u;l&&((u=t.groups[l])==null||u.tracks.forEach(d=>{if(d.groupId===l){const f=d.channels||"",h=parseFloat(f);mt(h)&&h>2&&a.push.apply(a,s.split(",").map(g=>({type:"media-source",audio:{contentType:Ml(g,"audio"),channels:""+h}})))}}))}),Promise.all(a.map(l=>{const u=Ik(l);return zE[u]||(zE[u]=e.decodingInfo(l))})).then(l=>({supported:!l.some(u=>!u.supported),configurations:a,decodingInfoResults:l})).catch(l=>({supported:!1,configurations:a,decodingInfoResults:[],error:l}))}function Ik(i){const{audio:t,video:e}=i,n=e||t;if(n){const s=L1(n.contentType);if(e)return`r${e.height}x${e.width}f${Math.ceil(e.framerate)}${e.transferFunction||"sd"}_${s}_${Math.ceil(e.bitrate/1e5)}`;if(t)return`c${t.channels}${t.spatialRendering?"s":"n"}_${s}`}return""}const $g=["NONE","TYPE-0","TYPE-1",null];function wk(i){return $g.indexOf(i)>-1}const Sf=["SDR","PQ","HLG"];function Ok(i){return!!i&&Sf.indexOf(i)>-1}var Wc={No:"",Yes:"YES",v2:"v2"};function YE(i){const{canSkipUntil:t,canSkipDateRanges:e,age:n}=i,s=n<t/2;return t&&s?e?Wc.v2:Wc.Yes:Wc.No}class qE{constructor(t,e,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=t,this.part=e,this.skip=n}addDirectives(t){const e=new self.URL(t);return this.msn!==void 0&&e.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.href}}class Pl{constructor(t){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[t.url],this._attrs=[t.attrs],this.bitrate=t.bitrate,t.details&&(this.details=t.details),this.id=t.id||0,this.name=t.name,this.width=t.width||0,this.height=t.height||0,this.frameRate=t.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=t.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=t.audioCodec,this.videoCodec=t.videoCodec,this.codecSet=[t.videoCodec,t.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),"supplemental"in t){var e;this.supplemental=t.supplemental;const n=(e=t.supplemental)==null?void 0:e.videoCodec;n&&n!==t.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",t.attrs.AUDIO),this.addGroupId("text",t.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(t){return XE(this._audioGroups,t)}hasSubtitleGroup(t){return XE(this._subtitleGroups,t)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(t,e){if(e){if(t==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(e)===-1&&n.push(e)}else if(t==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(e)===-1&&n.push(e)}}}get urlId(){return 0}set urlId(t){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var t;return(t=this.audioGroups)==null?void 0:t[0]}get textGroupId(){var t;return(t=this.subtitleGroups)==null?void 0:t[0]}addFallback(){}}function XE(i,t){return!t||!i?!1:i.indexOf(t)!==-1}function Mk(){if(typeof matchMedia=="function"){const i=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(i.media!==t.media)return i.matches===!0}return!1}function Pk(i,t){let e=!1,n=[];if(i&&(e=i!=="SDR",n=[i]),t){n=t.allowedVideoRanges||Sf.slice(0);const s=n.join("")!=="SDR"&&!t.videoCodec;e=t.preferHDR!==void 0?t.preferHDR:s&&Mk(),e||(n=["SDR"])}return{preferHDR:e,allowedVideoRanges:n}}const kk=i=>{const t=new WeakSet;return(e,n)=>{if(i&&(n=i(e,n)),typeof n=="object"&&n!==null){if(t.has(n))return;t.add(n)}return n}},le=(i,t)=>JSON.stringify(i,kk(t));function Nk(i,t,e,n,s){const a=Object.keys(i),l=n?.channels,u=n?.audioCodec,d=s?.videoCodec,f=l&&parseInt(l)===2;let h=!1,g=!1,y=1/0,S=1/0,v=1/0,E=1/0,x=0,b=[];const{preferHDR:D,allowedVideoRanges:L}=Pk(t,s);for(let k=a.length;k--;){const F=i[a[k]];h||(h=F.channels[2]>0),y=Math.min(y,F.minHeight),S=Math.min(S,F.minFramerate),v=Math.min(v,F.minBitrate),L.filter($=>F.videoRanges[$]>0).length>0&&(g=!0)}y=mt(y)?y:0,S=mt(S)?S:0;const I=Math.max(1080,y),_=Math.max(30,S);v=mt(v)?v:e,e=Math.max(v,e),g||(t=void 0);const P=a.length>1;return{codecSet:a.reduce((k,F)=>{const R=i[F];if(F===k)return k;if(b=g?L.filter($=>R.videoRanges[$]>0):[],P){if(R.minBitrate>e)return vi(F,`min bitrate of ${R.minBitrate} > current estimate of ${e}`),k;if(!R.hasDefaultAudio)return vi(F,"no renditions with default or auto-select sound found"),k;if(u&&F.indexOf(u.substring(0,4))%5!==0)return vi(F,`audio codec preference "${u}" not found`),k;if(l&&!f){if(!R.channels[l])return vi(F,`no renditions with ${l} channel sound found (channels options: ${Object.keys(R.channels)})`),k}else if((!u||f)&&h&&R.channels[2]===0)return vi(F,"no renditions with stereo sound found"),k;if(R.minHeight>I)return vi(F,`min resolution of ${R.minHeight} > maximum of ${I}`),k;if(R.minFramerate>_)return vi(F,`min framerate of ${R.minFramerate} > maximum of ${_}`),k;if(!b.some($=>R.videoRanges[$]>0))return vi(F,`no variants with VIDEO-RANGE of ${le(b)} found`),k;if(d&&F.indexOf(d.substring(0,4))%5!==0)return vi(F,`video codec preference "${d}" not found`),k;if(R.maxScore<x)return vi(F,`max score of ${R.maxScore} < selected max of ${x}`),k}return k&&(yf(F)>=yf(k)||R.fragmentError>i[k].fragmentError)?k:(E=R.minIndex,x=R.maxScore,F)},void 0),videoRanges:b,preferHDR:D,minFramerate:S,minBitrate:v,minIndex:E}}function vi(i,t){Vt.log(`[abr] start candidates with "${i}" ignored because ${t}`)}function I1(i){return i.reduce((t,e)=>{let n=t.groups[e.groupId];n||(n=t.groups[e.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(e);const s=e.channels||"2";return n.channels[s]=(n.channels[s]||0)+1,n.hasDefault=n.hasDefault||e.default,n.hasAutoSelect=n.hasAutoSelect||e.autoselect,n.hasDefault&&(t.hasDefaultAudio=!0),n.hasAutoSelect&&(t.hasAutoSelectAudio=!0),t},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function Bk(i,t,e,n){return i.slice(e,n+1).reduce((s,a,l)=>{if(!a.codecSet)return s;const u=a.audioGroups;let d=s[a.codecSet];d||(s[a.codecSet]=d={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:l,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!u,fragmentError:0}),d.minBitrate=Math.min(d.minBitrate,a.bitrate);const f=Math.min(a.height,a.width);return d.minHeight=Math.min(d.minHeight,f),d.minFramerate=Math.min(d.minFramerate,a.frameRate),d.minIndex=Math.min(d.minIndex,l),d.maxScore=Math.max(d.maxScore,a.score),d.fragmentError+=a.fragmentError,d.videoRanges[a.videoRange]=(d.videoRanges[a.videoRange]||0)+1,u&&u.forEach(h=>{if(!h)return;const g=t.groups[h];g&&(d.hasDefaultAudio=d.hasDefaultAudio||t.hasDefaultAudio?g.hasDefault:g.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(g.channels).forEach(y=>{d.channels[y]=(d.channels[y]||0)+g.channels[y]}))}),s},{})}function WE(i){if(!i)return i;const{lang:t,assocLang:e,characteristics:n,channels:s,audioCodec:a}=i;return{lang:t,assocLang:e,characteristics:n,channels:s,audioCodec:a}}function _i(i,t,e){if("attrs"in i){const n=t.indexOf(i);if(n!==-1)return n}for(let n=0;n<t.length;n++){const s=t[n];if(Lr(i,s,e))return n}return-1}function Lr(i,t,e){const{groupId:n,name:s,lang:a,assocLang:l,default:u}=i,d=i.forced;return(n===void 0||t.groupId===n)&&(s===void 0||t.name===s)&&(a===void 0||Fk(a,t.lang))&&(a===void 0||t.assocLang===l)&&(u===void 0||t.default===u)&&(d===void 0||t.forced===d)&&(!("characteristics"in i)||Uk(i.characteristics||"",t.characteristics))&&(e===void 0||e(i,t))}function Fk(i,t="--"){return i.length===t.length?i===t:i.startsWith(t)||t.startsWith(i)}function Uk(i,t=""){const e=i.split(","),n=t.split(",");return e.length===n.length&&!e.some(s=>n.indexOf(s)===-1)}function Sr(i,t){const{audioCodec:e,channels:n}=i;return(e===void 0||(t.audioCodec||"").substring(0,4)===e.substring(0,4))&&(n===void 0||n===(t.channels||"2"))}function $k(i,t,e,n,s){const a=t[n],u=t.reduce((y,S,v)=>{const E=S.uri;return(y[E]||(y[E]=[])).push(v),y},{})[a.uri];u.length>1&&(n=Math.max.apply(Math,u));const d=a.videoRange,f=a.frameRate,h=a.codecSet.substring(0,4),g=QE(t,n,y=>{if(y.videoRange!==d||y.frameRate!==f||y.codecSet.substring(0,4)!==h)return!1;const S=y.audioGroups,v=e.filter(E=>!S||S.indexOf(E.groupId)!==-1);return _i(i,v,s)>-1});return g>-1?g:QE(t,n,y=>{const S=y.audioGroups,v=e.filter(E=>!S||S.indexOf(E.groupId)!==-1);return _i(i,v,s)>-1})}function QE(i,t,e){for(let n=t;n>-1;n--)if(e(i[n]))return n;for(let n=t+1;n<i.length;n++)if(e(i[n]))return n;return-1}function Tf(i,t){var e;return!!i&&i!==((e=t.loadLevelObj)==null?void 0:e.uri)}class Vk extends hs{constructor(t){super("abr",t.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.bwEstimator=void 0,this._abandonRulesCheck=e=>{var n;const{fragCurrent:s,partCurrent:a,hls:l}=this,{autoLevelEnabled:u,media:d}=l;if(!s||!d)return;const f=performance.now(),h=a?a.stats:s.stats,g=a?a.duration:s.duration,y=f-h.loading.start,S=l.minAutoLevel,v=s.level,E=this._nextAutoLevel;if(h.aborted||h.loaded&&h.loaded===h.total||v<=S){this.clearTimer(),this._nextAutoLevel=-1;return}if(!u)return;const x=E>-1&&E!==v,b=!!e||x;if(!b&&(d.paused||!d.playbackRate||!d.readyState))return;const D=l.mainForwardBufferInfo;if(!b&&D===null)return;const L=this.bwEstimator.getEstimateTTFB(),I=Math.abs(d.playbackRate);if(y<=Math.max(L,1e3*(g/(I*2))))return;const _=D?D.len/I:0,P=h.loading.first?h.loading.first-h.loading.start:-1,M=h.loaded&&P>-1,k=this.getBwEstimate(),F=l.levels,R=F[v],$=Math.max(h.loaded,Math.round(g*(s.bitrate||R.averageBitrate)/8));let Q=M?y-P:y;Q<1&&M&&(Q=Math.min(y,h.loaded*8/k));const ft=M?h.loaded*1e3/Q:0,ct=L/1e3,it=ft?($-h.loaded)/ft:$*8/k+ct;if(it<=_)return;const B=ft?ft*8:k,H=((n=e?.details||this.hls.latestLevelDetails)==null?void 0:n.live)===!0,et=this.hls.config.abrBandWidthUpFactor;let X=Number.POSITIVE_INFINITY,O;for(O=v-1;O>S;O--){const dt=F[O].maxBitrate,gt=!F[O].details||H;if(X=this.getTimeToLoadFrag(ct,B,g*dt,gt),X<Math.min(_,g+ct))break}if(X>=it||X>g*10)return;M?this.bwEstimator.sample(y-Math.min(L,P),h.loaded):this.bwEstimator.sampleTTFB(y);const q=F[O].maxBitrate;this.getBwEstimate()*et>q&&this.resetEstimator(q);const st=this.findBestLevel(q,S,O,0,_,1,1);st>-1&&(O=st),this.warn(`Fragment ${s.sn}${a?" part "+a.index:""} of level ${v} is loading too slowly;
      Fragment duration: ${s.duration.toFixed(3)}
      Time to underbuffer: ${_.toFixed(3)} s
      Estimated load time for current fragment: ${it.toFixed(3)} s
      Estimated load time for down switch fragment: ${X.toFixed(3)} s
      TTFB estimate: ${P|0} ms
      Current BW estimate: ${mt(k)?k|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${O} @ ${q|0} bps`),l.nextLoadLevel=l.nextAutoLevel=O,this.clearTimer();const at=()=>{if(this.clearTimer(),this.fragCurrent===s&&this.hls.loadLevel===O&&O>0){const dt=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${O>0?"and switching down":""}
      Fragment duration: ${s.duration.toFixed(3)} s
      Time to underbuffer: ${dt.toFixed(3)} s`),s.abortRequests(),this.fragCurrent=this.partCurrent=null,O>S){let gt=this.findBestLevel(this.hls.levels[S].bitrate,S,O,0,dt,1,1);gt===-1&&(gt=S),this.hls.nextLoadLevel=this.hls.nextAutoLevel=gt,this.resetEstimator(this.hls.levels[gt].bitrate)}}};x||it>X*2?at():this.timer=self.setInterval(at,X*1e3),l.trigger(A.FRAG_LOAD_EMERGENCY_ABORTED,{frag:s,part:a,stats:h})},this.hls=t,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(t){t&&(this.log(`setting initial bwe to ${t}`),this.hls.config.abrEwmaDefaultEstimate=t),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const t=this.hls.config;return new QP(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate)}registerListeners(){const{hls:t}=this;t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.FRAG_LOADING,this.onFragLoading,this),t.on(A.FRAG_LOADED,this.onFragLoaded,this),t.on(A.FRAG_BUFFERED,this.onFragBuffered,this),t.on(A.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(A.LEVEL_LOADED,this.onLevelLoaded,this),t.on(A.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(A.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),t.on(A.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t&&(t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.FRAG_LOADING,this.onFragLoading,this),t.off(A.FRAG_LOADED,this.onFragLoaded,this),t.off(A.FRAG_BUFFERED,this.onFragBuffered,this),t.off(A.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(A.LEVEL_LOADED,this.onLevelLoaded,this),t.off(A.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(A.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),t.off(A.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(t,e){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(t,e){const n=e.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var s;this.fragCurrent=n,this.partCurrent=(s=e.part)!=null?s:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(t,e){this.clearTimer()}onError(t,e){if(!e.fatal)switch(e.details){case z.BUFFER_ADD_CODEC_ERROR:case z.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case z.FRAG_LOAD_TIMEOUT:{const n=e.frag,{fragCurrent:s,partCurrent:a}=this;if(n&&s&&n.sn===s.sn&&n.level===s.level){const l=performance.now(),u=a?a.stats:n.stats,d=l-u.loading.start,f=u.loading.first?u.loading.first-u.loading.start:-1;if(u.loaded&&f>-1){const g=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(d-Math.min(g,f),u.loaded)}else this.bwEstimator.sampleTTFB(d)}break}}}getTimeToLoadFrag(t,e,n,s){const a=t+n/e,l=s?t+this.lastLevelLoadSec:0;return a+l}onLevelLoaded(t,e){const n=this.hls.config,{loading:s}=e.stats,a=s.end-s.first;mt(a)&&(this.lastLevelLoadSec=a/1e3),e.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(e.levelInfo)}onFragLoaded(t,{frag:e,part:n}){const s=n?n.stats:e.stats;if(e.type===yt.MAIN&&this.bwEstimator.sampleTTFB(s.loading.first-s.loading.start),!this.ignoreFragment(e)){if(this.clearTimer(),e.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const a=n?n.duration:e.duration,l=this.hls.levels[e.level],u=(l.loaded?l.loaded.bytes:0)+s.loaded,d=(l.loaded?l.loaded.duration:0)+a;l.loaded={bytes:u,duration:d},l.realBitrate=Math.round(8*u/d)}if(e.bitrateTest){const a={stats:s,frag:e,part:n,id:e.type};this.onFragBuffered(A.FRAG_BUFFERED,a),e.bitrateTest=!1}else this.lastLoadedFragLevel=e.level}}onFragBuffered(t,e){const{frag:n,part:s}=e,a=s!=null&&s.stats.loaded?s.stats:n.stats;if(a.aborted||this.ignoreFragment(n))return;const l=a.parsing.end-a.loading.start-Math.min(a.loading.first-a.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(l,a.loaded),a.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=l/1e3:this.bitrateTestDelay=0}ignoreFragment(t){return t.type!==yt.MAIN||t.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:t,minAutoLevel:e}=this.hls,n=this.getBwEstimate(),s=this.hls.config.maxStarvationDelay,a=this.findBestLevel(n,e,t,0,s,1,1);if(a>-1)return a;const l=this.hls.firstLevel,u=Math.min(Math.max(l,e),t);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${l} clamped to ${u}`),u}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const t=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),s=this.lastLoadedFragLevel>-1;if(t!==-1&&(!n||!s||this.nextAutoLevelKey===this.getAutoLevelKey()))return t;const a=n&&s?this.getNextABRAutoLevel():this.firstAutoLevel;if(t!==-1){const l=this.hls.levels;if(l.length>Math.max(t,a)&&l[t].loadError<=l[a].loadError)return t}return this._nextAutoLevel=a,this.nextAutoLevelKey=this.getAutoLevelKey(),a}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:t,partCurrent:e,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:s,config:a,minAutoLevel:l}=n,u=e?e.duration:t?t.duration:0,d=this.getBwEstimate(),f=this.getStarvationDelay();let h=a.abrBandWidthFactor,g=a.abrBandWidthUpFactor;if(f){const x=this.findBestLevel(d,l,s,f,0,h,g);if(x>=0)return this.rebufferNotice=-1,x}let y=u?Math.min(u,a.maxStarvationDelay):a.maxStarvationDelay;if(!f){const x=this.bitrateTestDelay;x&&(y=(u?Math.min(u,a.maxLoadingDelay):a.maxLoadingDelay)-x,this.info(`bitrate test took ${Math.round(1e3*x)}ms, set first fragment max fetchDuration to ${Math.round(1e3*y)} ms`),h=g=1)}const S=this.findBestLevel(d,l,s,f,y,h,g);if(this.rebufferNotice!==S&&(this.rebufferNotice=S,this.info(`${f?"rebuffering expected":"buffer is empty"}, optimal quality level ${S}`)),S>-1)return S;const v=n.levels[l],E=n.loadLevelObj;return E&&v?.bitrate<E.bitrate?l:n.loadLevel}getStarvationDelay(){const t=this.hls,e=t.media;if(!e)return 1/0;const n=e&&e.playbackRate!==0?Math.abs(e.playbackRate):1,s=t.mainForwardBufferInfo;return(s?s.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(t,e,n,s,a,l,u){var d;const f=s+a,h=this.lastLoadedFragLevel,g=h===-1?this.hls.firstLevel:h,{fragCurrent:y,partCurrent:S}=this,{levels:v,allAudioTracks:E,loadLevel:x,config:b}=this.hls;if(v.length===1)return 0;const D=v[g],L=!!((d=this.hls.latestLevelDetails)!=null&&d.live),I=x===-1||h===-1;let _,P="SDR",M=D?.frameRate||0;const{audioPreference:k,videoPreference:F}=b,R=this.audioTracksByGroup||(this.audioTracksByGroup=I1(E));let $=-1;if(I){if(this.firstSelection!==-1)return this.firstSelection;const B=this.codecTiers||(this.codecTiers=Bk(v,R,e,n)),H=Nk(B,P,t,k,F),{codecSet:et,videoRanges:X,minFramerate:O,minBitrate:q,minIndex:st,preferHDR:at}=H;$=st,_=et,P=at?X[X.length-1]:X[0],M=O,t=Math.max(t,q),this.log(`picked start tier ${le(H)}`)}else _=D?.codecSet,P=D?.videoRange;const Q=S?S.duration:y?y.duration:0,ft=this.bwEstimator.getEstimateTTFB()/1e3,ct=[];for(let B=n;B>=e;B--){var it;const H=v[B],et=B>g;if(!H)continue;if(b.useMediaCapabilities&&!H.supportedResult&&!H.supportedPromise){const gt=navigator.mediaCapabilities;typeof gt?.decodingInfo=="function"&&(Dk(H,R,P,M,t,k)||Yf(H.videoCodec))?(H.supportedPromise=D1(H,R,gt),H.supportedPromise.then(ht=>{if(!this.hls)return;H.supportedResult=ht;const Ft=this.hls.levels,Ct=Ft.indexOf(H);ht.error?this.warn(`MediaCapabilities decodingInfo error: "${ht.error}" for level ${Ct} ${le(ht)}`):ht.supported||(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${Ct} ${le(ht)}`),Ct>-1&&Ft.length>1&&(this.log(`Removing unsupported level ${Ct}`),this.hls.removeLevel(Ct),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))})):H.supportedResult=C1}if((_&&H.codecSet!==_||P&&H.videoRange!==P||et&&M>H.frameRate||!et&&M>0&&M<H.frameRate||H.supportedResult&&!((it=H.supportedResult.decodingInfoResults)!=null&&it[0].smooth))&&(!I||B!==$)){ct.push(B);continue}const X=H.details,O=(S?X?.partTarget:X?.averagetargetduration)||Q;let q;et?q=u*t:q=l*t;const st=Q&&s>=Q*2&&a===0?H.averageBitrate:H.maxBitrate,at=this.getTimeToLoadFrag(ft,q,st*O,X===void 0);if(q>=st&&(B===h||H.loadError===0&&H.fragmentError===0)&&(at<=ft||!mt(at)||L&&!this.bitrateTestDelay||at<f)){const gt=this.forcedAutoLevel;return B!==x&&(gt===-1||gt!==x)&&(ct.length&&this.trace(`Skipped level(s) ${ct.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${v[ct[0]].codecs}" ${v[ct[0]].videoRange}; not compatible with "${_}" ${P}`),this.info(`switch candidate:${g}->${B} adjustedbw(${Math.round(q)})-bitrate=${Math.round(q-st)} ttfb:${ft.toFixed(1)} avgDuration:${O.toFixed(1)} maxFetchDuration:${f.toFixed(1)} fetchDuration:${at.toFixed(1)} firstSelection:${I} codecSet:${H.codecSet} videoRange:${H.videoRange} hls.loadLevel:${x}`)),I&&(this.firstSelection=B),B}}return-1}set nextAutoLevel(t){const e=this.deriveNextAutoLevel(t);this._nextAutoLevel!==e&&(this.nextAutoLevelKey="",this._nextAutoLevel=e)}deriveNextAutoLevel(t){const{maxAutoLevel:e,minAutoLevel:n}=this.hls;return Math.min(Math.max(t,n),e)}}const w1={search:function(i,t){let e=0,n=i.length-1,s=null,a=null;for(;e<=n;){s=(e+n)/2|0,a=i[s];const l=t(a);if(l>0)e=s+1;else if(l<0)n=s-1;else return a}return null}};function Gk(i,t,e){if(t===null||!Array.isArray(i)||!i.length||!mt(t))return null;const n=i[0].programDateTime;if(t<(n||0))return null;const s=i[i.length-1].endProgramDateTime;if(t>=(s||0))return null;for(let a=0;a<i.length;++a){const l=i[a];if(jk(t,e,l))return l}return null}function wr(i,t,e=0,n=0,s=.005){let a=null;if(i){a=t[1+i.sn-t[0].sn]||null;const u=i.endDTS-e;u>0&&u<15e-7&&(e+=15e-7),a&&i.level!==a.level&&a.end<=i.end&&(a=t[2+i.sn-t[0].sn]||null)}else e===0&&t[0].start===0&&(a=t[0]);if(a&&((!i||i.level===a.level)&&ZE(e,n,a)===0||Hk(a,i,Math.min(s,n))))return a;const l=w1.search(t,ZE.bind(null,e,n));return l&&(l!==i||!a)?l:a}function Hk(i,t,e){if(t&&t.start===0&&t.level<i.level&&(t.endPTS||0)>0){const n=t.tagList.reduce((s,a)=>(a[0]==="INF"&&(s+=parseFloat(a[1])),s),e);return i.start<=n}return!1}function ZE(i=0,t=0,e){if(e.start<=i&&e.start+e.duration>i)return 0;const n=Math.min(t,e.duration+(e.deltaPTS?e.deltaPTS:0));return e.start+e.duration-n<=i?1:e.start-n>i&&e.start?-1:0}function jk(i,t,e){const n=Math.min(t,e.duration+(e.deltaPTS?e.deltaPTS:0))*1e3;return(e.endProgramDateTime||0)-n>i}function O1(i,t,e){if(i&&i.startCC<=t&&i.endCC>=t){let n=i.fragments;const{fragmentHint:s}=i;s&&(n=n.concat(s));let a;return w1.search(n,l=>l.cc<t?1:l.cc>t?-1:(a=l,l.end<=e?1:l.start>e?-1:0)),a||null}return null}function Ef(i){switch(i.details){case z.FRAG_LOAD_TIMEOUT:case z.KEY_LOAD_TIMEOUT:case z.LEVEL_LOAD_TIMEOUT:case z.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function JE(i,t){const e=Ef(t);return i.default[`${e?"timeout":"error"}Retry`]}function Xp(i,t){const e=i.backoff==="linear"?1:Math.pow(2,t);return Math.min(e*i.retryDelayMs,i.maxRetryDelayMs)}function tx(i){return zt(zt({},i),{errorRetry:null,timeoutRetry:null})}function xf(i,t,e,n){if(!i)return!1;const s=n?.code,a=t<i.maxNumRetry&&(Kk(s)||!!e);return i.shouldRetry?i.shouldRetry(i,t,e,n,a):a}function Kk(i){return i===0&&navigator.onLine===!1||!!i&&(i<400||i>499)}var sn={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},oi={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2};class zk extends hs{constructor(t){super("error-controller",t.logger),this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.hls=t,this.registerListeners()}registerListeners(){const t=this.hls;t.on(A.ERROR,this.onError,this),t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const t=this.hls;t&&(t.off(A.ERROR,this.onError,this),t.off(A.ERROR,this.onErrorOut,this),t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(t){}stopLoad(){this.playlistError=0}getVariantLevelIndex(t){return t?.type===yt.MAIN?t.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(t,e){var n;if(e.fatal)return;const s=this.hls,a=e.context;switch(e.details){case z.FRAG_LOAD_ERROR:case z.FRAG_LOAD_TIMEOUT:case z.KEY_LOAD_ERROR:case z.KEY_LOAD_TIMEOUT:e.errorAction=this.getFragRetryOrSwitchAction(e);return;case z.FRAG_PARSING_ERROR:if((n=e.frag)!=null&&n.gap){e.errorAction=kl();return}case z.FRAG_GAP:case z.FRAG_DECRYPT_ERROR:{e.errorAction=this.getFragRetryOrSwitchAction(e),e.errorAction.action=sn.SendAlternateToPenaltyBox;return}case z.LEVEL_EMPTY_ERROR:case z.LEVEL_PARSING_ERROR:{var l,u;const f=e.parent===yt.MAIN?e.level:s.loadLevel;e.details===z.LEVEL_EMPTY_ERROR&&((l=e.context)!=null&&(u=l.levelDetails)!=null&&u.live)?e.errorAction=this.getPlaylistRetryOrSwitchAction(e,f):(e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,f))}return;case z.LEVEL_LOAD_ERROR:case z.LEVEL_LOAD_TIMEOUT:typeof a?.level=="number"&&(e.errorAction=this.getPlaylistRetryOrSwitchAction(e,a.level));return;case z.AUDIO_TRACK_LOAD_ERROR:case z.AUDIO_TRACK_LOAD_TIMEOUT:case z.SUBTITLE_LOAD_ERROR:case z.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){const f=s.loadLevelObj;if(f&&(a.type===Mt.AUDIO_TRACK&&f.hasAudioGroup(a.groupId)||a.type===Mt.SUBTITLE_TRACK&&f.hasSubtitleGroup(a.groupId))){e.errorAction=this.getPlaylistRetryOrSwitchAction(e,s.loadLevel),e.errorAction.action=sn.SendAlternateToPenaltyBox,e.errorAction.flags=oi.MoveAllAlternatesMatchingHost;return}}return;case z.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const f=s.loadLevelObj,h=f?.attrs["HDCP-LEVEL"];h?e.errorAction={action:sn.SendAlternateToPenaltyBox,flags:oi.MoveAllAlternatesMatchingHDCP,hdcpLevel:h}:this.keySystemError(e)}return;case z.BUFFER_ADD_CODEC_ERROR:case z.REMUX_ALLOC_ERROR:case z.BUFFER_APPEND_ERROR:if(!e.errorAction){var d;e.errorAction=this.getLevelSwitchAction(e,(d=e.level)!=null?d:s.loadLevel)}return;case z.INTERNAL_EXCEPTION:case z.BUFFER_APPENDING_ERROR:case z.BUFFER_FULL_ERROR:case z.LEVEL_SWITCH_ERROR:case z.BUFFER_STALLED_ERROR:case z.BUFFER_SEEK_OVER_HOLE:case z.BUFFER_NUDGE_ON_STALL:e.errorAction=kl();return}e.type===vt.KEY_SYSTEM_ERROR&&this.keySystemError(e)}keySystemError(t){const e=this.getVariantLevelIndex(t.frag);t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e)}getPlaylistRetryOrSwitchAction(t,e){const n=this.hls,s=JE(n.config.playlistLoadPolicy,t),a=this.playlistError++;if(xf(s,a,Ef(t),t.response))return{action:sn.RetryRequest,flags:oi.None,retryConfig:s,retryCount:a};const u=this.getLevelSwitchAction(t,e);return s&&(u.retryConfig=s,u.retryCount=a),u}getFragRetryOrSwitchAction(t){const e=this.hls,n=this.getVariantLevelIndex(t.frag),s=e.levels[n],{fragLoadPolicy:a,keyLoadPolicy:l}=e.config,u=JE(t.details.startsWith("key")?l:a,t),d=e.levels.reduce((h,g)=>h+g.fragmentError,0);if(s&&(t.details!==z.FRAG_GAP&&s.fragmentError++,xf(u,d,Ef(t),t.response)))return{action:sn.RetryRequest,flags:oi.None,retryConfig:u,retryCount:d};const f=this.getLevelSwitchAction(t,n);return u&&(f.retryConfig=u,f.retryCount=d),f}getLevelSwitchAction(t,e){const n=this.hls;e==null&&(e=n.loadLevel);const s=this.hls.levels[e];if(s){var a,l;const f=t.details;s.loadError++,f===z.BUFFER_APPEND_ERROR&&s.fragmentError++;let h=-1;const{levels:g,loadLevel:y,minAutoLevel:S,maxAutoLevel:v}=n;!n.autoLevelEnabled&&!n.config.preserveManualLevelOnError&&(n.loadLevel=-1);const E=(a=t.frag)==null?void 0:a.type,b=(E===yt.AUDIO&&f===z.FRAG_PARSING_ERROR||t.sourceBufferName==="audio"&&(f===z.BUFFER_ADD_CODEC_ERROR||f===z.BUFFER_APPEND_ERROR))&&g.some(({audioCodec:P})=>s.audioCodec!==P),L=t.sourceBufferName==="video"&&(f===z.BUFFER_ADD_CODEC_ERROR||f===z.BUFFER_APPEND_ERROR)&&g.some(({codecSet:P,audioCodec:M})=>s.codecSet!==P&&s.audioCodec===M),{type:I,groupId:_}=(l=t.context)!=null?l:{};for(let P=g.length;P--;){const M=(P+y)%g.length;if(M!==y&&M>=S&&M<=v&&g[M].loadError===0){var u,d;const k=g[M];if(f===z.FRAG_GAP&&E===yt.MAIN&&t.frag){const F=g[M].details;if(F){const R=wr(t.frag,F.fragments,t.frag.start);if(R!=null&&R.gap)continue}}else{if(I===Mt.AUDIO_TRACK&&k.hasAudioGroup(_)||I===Mt.SUBTITLE_TRACK&&k.hasSubtitleGroup(_))continue;if(E===yt.AUDIO&&(u=s.audioGroups)!=null&&u.some(F=>k.hasAudioGroup(F))||E===yt.SUBTITLE&&(d=s.subtitleGroups)!=null&&d.some(F=>k.hasSubtitleGroup(F))||b&&s.audioCodec===k.audioCodec||!b&&s.audioCodec!==k.audioCodec||L&&s.codecSet===k.codecSet)continue}h=M;break}}if(h>-1&&n.loadLevel!==h)return t.levelRetry=!0,this.playlistError=0,{action:sn.SendAlternateToPenaltyBox,flags:oi.None,nextAutoLevel:h}}return{action:sn.SendAlternateToPenaltyBox,flags:oi.MoveAllAlternatesMatchingHost}}onErrorOut(t,e){var n;switch((n=e.errorAction)==null?void 0:n.action){case sn.DoNothing:break;case sn.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(e),!e.errorAction.resolved&&e.details!==z.FRAG_GAP?e.fatal=!0:/MediaSource readyState: ended/.test(e.error.message)&&(this.warn(`MediaSource ended after "${e.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(e.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(t){const e=this.hls,n=t.errorAction;if(!n)return;const{flags:s,hdcpLevel:a,nextAutoLevel:l}=n;switch(s){case oi.None:this.switchLevel(t,l);break;case oi.MoveAllAlternatesMatchingHDCP:a&&(e.maxHdcpLevel=$g[$g.indexOf(a)-1],n.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${e.maxHdcpLevel}" or lower`);break}n.resolved||this.switchLevel(t,l)}switchLevel(t,e){if(e!==void 0&&t.errorAction&&(this.warn(`switching to level ${e} after ${t.details}`),this.hls.nextAutoLevel=e,t.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,t.details===z.BUFFER_ADD_CODEC_ERROR&&t.mimeType&&t.sourceBufferName!=="audiovideo")){const n=L1(t.mimeType),s=this.hls.levels;for(let a=s.length;a--;)s[a][`${t.sourceBufferName}Codec`]===n&&this.hls.removeLevel(a)}}}function kl(i){const t={action:sn.DoNothing,flags:oi.None};return i&&(t.resolved=!0),t}var ke={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class Yk{constructor(t){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=t,this._registerListeners()}_registerListeners(){const{hls:t}=this;t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.BUFFER_APPENDED,this.onBufferAppended,this),t.on(A.FRAG_BUFFERED,this.onFragBuffered,this),t.on(A.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:t}=this;t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.BUFFER_APPENDED,this.onBufferAppended,this),t.off(A.FRAG_BUFFERED,this.onFragBuffered,this),t.off(A.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(t,e){const n=this.activePartLists[e];if(n)for(let s=n.length;s--;){const a=n[s];if(!a)break;const l=a.end;if(a.start<=t&&l!==null&&t<=l)return a}return this.getBufferedFrag(t,e)}getBufferedFrag(t,e){return this.getFragAtPos(t,e,!0)}getFragAtPos(t,e,n){const{fragments:s}=this,a=Object.keys(s);for(let l=a.length;l--;){const u=s[a[l]];if(u?.body.type===e&&(!n||u.buffered)){const d=u.body;if(d.start<=t&&t<=d.end)return d}}return null}detectEvictedFragments(t,e,n,s,a){this.timeRanges&&(this.timeRanges[t]=e);const l=s?.fragment.sn||-1;Object.keys(this.fragments).forEach(u=>{const d=this.fragments[u];if(!d||l>=d.body.sn)return;if(!d.buffered&&(!d.loaded||a)){d.body.type===n&&this.removeFragment(d.body);return}const f=d.range[t];if(f){if(f.time.length===0){this.removeFragment(d.body);return}f.time.some(h=>{const g=!this.isTimeBuffered(h.startPTS,h.endPTS,e);return g&&this.removeFragment(d.body),g})}})}detectPartialFragments(t){const e=this.timeRanges;if(!e||t.frag.sn==="initSegment")return;const n=t.frag,s=Ca(n),a=this.fragments[s];if(!a||a.buffered&&n.gap)return;const l=!n.relurl;Object.keys(e).forEach(u=>{const d=n.elementaryStreams[u];if(!d)return;const f=e[u],h=l||d.partial===!0;a.range[u]=this.getBufferedTimes(n,t.part,h,f)}),a.loaded=null,Object.keys(a.range).length?(a.buffered=!0,(a.body.endList=n.endList||a.body.endList)&&(this.endListFragments[a.body.type]=a),Cc(a)||this.removeParts(n.sn-1,n.type)):this.removeFragment(a.body)}removeParts(t,e){const n=this.activePartLists[e];n&&(this.activePartLists[e]=ex(n,s=>s.fragment.sn>=t))}fragBuffered(t,e){const n=Ca(t);let s=this.fragments[n];!s&&e&&(s=this.fragments[n]={body:t,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},t.gap&&(this.hasGaps=!0)),s&&(s.loaded=null,s.buffered=!0)}getBufferedTimes(t,e,n,s){const a={time:[],partial:n},l=t.start,u=t.end,d=t.minEndPTS||u,f=t.maxStartPTS||l;for(let h=0;h<s.length;h++){const g=s.start(h)-this.bufferPadding,y=s.end(h)+this.bufferPadding;if(f>=g&&d<=y){a.time.push({startPTS:Math.max(l,s.start(h)),endPTS:Math.min(u,s.end(h))});break}else if(l<y&&u>g){const S=Math.max(l,s.start(h)),v=Math.min(u,s.end(h));v>S&&(a.partial=!0,a.time.push({startPTS:S,endPTS:v}))}else if(u<=g)break}return a}getPartialFragment(t){let e=null,n,s,a,l=0;const{bufferPadding:u,fragments:d}=this;return Object.keys(d).forEach(f=>{const h=d[f];h&&Cc(h)&&(s=h.body.start-u,a=h.body.end+u,t>=s&&t<=a&&(n=Math.min(t-s,a-t),l<=n&&(e=h.body,l=n)))}),e}isEndListAppended(t){const e=this.endListFragments[t];return e!==void 0&&(e.buffered||Cc(e))}getState(t){const e=Ca(t),n=this.fragments[e];return n?n.buffered?Cc(n)?ke.PARTIAL:ke.OK:ke.APPENDING:ke.NOT_LOADED}isTimeBuffered(t,e,n){let s,a;for(let l=0;l<n.length;l++){if(s=n.start(l)-this.bufferPadding,a=n.end(l)+this.bufferPadding,t>=s&&e<=a)return!0;if(e<=s)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(t,e){if(e.frag.sn==="initSegment"||e.frag.bitrateTest)return;const n=e.frag,s=e.part?null:e,a=Ca(n);this.fragments[a]={body:n,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)}}onBufferAppended(t,e){const{frag:n,part:s,timeRanges:a,type:l}=e;if(n.sn==="initSegment")return;const u=n.type;if(s){let f=this.activePartLists[u];f||(this.activePartLists[u]=f=[]),f.push(s)}this.timeRanges=a;const d=a[l];this.detectEvictedFragments(l,d,u,s)}onFragBuffered(t,e){this.detectPartialFragments(e)}hasFragment(t){const e=Ca(t);return!!this.fragments[e]}hasFragments(t){const{fragments:e}=this,n=Object.keys(e);if(!t)return n.length>0;for(let s=n.length;s--;){const a=e[n[s]];if(a?.body.type===t)return!0}return!1}hasParts(t){var e;return!!((e=this.activePartLists[t])!=null&&e.length)}removeFragmentsInRange(t,e,n,s,a){s&&!this.hasGaps||Object.keys(this.fragments).forEach(l=>{const u=this.fragments[l];if(!u)return;const d=u.body;d.type!==n||s&&!d.gap||d.start<e&&d.end>t&&(u.buffered||a)&&this.removeFragment(d)})}removeFragment(t){const e=Ca(t);t.clearElementaryStreamInfo();const n=this.activePartLists[t.type];if(n){const s=t.sn;this.activePartLists[t.type]=ex(n,a=>a.fragment.sn!==s)}delete this.fragments[e],t.endList&&delete this.endListFragments[t.type]}removeAllFragments(){var t,e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const n=(t=this.hls)==null||(e=t.latestLevelDetails)==null?void 0:e.partList;n&&n.forEach(s=>s.clearElementaryStreamInfo())}}function Cc(i){var t,e,n;return i.buffered&&(i.body.gap||((t=i.range.video)==null?void 0:t.partial)||((e=i.range.audio)==null?void 0:e.partial)||((n=i.range.audiovideo)==null?void 0:n.partial))}function Ca(i){return`${i.type}_${i.level}_${i.sn}`}function ex(i,t){return i.filter(e=>{const n=t(e);return n||e.clearElementaryStreamInfo(),n})}var Ks={cbc:0,ctr:1};class qk{constructor(t,e,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=t,this.aesIV=e,this.aesMode=n}decrypt(t,e){switch(this.aesMode){case Ks.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t);case Ks.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},e,t);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function Xk(i){const t=i.byteLength,e=t&&new DataView(i.buffer).getUint8(t-1);return e?i.slice(0,t-e):i}class Wk{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(t){const e=new DataView(t),n=new Uint32Array(4);for(let s=0;s<4;s++)n[s]=e.getUint32(s*4);return n}initTable(){const t=this.sBox,e=this.invSBox,n=this.subMix,s=n[0],a=n[1],l=n[2],u=n[3],d=this.invSubMix,f=d[0],h=d[1],g=d[2],y=d[3],S=new Uint32Array(256);let v=0,E=0,x=0;for(x=0;x<256;x++)x<128?S[x]=x<<1:S[x]=x<<1^283;for(x=0;x<256;x++){let b=E^E<<1^E<<2^E<<3^E<<4;b=b>>>8^b&255^99,t[v]=b,e[b]=v;const D=S[v],L=S[D],I=S[L];let _=S[b]*257^b*16843008;s[v]=_<<24|_>>>8,a[v]=_<<16|_>>>16,l[v]=_<<8|_>>>24,u[v]=_,_=I*16843009^L*65537^D*257^v*16843008,f[b]=_<<24|_>>>8,h[b]=_<<16|_>>>16,g[b]=_<<8|_>>>24,y[b]=_,v?(v=D^S[S[S[I^D]]],E^=S[S[E]]):v=E=1}}expandKey(t){const e=this.uint8ArrayToUint32Array_(t);let n=!0,s=0;for(;s<e.length&&n;)n=e[s]===this.key[s],s++;if(n)return;this.key=e;const a=this.keySize=e.length;if(a!==4&&a!==6&&a!==8)throw new Error("Invalid aes key size="+a);const l=this.ksRows=(a+6+1)*4;let u,d;const f=this.keySchedule=new Uint32Array(l),h=this.invKeySchedule=new Uint32Array(l),g=this.sBox,y=this.rcon,S=this.invSubMix,v=S[0],E=S[1],x=S[2],b=S[3];let D,L;for(u=0;u<l;u++){if(u<a){D=f[u]=e[u];continue}L=D,u%a===0?(L=L<<8|L>>>24,L=g[L>>>24]<<24|g[L>>>16&255]<<16|g[L>>>8&255]<<8|g[L&255],L^=y[u/a|0]<<24):a>6&&u%a===4&&(L=g[L>>>24]<<24|g[L>>>16&255]<<16|g[L>>>8&255]<<8|g[L&255]),f[u]=D=(f[u-a]^L)>>>0}for(d=0;d<l;d++)u=l-d,d&3?L=f[u]:L=f[u-4],d<4||u<=4?h[d]=L:h[d]=v[g[L>>>24]]^E[g[L>>>16&255]]^x[g[L>>>8&255]]^b[g[L&255]],h[d]=h[d]>>>0}networkToHostOrderSwap(t){return t<<24|(t&65280)<<8|(t&16711680)>>8|t>>>24}decrypt(t,e,n){const s=this.keySize+6,a=this.invKeySchedule,l=this.invSBox,u=this.invSubMix,d=u[0],f=u[1],h=u[2],g=u[3],y=this.uint8ArrayToUint32Array_(n);let S=y[0],v=y[1],E=y[2],x=y[3];const b=new Int32Array(t),D=new Int32Array(b.length);let L,I,_,P,M,k,F,R,$,Q,ft,ct,it,B;const H=this.networkToHostOrderSwap;for(;e<b.length;){for($=H(b[e]),Q=H(b[e+1]),ft=H(b[e+2]),ct=H(b[e+3]),M=$^a[0],k=ct^a[1],F=ft^a[2],R=Q^a[3],it=4,B=1;B<s;B++)L=d[M>>>24]^f[k>>16&255]^h[F>>8&255]^g[R&255]^a[it],I=d[k>>>24]^f[F>>16&255]^h[R>>8&255]^g[M&255]^a[it+1],_=d[F>>>24]^f[R>>16&255]^h[M>>8&255]^g[k&255]^a[it+2],P=d[R>>>24]^f[M>>16&255]^h[k>>8&255]^g[F&255]^a[it+3],M=L,k=I,F=_,R=P,it=it+4;L=l[M>>>24]<<24^l[k>>16&255]<<16^l[F>>8&255]<<8^l[R&255]^a[it],I=l[k>>>24]<<24^l[F>>16&255]<<16^l[R>>8&255]<<8^l[M&255]^a[it+1],_=l[F>>>24]<<24^l[R>>16&255]<<16^l[M>>8&255]<<8^l[k&255]^a[it+2],P=l[R>>>24]<<24^l[M>>16&255]<<16^l[k>>8&255]<<8^l[F&255]^a[it+3],D[e]=H(L^S),D[e+1]=H(P^v),D[e+2]=H(_^E),D[e+3]=H(I^x),S=$,v=Q,E=ft,x=ct,e=e+4}return D.buffer}}class Qk{constructor(t,e,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=t,this.key=e,this.aesMode=n}expandKey(){const t=Zk(this.aesMode);return this.subtle.importKey("raw",this.key,{name:t},!1,["encrypt","decrypt"])}}function Zk(i){switch(i){case Ks.cbc:return"AES-CBC";case Ks.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${i}`)}}const Jk=16;class Wp{constructor(t,{removePKCS7Padding:e=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=t.enableSoftwareAES,this.removePKCS7Padding=e,e)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:t,remainderData:e}=this;if(!t||e)return this.reset(),null;const n=new Uint8Array(t);return this.reset(),this.removePKCS7Padding?Xk(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(t,e,n,s){return this.useSoftware?new Promise((a,l)=>{const u=ArrayBuffer.isView(t)?t:new Uint8Array(t);this.softwareDecrypt(u,e,n,s);const d=this.flush();d?a(d.buffer):l(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(t),e,n,s)}softwareDecrypt(t,e,n,s){const{currentIV:a,currentResult:l,remainderData:u}=this;if(s!==Ks.cbc||e.byteLength!==16)return Vt.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),u&&(t=Jn(u,t),this.remainderData=null);const d=this.getValidChunk(t);if(!d.length)return null;a&&(n=a);let f=this.softwareDecrypter;f||(f=this.softwareDecrypter=new Wk),f.expandKey(e);const h=l;return this.currentResult=f.decrypt(d.buffer,0,n),this.currentIV=d.slice(-16).buffer,h||null}webCryptoDecrypt(t,e,n,s){if(this.key!==e||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(t,e,n,s));this.key=e,this.fastAesKey=new Qk(this.subtle,e,s)}return this.fastAesKey.expandKey().then(a=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new qk(this.subtle,new Uint8Array(n),s).decrypt(t.buffer,a)):Promise.reject(new Error("web crypto not initialized"))).catch(a=>(Vt.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${a.name}: ${a.message}`),this.onWebCryptoError(t,e,n,s)))}onWebCryptoError(t,e,n,s){const a=this.enableSoftwareAES;if(a){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(t,e,n,s);const l=this.flush();if(l)return l.buffer}throw new Error("WebCrypto"+(a?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(t){let e=t;const n=t.length-t.length%Jk;return n!==t.length&&(e=t.slice(0,n),this.remainderData=t.slice(n)),e}logOnce(t){this.logEnabled&&(Vt.log(`[decrypter]: ${t}`),this.logEnabled=!1)}}const nx=Math.pow(2,17);class t2{constructor(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(t,e){const n=t.url;if(!n)return Promise.reject(new ns({type:vt.NETWORK_ERROR,details:z.FRAG_LOAD_ERROR,fatal:!1,frag:t,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const s=this.config,a=s.fLoader,l=s.loader;return new Promise((u,d)=>{if(this.loader&&this.loader.destroy(),t.gap)if(t.tagList.some(v=>v[0]==="GAP")){d(sx(t));return}else t.gap=!1;const f=this.loader=a?new a(s):new l(s),h=ix(t);t.loader=f;const g=tx(s.fragLoadPolicy.default),y={loadPolicy:g,timeout:g.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:t.sn==="initSegment"?1/0:nx};t.stats=f.stats;const S={onSuccess:(v,E,x,b)=>{this.resetLoader(t,f);let D=v.data;x.resetIV&&t.decryptdata&&(t.decryptdata.iv=new Uint8Array(D.slice(0,16)),D=D.slice(16)),u({frag:t,part:null,payload:D,networkDetails:b})},onError:(v,E,x,b)=>{this.resetLoader(t,f),d(new ns({type:vt.NETWORK_ERROR,details:z.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:zt({url:n,data:void 0},v),error:new Error(`HTTP Error ${v.code} ${v.text}`),networkDetails:x,stats:b}))},onAbort:(v,E,x)=>{this.resetLoader(t,f),d(new ns({type:vt.NETWORK_ERROR,details:z.INTERNAL_ABORTED,fatal:!1,frag:t,error:new Error("Aborted"),networkDetails:x,stats:v}))},onTimeout:(v,E,x)=>{this.resetLoader(t,f),d(new ns({type:vt.NETWORK_ERROR,details:z.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,error:new Error(`Timeout after ${y.timeout}ms`),networkDetails:x,stats:v}))}};e&&(S.onProgress=(v,E,x,b)=>e({frag:t,part:null,payload:x,networkDetails:b})),f.load(h,y,S)})}loadPart(t,e,n){this.abort();const s=this.config,a=s.fLoader,l=s.loader;return new Promise((u,d)=>{if(this.loader&&this.loader.destroy(),t.gap||e.gap){d(sx(t,e));return}const f=this.loader=a?new a(s):new l(s),h=ix(t,e);t.loader=f;const g=tx(s.fragLoadPolicy.default),y={loadPolicy:g,timeout:g.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:nx};e.stats=f.stats,f.load(h,y,{onSuccess:(S,v,E,x)=>{this.resetLoader(t,f),this.updateStatsFromPart(t,e);const b={frag:t,part:e,payload:S.data,networkDetails:x};n(b),u(b)},onError:(S,v,E,x)=>{this.resetLoader(t,f),d(new ns({type:vt.NETWORK_ERROR,details:z.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:e,response:zt({url:h.url,data:void 0},S),error:new Error(`HTTP Error ${S.code} ${S.text}`),networkDetails:E,stats:x}))},onAbort:(S,v,E)=>{t.stats.aborted=e.stats.aborted,this.resetLoader(t,f),d(new ns({type:vt.NETWORK_ERROR,details:z.INTERNAL_ABORTED,fatal:!1,frag:t,part:e,error:new Error("Aborted"),networkDetails:E,stats:S}))},onTimeout:(S,v,E)=>{this.resetLoader(t,f),d(new ns({type:vt.NETWORK_ERROR,details:z.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:e,error:new Error(`Timeout after ${y.timeout}ms`),networkDetails:E,stats:S}))}})})}updateStatsFromPart(t,e){const n=t.stats,s=e.stats,a=s.total;if(n.loaded+=s.loaded,a){const d=Math.round(t.duration/e.duration),f=Math.min(Math.round(n.loaded/a),d),g=(d-f)*Math.round(n.loaded/f);n.total=n.loaded+g}else n.total=Math.max(n.loaded,n.total);const l=n.loading,u=s.loading;l.start?l.first+=u.first-u.start:(l.start=u.start,l.first=u.first),l.end=u.end}resetLoader(t,e){t.loader=null,this.loader===e&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),e.destroy()}}function ix(i,t=null){const e=t||i,n={frag:i,part:t,responseType:"arraybuffer",url:e.url,headers:{},rangeStart:0,rangeEnd:0},s=e.byteRangeStartOffset,a=e.byteRangeEndOffset;if(mt(s)&&mt(a)){var l;let u=s,d=a;if(i.sn==="initSegment"&&e2((l=i.decryptdata)==null?void 0:l.method)){const f=a-s;f%16&&(d=a+(16-f%16)),s!==0&&(n.resetIV=!0,u=s-16)}n.rangeStart=u,n.rangeEnd=d}return n}function sx(i,t){const e=new Error(`GAP ${i.gap?"tag":"attribute"} found`),n={type:vt.MEDIA_ERROR,details:z.FRAG_GAP,fatal:!1,frag:i,error:e,networkDetails:null};return t&&(n.part=t),(t||i).stats.aborted=!0,new ns(n)}function e2(i){return i==="AES-128"||i==="AES-256"}class ns extends Error{constructor(t){super(t.error.message),this.data=void 0,this.data=t}}class M1 extends hs{constructor(t,e){super(t,e),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(t){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,t),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class Qp{constructor(t,e,n,s=0,a=-1,l=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=_c(),this.buffering={audio:_c(),video:_c(),audiovideo:_c()},this.level=t,this.sn=e,this.id=n,this.size=s,this.part=a,this.partial=l}}function _c(){return{start:0,executeStart:0,executeEnd:0,end:0}}const rx={length:0,start:()=>0,end:()=>0};class Lt{static isBuffered(t,e){if(t){const n=Lt.getBuffered(t);for(let s=n.length;s--;)if(e>=n.start(s)&&e<=n.end(s))return!0}return!1}static bufferedRanges(t){if(t){const e=Lt.getBuffered(t);return Lt.timeRangesToArray(e)}return[]}static timeRangesToArray(t){const e=[];for(let n=0;n<t.length;n++)e.push({start:t.start(n),end:t.end(n)});return e}static bufferInfo(t,e,n){if(t){const s=Lt.bufferedRanges(t);if(s.length)return Lt.bufferedInfo(s,e,n)}return{len:0,start:e,end:e,bufferedIndex:-1}}static bufferedInfo(t,e,n){e=Math.max(0,e),t.length>1&&t.sort((h,g)=>h.start-g.start||g.end-h.end);let s=-1,a=[];if(n)for(let h=0;h<t.length;h++){e>=t[h].start&&e<=t[h].end&&(s=h);const g=a.length;if(g){const y=a[g-1].end;t[h].start-y<n?t[h].end>y&&(a[g-1].end=t[h].end):a.push(t[h])}else a.push(t[h])}else a=t;let l=0,u,d=e,f=e;for(let h=0;h<a.length;h++){const g=a[h].start,y=a[h].end;if(s===-1&&e>=g&&e<=y&&(s=h),e+n>=g&&e<y)d=g,f=y,l=f-e;else if(e+n<g){u=g;break}}return{len:l,start:d||0,end:f||0,nextStart:u,buffered:t,bufferedIndex:s}}static getBuffered(t){try{return t.buffered||rx}catch(e){return Vt.log("failed to get media.buffered",e),rx}}}const P1=/\{\$([a-zA-Z0-9-_]+)\}/g;function ax(i){return P1.test(i)}function Vg(i,t){if(i.variableList!==null||i.hasVariableRefs){const e=i.variableList;return t.replace(P1,n=>{const s=n.substring(2,n.length-1),a=e?.[s];return a===void 0?(i.playlistParsingError||(i.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${s}"`)),n):a})}return t}function ox(i,t,e){let n=i.variableList;n||(i.variableList=n={});let s,a;if("QUERYPARAM"in t){s=t.QUERYPARAM;try{const l=new self.URL(e).searchParams;if(l.has(s))a=l.get(s);else throw new Error(`"${s}" does not match any query parameter in URI: "${e}"`)}catch(l){i.playlistParsingError||(i.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${l.message}`))}}else s=t.NAME,a=t.VALUE;s in n?i.playlistParsingError||(i.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${s}"`)):n[s]=a||""}function n2(i,t,e){const n=t.IMPORT;if(e&&n in e){let s=i.variableList;s||(i.variableList=s={}),s[n]=e[n]}else i.playlistParsingError||(i.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}const i2=/^(\d+)x(\d+)$/,lx=/(.+?)=(".*?"|.*?)(?:,|$)/g;class fe{constructor(t,e){typeof t=="string"&&(t=fe.parseAttrList(t,e)),Wt(this,t)}get clientAttrs(){return Object.keys(this).filter(t=>t.substring(0,2)==="X-")}decimalInteger(t){const e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e}hexadecimalInteger(t){if(this[t]){let e=(this[t]||"0x").slice(2);e=(e.length&1?"0":"")+e;const n=new Uint8Array(e.length/2);for(let s=0;s<e.length/2;s++)n[s]=parseInt(e.slice(s*2,s*2+2),16);return n}return null}hexadecimalIntegerAsNumber(t){const e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e}decimalFloatingPoint(t){return parseFloat(this[t])}optionalFloat(t,e){const n=this[t];return n?parseFloat(n):e}enumeratedString(t){return this[t]}enumeratedStringList(t,e){const n=this[t];return(n?n.split(/[ ,]+/):[]).reduce((s,a)=>(s[a.toLowerCase()]=!0,s),e)}bool(t){return this[t]==="YES"}decimalResolution(t){const e=i2.exec(this[t]);if(e!==null)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}}static parseAttrList(t,e){let n;const s={},a='"';for(lx.lastIndex=0;(n=lx.exec(t))!==null;){const l=n[1].trim();let u=n[2];const d=u.indexOf(a)===0&&u.lastIndexOf(a)===u.length-1;let f=!1;if(d)u=u.slice(1,-1);else switch(l){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":f=!0}if(e&&(d||f))u=Vg(e,u);else if(!f&&!d)switch(l){case"CLOSED-CAPTIONS":if(u==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Vt.warn(`${t}: attribute ${l} is missing quotes`)}s[l]=u}return s}}const s2="com.apple.hls.interstitial";function r2(i){return i!=="ID"&&i!=="CLASS"&&i!=="CUE"&&i!=="START-DATE"&&i!=="DURATION"&&i!=="END-DATE"&&i!=="END-ON-NEXT"}function a2(i){return i==="SCTE35-OUT"||i==="SCTE35-IN"||i==="SCTE35-CMD"}class k1{constructor(t,e,n=0){var s;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=e?.tagAnchor||null,this.tagOrder=(s=e?.tagOrder)!=null?s:n,e){const a=e.attr;for(const l in a)if(Object.prototype.hasOwnProperty.call(t,l)&&t[l]!==a[l]){Vt.warn(`DATERANGE tag attribute: "${l}" does not match for tags with ID: "${t.ID}"`),this._badValueForSameId=l;break}t=Wt(new fe({}),a,t)}if(this.attr=t,e?(this._startDate=e._startDate,this._cue=e._cue,this._endDate=e._endDate,this._dateAtEnd=e._dateAtEnd):this._startDate=new Date(t["START-DATE"]),"END-DATE"in this.attr){const a=e?.endDate||new Date(this.attr["END-DATE"]);mt(a.getTime())&&(this._endDate=a)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const t=this._cue;return t===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):t}get startTime(){const{tagAnchor:t}=this;return t===null||t.programDateTime===null?(Vt.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${t}`),NaN):t.start+(this.startDate.getTime()-t.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const t=this._endDate||this._dateAtEnd;if(t)return t;const e=this.duration;return e!==null?this._dateAtEnd=new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const t=this.attr.decimalFloatingPoint("DURATION");if(mt(t))return t}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===s2}get isValid(){return!!this.id&&!this._badValueForSameId&&mt(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const o2=10;class l2{constructor(t){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=t}reloaded(t){if(!t){this.advanced=!0,this.updated=!0;return}const e=this.lastPartSn-t.lastPartSn,n=this.lastPartIndex-t.lastPartIndex;this.updated=this.endSN!==t.endSN||!!n||!!e||!this.live,this.advanced=this.endSN>t.endSN||e>0||e===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(t.misses*.6):this.misses=t.misses+1}get hasProgramDateTime(){return this.fragments.length?mt(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||o2}get drift(){const t=this.driftEndTime-this.driftStartTime;return t>0?(this.driftEnd-this.driftStart)*1e3/t:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var t;return(t=this.partList)!=null&&t.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var t;return(t=this.fragments)!=null&&t.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){var t;return(t=this.fragments)!=null&&t.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var t;return(t=this.partList)!=null&&t.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const t=this.partList;if(t){const e=this.lastPartIndex;if(e!==-1){for(let n=t.length;n--;)if(t[n].index>e)return t[n].index;return e}}return 0}get lastPartSn(){var t;return(t=this.partList)!=null&&t.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const t=this.partEnd-this.fragmentStart;return this.age>Math.max(t,this.totalduration)+this.levelTargetDuration}return!1}}function Ga(i){return i==="AES-128"||i==="AES-256"||i==="AES-256-CTR"}function Zp(i){switch(i){case"AES-128":case"AES-256":return Ks.cbc;case"AES-256-CTR":return Ks.ctr;default:throw new Error(`invalid full segment method ${i}`)}}function Jp(i){return Uint8Array.from(atob(i),t=>t.charCodeAt(0))}function Gg(i){return Uint8Array.from(unescape(encodeURIComponent(i)),t=>t.charCodeAt(0))}function u2(i){const t=Gg(i).subarray(0,16),e=new Uint8Array(16);return e.set(t,16-t.length),e}function c2(i){const t=function(n,s,a){const l=n[s];n[s]=n[a],n[a]=l};t(i,0,3),t(i,1,2),t(i,4,5),t(i,6,7)}function f2(i){const t=i.split(":");let e=null;if(t[0]==="data"&&t.length===2){const n=t[1].split(";"),s=n[n.length-1].split(",");if(s.length===2){const a=s[0]==="base64",l=s[1];a?(n.splice(-1,1),e=Jp(l)):e=u2(l)}}return e}const bf=typeof self<"u"?self:void 0;var Yt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},gn={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function Qc(i){switch(i){case gn.FAIRPLAY:return Yt.FAIRPLAY;case gn.PLAYREADY:return Yt.PLAYREADY;case gn.WIDEVINE:return Yt.WIDEVINE;case gn.CLEARKEY:return Yt.CLEARKEY}}var Dc={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function Fm(i){if(i===Dc.WIDEVINE)return Yt.WIDEVINE;if(i===Dc.PLAYREADY)return Yt.PLAYREADY;if(i===Dc.CENC||i===Dc.CLEARKEY)return Yt.CLEARKEY}function Ic(i){switch(i){case Yt.FAIRPLAY:return gn.FAIRPLAY;case Yt.PLAYREADY:return gn.PLAYREADY;case Yt.WIDEVINE:return gn.WIDEVINE;case Yt.CLEARKEY:return gn.CLEARKEY}}function dl(i){const{drmSystems:t,widevineLicenseUrl:e}=i,n=t?[Yt.FAIRPLAY,Yt.WIDEVINE,Yt.PLAYREADY,Yt.CLEARKEY].filter(s=>!!t[s]):[];return!n[Yt.WIDEVINE]&&e&&n.push(Yt.WIDEVINE),n}const N1=function(i){return bf!=null&&(i=bf.navigator)!=null&&i.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function d2(i,t,e,n){let s;switch(i){case Yt.FAIRPLAY:s=["cenc","sinf"];break;case Yt.WIDEVINE:case Yt.PLAYREADY:s=["cenc"];break;case Yt.CLEARKEY:s=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${i}`)}return h2(s,t,e,n)}function h2(i,t,e,n){return[{initDataTypes:i,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:t.map(a=>({contentType:`audio/mp4; codecs=${a}`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:e.map(a=>({contentType:`video/mp4; codecs=${a}`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function m2(i){var t;return i.sessionType==="persistent-license"||!!((t=i.sessionTypes)!=null&&t.some(e=>e==="persistent-license"))}function B1(i){const t=new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2),e=String.fromCharCode.apply(null,Array.from(t)),n=e.substring(e.indexOf("<"),e.length),l=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(l){const u=l.childNodes[0]?l.childNodes[0].nodeValue:l.getAttribute("VALUE");if(u){const d=Jp(u).subarray(0,16);return c2(d),d}}return null}let wc={};class Nl{static clearKeyUriToKeyIdMap(){wc={}}constructor(t,e,n,s=[1],a=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=t,this.uri=e,this.keyFormat=n,this.keyFormatVersions=s,this.iv=a,this.encrypted=t?t!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!Ga(t)}isSupported(){if(this.method){if(Ga(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case gn.FAIRPLAY:case gn.WIDEVINE:case gn.PLAYREADY:case gn.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(t){if(!this.encrypted||!this.uri)return null;if(Ga(this.method)&&this.uri&&!this.iv){typeof t!="number"&&(Vt.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),t=0);const n=g2(t);return new Nl(this.method,this.uri,"identity",this.keyFormatVersions,n)}const e=f2(this.uri);if(e)switch(this.keyFormat){case gn.WIDEVINE:this.pssh=e,e.length>=22&&(this.keyId=e.subarray(e.length-22,e.length-6));break;case gn.PLAYREADY:{const n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=Ek(n,null,e),this.keyId=B1(e);break}default:{let n=e.subarray(0,16);if(n.length!==16){const s=new Uint8Array(16);s.set(n,16-n.length),n=s}this.keyId=n;break}}if(!this.keyId||this.keyId.byteLength!==16){let n=wc[this.uri];if(!n){const s=Object.keys(wc).length%Number.MAX_SAFE_INTEGER;n=new Uint8Array(16),new DataView(n.buffer,12,4).setUint32(0,s),wc[this.uri]=n}this.keyId=n}return this}}function g2(i){const t=new Uint8Array(16);for(let e=12;e<16;e++)t[e]=i>>8*(15-e)&255;return t}const ux=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,cx=/#EXT-X-MEDIA:(.*)/g,p2=/^#EXT(?:INF|-X-TARGETDURATION):/m,Um=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),y2=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Di{static findGroup(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(s.id===e)return s}}static resolve(t,e){return zp.buildAbsoluteURL(e,t,{alwaysNormalize:!0})}static isMediaPlaylist(t){return p2.test(t)}static parseMasterPlaylist(t,e){const n=ax(t),s={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},a=[];ux.lastIndex=0;let l;for(;(l=ux.exec(t))!=null;)if(l[1]){var u;const f=new fe(l[1],s),h=Vg(s,l[2]),g={attrs:f,bitrate:f.decimalInteger("BANDWIDTH")||f.decimalInteger("AVERAGE-BANDWIDTH"),name:f.NAME,url:Di.resolve(h,e)},y=f.decimalResolution("RESOLUTION");y&&(g.width=y.width,g.height=y.height),hx(f.CODECS,g);const S=f["SUPPLEMENTAL-CODECS"];S&&(g.supplemental={},hx(S,g.supplemental)),(u=g.unknownCodecs)!=null&&u.length||a.push(g),s.levels.push(g)}else if(l[3]){const f=l[3],h=l[4];switch(f){case"SESSION-DATA":{const g=new fe(h,s),y=g["DATA-ID"];y&&(s.sessionData===null&&(s.sessionData={}),s.sessionData[y]=g);break}case"SESSION-KEY":{const g=fx(h,e,s);g.encrypted&&g.isSupported()?(s.sessionKeys===null&&(s.sessionKeys=[]),s.sessionKeys.push(g)):Vt.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${h}"`);break}case"DEFINE":{{const g=new fe(h,s);ox(s,g,e)}break}case"CONTENT-STEERING":{const g=new fe(h,s);s.contentSteering={uri:Di.resolve(g["SERVER-URI"],e),pathwayId:g["PATHWAY-ID"]||"."};break}case"START":{s.startTimeOffset=dx(h);break}}}const d=a.length>0&&a.length<s.levels.length;return s.levels=d?a:s.levels,s.levels.length===0&&(s.playlistParsingError=new Error("no levels found in manifest")),s}static parseMasterPlaylistMedia(t,e,n){let s;const a={},l=n.levels,u={AUDIO:l.map(f=>({id:f.attrs.AUDIO,audioCodec:f.audioCodec})),SUBTITLES:l.map(f=>({id:f.attrs.SUBTITLES,textCodec:f.textCodec})),"CLOSED-CAPTIONS":[]};let d=0;for(cx.lastIndex=0;(s=cx.exec(t))!==null;){const f=new fe(s[1],n),h=f.TYPE;if(h){const g=u[h],y=a[h]||[];a[h]=y;const S=f.LANGUAGE,v=f["ASSOC-LANGUAGE"],E=f.CHANNELS,x=f.CHARACTERISTICS,b=f["INSTREAM-ID"],D={attrs:f,bitrate:0,id:d++,groupId:f["GROUP-ID"]||"",name:f.NAME||S||"",type:h,default:f.bool("DEFAULT"),autoselect:f.bool("AUTOSELECT"),forced:f.bool("FORCED"),lang:S,url:f.URI?Di.resolve(f.URI,e):""};if(v&&(D.assocLang=v),E&&(D.channels=E),x&&(D.characteristics=x),b&&(D.instreamId=b),g!=null&&g.length){const L=Di.findGroup(g,D.groupId)||g[0];mx(D,L,"audioCodec"),mx(D,L,"textCodec")}y.push(D)}}return a}static parseLevelPlaylist(t,e,n,s,a,l){var u;const d={url:e},f=new l2(e),h=f.fragments,g=[];let y=null,S=0,v=0,E=0,x=0,b=0,D=null,L=new Pm(s,d),I,_,P,M=-1,k=!1,F=null,R;if(Um.lastIndex=0,f.m3u8=t,f.hasVariableRefs=ax(t),((u=Um.exec(t))==null?void 0:u[0])!=="#EXTM3U")return f.playlistParsingError=new Error("Missing format identifier #EXTM3U"),f;for(;(I=Um.exec(t))!==null;){k&&(k=!1,L=new Pm(s,d),L.playlistOffset=E,L.start=E,L.sn=S,L.cc=x,b&&(L.bitrate=b),L.level=n,y&&(L.initSegment=y,y.rawProgramDateTime&&(L.rawProgramDateTime=y.rawProgramDateTime,y.rawProgramDateTime=null),F&&(L.setByteRange(F),F=null)));const ct=I[1];if(ct){L.duration=parseFloat(ct);const it=(" "+I[2]).slice(1);L.title=it||null,L.tagList.push(it?["INF",ct,it]:["INF",ct])}else if(I[3]){if(mt(L.duration)){L.playlistOffset=E,L.start=E,P&&px(L,P,f),L.sn=S,L.level=n,L.cc=x,h.push(L);const it=(" "+I[3]).slice(1);L.relurl=Vg(f,it),Hg(L,D,g),D=L,E+=L.duration,S++,v=0,k=!0}}else{if(I=I[0].match(y2),!I){Vt.warn("No matches on slow regex match for level playlist!");continue}for(_=1;_<I.length&&I[_]===void 0;_++);const it=(" "+I[_]).slice(1),B=(" "+I[_+1]).slice(1),H=I[_+2]?(" "+I[_+2]).slice(1):null;switch(it){case"BYTERANGE":D?L.setByteRange(B,D):L.setByteRange(B);break;case"PROGRAM-DATE-TIME":L.rawProgramDateTime=B,L.tagList.push(["PROGRAM-DATE-TIME",B]),M===-1&&(M=h.length);break;case"PLAYLIST-TYPE":f.type&&Ji(f,it,I),f.type=B.toUpperCase();break;case"MEDIA-SEQUENCE":f.startSN!==0?Ji(f,it,I):h.length>0&&yx(f,it,I),S=f.startSN=parseInt(B);break;case"SKIP":{f.skippedSegments&&Ji(f,it,I);const et=new fe(B,f),X=et.decimalInteger("SKIPPED-SEGMENTS");if(mt(X)){f.skippedSegments+=X;for(let q=X;q--;)h.push(null);S+=X}const O=et.enumeratedString("RECENTLY-REMOVED-DATERANGES");O&&(f.recentlyRemovedDateranges=(f.recentlyRemovedDateranges||[]).concat(O.split("	")));break}case"TARGETDURATION":f.targetduration!==0&&Ji(f,it,I),f.targetduration=Math.max(parseInt(B),1);break;case"VERSION":f.version!==null&&Ji(f,it,I),f.version=parseInt(B);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":f.live||Ji(f,it,I),f.live=!1;break;case"#":(B||H)&&L.tagList.push(H?[B,H]:[B]);break;case"DISCONTINUITY":x++,L.tagList.push(["DIS"]);break;case"GAP":L.gap=!0,L.tagList.push([it]);break;case"BITRATE":L.tagList.push([it,B]),b=parseInt(B)*1e3,mt(b)?L.bitrate=b:b=0;break;case"DATERANGE":{const et=new fe(B,f),X=new k1(et,f.dateRanges[et.ID],f.dateRangeTagCount);f.dateRangeTagCount++,X.isValid||f.skippedSegments?f.dateRanges[X.id]=X:Vt.warn(`Ignoring invalid DATERANGE tag: "${B}"`),L.tagList.push(["EXT-X-DATERANGE",B]);break}case"DEFINE":{{const et=new fe(B,f);"IMPORT"in et?n2(f,et,l):ox(f,et,e)}break}case"DISCONTINUITY-SEQUENCE":f.startCC!==0?Ji(f,it,I):h.length>0&&yx(f,it,I),f.startCC=x=parseInt(B);break;case"KEY":{const et=fx(B,e,f);if(et.isSupported()){if(et.method==="NONE"){P=void 0;break}P||(P={}),P[et.keyFormat]&&(P=Wt({},P)),P[et.keyFormat]=et}else Vt.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${B}"`);break}case"START":f.startTimeOffset=dx(B);break;case"MAP":{const et=new fe(B,f);if(L.duration){const X=new Pm(s,d);gx(X,et,n,P),y=X,L.initSegment=y,y.rawProgramDateTime&&!L.rawProgramDateTime&&(L.rawProgramDateTime=y.rawProgramDateTime)}else{const X=L.byteRangeEndOffset;if(X){const O=L.byteRangeStartOffset;F=`${X-O}@${O}`}else F=null;gx(L,et,n,P),y=L,k=!0}y.cc=x;break}case"SERVER-CONTROL":{R&&Ji(f,it,I),R=new fe(B),f.canBlockReload=R.bool("CAN-BLOCK-RELOAD"),f.canSkipUntil=R.optionalFloat("CAN-SKIP-UNTIL",0),f.canSkipDateRanges=f.canSkipUntil>0&&R.bool("CAN-SKIP-DATERANGES"),f.partHoldBack=R.optionalFloat("PART-HOLD-BACK",0),f.holdBack=R.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{f.partTarget&&Ji(f,it,I);const et=new fe(B);f.partTarget=et.decimalFloatingPoint("PART-TARGET");break}case"PART":{let et=f.partList;et||(et=f.partList=[]);const X=v>0?et[et.length-1]:void 0,O=v++,q=new fe(B,f),st=new ok(q,L,d,O,X);et.push(st),L.duration+=st.duration;break}case"PRELOAD-HINT":{const et=new fe(B,f);f.preloadHint=et;break}case"RENDITION-REPORT":{const et=new fe(B,f);f.renditionReports=f.renditionReports||[],f.renditionReports.push(et);break}default:Vt.warn(`line parsed but not handled: ${I}`);break}}}D&&!D.relurl?(h.pop(),E-=D.duration,f.partList&&(f.fragmentHint=D)):f.partList&&(Hg(L,D,g),L.cc=x,f.fragmentHint=L,P&&px(L,P,f)),f.targetduration||(f.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const $=h.length,Q=h[0],ft=h[$-1];if(E+=f.skippedSegments*f.targetduration,E>0&&$&&ft){f.averagetargetduration=E/$;const ct=ft.sn;f.endSN=ct!=="initSegment"?ct:0,f.live||(ft.endList=!0),Q&&f.startCC===void 0&&(f.startCC=Q.cc),M>0&&(S2(h,M),Q&&g.unshift(Q))}else f.endSN=0,f.startCC=0;return f.fragmentHint&&(E+=f.fragmentHint.duration),f.totalduration=E,g.length&&f.dateRangeTagCount&&Q&&F1(g,f),f.endCC=x,f}}function F1(i,t){const e=i.length;if(!e)return;const n=i[e-1],s=t.live?1/0:t.totalduration,a=Object.keys(t.dateRanges);for(let l=a.length;l--;){const u=t.dateRanges[a[l]],d=u.startDate.getTime();u.tagAnchor=n.ref;for(let f=e;f--;){const h=v2(t,d,i,f,s);if(h!==-1){u.tagAnchor=t.fragments[h].ref;break}}}}function v2(i,t,e,n,s){const a=e[n];if(a){const u=a.programDateTime;if(t>=u||n===0){var l;const d=(((l=e[n+1])==null?void 0:l.start)||s)-a.start;if(t<=u+d*1e3){const f=e[n].sn-i.startSN,h=i.fragments;if(h.length>e.length){const y=(e[n+1]||h[h.length-1]).sn-i.startSN;for(let S=y;S>f;S--){const v=h[S].programDateTime;if(t>=v&&t<v+h[S].duration*1e3)return S}}return f}}}return-1}function fx(i,t,e){var n,s;const a=new fe(i,e),l=(n=a.METHOD)!=null?n:"",u=a.URI,d=a.hexadecimalInteger("IV"),f=a.KEYFORMATVERSIONS,h=(s=a.KEYFORMAT)!=null?s:"identity";u&&a.IV&&!d&&Vt.error(`Invalid IV: ${a.IV}`);const g=u?Di.resolve(u,t):"",y=(f||"1").split("/").map(Number).filter(Number.isFinite);return new Nl(l,g,h,y,d)}function dx(i){const e=new fe(i).decimalFloatingPoint("TIME-OFFSET");return mt(e)?e:null}function hx(i,t){let e=(i||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const s=e.filter(a=>A1(a,n));s.length&&(t[`${n}Codec`]=s.map(a=>a.split("/")[0]).join(","),e=e.filter(a=>s.indexOf(a)===-1))}),t.unknownCodecs=e}function mx(i,t,e){const n=t[e];n&&(i[e]=n)}function S2(i,t){let e=i[t];for(let n=t;n--;){const s=i[n];if(!s)return;s.programDateTime=e.programDateTime-s.duration*1e3,e=s}}function Hg(i,t,e){i.rawProgramDateTime?e.push(i):t!=null&&t.programDateTime&&(i.programDateTime=t.endProgramDateTime)}function gx(i,t,e,n){i.relurl=t.URI,t.BYTERANGE&&i.setByteRange(t.BYTERANGE),i.level=e,i.sn="initSegment",n&&(i.levelkeys=n),i.initSegment=null}function px(i,t,e){i.levelkeys=t;const{encryptedFragments:n}=e;(!n.length||n[n.length-1].levelkeys!==t)&&Object.keys(t).some(s=>t[s].isCommonEncryption)&&n.push(i)}function Ji(i,t,e){i.playlistParsingError=new Error(`#EXT-X-${t} must not appear more than once (${e[0]})`)}function yx(i,t,e){i.playlistParsingError=new Error(`#EXT-X-${t} must appear before the first Media Segment (${e[0]})`)}function $m(i,t){const e=t.startPTS;if(mt(e)){let n=0,s;t.sn>i.sn?(n=e-i.start,s=i):(n=i.start-e,s=t),s.duration!==n&&s.setDuration(n)}else t.sn>i.sn?i.cc===t.cc&&i.minEndPTS?t.setStart(i.start+(i.minEndPTS-i.start)):t.setStart(i.start+i.duration):t.setStart(Math.max(i.start-t.duration,0))}function U1(i,t,e,n,s,a){n-e<=0&&(Vt.warn("Fragment should have a positive duration",t),n=e+t.duration,a=s+t.duration);let u=e,d=n;const f=t.startPTS,h=t.endPTS;if(mt(f)){const x=Math.abs(f-e);mt(t.deltaPTS)?t.deltaPTS=Math.max(x,t.deltaPTS):t.deltaPTS=x,u=Math.max(e,f),e=Math.min(e,f),s=Math.min(s,t.startDTS),d=Math.min(n,h),n=Math.max(n,h),a=Math.max(a,t.endDTS)}const g=e-t.start;t.start!==0&&t.setStart(e),t.setDuration(n-t.start),t.startPTS=e,t.maxStartPTS=u,t.startDTS=s,t.endPTS=n,t.minEndPTS=d,t.endDTS=a;const y=t.sn;if(!i||y<i.startSN||y>i.endSN)return 0;let S;const v=y-i.startSN,E=i.fragments;for(E[v]=t,S=v;S>0;S--)$m(E[S],E[S-1]);for(S=v;S<E.length-1;S++)$m(E[S],E[S+1]);return i.fragmentHint&&$m(E[E.length-1],i.fragmentHint),i.PTSKnown=i.alignedSliding=!0,g}function T2(i,t){if(i===t)return;let e=null;const n=i.fragments;for(let f=n.length-1;f>=0;f--){const h=n[f].initSegment;if(h){e=h;break}}i.fragmentHint&&delete i.fragmentHint.endPTS;let s;b2(i,t,(f,h,g,y)=>{if((!t.startCC||t.skippedSegments)&&h.cc!==f.cc){const S=f.cc-h.cc;for(let v=g;v<y.length;v++)y[v].cc+=S;t.endCC=y[y.length-1].cc}mt(f.startPTS)&&mt(f.endPTS)&&(h.setStart(h.startPTS=f.startPTS),h.startDTS=f.startDTS,h.maxStartPTS=f.maxStartPTS,h.endPTS=f.endPTS,h.endDTS=f.endDTS,h.minEndPTS=f.minEndPTS,h.setDuration(f.endPTS-f.startPTS),h.duration&&(s=h),t.PTSKnown=t.alignedSliding=!0),f.hasStreams&&(h.elementaryStreams=f.elementaryStreams),h.loader=f.loader,f.hasStats&&(h.stats=f.stats),f.initSegment&&(h.initSegment=f.initSegment,e=f.initSegment)});const a=t.fragments,l=t.fragmentHint?a.concat(t.fragmentHint):a;if(e&&l.forEach(f=>{var h;f&&(!f.initSegment||f.initSegment.relurl===((h=e)==null?void 0:h.relurl))&&(f.initSegment=e)}),t.skippedSegments){if(t.deltaUpdateFailed=a.some(f=>!f),t.deltaUpdateFailed){Vt.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let f=t.skippedSegments;f--;)a.shift();t.startSN=a[0].sn}else{t.canSkipDateRanges&&(t.dateRanges=E2(i.dateRanges,t));const f=i.fragments.filter(h=>h.rawProgramDateTime);if(i.hasProgramDateTime&&!t.hasProgramDateTime)for(let h=1;h<l.length;h++)l[h].programDateTime===null&&Hg(l[h],l[h-1],f);F1(f,t)}t.endCC=a[a.length-1].cc}if(!t.startCC){var u;const f=G1(i,t.startSN-1);t.startCC=(u=f?.cc)!=null?u:a[0].cc}x2(i.partList,t.partList,(f,h)=>{h.elementaryStreams=f.elementaryStreams,h.stats=f.stats}),s?U1(t,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS):$1(i,t),a.length&&(t.totalduration=t.edge-a[0].start),t.driftStartTime=i.driftStartTime,t.driftStart=i.driftStart;const d=t.advancedDateTime;if(t.advanced&&d){const f=t.edge;t.driftStart||(t.driftStartTime=d,t.driftStart=f),t.driftEndTime=d,t.driftEnd=f}else t.driftEndTime=i.driftEndTime,t.driftEnd=i.driftEnd,t.advancedDateTime=i.advancedDateTime;t.requestScheduled===-1&&(t.requestScheduled=i.requestScheduled)}function E2(i,t){const{dateRanges:e,recentlyRemovedDateranges:n}=t,s=Wt({},i);n&&n.forEach(u=>{delete s[u]});const l=Object.keys(s).length;return l&&Object.keys(e).forEach(u=>{const d=s[u],f=new k1(e[u].attr,d);f.isValid?(s[u]=f,d||(f.tagOrder+=l)):Vt.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${le(e[u].attr)}"`)}),s}function x2(i,t,e){if(i&&t){let n=0;for(let s=0,a=i.length;s<=a;s++){const l=i[s],u=t[s+n];l&&u&&l.index===u.index&&l.fragment.sn===u.fragment.sn?e(l,u):n--}}}function b2(i,t,e){const n=t.skippedSegments,s=Math.max(i.startSN,t.startSN)-t.startSN,a=(i.fragmentHint?1:0)+(n?t.endSN:Math.min(i.endSN,t.endSN))-t.startSN,l=t.startSN-i.startSN,u=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,d=i.fragmentHint?i.fragments.concat(i.fragmentHint):i.fragments;for(let f=s;f<=a;f++){const h=d[l+f];let g=u[f];if(n&&!g&&h&&(g=t.fragments[f]=h),h&&g){if(e(h,g,f,u),h.url&&h.url!==g.url){t.playlistParsingError=vx(`media sequence mismatch ${g.sn}:`,i,t,h,g);return}else if(h.cc!==g.cc){t.playlistParsingError=vx(`discontinuity sequence mismatch (${h.cc}!=${g.cc})`,i,t,h,g);return}}}}function vx(i,t,e,n,s){return new Error(`${i} ${s.url}
Playlist starting @${t.startSN}
${t.m3u8}

Playlist starting @${e.startSN}
${e.m3u8}`)}function $1(i,t,e=!0){const n=t.startSN+t.skippedSegments-i.startSN,s=i.fragments,a=n>=0;let l=0;if(a&&n<s.length)l=s[n].start;else if(a&&t.startSN===i.endSN+1)l=i.fragmentEnd;else if(a&&e)l=i.fragmentStart+n*t.levelTargetDuration;else if(!t.skippedSegments&&t.fragmentStart===0)l=i.fragmentStart;else return;jg(t,l)}function jg(i,t){if(t){const e=i.fragments;for(let n=i.skippedSegments;n<e.length;n++)e[n].addStart(t);i.fragmentHint&&i.fragmentHint.addStart(t)}}function V1(i,t=1/0){let e=1e3*i.targetduration;if(i.updated){const n=i.fragments;if(n.length&&e*4>t){const a=n[n.length-1].duration*1e3;a<e&&(e=a)}}else e/=2;return Math.round(e)}function G1(i,t,e){if(!i)return null;let n=i.fragments[t-i.startSN];return n||(n=i.fragmentHint,n&&n.sn===t)?n:t<i.startSN&&e&&e.sn===t?e:null}function Sx(i,t,e){return i?H1(i.partList,t,e):null}function H1(i,t,e){if(i)for(let n=i.length;n--;){const s=i[n];if(s.index===e&&s.fragment.sn===t)return s}return null}function j1(i){i.forEach((t,e)=>{var n;(n=t.details)==null||n.fragments.forEach(s=>{s.level=e,s.initSegment&&(s.initSegment.level=e)})})}function yl(i,t){for(let n=0,s=i.length;n<s;n++){var e;if(((e=i[n])==null?void 0:e.cc)===t)return i[n]}return null}function A2(i,t){return!!(i&&t.startCC<i.endCC&&t.endCC>i.startCC)}function Tx(i,t){if(i){const e=i.start+t;i.start=i.startPTS=e,i.endPTS=e+i.duration}}function K1(i,t){const e=t.fragments;for(let n=0,s=e.length;n<s;n++)Tx(e[n],i);t.fragmentHint&&Tx(t.fragmentHint,i),t.alignedSliding=!0}function R2(i,t){i&&(z1(t,i),!t.alignedSliding&&i&&Af(t,i),!t.alignedSliding&&i&&!t.skippedSegments&&$1(i,t,!1))}function z1(i,t){if(!A2(t,i))return;const e=Math.min(t.endCC,i.endCC),n=yl(t.fragments,e),s=yl(i.fragments,e);if(!n||!s)return;Vt.log(`Aligning playlist at start of dicontinuity sequence ${e}`);const a=n.start-s.start;K1(a,i)}function Af(i,t){if(!i.hasProgramDateTime||!t.hasProgramDateTime)return;const e=i.fragments,n=t.fragments;if(!e.length||!n.length)return;let s,a;const l=Math.min(t.endCC,i.endCC);t.startCC<l&&i.startCC<l&&(s=yl(n,l),a=yl(e,l)),(!s||!a)&&(s=n[Math.floor(n.length/2)],a=yl(e,s.cc)||e[Math.floor(e.length/2)]);const u=s.programDateTime,d=a.programDateTime;if(!u||!d)return;const f=(d-u)/1e3-(a.start-s.start);K1(f,i)}const L2={toString:function(i){let t="";const e=i.length;for(let n=0;n<e;n++)t+=`[${i.start(n).toFixed(3)}-${i.end(n).toFixed(3)}]`;return t}},ot={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class t0 extends M1{constructor(t,e,n,s,a){super(s,t.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=ot.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:l,fragCurrent:u,media:d,mediaBuffer:f,state:h}=this,g=d?d.currentTime:0,y=Lt.bufferInfo(f||d,g,l.maxBufferHole);if(this.log(`media seeking to ${mt(g)?g.toFixed(3):g}, state: ${h}`),this.state===ot.ENDED)this.resetLoadingState();else if(u){const S=l.maxFragLookUpTolerance,v=u.start-S,E=u.start+u.duration+S;if(!y.len||E<y.start||v>y.end){const x=g>E;(g<v||x)&&(x&&u.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),u.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(d){this.fragmentTracker.removeFragmentsInRange(g,1/0,this.playlistType,!0);const S=this.lastCurrentTime;if(g>S&&(this.lastCurrentTime=g),!this.loadingParts){const v=Math.max(y.end,g),E=this.shouldLoadParts(this.getLevelDetails(),v);E&&(this.log(`LL-Part loading ON after seeking to ${g.toFixed(2)} with buffer @${v.toFixed(2)}`),this.loadingParts=E)}}!this.hls.hasEnoughToStart&&!y.len&&(this.log(`setting startPosition to ${g} because of seek before start`),this.nextLoadPosition=this.startPosition=g),this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=a,this.hls=t,this.fragmentLoader=new t2(t.config),this.keyLoader=n,this.fragmentTracker=e,this.config=t.config,this.decrypter=new Wp(t.config)}registerListeners(){const{hls:t}=this;t.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(A.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(A.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(t){}stopLoad(){if(this.state===ot.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const t=this.fragCurrent;t!=null&&t.loader&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ot.STOPPED}get startPositionValue(){const{nextLoadPosition:t,startPosition:e}=this;return e===-1&&t?t:e}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(t,e){if(e.live||!this.media)return!1;const n=t.end||0,s=this.config.timelineOffset||0;if(n<=s)return!1;const a=t.buffered;this.config.maxBufferHole&&a&&a.length>1&&(t=Lt.bufferedInfo(a,t.start,0));const l=t.nextStart;if(l&&l>s&&l<e.edge||this.media.currentTime<t.start)return!1;const d=e.partList;if(d!=null&&d.length){const h=d[d.length-1];return Lt.isBuffered(this.media,h.start+h.duration/2)}const f=e.fragments[e.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(f)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var t;return(t=this.levelLastLoaded)==null?void 0:t.details}}get timelineOffset(){const t=this.config.timelineOffset;if(t){var e;return((e=this.getLevelDetails())==null?void 0:e.appliedTimelineOffset)||t}return 0}onMediaAttached(t,e){const n=this.media=this.mediaBuffer=e.media;n.removeEventListener("seeking",this.onMediaSeeking),n.removeEventListener("ended",this.onMediaEnded),n.addEventListener("seeking",this.onMediaSeeking),n.addEventListener("ended",this.onMediaEnded);const s=this.config;this.levels&&s.autoStartLoad&&this.state===ot.STOPPED&&this.startLoad(s.startPosition)}onMediaDetaching(t,e){const n=!!e.transferMedia,s=this.media;if(s!==null){if(s.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),s.removeEventListener("seeking",this.onMediaSeeking),s.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(t,e){}onManifestLoaded(t,e){this.startTimeOffset=e.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=ot.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(t,e,n){this.startFragRequested=!0,this._loadFragForPlayback(t,e,n)}_loadFragForPlayback(t,e,n){const s=a=>{const l=a.frag;if(this.fragContextChanged(l)){this.warn(`${l.type} sn: ${l.sn}${a.part?" part: "+a.part.index:""} of ${this.fragInfo(l,!1,a.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(l);return}l.stats.chunkCount++,this._handleFragmentLoadProgress(a)};this._doFragLoad(t,e,n,s).then(a=>{if(!a)return;const l=this.state,u=a.frag;if(this.fragContextChanged(u)){(l===ot.FRAG_LOADING||!this.fragCurrent&&l===ot.PARSING)&&(this.fragmentTracker.removeFragment(u),this.state=ot.IDLE);return}"payload"in a&&(this.log(`Loaded ${u.type} sn: ${u.sn} of ${this.playlistLabel()} ${u.level}`),this.hls.trigger(A.FRAG_LOADED,a)),this._handleFragmentLoadComplete(a)}).catch(a=>{this.state===ot.STOPPED||this.state===ot.ERROR||(this.warn(`Frag error: ${a?.message||a}`),this.resetFragmentLoading(t))})}clearTrackerIfNeeded(t){var e;const{fragmentTracker:n}=this;if(n.getState(t)===ke.APPENDING){const a=t.type,l=this.getFwdBufferInfo(this.mediaBuffer,a),u=Math.max(t.duration,l?l.len:this.config.maxBufferLength),d=this.backtrackFragment;((d?t.sn-d.sn:0)===1||this.reduceMaxBufferLength(u,t.duration))&&n.removeFragment(t)}else((e=this.mediaBuffer)==null?void 0:e.buffered.length)===0?n.removeAllFragments():n.hasParts(t.type)&&(n.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type}),n.getState(t)===ke.PARTIAL&&n.removeFragment(t))}checkLiveUpdate(t){if(t.updated&&!t.live){const e=t.fragments[t.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type})}t.fragments[0]||(t.deltaUpdateFailed=!0)}waitForLive(t){const e=t.details;return e?.live&&e.type!=="EVENT"&&(this.levelLastLoaded!==t||e.expired)}flushMainBuffer(t,e,n=null){if(!(t-e))return;const s={startOffset:t,endOffset:e,type:n};this.hls.trigger(A.BUFFER_FLUSHING,s)}_loadInitSegment(t,e){this._doFragLoad(t,e).then(n=>{const s=n?.frag;if(!s||this.fragContextChanged(s)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:s}=this,{frag:a,payload:l}=n,u=a.decryptdata;if(l&&l.byteLength>0&&u!=null&&u.key&&u.iv&&Ga(u.method)){const d=self.performance.now();return this.decrypter.decrypt(new Uint8Array(l),u.key.buffer,u.iv.buffer,Zp(u.method)).catch(f=>{throw s.trigger(A.ERROR,{type:vt.MEDIA_ERROR,details:z.FRAG_DECRYPT_ERROR,fatal:!1,error:f,reason:f.message,frag:a}),f}).then(f=>{const h=self.performance.now();return s.trigger(A.FRAG_DECRYPTED,{frag:a,payload:f,stats:{tstart:d,tdecrypt:h}}),n.payload=f,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===ot.STOPPED||this.state===ot.ERROR||(this.warn(n),this.resetFragmentLoading(t))})}completeInitSegmentLoad(t){const{levels:e}=this;if(!e)throw new Error("init load aborted, missing levels");const n=t.frag.stats;this.state!==ot.STOPPED&&(this.state=ot.IDLE),t.frag.data=new Uint8Array(t.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}fragContextChanged(t){const{fragCurrent:e}=this;return!t||!e||t.sn!==e.sn||t.level!==e.level}fragBufferedComplete(t,e){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${t.type} sn: ${t.sn}${e?" part: "+e.index:""} of ${this.fragInfo(t,!1,e)} > buffer:${n?L2.toString(Lt.getBuffered(n)):"(detached)"})`),He(t)){var s;if(t.type!==yt.SUBTITLE){const l=t.elementaryStreams;if(!Object.keys(l).some(u=>!!l[u])){this.state=ot.IDLE;return}}const a=(s=this.levels)==null?void 0:s[t.level];a!=null&&a.fragmentError&&(this.log(`Resetting level fragment error count of ${a.fragmentError} on frag buffered`),a.fragmentError=0)}this.state=ot.IDLE}_handleFragmentLoadComplete(t){const{transmuxer:e}=this;if(!e)return;const{frag:n,part:s,partsLoaded:a}=t,l=!a||a.length===0||a.some(d=>!d),u=new Qp(n.level,n.sn,n.stats.chunkCount+1,0,s?s.index:-1,!l);e.flush(u)}_handleFragmentLoadProgress(t){}_doFragLoad(t,e,n=null,s){var a;this.fragCurrent=t;const l=e?.details;if(!this.levels||!l)throw new Error(`frag load aborted, missing level${l?"":" detail"}s`);let u=null;t.encrypted&&!((a=t.decryptdata)!=null&&a.key)?(this.log(`Loading key for ${t.sn} of [${l.startSN}-${l.endSN}], ${this.playlistLabel()} ${t.level}`),this.state=ot.KEY_LOADING,this.fragCurrent=t,u=this.keyLoader.load(t).then(g=>{if(!this.fragContextChanged(g.frag))return this.hls.trigger(A.KEY_LOADED,g),this.state===ot.KEY_LOADING&&(this.state=ot.IDLE),g}),this.hls.trigger(A.KEY_LOADING,{frag:t}),this.fragCurrent===null&&(u=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):t.encrypted||(u=this.keyLoader.loadClear(t,l.encryptedFragments),u&&this.log("[eme] blocking frag load until media-keys acquired"));const d=this.fragPrevious;if(He(t)&&(!d||t.sn!==d.sn)){const g=this.shouldLoadParts(e.details,t.end);g!==this.loadingParts&&(this.log(`LL-Part loading ${g?"ON":"OFF"} loading sn ${d?.sn}->${t.sn}`),this.loadingParts=g)}if(n=Math.max(t.start,n||0),this.loadingParts&&He(t)){const g=l.partList;if(g&&s){n>t.end&&l.fragmentHint&&(t=l.fragmentHint);const y=this.getNextPart(g,t,n);if(y>-1){const S=g[y];t=this.fragCurrent=S.fragment,this.log(`Loading ${t.type} sn: ${t.sn} part: ${S.index} (${y}/${g.length-1}) of ${this.fragInfo(t,!1,S)}) cc: ${t.cc} [${l.startSN}-${l.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=S.start+S.duration,this.state=ot.FRAG_LOADING;let v;return u?v=u.then(E=>!E||this.fragContextChanged(E.frag)?null:this.doFragPartsLoad(t,S,e,s)).catch(E=>this.handleFragLoadError(E)):v=this.doFragPartsLoad(t,S,e,s).catch(E=>this.handleFragLoadError(E)),this.hls.trigger(A.FRAG_LOADING,{frag:t,part:S,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):v}else if(!t.url||this.loadedEndOfParts(g,n))return Promise.resolve(null)}}if(He(t)&&this.loadingParts)this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)}`),this.loadingParts=!1;else if(!t.url)return Promise.resolve(null);this.log(`Loading ${t.type} sn: ${t.sn} of ${this.fragInfo(t,!1)}) cc: ${t.cc} ${l?"["+l.startSN+"-"+l.endSN+"]":""}, target: ${parseFloat(n.toFixed(3))}`),mt(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=ot.FRAG_LOADING;const f=this.config.progressive;let h;return f&&u?h=u.then(g=>!g||this.fragContextChanged(g?.frag)?null:this.fragmentLoader.load(t,s)).catch(g=>this.handleFragLoadError(g)):h=Promise.all([this.fragmentLoader.load(t,f?s:void 0),u]).then(([g])=>(!f&&g&&s&&s(g),g)).catch(g=>this.handleFragLoadError(g)),this.hls.trigger(A.FRAG_LOADING,{frag:t,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):h}doFragPartsLoad(t,e,n,s){return new Promise((a,l)=>{var u;const d=[],f=(u=n.details)==null?void 0:u.partList,h=g=>{this.fragmentLoader.loadPart(t,g,s).then(y=>{d[g.index]=y;const S=y.part;this.hls.trigger(A.FRAG_LOADED,y);const v=Sx(n.details,t.sn,g.index+1)||H1(f,t.sn,g.index+1);if(v)h(v);else return a({frag:t,part:S,partsLoaded:d})}).catch(l)};h(e)})}handleFragLoadError(t){if("data"in t){const e=t.data;t.data&&e.details===z.INTERNAL_ABORTED?this.handleFragLoadAborted(e.frag,e.part):this.hls.trigger(A.ERROR,e)}else this.hls.trigger(A.ERROR,{type:vt.OTHER_ERROR,details:z.INTERNAL_EXCEPTION,err:t,error:t,fatal:!0});return null}_handleTransmuxerFlush(t){const e=this.getCurrentContext(t);if(!e||this.state!==ot.PARSING){!this.fragCurrent&&this.state!==ot.STOPPED&&this.state!==ot.ERROR&&(this.state=ot.IDLE);return}const{frag:n,part:s,level:a}=e,l=self.performance.now();n.stats.parsing.end=l,s&&(s.stats.parsing.end=l);const u=this.getLevelDetails(),f=u&&n.sn>u.endSN||this.shouldLoadParts(u,n.end);f!==this.loadingParts&&(this.log(`LL-Part loading ${f?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=f),this.updateLevelTiming(n,s,a,t.partial)}shouldLoadParts(t,e){if(this.config.lowLatencyMode){if(!t)return this.loadingParts;if(t!=null&&t.partList){var n;const a=t.partList[0],l=a.end+(((n=t.fragmentHint)==null?void 0:n.duration)||0);if(e>=l){var s;if((this.hls.hasEnoughToStart?((s=this.media)==null?void 0:s.currentTime)||this.lastCurrentTime:this.getLoadPosition())>a.start-a.fragment.duration)return!0}}}return!1}getCurrentContext(t){const{levels:e,fragCurrent:n}=this,{level:s,sn:a,part:l}=t;if(!(e!=null&&e[s]))return this.warn(`Levels object was unset while buffering fragment ${a} of ${this.playlistLabel()} ${s}. The current chunk will not be buffered.`),null;const u=e[s],d=u.details,f=l>-1?Sx(d,a,l):null,h=f?f.fragment:G1(d,a,n);return h?(n&&n!==h&&(h.stats=n.stats),{frag:h,part:f,level:u}):null}bufferFragmentData(t,e,n,s,a){var l;if(!t||this.state!==ot.PARSING)return;const{data1:u,data2:d}=t;let f=u;if(u&&d&&(f=Jn(u,d)),!((l=f)!=null&&l.length))return;const h={type:t.type,frag:e,part:n,chunkMeta:s,parent:e.type,data:f};if(this.hls.trigger(A.BUFFER_APPENDING,h),t.dropped&&t.independent&&!n){if(a)return;this.flushBufferGap(e)}}flushBufferGap(t){const e=this.media;if(!e)return;if(!Lt.isBuffered(e,e.currentTime)){this.flushMainBuffer(0,t.start);return}const n=e.currentTime,s=Lt.bufferInfo(e,n,0),a=t.duration,l=Math.min(this.config.maxFragLookUpTolerance*2,a*.25),u=Math.max(Math.min(t.start-l,s.end-l),n+l);t.start-u>l&&this.flushMainBuffer(u,t.start)}getFwdBufferInfo(t,e){var n;const s=this.getLoadPosition();if(!mt(s))return null;const l=this.lastCurrentTime>s||(n=this.media)!=null&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(t,s,e,l)}getFwdBufferInfoAtPos(t,e,n,s){const a=Lt.bufferInfo(t,e,s);if(a.len===0&&a.nextStart!==void 0){const l=this.fragmentTracker.getBufferedFrag(e,n);if(l&&(a.nextStart<=l.end||l.gap)){const u=Math.max(Math.min(a.nextStart,l.end)-e,s);return Lt.bufferInfo(t,e,u)}}return a}getMaxBufferLength(t){const{config:e}=this;let n;return t?n=Math.max(8*e.maxBufferSize/t,e.maxBufferLength):n=e.maxBufferLength,Math.min(n,e.maxMaxBufferLength)}reduceMaxBufferLength(t,e){const n=this.config,s=Math.max(Math.min(t-e,n.maxBufferLength),e),a=Math.max(t-e*3,n.maxMaxBufferLength/2,s);return a>=s?(n.maxMaxBufferLength=a,this.warn(`Reduce max buffer length to ${a}s`),!0):!1}getAppendedFrag(t,e=yt.MAIN){var n;const s=(n=this.fragmentTracker)==null?void 0:n.getAppendedFrag(t,e);return s&&"fragment"in s?s.fragment:s}getNextFragment(t,e){const n=e.fragments,s=n.length;if(!s)return null;const{config:a}=this,l=n[0].start,u=a.lowLatencyMode&&!!e.partList;let d=null;if(e.live){const g=a.initialLiveManifestSize;if(s<g)return this.warn(`Not enough fragments to start playback (have: ${s}, need: ${g})`),null;if(!e.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||t<l){var f;u&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),d=this.getInitialLiveFragment(e);const y=this.hls.startPosition,S=this.hls.liveSyncPosition,v=d?(y!==-1&&y>=l?y:S)||d.start:t;this.log(`Setting startPosition to ${v} to match start frag at live edge. mainStart: ${y} liveSyncPosition: ${S} frag.start: ${(f=d)==null?void 0:f.start}`),this.startPosition=this.nextLoadPosition=v}}else t<=l&&(d=n[0]);if(!d){const g=this.loadingParts?e.partEnd:e.fragmentEnd;d=this.getFragmentAtPosition(t,g,e)}let h=this.filterReplacedPrimary(d,e);if(!h&&d){const g=d.sn-e.startSN;h=this.filterReplacedPrimary(n[g+1]||null,e)}return this.mapToInitFragWhenRequired(h)}isLoopLoading(t,e){const n=this.fragmentTracker.getState(t);return(n===ke.OK||n===ke.PARTIAL&&!!t.gap)&&this.nextLoadPosition>e}getNextFragmentLoopLoading(t,e,n,s,a){let l=null;if(t.gap&&(l=this.getNextFragment(this.nextLoadPosition,e),l&&!l.gap&&n.nextStart)){const u=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,s,0);if(u!==null&&n.len+u.len>=a){const d=l.sn;return this.loopSn!==d&&(this.log(`buffer full after gaps in "${s}" playlist starting at sn: ${d}`),this.loopSn=d),null}}return this.loopSn=void 0,l}get primaryPrefetch(){if(Ex(this.hls.config)){var t,e;if((t=this.hls.interstitialsManager)==null||(e=t.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(t,e){if(!t)return t;if(Ex(this.hls.config)&&t.type!==yt.SUBTITLE){const n=this.hls.interstitialsManager,s=n?.bufferingItem;if(s){const l=s.event;if(l){if(l.appendInPlace||Math.abs(t.start-s.start)>1||s.start===0)return null}else if(t.end<=s.start&&e?.live===!1||t.start>s.end&&s.nextEvent&&(s.nextEvent.appendInPlace||t.start-s.end>1))return null}const a=n?.playerQueue;if(a)for(let l=a.length;l--;){const u=a[l].interstitial;if(u.appendInPlace&&t.start>=u.startTime&&t.end<=u.resumeTime)return null}}return t}mapToInitFragWhenRequired(t){return t!=null&&t.initSegment&&!(t!=null&&t.initSegment.data)&&!this.bitrateTest?t.initSegment:t}getNextPart(t,e,n){let s=-1,a=!1,l=!0;for(let u=0,d=t.length;u<d;u++){const f=t[u];if(l=l&&!f.independent,s>-1&&n<f.start)break;const h=f.loaded;h?s=-1:(a||f.independent||l)&&f.fragment===e&&(s=u),a=h}return s}loadedEndOfParts(t,e){const n=t[t.length-1];return n&&e>n.start&&n.loaded}getInitialLiveFragment(t){const e=t.fragments,n=this.fragPrevious;let s=null;if(n){if(t.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),s=Gk(e,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!s){const a=n.sn+1;if(a>=t.startSN&&a<=t.endSN){const l=e[a-t.startSN];n.cc===l.cc&&(s=l,this.log(`Live playlist, switching playlist, load frag with next SN: ${s.sn}`))}s||(s=O1(t,n.cc,n.end),s&&this.log(`Live playlist, switching playlist, load frag with same CC: ${s.sn}`))}}else{const a=this.hls.liveSyncPosition;a!==null&&(s=this.getFragmentAtPosition(a,this.bitrateTest?t.fragmentEnd:t.edge,t))}return s}getFragmentAtPosition(t,e,n){const{config:s}=this;let{fragPrevious:a}=this,{fragments:l,endSN:u}=n;const{fragmentHint:d}=n,{maxFragLookUpTolerance:f}=s,h=n.partList,g=!!(this.loadingParts&&h!=null&&h.length&&d);g&&d&&!this.bitrateTest&&h[h.length-1].fragment.sn===d.sn&&(l=l.concat(d),u=d.sn);let y;if(t<e){var S;const E=t<this.lastCurrentTime||t>e-f||(S=this.media)!=null&&S.paused||!this.startFragRequested?0:f;y=wr(a,l,t,E)}else y=l[l.length-1];if(y){const v=y.sn-n.startSN,E=this.fragmentTracker.getState(y);if((E===ke.OK||E===ke.PARTIAL&&y.gap)&&(a=y),a&&y.sn===a.sn&&(!g||h[0].fragment.sn>y.sn||!n.live&&!g)&&a&&y.level===a.level){const b=l[v+1];y.sn<u&&this.fragmentTracker.getState(b)!==ke.OK?y=b:y=null}}return y}alignPlaylists(t,e,n){const s=t.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;const a=t.fragmentStart,l=!e,u=t.alignedSliding&&mt(a);if(l||!u&&!a){R2(n,t);const d=t.fragmentStart;return this.log(`Live playlist sliding: ${d.toFixed(2)} start-sn: ${e?e.startSN:"na"}->${t.startSN} fragments: ${s}`),d}return a}waitForCdnTuneIn(t){return t.live&&t.canBlockReload&&t.partTarget&&t.tuneInGoal>Math.max(t.partHoldBack,t.partTarget*3)}setStartPosition(t,e){let n=this.startPosition;n<e&&(n=-1);const s=this.timelineOffset;if(n===-1){const a=this.startTimeOffset!==null,l=a?this.startTimeOffset:t.startTimeOffset;l!==null&&mt(l)?(n=e+l,l<0&&(n+=t.edge),n=Math.min(Math.max(e,n),e+t.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${l} found in ${a?"multivariant":"media"} playlist`),this.startPosition=n):t.live?(n=this.hls.liveSyncPosition||e,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+s}this.nextLoadPosition=n+s}getLoadPosition(){var t;const{media:e}=this;let n=0;return(t=this.hls)!=null&&t.hasEnoughToStart&&e?n=e.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(t,e){this.transmuxer&&t.type===this.playlistType&&He(t)&&t.stats.aborted&&(this.warn(`Fragment ${t.sn}${e?" part "+e.index:""} of ${this.playlistLabel()} ${t.level} was aborted`),this.resetFragmentLoading(t))}resetFragmentLoading(t){(!this.fragCurrent||!this.fragContextChanged(t)&&this.state!==ot.FRAG_LOADING_WAITING_RETRY)&&(this.state=ot.IDLE)}onFragmentOrKeyLoadError(t,e){if(e.chunkMeta&&!e.frag){const v=this.getCurrentContext(e.chunkMeta);v&&(e.frag=v.frag)}const n=e.frag;if(!n||n.type!==t||!this.levels)return;if(this.fragContextChanged(n)){var s;this.warn(`Frag load error must match current frag to retry ${n.url} > ${(s=this.fragCurrent)==null?void 0:s.url}`);return}const a=e.details===z.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(n,!0);const l=e.errorAction,{action:u,flags:d,retryCount:f=0,retryConfig:h}=l||{},g=!!l&&!!h,y=g&&u===sn.RetryRequest,S=g&&!l.resolved&&d===oi.MoveAllAlternatesMatchingHost;if(!y&&S&&He(n)&&!n.endList)this.resetFragmentErrors(t),this.treatAsGap(n),l.resolved=!0;else if((y||S)&&f<h.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);const v=Xp(h,f);this.warn(`Fragment ${n.sn} of ${t} ${n.level} errored with ${e.details}, retrying loading ${f+1}/${h.maxNumRetry} in ${v}ms`),l.resolved=!0,this.retryDate=self.performance.now()+v,this.state=ot.FRAG_LOADING_WAITING_RETRY}else if(h&&l)if(this.resetFragmentErrors(t),f<h.maxNumRetry)!a&&u!==sn.RemoveAlternatePermanently&&(l.resolved=!0);else{this.warn(`${e.details} reached or exceeded max retry (${f})`);return}else u===sn.SendAlternateToPenaltyBox?this.state=ot.WAITING_LEVEL:this.state=ot.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(t){if(this.state===ot.PARSING||this.state===ot.PARSED){const e=t.frag,n=t.parent,s=this.getFwdBufferInfo(this.mediaBuffer,n),a=s&&s.len>.5;a&&this.reduceMaxBufferLength(s.len,e?.duration||10);const l=!a;return l&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${n} buffer`),e&&(this.fragmentTracker.removeFragment(e),this.nextLoadPosition=e.start),this.resetLoadingState(),l}return!1}resetFragmentErrors(t){t===yt.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==ot.STOPPED&&(this.state=ot.IDLE)}afterBufferFlushed(t,e,n){if(!t)return;const s=Lt.getBuffered(t);this.fragmentTracker.detectEvictedFragments(e,s,n),this.state===ot.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==ot.STOPPED&&(this.state=ot.IDLE)}resetStartWhenNotLoaded(t){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=t?t.details:null;e!=null&&e.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(e,e.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(t){this.warn(`The loading context changed while buffering fragment ${t.sn} of ${this.playlistLabel()} ${t.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(t=0){this.fragmentTracker.removeFragmentsInRange(t,1/0,this.playlistType,!1,!0)}updateLevelTiming(t,e,n,s){const a=n.details;if(!a){this.warn("level.details undefined");return}if(!Object.keys(t.elementaryStreams).reduce((d,f)=>{const h=t.elementaryStreams[f];if(h){const g=h.endPTS-h.startPTS;if(g<=0)return this.warn(`Could not parse fragment ${t.sn} ${f} duration reliably (${g})`),d||!1;const y=s?0:U1(a,t,h.startPTS,h.endPTS,h.startDTS,h.endDTS);return this.hls.trigger(A.LEVEL_PTS_UPDATED,{details:a,level:n,drift:y,type:f,frag:t,start:h.startPTS,end:h.endPTS}),!0}return d},!1)){var u;if(n.fragmentError===0&&this.treatAsGap(t,n),((u=this.transmuxer)==null?void 0:u.error)===null){const d=new Error(`Found no media in fragment ${t.sn} of ${this.playlistLabel()} ${t.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(d.message),this.hls.trigger(A.ERROR,{type:vt.MEDIA_ERROR,details:z.FRAG_PARSING_ERROR,fatal:!1,error:d,frag:t,reason:`Found no media in msn ${t.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=ot.PARSED,this.log(`Parsed ${t.type} sn: ${t.sn}${e?" part: "+e.index:""} of ${this.fragInfo(t,!1,e)})`),this.hls.trigger(A.FRAG_PARSED,{frag:t,part:e})}playlistLabel(){return this.playlistType===yt.MAIN?"level":"track"}fragInfo(t,e=!0,n){var s,a;return`${this.playlistLabel()} ${t.level} (${n?"part":"frag"}:[${((s=e&&!n?t.startPTS:(n||t).start)!=null?s:NaN).toFixed(3)}-${((a=e&&!n?t.endPTS:(n||t).end)!=null?a:NaN).toFixed(3)}]${n&&t.type==="main"?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(t,e){e&&e.fragmentError++,t.gap=!0,this.fragmentTracker.removeFragment(t),this.fragmentTracker.fragBuffered(t,!0)}resetTransmuxer(){var t;(t=this.transmuxer)==null||t.reset()}recoverWorkerError(t){t.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(t){const e=this._state;e!==t&&(this._state=t,this.log(`${e}->${t}`))}get state(){return this._state}}function Ex(i){return!!i.interstitialsController&&i.enableInterstitialPlayback!==!1}class Y1{constructor(){this.chunks=[],this.dataLength=0}push(t){this.chunks.push(t),this.dataLength+=t.length}flush(){const{chunks:t,dataLength:e}=this;let n;if(t.length)t.length===1?n=t[0]:n=C2(t,e);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function C2(i,t){const e=new Uint8Array(t);let n=0;for(let s=0;s<i.length;s++){const a=i[s];e.set(a,n),n+=a.length}return e}var Vm={exports:{}},xx;function _2(){return xx||(xx=1,function(i){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(d,f,h){this.fn=d,this.context=f,this.once=h||!1}function a(d,f,h,g,y){if(typeof h!="function")throw new TypeError("The listener must be a function");var S=new s(h,g||d,y),v=e?e+f:f;return d._events[v]?d._events[v].fn?d._events[v]=[d._events[v],S]:d._events[v].push(S):(d._events[v]=S,d._eventsCount++),d}function l(d,f){--d._eventsCount===0?d._events=new n:delete d._events[f]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],h,g;if(this._eventsCount===0)return f;for(g in h=this._events)t.call(h,g)&&f.push(e?g.slice(1):g);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},u.prototype.listeners=function(f){var h=e?e+f:f,g=this._events[h];if(!g)return[];if(g.fn)return[g.fn];for(var y=0,S=g.length,v=new Array(S);y<S;y++)v[y]=g[y].fn;return v},u.prototype.listenerCount=function(f){var h=e?e+f:f,g=this._events[h];return g?g.fn?1:g.length:0},u.prototype.emit=function(f,h,g,y,S,v){var E=e?e+f:f;if(!this._events[E])return!1;var x=this._events[E],b=arguments.length,D,L;if(x.fn){switch(x.once&&this.removeListener(f,x.fn,void 0,!0),b){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,h),!0;case 3:return x.fn.call(x.context,h,g),!0;case 4:return x.fn.call(x.context,h,g,y),!0;case 5:return x.fn.call(x.context,h,g,y,S),!0;case 6:return x.fn.call(x.context,h,g,y,S,v),!0}for(L=1,D=new Array(b-1);L<b;L++)D[L-1]=arguments[L];x.fn.apply(x.context,D)}else{var I=x.length,_;for(L=0;L<I;L++)switch(x[L].once&&this.removeListener(f,x[L].fn,void 0,!0),b){case 1:x[L].fn.call(x[L].context);break;case 2:x[L].fn.call(x[L].context,h);break;case 3:x[L].fn.call(x[L].context,h,g);break;case 4:x[L].fn.call(x[L].context,h,g,y);break;default:if(!D)for(_=1,D=new Array(b-1);_<b;_++)D[_-1]=arguments[_];x[L].fn.apply(x[L].context,D)}}return!0},u.prototype.on=function(f,h,g){return a(this,f,h,g,!1)},u.prototype.once=function(f,h,g){return a(this,f,h,g,!0)},u.prototype.removeListener=function(f,h,g,y){var S=e?e+f:f;if(!this._events[S])return this;if(!h)return l(this,S),this;var v=this._events[S];if(v.fn)v.fn===h&&(!y||v.once)&&(!g||v.context===g)&&l(this,S);else{for(var E=0,x=[],b=v.length;E<b;E++)(v[E].fn!==h||y&&!v[E].once||g&&v[E].context!==g)&&x.push(v[E]);x.length?this._events[S]=x.length===1?x[0]:x:l(this,S)}return this},u.prototype.removeAllListeners=function(f){var h;return f?(h=e?e+f:f,this._events[h]&&l(this,h)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,i.exports=u}(Vm)),Vm.exports}var D2=_2(),e0=rk(D2);const Bl="1.6.5",qa={};function I2(){return typeof __HLS_WORKER_BUNDLE__=="function"}function w2(){const i=qa[Bl];if(i)return i.clientCount++,i;const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(t),s={worker:new self.Worker(e),objectURL:e,clientCount:1};return qa[Bl]=s,s}function O2(i){const t=qa[i];if(t)return t.clientCount++,t;const e=new self.URL(i,self.location.href).href,s={worker:new self.Worker(e),scriptURL:e,clientCount:1};return qa[i]=s,s}function M2(i){const t=qa[i||Bl];if(t&&t.clientCount--===1){const{worker:n,objectURL:s}=t;delete qa[i||Bl],s&&self.URL.revokeObjectURL(s),n.terminate()}}function q1(i,t){return t+10<=i.length&&i[t]===51&&i[t+1]===68&&i[t+2]===73&&i[t+3]<255&&i[t+4]<255&&i[t+6]<128&&i[t+7]<128&&i[t+8]<128&&i[t+9]<128}function n0(i,t){return t+10<=i.length&&i[t]===73&&i[t+1]===68&&i[t+2]===51&&i[t+3]<255&&i[t+4]<255&&i[t+6]<128&&i[t+7]<128&&i[t+8]<128&&i[t+9]<128}function qf(i,t){let e=0;return e=(i[t]&127)<<21,e|=(i[t+1]&127)<<14,e|=(i[t+2]&127)<<7,e|=i[t+3]&127,e}function Fl(i,t){const e=t;let n=0;for(;n0(i,t);){n+=10;const s=qf(i,t+6);n+=s,q1(i,t+10)&&(n+=10),t+=n}if(n>0)return i.subarray(e,e+n)}function P2(i,t,e,n){const s=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],a=t[e+2],l=a>>2&15;if(l>12){const S=new Error(`invalid ADTS sampling index:${l}`);i.emit(A.ERROR,A.ERROR,{type:vt.MEDIA_ERROR,details:z.FRAG_PARSING_ERROR,fatal:!0,error:S,reason:S.message});return}const u=(a>>6&3)+1,d=t[e+3]>>6&3|(a&1)<<2,f="mp4a.40."+u,h=s[l];let g=l;(u===5||u===29)&&(g-=3);const y=[u<<3|(g&14)>>1,(g&1)<<7|d<<3];return Vt.log(`manifest codec:${n}, parsed codec:${f}, channels:${d}, rate:${h} (ADTS object type:${u} sampling index:${l})`),{config:y,samplerate:h,channelCount:d,codec:f,parsedCodec:f,manifestCodec:n}}function X1(i,t){return i[t]===255&&(i[t+1]&246)===240}function W1(i,t){return i[t+1]&1?7:9}function i0(i,t){return(i[t+3]&3)<<11|i[t+4]<<3|(i[t+5]&224)>>>5}function k2(i,t){return t+5<i.length}function Rf(i,t){return t+1<i.length&&X1(i,t)}function N2(i,t){return k2(i,t)&&X1(i,t)&&i0(i,t)<=i.length-t}function B2(i,t){if(Rf(i,t)){const e=W1(i,t);if(t+e>=i.length)return!1;const n=i0(i,t);if(n<=e)return!1;const s=t+n;return s===i.length||Rf(i,s)}return!1}function Q1(i,t,e,n,s){if(!i.samplerate){const a=P2(t,e,n,s);if(!a)return;Wt(i,a)}}function Z1(i){return 1024*9e4/i}function F2(i,t){const e=W1(i,t);if(t+e<=i.length){const n=i0(i,t)-e;if(n>0)return{headerLength:e,frameLength:n}}}function J1(i,t,e,n,s){const a=Z1(i.samplerate),l=n+s*a,u=F2(t,e);let d;if(u){const{frameLength:g,headerLength:y}=u,S=y+g,v=Math.max(0,e+S-t.length);v?(d=new Uint8Array(S-y),d.set(t.subarray(e+y,t.length),0)):d=t.subarray(e+y,e+S);const E={unit:d,pts:l};return v||i.samples.push(E),{sample:E,length:S,missing:v}}const f=t.length-e;return d=new Uint8Array(f),d.set(t.subarray(e,t.length),0),{sample:{unit:d,pts:l},length:f,missing:-1}}function U2(i,t){return n0(i,t)&&qf(i,t+6)+10<=i.length-t}function $2(i){return i instanceof ArrayBuffer?i:i.byteOffset==0&&i.byteLength==i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer}function Gm(i,t=0,e=1/0){return V2(i,t,e,Uint8Array)}function V2(i,t,e,n){const s=G2(i);let a=1;"BYTES_PER_ELEMENT"in n&&(a=n.BYTES_PER_ELEMENT);const l=H2(i)?i.byteOffset:0,u=(l+i.byteLength)/a,d=(l+t)/a,f=Math.floor(Math.max(0,Math.min(d,u))),h=Math.floor(Math.min(f+Math.max(e,0),u));return new n(s,f,h-f)}function G2(i){return i instanceof ArrayBuffer?i:i.buffer}function H2(i){return i&&i.buffer instanceof ArrayBuffer&&i.byteLength!==void 0&&i.byteOffset!==void 0}function j2(i){const t={key:i.type,description:"",data:"",mimeType:null,pictureType:null},e=3;if(i.size<2)return;if(i.data[0]!==e){console.log("Ignore frame with unrecognized character encoding");return}const n=i.data.subarray(1).indexOf(0);if(n===-1)return;const s=Mn(Gm(i.data,1,n)),a=i.data[2+n],l=i.data.subarray(3+n).indexOf(0);if(l===-1)return;const u=Mn(Gm(i.data,3+n,l));let d;return s==="-->"?d=Mn(Gm(i.data,4+n+l)):d=$2(i.data.subarray(4+n+l)),t.mimeType=s,t.pictureType=a,t.description=u,t.data=d,t}function K2(i){if(i.size<2)return;const t=Mn(i.data,!0),e=new Uint8Array(i.data.subarray(t.length+1));return{key:i.type,info:t,data:e.buffer}}function z2(i){if(i.size<2)return;if(i.type==="TXXX"){let e=1;const n=Mn(i.data.subarray(e),!0);e+=n.length+1;const s=Mn(i.data.subarray(e));return{key:i.type,info:n,data:s}}const t=Mn(i.data.subarray(1));return{key:i.type,info:"",data:t}}function Y2(i){if(i.type==="WXXX"){if(i.size<2)return;let e=1;const n=Mn(i.data.subarray(e),!0);e+=n.length+1;const s=Mn(i.data.subarray(e));return{key:i.type,info:n,data:s}}const t=Mn(i.data);return{key:i.type,info:"",data:t}}function q2(i){return i.type==="PRIV"?K2(i):i.type[0]==="W"?Y2(i):i.type==="APIC"?j2(i):z2(i)}function X2(i){const t=String.fromCharCode(i[0],i[1],i[2],i[3]),e=qf(i,4),n=10;return{type:t,size:e,data:i.subarray(n,n+e)}}const Oc=10,W2=10;function tR(i){let t=0;const e=[];for(;n0(i,t);){const n=qf(i,t+6);i[t+5]>>6&1&&(t+=Oc),t+=Oc;const s=t+n;for(;t+W2<s;){const a=X2(i.subarray(t)),l=q2(a);l&&e.push(l),t+=a.size+Oc}q1(i,t)&&(t+=Oc)}return e}function eR(i){return i&&i.key==="PRIV"&&i.info==="com.apple.streaming.transportStreamTimestamp"}function Q2(i){if(i.data.byteLength===8){const t=new Uint8Array(i.data),e=t[3]&1;let n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,e&&(n+=4772185884e-2),Math.round(n)}}function s0(i){const t=tR(i);for(let e=0;e<t.length;e++){const n=t[e];if(eR(n))return Q2(n)}}let _n=function(i){return i.audioId3="org.id3",i.dateRange="com.apple.quicktime.HLS",i.emsg="https://aomedia.org/emsg/ID3",i.misbklv="urn:misb:KLV:bin:1910.1",i}({});function Ri(i="",t=9e4){return{type:i,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}class r0{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(t,e,n,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(t){this.initPTS=t,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(t,e){return!1}appendFrame(t,e,n){}demux(t,e){this.cachedData&&(t=Jn(this.cachedData,t),this.cachedData=null);let n=Fl(t,0),s=n?n.length:0,a;const l=this._audioTrack,u=this._id3Track,d=n?s0(n):void 0,f=t.length;for((this.basePTS===null||this.frameIndex===0&&mt(d))&&(this.basePTS=Z2(d,e,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&u.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:_n.audioId3,duration:Number.POSITIVE_INFINITY});s<f;){if(this.canParse(t,s)){const h=this.appendFrame(l,t,s);h?(this.frameIndex++,this.lastPTS=h.sample.pts,s+=h.length,a=s):s=f}else U2(t,s)?(n=Fl(t,s),u.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:_n.audioId3,duration:Number.POSITIVE_INFINITY}),s+=n.length,a=s):s++;if(s===f&&a!==f){const h=t.slice(a);this.cachedData?this.cachedData=Jn(this.cachedData,h):this.cachedData=h}}return{audioTrack:l,videoTrack:Ri(),id3Track:u,textTrack:Ri()}}demuxSampleAes(t,e,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(t){const e=this.cachedData;return e&&(this.cachedData=null,this.demux(e,0)),{audioTrack:this._audioTrack,videoTrack:Ri(),id3Track:this._id3Track,textTrack:Ri()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const Z2=(i,t,e)=>{if(mt(i))return i*90;const n=e?e.baseTime*9e4/e.timescale:0;return t*9e4+n};let Mc=null;const J2=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],tN=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],eN=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],nN=[0,1,1,4];function nR(i,t,e,n,s){if(e+24>t.length)return;const a=iR(t,e);if(a&&e+a.frameLength<=t.length){const l=a.samplesPerFrame*9e4/a.sampleRate,u=n+s*l,d={unit:t.subarray(e,e+a.frameLength),pts:u,dts:u};return i.config=[],i.channelCount=a.channelCount,i.samplerate=a.sampleRate,i.samples.push(d),{sample:d,length:a.frameLength,missing:0}}}function iR(i,t){const e=i[t+1]>>3&3,n=i[t+1]>>1&3,s=i[t+2]>>4&15,a=i[t+2]>>2&3;if(e!==1&&s!==0&&s!==15&&a!==3){const l=i[t+2]>>1&1,u=i[t+3]>>6,d=e===3?3-n:n===3?3:4,f=J2[d*14+s-1]*1e3,g=tN[(e===3?0:e===2?1:2)*3+a],y=u===3?1:2,S=eN[e][n],v=nN[n],E=S*8*v,x=Math.floor(S*f/g+l)*v;if(Mc===null){const L=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Mc=L?parseInt(L[1]):0}return!!Mc&&Mc<=87&&n===2&&f>=224e3&&u===0&&(i[t+3]=i[t+3]|128),{sampleRate:g,channelCount:y,frameLength:x,samplesPerFrame:E}}}function a0(i,t){return i[t]===255&&(i[t+1]&224)===224&&(i[t+1]&6)!==0}function sR(i,t){return t+1<i.length&&a0(i,t)}function iN(i,t){return a0(i,t)&&4<=i.length-t}function rR(i,t){if(t+1<i.length&&a0(i,t)){const n=iR(i,t);let s=4;n!=null&&n.frameLength&&(s=n.frameLength);const a=t+s;return a===i.length||sR(i,a)}return!1}class sN extends r0{constructor(t,e){super(),this.observer=void 0,this.config=void 0,this.observer=t,this.config=e}resetInitSegment(t,e,n,s){super.resetInitSegment(t,e,n,s),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:e,duration:s,inputTimeScale:9e4,dropped:0}}static probe(t,e){if(!t)return!1;const n=Fl(t,0);let s=n?.length||0;if(rR(t,s))return!1;for(let a=t.length;s<a;s++)if(B2(t,s))return e.log("ADTS sync word found !"),!0;return!1}canParse(t,e){return N2(t,e)}appendFrame(t,e,n){Q1(t,this.observer,e,n,t.manifestCodec);const s=J1(t,e,n,this.basePTS,this.frameIndex);if(s&&s.missing===0)return s}}const aR=(i,t)=>{let e=0,n=5;t+=n;const s=new Uint32Array(1),a=new Uint32Array(1),l=new Uint8Array(1);for(;n>0;){l[0]=i[t];const u=Math.min(n,8),d=8-u;a[0]=4278190080>>>24+d<<d,s[0]=(l[0]&a[0])>>d,e=e?e<<u|s[0]:s[0],t+=1,n-=u}return e};class rN extends r0{constructor(t){super(),this.observer=void 0,this.observer=t}resetInitSegment(t,e,n,s){super.resetInitSegment(t,e,n,s),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:e,duration:s,inputTimeScale:9e4,dropped:0}}canParse(t,e){return e+64<t.length}appendFrame(t,e,n){const s=oR(t,e,n,this.basePTS,this.frameIndex);if(s!==-1)return{sample:t.samples[t.samples.length-1],length:s,missing:0}}static probe(t){if(!t)return!1;const e=Fl(t,0);if(!e)return!1;const n=e.length;return t[n]===11&&t[n+1]===119&&s0(e)!==void 0&&aR(t,n)<16}}function oR(i,t,e,n,s){if(e+8>t.length||t[e]!==11||t[e+1]!==119)return-1;const a=t[e+4]>>6;if(a>=3)return-1;const u=[48e3,44100,32e3][a],d=t[e+4]&63,h=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][d*3+a]*2;if(e+h>t.length)return-1;const g=t[e+6]>>5;let y=0;g===2?y+=2:(g&1&&g!==1&&(y+=2),g&4&&(y+=2));const S=(t[e+6]<<8|t[e+7])>>12-y&1,E=[2,1,2,3,3,4,4,5][g]+S,x=t[e+5]>>3,b=t[e+5]&7,D=new Uint8Array([a<<6|x<<1|b>>2,(b&3)<<6|g<<3|S<<2|d>>4,d<<4&224]),L=1536/u*9e4,I=n+s*L,_=t.subarray(e,e+h);return i.config=D,i.channelCount=E,i.samplerate=u,i.samples.push({unit:_,pts:I}),h}class aN extends r0{resetInitSegment(t,e,n,s){super.resetInitSegment(t,e,n,s),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:e,duration:s,inputTimeScale:9e4,dropped:0}}static probe(t){if(!t)return!1;const e=Fl(t,0);let n=e?.length||0;if(e&&t[n]===11&&t[n+1]===119&&s0(e)!==void 0&&aR(t,n)<=16)return!1;for(let s=t.length;n<s;n++)if(rR(t,n))return Vt.log("MPEG Audio sync word found !"),!0;return!1}canParse(t,e){return iN(t,e)}appendFrame(t,e,n){if(this.basePTS!==null)return nR(t,e,n,this.basePTS,this.frameIndex)}}const oN=/\/emsg[-/]ID3/i;class lN{constructor(t,e){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=e}resetTimeStamp(){}resetInitSegment(t,e,n,s){const a=this.videoTrack=Ri("video",1),l=this.audioTrack=Ri("audio",1),u=this.txtTrack=Ri("text",1);if(this.id3Track=Ri("id3",1),this.timeOffset=0,!(t!=null&&t.byteLength))return;const d=T1(t);if(d.video){const{id:f,timescale:h,codec:g,supplemental:y}=d.video;a.id=f,a.timescale=u.timescale=h,a.codec=g,a.supplemental=y}if(d.audio){const{id:f,timescale:h,codec:g}=d.audio;l.id=f,l.timescale=h,l.codec=g}u.id=y1.text,a.sampleDuration=0,a.duration=l.duration=s}resetContiguity(){this.remainderData=null}static probe(t){return ck(t)}demux(t,e){this.timeOffset=e;let n=t;const s=this.videoTrack,a=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Jn(this.remainderData,t));const u=yk(n);this.remainderData=u.remainder,s.samples=u.valid||new Uint8Array}else s.samples=n;const l=this.extractID3Track(s,e);return a.samples=HE(e,s),{videoTrack:s,audioTrack:this.audioTrack,id3Track:l,textTrack:this.txtTrack}}flush(){const t=this.timeOffset,e=this.videoTrack,n=this.txtTrack;e.samples=this.remainderData||new Uint8Array,this.remainderData=null;const s=this.extractID3Track(e,this.timeOffset);return n.samples=HE(t,e),{videoTrack:e,audioTrack:Ri(),id3Track:s,textTrack:Ri()}}extractID3Track(t,e){const n=this.id3Track;if(t.samples.length){const s=_t(t.samples,["emsg"]);s&&s.forEach(a=>{const l=Sk(a);if(oN.test(l.schemeIdUri)){const u=bx(l,e);let d=l.eventDuration===4294967295?Number.POSITIVE_INFINITY:l.eventDuration/l.timeScale;d<=.001&&(d=Number.POSITIVE_INFINITY);const f=l.payload;n.samples.push({data:f,len:f.byteLength,dts:u,pts:u,type:_n.emsg,duration:d})}else if(this.config.enableEmsgKLVMetadata&&l.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const u=bx(l,e);n.samples.push({data:l.payload,len:l.payload.byteLength,dts:u,pts:u,type:_n.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(t,e,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function bx(i,t){return mt(i.presentationTime)?i.presentationTime/i.timeScale:t+i.presentationTimeDelta/i.timeScale}class uN{constructor(t,e,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new Wp(e,{removePKCS7Padding:!1})}decryptBuffer(t){return this.decrypter.decrypt(t,this.keyData.key.buffer,this.keyData.iv.buffer,Ks.cbc)}decryptAacSample(t,e,n){const s=t[e].unit;if(s.length<=16)return;const a=s.subarray(16,s.length-s.length%16),l=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(l).then(u=>{const d=new Uint8Array(u);s.set(d,16),this.decrypter.isSync()||this.decryptAacSamples(t,e+1,n)})}decryptAacSamples(t,e,n){for(;;e++){if(e>=t.length){n();return}if(!(t[e].unit.length<32)&&(this.decryptAacSample(t,e,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(t){const e=Math.floor((t.length-48)/160)*16+16,n=new Int8Array(e);let s=0;for(let a=32;a<t.length-16;a+=160,s+=16)n.set(t.subarray(a,a+16),s);return n}getAvcDecryptedUnit(t,e){const n=new Uint8Array(e);let s=0;for(let a=32;a<t.length-16;a+=160,s+=16)t.set(n.subarray(s,s+16),a);return t}decryptAvcSample(t,e,n,s,a){const l=x1(a.data),u=this.getAvcEncryptedData(l);this.decryptBuffer(u.buffer).then(d=>{a.data=this.getAvcDecryptedUnit(l,d),this.decrypter.isSync()||this.decryptAvcSamples(t,e,n+1,s)})}decryptAvcSamples(t,e,n,s){if(t instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;e++,n=0){if(e>=t.length){s();return}const a=t[e].units;for(;!(n>=a.length);n++){const l=a[n];if(!(l.data.length<=48||l.type!==1&&l.type!==5)&&(this.decryptAvcSample(t,e,n,s,l),!this.decrypter.isSync()))return}}}}class lR{constructor(){this.VideoSample=null}createVideoSample(t,e,n){return{key:t,frame:!1,pts:e,dts:n,units:[],length:0}}getLastNalUnit(t){var e;let n=this.VideoSample,s;if((!n||n.units.length===0)&&(n=t[t.length-1]),(e=n)!=null&&e.units){const a=n.units;s=a[a.length-1]}return s}pushAccessUnit(t,e){if(t.units.length&&t.frame){if(t.pts===void 0){const n=e.samples,s=n.length;if(s){const a=n[s-1];t.pts=a.pts,t.dts=a.dts}else{e.dropped++;return}}e.samples.push(t)}}parseNALu(t,e,n){const s=e.byteLength;let a=t.naluState||0;const l=a,u=[];let d=0,f,h,g,y=-1,S=0;for(a===-1&&(y=0,S=this.getNALuType(e,0),a=0,d=1);d<s;){if(f=e[d++],!a){a=f?0:1;continue}if(a===1){a=f?0:2;continue}if(!f)a=3;else if(f===1){if(h=d-a-1,y>=0){const v={data:e.subarray(y,h),type:S};u.push(v)}else{const v=this.getLastNalUnit(t.samples);v&&(l&&d<=4-l&&v.state&&(v.data=v.data.subarray(0,v.data.byteLength-l)),h>0&&(v.data=Jn(v.data,e.subarray(0,h)),v.state=0))}d<s?(g=this.getNALuType(e,d),y=d,S=g,a=0):a=-1}else a=0}if(y>=0&&a>=0){const v={data:e.subarray(y,s),type:S,state:a};u.push(v)}if(u.length===0){const v=this.getLastNalUnit(t.samples);v&&(v.data=Jn(v.data,e))}return t.naluState=a,u}}class vl{constructor(t){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const t=this.data,e=this.bytesAvailable,n=t.byteLength-e,s=new Uint8Array(4),a=Math.min(4,e);if(a===0)throw new Error("no bytes available");s.set(t.subarray(n,n+a)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=a*8,this.bytesAvailable-=a}skipBits(t){let e;t=Math.min(t,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,e=t>>3,t-=e<<3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)}readBits(t){let e=Math.min(this.bitsAvailable,t);const n=this.word>>>32-e;if(t>32&&Vt.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0)this.word<<=e;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return e=t-e,e>0&&this.bitsAvailable?n<<e|this.readBits(e):n}skipLZ(){let t;for(t=0;t<this.bitsAvailable;++t)if((this.word&2147483648>>>t)!==0)return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const t=this.skipLZ();return this.readBits(t+1)-1}readEG(){const t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class Ax extends lR{parsePES(t,e,n,s){const a=this.parseNALu(t,n.data,s);let l=this.VideoSample,u,d=!1;n.data=null,l&&a.length&&!t.audFound&&(this.pushAccessUnit(l,t),l=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),a.forEach(f=>{var h,g;switch(f.type){case 1:{let E=!1;u=!0;const x=f.data;if(d&&x.length>4){const b=this.readSliceType(x);(b===2||b===4||b===7||b===9)&&(E=!0)}if(E){var y;(y=l)!=null&&y.frame&&!l.key&&(this.pushAccessUnit(l,t),l=this.VideoSample=null)}l||(l=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),l.frame=!0,l.key=E;break}case 5:u=!0,(h=l)!=null&&h.frame&&!l.key&&(this.pushAccessUnit(l,t),l=this.VideoSample=null),l||(l=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),l.key=!0,l.frame=!0;break;case 6:{u=!0,qp(f.data,1,n.pts,e.samples);break}case 7:{var S,v;u=!0,d=!0;const E=f.data,x=this.readSPS(E);if(!t.sps||t.width!==x.width||t.height!==x.height||((S=t.pixelRatio)==null?void 0:S[0])!==x.pixelRatio[0]||((v=t.pixelRatio)==null?void 0:v[1])!==x.pixelRatio[1]){t.width=x.width,t.height=x.height,t.pixelRatio=x.pixelRatio,t.sps=[E];const b=E.subarray(1,4);let D="avc1.";for(let L=0;L<3;L++){let I=b[L].toString(16);I.length<2&&(I="0"+I),D+=I}t.codec=D}break}case 8:u=!0,t.pps=[f.data];break;case 9:u=!0,t.audFound=!0,(g=l)!=null&&g.frame&&(this.pushAccessUnit(l,t),l=null),l||(l=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:u=!0;break;default:u=!1;break}l&&u&&l.units.push(f)}),s&&l&&(this.pushAccessUnit(l,t),this.VideoSample=null)}getNALuType(t,e){return t[e]&31}readSliceType(t){const e=new vl(t);return e.readUByte(),e.readUEG(),e.readUEG()}skipScalingList(t,e){let n=8,s=8,a;for(let l=0;l<t;l++)s!==0&&(a=e.readEG(),s=(n+a+256)%256),n=s===0?n:s}readSPS(t){const e=new vl(t);let n=0,s=0,a=0,l=0,u,d,f;const h=e.readUByte.bind(e),g=e.readBits.bind(e),y=e.readUEG.bind(e),S=e.readBoolean.bind(e),v=e.skipBits.bind(e),E=e.skipEG.bind(e),x=e.skipUEG.bind(e),b=this.skipScalingList.bind(this);h();const D=h();if(g(5),v(3),h(),x(),D===100||D===110||D===122||D===244||D===44||D===83||D===86||D===118||D===128){const k=y();if(k===3&&v(1),x(),x(),v(1),S())for(d=k!==3?8:12,f=0;f<d;f++)S()&&(f<6?b(16,e):b(64,e))}x();const L=y();if(L===0)y();else if(L===1)for(v(1),E(),E(),u=y(),f=0;f<u;f++)E();x(),v(1);const I=y(),_=y(),P=g(1);P===0&&v(1),v(1),S()&&(n=y(),s=y(),a=y(),l=y());let M=[1,1];if(S()&&S())switch(h()){case 1:M=[1,1];break;case 2:M=[12,11];break;case 3:M=[10,11];break;case 4:M=[16,11];break;case 5:M=[40,33];break;case 6:M=[24,11];break;case 7:M=[20,11];break;case 8:M=[32,11];break;case 9:M=[80,33];break;case 10:M=[18,11];break;case 11:M=[15,11];break;case 12:M=[64,33];break;case 13:M=[160,99];break;case 14:M=[4,3];break;case 15:M=[3,2];break;case 16:M=[2,1];break;case 255:{M=[h()<<8|h(),h()<<8|h()];break}}return{width:Math.ceil((I+1)*16-n*2-s*2),height:(2-P)*(_+1)*16-(P?2:4)*(a+l),pixelRatio:M}}}class Rx extends lR{constructor(...t){super(...t),this.initVPS=null}parsePES(t,e,n,s){const a=this.parseNALu(t,n.data,s);let l=this.VideoSample,u,d=!1;n.data=null,l&&a.length&&!t.audFound&&(this.pushAccessUnit(l,t),l=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),a.forEach(f=>{var h,g;switch(f.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:l||(l=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),l.frame=!0,u=!0;break;case 16:case 17:case 18:case 21:if(u=!0,d){var y;(y=l)!=null&&y.frame&&!l.key&&(this.pushAccessUnit(l,t),l=this.VideoSample=null)}l||(l=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),l.key=!0,l.frame=!0;break;case 19:case 20:u=!0,(h=l)!=null&&h.frame&&!l.key&&(this.pushAccessUnit(l,t),l=this.VideoSample=null),l||(l=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),l.key=!0,l.frame=!0;break;case 39:u=!0,qp(f.data,2,n.pts,e.samples);break;case 32:u=!0,t.vps||(typeof t.params!="object"&&(t.params={}),t.params=Wt(t.params,this.readVPS(f.data)),this.initVPS=f.data),t.vps=[f.data];break;case 33:if(u=!0,d=!0,t.vps!==void 0&&t.vps[0]!==this.initVPS&&t.sps!==void 0&&!this.matchSPS(t.sps[0],f.data)&&(this.initVPS=t.vps[0],t.sps=t.pps=void 0),!t.sps){const S=this.readSPS(f.data);t.width=S.width,t.height=S.height,t.pixelRatio=S.pixelRatio,t.codec=S.codecString,t.sps=[],typeof t.params!="object"&&(t.params={});for(const v in S.params)t.params[v]=S.params[v]}this.pushParameterSet(t.sps,f.data,t.vps),l||(l=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),l.key=!0;break;case 34:if(u=!0,typeof t.params=="object"){if(!t.pps){t.pps=[];const S=this.readPPS(f.data);for(const v in S)t.params[v]=S[v]}this.pushParameterSet(t.pps,f.data,t.vps)}break;case 35:u=!0,t.audFound=!0,(g=l)!=null&&g.frame&&(this.pushAccessUnit(l,t),l=null),l||(l=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:u=!1;break}l&&u&&l.units.push(f)}),s&&l&&(this.pushAccessUnit(l,t),this.VideoSample=null)}pushParameterSet(t,e,n){(n&&n[0]===this.initVPS||!n&&!t.length)&&t.push(e)}getNALuType(t,e){return(t[e]&126)>>>1}ebsp2rbsp(t){const e=new Uint8Array(t.byteLength);let n=0;for(let s=0;s<t.byteLength;s++)s>=2&&t[s]===3&&t[s-1]===0&&t[s-2]===0||(e[n]=t[s],n++);return new Uint8Array(e.buffer,0,n)}pushAccessUnit(t,e){super.pushAccessUnit(t,e),this.initVPS&&(this.initVPS=null)}readVPS(t){const e=new vl(t);e.readUByte(),e.readUByte(),e.readBits(4),e.skipBits(2),e.readBits(6);const n=e.readBits(3),s=e.readBoolean();return{numTemporalLayers:n+1,temporalIdNested:s}}readSPS(t){const e=new vl(this.ebsp2rbsp(t));e.readUByte(),e.readUByte(),e.readBits(4);const n=e.readBits(3);e.readBoolean();const s=e.readBits(2),a=e.readBoolean(),l=e.readBits(5),u=e.readUByte(),d=e.readUByte(),f=e.readUByte(),h=e.readUByte(),g=e.readUByte(),y=e.readUByte(),S=e.readUByte(),v=e.readUByte(),E=e.readUByte(),x=e.readUByte(),b=e.readUByte(),D=[],L=[];for(let Nt=0;Nt<n;Nt++)D.push(e.readBoolean()),L.push(e.readBoolean());if(n>0)for(let Nt=n;Nt<8;Nt++)e.readBits(2);for(let Nt=0;Nt<n;Nt++)D[Nt]&&(e.readUByte(),e.readUByte(),e.readUByte(),e.readUByte(),e.readUByte(),e.readUByte(),e.readUByte(),e.readUByte(),e.readUByte(),e.readUByte(),e.readUByte()),L[Nt]&&e.readUByte();e.readUEG();const I=e.readUEG();I==3&&e.skipBits(1);const _=e.readUEG(),P=e.readUEG(),M=e.readBoolean();let k=0,F=0,R=0,$=0;M&&(k+=e.readUEG(),F+=e.readUEG(),R+=e.readUEG(),$+=e.readUEG());const Q=e.readUEG(),ft=e.readUEG(),ct=e.readUEG(),it=e.readBoolean();for(let Nt=it?0:n;Nt<=n;Nt++)e.skipUEG(),e.skipUEG(),e.skipUEG();if(e.skipUEG(),e.skipUEG(),e.skipUEG(),e.skipUEG(),e.skipUEG(),e.skipUEG(),e.readBoolean()&&e.readBoolean())for(let Ut=0;Ut<4;Ut++)for(let Ce=0;Ce<(Ut===3?2:6);Ce++)if(!e.readBoolean())e.readUEG();else{const Ke=Math.min(64,1<<4+(Ut<<1));Ut>1&&e.readEG();for(let Tn=0;Tn<Ke;Tn++)e.readEG()}e.readBoolean(),e.readBoolean(),e.readBoolean()&&(e.readUByte(),e.skipUEG(),e.skipUEG(),e.readBoolean());const et=e.readUEG();let X=0;for(let Nt=0;Nt<et;Nt++){let Ut=!1;if(Nt!==0&&(Ut=e.readBoolean()),Ut){Nt===et&&e.readUEG(),e.readBoolean(),e.readUEG();let Ce=0;for(let Pn=0;Pn<=X;Pn++){const Ke=e.readBoolean();let Tn=!1;Ke||(Tn=e.readBoolean()),(Ke||Tn)&&Ce++}X=Ce}else{const Ce=e.readUEG(),Pn=e.readUEG();X=Ce+Pn;for(let Ke=0;Ke<Ce;Ke++)e.readUEG(),e.readBoolean();for(let Ke=0;Ke<Pn;Ke++)e.readUEG(),e.readBoolean()}}if(e.readBoolean()){const Nt=e.readUEG();for(let Ut=0;Ut<Nt;Ut++){for(let Ce=0;Ce<ct+4;Ce++)e.readBits(1);e.readBits(1)}}let q=0,st=1,at=1,dt=!0,gt=1,ht=0;e.readBoolean(),e.readBoolean();let Ft=!1;if(e.readBoolean()){if(e.readBoolean()){const bt=e.readUByte(),so=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Pr=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];bt>0&&bt<16?(st=so[bt-1],at=Pr[bt-1]):bt===255&&(st=e.readBits(16),at=e.readBits(16))}if(e.readBoolean()&&e.readBoolean(),e.readBoolean()&&(e.readBits(3),e.readBoolean(),e.readBoolean()&&(e.readUByte(),e.readUByte(),e.readUByte())),e.readBoolean()&&(e.readUEG(),e.readUEG()),e.readBoolean(),e.readBoolean(),e.readBoolean(),Ft=e.readBoolean(),Ft&&(k+=e.readUEG(),F+=e.readUEG(),R+=e.readUEG(),$+=e.readUEG()),e.readBoolean()&&(gt=e.readBits(32),ht=e.readBits(32),e.readBoolean()&&e.readUEG(),e.readBoolean())){const Pr=e.readBoolean(),au=e.readBoolean();let ei=!1;(Pr||au)&&(ei=e.readBoolean(),ei&&(e.readUByte(),e.readBits(5),e.readBoolean(),e.readBits(5)),e.readBits(4),e.readBits(4),ei&&e.readBits(4),e.readBits(5),e.readBits(5),e.readBits(5));for(let Qe=0;Qe<=n;Qe++){dt=e.readBoolean();const fi=dt||e.readBoolean();let Ze=!1;fi?e.readEG():Ze=e.readBoolean();const ou=Ze?1:e.readUEG()+1;if(Pr)for(let Ws=0;Ws<ou;Ws++)e.readUEG(),e.readUEG(),ei&&(e.readUEG(),e.readUEG()),e.skipBits(1);if(au)for(let Ws=0;Ws<ou;Ws++)e.readUEG(),e.readUEG(),ei&&(e.readUEG(),e.readUEG()),e.skipBits(1)}}e.readBoolean()&&(e.readBoolean(),e.readBoolean(),e.readBoolean(),q=e.readUEG())}let Ee=_,ui=P;if(M||Ft){let Nt=1,Ut=1;I===1?Nt=Ut=2:I==2&&(Nt=2),Ee=_-Nt*F-Nt*k,ui=P-Ut*$-Ut*R}const ci=s?["A","B","C"][s]:"",ki=u<<24|d<<16|f<<8|h;let Ne=0;for(let Nt=0;Nt<32;Nt++)Ne=(Ne|(ki>>Nt&1)<<31-Nt)>>>0;let ue=Ne.toString(16);return l===1&&ue==="2"&&(ue="6"),{codecString:`hvc1.${ci}${l}.${ue}.${a?"H":"L"}${b}.B0`,params:{general_tier_flag:a,general_profile_idc:l,general_profile_space:s,general_profile_compatibility_flags:[u,d,f,h],general_constraint_indicator_flags:[g,y,S,v,E,x],general_level_idc:b,bit_depth:Q+8,bit_depth_luma_minus8:Q,bit_depth_chroma_minus8:ft,min_spatial_segmentation_idc:q,chroma_format_idc:I,frame_rate:{fixed:dt,fps:ht/gt}},width:Ee,height:ui,pixelRatio:[st,at]}}readPPS(t){const e=new vl(this.ebsp2rbsp(t));e.readUByte(),e.readUByte(),e.skipUEG(),e.skipUEG(),e.skipBits(2),e.skipBits(3),e.skipBits(2),e.skipUEG(),e.skipUEG(),e.skipEG(),e.skipBits(2),e.readBoolean()&&e.skipUEG(),e.skipEG(),e.skipEG(),e.skipBits(4);const s=e.readBoolean(),a=e.readBoolean();let l=1;return a&&s?l=0:a?l=3:s&&(l=2),{parallelismType:l}}matchSPS(t,e){return String.fromCharCode.apply(null,t).substr(3)===String.fromCharCode.apply(null,e).substr(3)}}const Ve=188;class Gs{constructor(t,e,n,s){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=t,this.config=e,this.typeSupported=n,this.logger=s,this.videoParser=null}static probe(t,e){const n=Gs.syncOffset(t);return n>0&&e.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(t){const e=t.length;let n=Math.min(Ve*5,e-Ve)+1,s=0;for(;s<n;){let a=!1,l=-1,u=0;for(let d=s;d<e;d+=Ve)if(t[d]===71&&(e-d===Ve||t[d+Ve]===71)){if(u++,l===-1&&(l=d,l!==0&&(n=Math.min(l+Ve*99,t.length-Ve)+1)),a||(a=Kg(t,d)===0),a&&u>1&&(l===0&&u>2||d+Ve>n))return l}else{if(u)return-1;break}s++}return-1}static createTrack(t,e){return{container:t==="video"||t==="audio"?"video/mp2t":void 0,type:t,id:y1[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:t==="audio"?e:void 0}}resetInitSegment(t,e,n,s){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Gs.createTrack("video"),this._videoTrack.duration=s,this._audioTrack=Gs.createTrack("audio",s),this._id3Track=Gs.createTrack("id3"),this._txtTrack=Gs.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=e,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:t,_videoTrack:e,_id3Track:n}=this;t&&(t.pesData=null),e&&(e.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(t,e,n=!1,s=!1){n||(this.sampleAes=null);let a;const l=this._videoTrack,u=this._audioTrack,d=this._id3Track,f=this._txtTrack;let h=l.pid,g=l.pesData,y=u.pid,S=d.pid,v=u.pesData,E=d.pesData,x=null,b=this.pmtParsed,D=this._pmtId,L=t.length;if(this.remainderData&&(t=Jn(this.remainderData,t),L=t.length,this.remainderData=null),L<Ve&&!s)return this.remainderData=t,{audioTrack:u,videoTrack:l,id3Track:d,textTrack:f};const I=Math.max(0,Gs.syncOffset(t));L-=(L-I)%Ve,L<t.byteLength&&!s&&(this.remainderData=new Uint8Array(t.buffer,L,t.buffer.byteLength-L));let _=0;for(let M=I;M<L;M+=Ve)if(t[M]===71){const k=!!(t[M+1]&64),F=Kg(t,M),R=(t[M+3]&48)>>4;let $;if(R>1){if($=M+5+t[M+4],$===M+Ve)continue}else $=M+4;switch(F){case h:if(k){if(g&&(a=_a(g,this.logger))){if(this.videoParser===null)switch(l.segmentCodec){case"avc":this.videoParser=new Ax;break;case"hevc":this.videoParser=new Rx;break}this.videoParser!==null&&this.videoParser.parsePES(l,f,a,!1)}g={data:[],size:0}}g&&(g.data.push(t.subarray($,M+Ve)),g.size+=M+Ve-$);break;case y:if(k){if(v&&(a=_a(v,this.logger)))switch(u.segmentCodec){case"aac":this.parseAACPES(u,a);break;case"mp3":this.parseMPEGPES(u,a);break;case"ac3":this.parseAC3PES(u,a);break}v={data:[],size:0}}v&&(v.data.push(t.subarray($,M+Ve)),v.size+=M+Ve-$);break;case S:k&&(E&&(a=_a(E,this.logger))&&this.parseID3PES(d,a),E={data:[],size:0}),E&&(E.data.push(t.subarray($,M+Ve)),E.size+=M+Ve-$);break;case 0:k&&($+=t[$]+1),D=this._pmtId=cN(t,$);break;case D:{k&&($+=t[$]+1);const Q=fN(t,$,this.typeSupported,n,this.observer,this.logger);h=Q.videoPid,h>0&&(l.pid=h,l.segmentCodec=Q.segmentVideoCodec),y=Q.audioPid,y>0&&(u.pid=y,u.segmentCodec=Q.segmentAudioCodec),S=Q.id3Pid,S>0&&(d.pid=S),x!==null&&!b&&(this.logger.warn(`MPEG-TS PMT found at ${M} after unknown PID '${x}'. Backtracking to sync byte @${I} to parse all TS packets.`),x=null,M=I-188),b=this.pmtParsed=!0;break}case 17:case 8191:break;default:x=F;break}}else _++;_>0&&zg(this.observer,new Error(`Found ${_} TS packet/s that do not start with 0x47`),void 0,this.logger),l.pesData=g,u.pesData=v,d.pesData=E;const P={audioTrack:u,videoTrack:l,id3Track:d,textTrack:f};return s&&this.extractRemainingSamples(P),P}flush(){const{remainderData:t}=this;this.remainderData=null;let e;return t?e=this.demux(t,-1,!1,!0):e={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e}extractRemainingSamples(t){const{audioTrack:e,videoTrack:n,id3Track:s,textTrack:a}=t,l=n.pesData,u=e.pesData,d=s.pesData;let f;if(l&&(f=_a(l,this.logger))){if(this.videoParser===null)switch(n.segmentCodec){case"avc":this.videoParser=new Ax;break;case"hevc":this.videoParser=new Rx;break}this.videoParser!==null&&(this.videoParser.parsePES(n,a,f,!0),n.pesData=null)}else n.pesData=l;if(u&&(f=_a(u,this.logger))){switch(e.segmentCodec){case"aac":this.parseAACPES(e,f);break;case"mp3":this.parseMPEGPES(e,f);break;case"ac3":this.parseAC3PES(e,f);break}e.pesData=null}else u!=null&&u.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),e.pesData=u;d&&(f=_a(d,this.logger))?(this.parseID3PES(s,f),s.pesData=null):s.pesData=d}demuxSampleAes(t,e,n){const s=this.demux(t,n,!0,!this.config.progressive),a=this.sampleAes=new uN(this.observer,this.config,e);return this.decrypt(s,a)}decrypt(t,e){return new Promise(n=>{const{audioTrack:s,videoTrack:a}=t;s.samples&&s.segmentCodec==="aac"?e.decryptAacSamples(s.samples,0,()=>{a.samples?e.decryptAvcSamples(a.samples,0,0,()=>{n(t)}):n(t)}):a.samples&&e.decryptAvcSamples(a.samples,0,0,()=>{n(t)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(t,e){let n=0;const s=this.aacOverFlow;let a=e.data;if(s){this.aacOverFlow=null;const g=s.missing,y=s.sample.unit.byteLength;if(g===-1)a=Jn(s.sample.unit,a);else{const S=y-g;s.sample.unit.set(a.subarray(0,g),S),t.samples.push(s.sample),n=s.missing}}let l,u;for(l=n,u=a.length;l<u-1&&!Rf(a,l);l++);if(l!==n){let g;const y=l<u-1;if(y?g=`AAC PES did not start with ADTS header,offset:${l}`:g="No ADTS header found in AAC PES",zg(this.observer,new Error(g),y,this.logger),!y)return}Q1(t,this.observer,a,l,this.audioCodec);let d;if(e.pts!==void 0)d=e.pts;else if(s){const g=Z1(t.samplerate);d=s.sample.pts+g}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let f=0,h;for(;l<u;)if(h=J1(t,a,l,d,f),l+=h.length,h.missing){this.aacOverFlow=h;break}else for(f++;l<u-1&&!Rf(a,l);l++);}parseMPEGPES(t,e){const n=e.data,s=n.length;let a=0,l=0;const u=e.pts;if(u===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;l<s;)if(sR(n,l)){const d=nR(t,n,l,u,a);if(d)l+=d.length,a++;else break}else l++}parseAC3PES(t,e){{const n=e.data,s=e.pts;if(s===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const a=n.length;let l=0,u=0,d;for(;u<a&&(d=oR(t,n,u,s,l++))>0;)u+=d}}parseID3PES(t,e){if(e.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=Wt({},e,{type:this._videoTrack?_n.emsg:_n.audioId3,duration:Number.POSITIVE_INFINITY});t.samples.push(n)}}function Kg(i,t){return((i[t+1]&31)<<8)+i[t+2]}function cN(i,t){return(i[t+10]&31)<<8|i[t+11]}function fN(i,t,e,n,s,a){const l={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},u=(i[t+1]&15)<<8|i[t+2],d=t+3+u-4,f=(i[t+10]&15)<<8|i[t+11];for(t+=12+f;t<d;){const h=Kg(i,t),g=(i[t+3]&15)<<8|i[t+4];switch(i[t]){case 207:if(!n){Hm("ADTS AAC",a);break}case 15:l.audioPid===-1&&(l.audioPid=h);break;case 21:l.id3Pid===-1&&(l.id3Pid=h);break;case 219:if(!n){Hm("H.264",a);break}case 27:l.videoPid===-1&&(l.videoPid=h);break;case 3:case 4:!e.mpeg&&!e.mp3?a.log("MPEG audio found, not supported in this browser"):l.audioPid===-1&&(l.audioPid=h,l.segmentAudioCodec="mp3");break;case 193:if(!n){Hm("AC-3",a);break}case 129:e.ac3?l.audioPid===-1&&(l.audioPid=h,l.segmentAudioCodec="ac3"):a.log("AC-3 audio found, not supported in this browser");break;case 6:if(l.audioPid===-1&&g>0){let y=t+5,S=g;for(;S>2;){switch(i[y]){case 106:e.ac3!==!0?a.log("AC-3 audio found, not supported in this browser for now"):(l.audioPid=h,l.segmentAudioCodec="ac3");break}const E=i[y+1]+2;y+=E,S-=E}}break;case 194:case 135:return zg(s,new Error("Unsupported EC-3 in M2TS found"),void 0,a),l;case 36:l.videoPid===-1&&(l.videoPid=h,l.segmentVideoCodec="hevc",a.log("HEVC in M2TS found"));break}t+=g+5}return l}function zg(i,t,e,n){n.warn(`parsing error: ${t.message}`),i.emit(A.ERROR,A.ERROR,{type:vt.MEDIA_ERROR,details:z.FRAG_PARSING_ERROR,fatal:!1,levelRetry:e,error:t,reason:t.message})}function Hm(i,t){t.log(`${i} with AES-128-CBC encryption found in unencrypted stream`)}function _a(i,t){let e=0,n,s,a,l,u;const d=i.data;if(!i||i.size===0)return null;for(;d[0].length<19&&d.length>1;)d[0]=Jn(d[0],d[1]),d.splice(1,1);if(n=d[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(s=(n[4]<<8)+n[5],s&&s>i.size-6)return null;const h=n[7];h&192&&(l=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,h&64?(u=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,l-u>60*9e4&&(t.warn(`${Math.round((l-u)/9e4)}s delta between PTS and DTS, align them`),l=u)):u=l),a=n[8];let g=a+9;if(i.size<=g)return null;i.size-=g;const y=new Uint8Array(i.size);for(let S=0,v=d.length;S<v;S++){n=d[S];let E=n.byteLength;if(g)if(g>E){g-=E;continue}else n=n.subarray(g),E-=g,g=0;y.set(n,e),e+=E}return s&&(s-=a+3),{data:y,pts:l,dts:u,len:s}}return null}class dN{static getSilentFrame(t,e){switch(t){case"mp4a.40.2":if(e===1)return new Uint8Array([0,200,0,128,35,128]);if(e===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(e===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(e===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(e===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(e===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(e===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(e===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(e===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Fs=Math.pow(2,32)-1;class j{static init(){j.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let t;for(t in j.types)j.types.hasOwnProperty(t)&&(j.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);const e=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);j.HDLR_TYPES={video:e,audio:n};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);j.STTS=j.STSC=j.STCO=a,j.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),j.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),j.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),j.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const l=new Uint8Array([105,115,111,109]),u=new Uint8Array([97,118,99,49]),d=new Uint8Array([0,0,0,1]);j.FTYP=j.box(j.types.ftyp,l,d,l,u),j.DINF=j.box(j.types.dinf,j.box(j.types.dref,s))}static box(t,...e){let n=8,s=e.length;const a=s;for(;s--;)n+=e[s].byteLength;const l=new Uint8Array(n);for(l[0]=n>>24&255,l[1]=n>>16&255,l[2]=n>>8&255,l[3]=n&255,l.set(t,4),s=0,n=8;s<a;s++)l.set(e[s],n),n+=e[s].byteLength;return l}static hdlr(t){return j.box(j.types.hdlr,j.HDLR_TYPES[t])}static mdat(t){return j.box(j.types.mdat,t)}static mdhd(t,e){e*=t;const n=Math.floor(e/(Fs+1)),s=Math.floor(e%(Fs+1));return j.box(j.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24,n>>16&255,n>>8&255,n&255,s>>24,s>>16&255,s>>8&255,s&255,85,196,0,0]))}static mdia(t){return j.box(j.types.mdia,j.mdhd(t.timescale||0,t.duration||0),j.hdlr(t.type),j.minf(t))}static mfhd(t){return j.box(j.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]))}static minf(t){return t.type==="audio"?j.box(j.types.minf,j.box(j.types.smhd,j.SMHD),j.DINF,j.stbl(t)):j.box(j.types.minf,j.box(j.types.vmhd,j.VMHD),j.DINF,j.stbl(t))}static moof(t,e,n){return j.box(j.types.moof,j.mfhd(t),j.traf(n,e))}static moov(t){let e=t.length;const n=[];for(;e--;)n[e]=j.trak(t[e]);return j.box.apply(null,[j.types.moov,j.mvhd(t[0].timescale||0,t[0].duration||0)].concat(n).concat(j.mvex(t)))}static mvex(t){let e=t.length;const n=[];for(;e--;)n[e]=j.trex(t[e]);return j.box.apply(null,[j.types.mvex,...n])}static mvhd(t,e){e*=t;const n=Math.floor(e/(Fs+1)),s=Math.floor(e%(Fs+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24,n>>16&255,n>>8&255,n&255,s>>24,s>>16&255,s>>8&255,s&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return j.box(j.types.mvhd,a)}static sdtp(t){const e=t.samples||[],n=new Uint8Array(4+e.length);let s,a;for(s=0;s<e.length;s++)a=e[s].flags,n[s+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return j.box(j.types.sdtp,n)}static stbl(t){return j.box(j.types.stbl,j.stsd(t),j.box(j.types.stts,j.STTS),j.box(j.types.stsc,j.STSC),j.box(j.types.stsz,j.STSZ),j.box(j.types.stco,j.STCO))}static avc1(t){let e=[],n=[],s,a,l;for(s=0;s<t.sps.length;s++)a=t.sps[s],l=a.byteLength,e.push(l>>>8&255),e.push(l&255),e=e.concat(Array.prototype.slice.call(a));for(s=0;s<t.pps.length;s++)a=t.pps[s],l=a.byteLength,n.push(l>>>8&255),n.push(l&255),n=n.concat(Array.prototype.slice.call(a));const u=j.box(j.types.avcC,new Uint8Array([1,e[3],e[4],e[5],255,224|t.sps.length].concat(e).concat([t.pps.length]).concat(n))),d=t.width,f=t.height,h=t.pixelRatio[0],g=t.pixelRatio[1];return j.box(j.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,d>>8&255,d&255,f>>8&255,f&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u,j.box(j.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),j.box(j.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,h&255,g>>24,g>>16&255,g>>8&255,g&255])))}static esds(t){const e=t.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...e,6,1,2])}static audioStsd(t){const e=t.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount||0,0,16,0,0,0,0,e>>8&255,e&255,0,0])}static mp4a(t){return j.box(j.types.mp4a,j.audioStsd(t),j.box(j.types.esds,j.esds(t)))}static mp3(t){return j.box(j.types[".mp3"],j.audioStsd(t))}static ac3(t){return j.box(j.types["ac-3"],j.audioStsd(t),j.box(j.types.dac3,t.config))}static stsd(t){const{segmentCodec:e}=t;if(t.type==="audio"){if(e==="aac")return j.box(j.types.stsd,j.STSD,j.mp4a(t));if(e==="ac3"&&t.config)return j.box(j.types.stsd,j.STSD,j.ac3(t));if(e==="mp3"&&t.codec==="mp3")return j.box(j.types.stsd,j.STSD,j.mp3(t))}else if(t.pps&&t.sps){if(e==="avc")return j.box(j.types.stsd,j.STSD,j.avc1(t));if(e==="hevc"&&t.vps)return j.box(j.types.stsd,j.STSD,j.hvc1(t))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${t.type} segment codec (${e}/${t.codec})`)}static tkhd(t){const e=t.id,n=(t.duration||0)*(t.timescale||0),s=t.width||0,a=t.height||0,l=Math.floor(n/(Fs+1)),u=Math.floor(n%(Fs+1));return j.box(j.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,0,0,0,0,l>>24,l>>16&255,l>>8&255,l&255,u>>24,u>>16&255,u>>8&255,u&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,s&255,0,0,a>>8&255,a&255,0,0]))}static traf(t,e){const n=j.sdtp(t),s=t.id,a=Math.floor(e/(Fs+1)),l=Math.floor(e%(Fs+1));return j.box(j.types.traf,j.box(j.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255])),j.box(j.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,l>>24,l>>16&255,l>>8&255,l&255])),j.trun(t,n.length+16+20+8+16+8+8),n)}static trak(t){return t.duration=t.duration||4294967295,j.box(j.types.trak,j.tkhd(t),j.mdia(t))}static trex(t){const e=t.id;return j.box(j.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(t,e){const n=t.samples||[],s=n.length,a=12+16*s,l=new Uint8Array(a);let u,d,f,h,g,y;for(e+=8+a,l.set([t.type==="video"?1:0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,s&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255],0),u=0;u<s;u++)d=n[u],f=d.duration,h=d.size,g=d.flags,y=d.cts,l.set([f>>>24&255,f>>>16&255,f>>>8&255,f&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255,g.isLeading<<2|g.dependsOn,g.isDependedOn<<6|g.hasRedundancy<<4|g.paddingValue<<1|g.isNonSync,g.degradPrio&61440,g.degradPrio&15,y>>>24&255,y>>>16&255,y>>>8&255,y&255],12+16*u);return j.box(j.types.trun,l)}static initSegment(t){j.types||j.init();const e=j.moov(t);return Jn(j.FTYP,e)}static hvc1(t){const e=t.params,n=[t.vps,t.sps,t.pps],s=4,a=new Uint8Array([1,e.general_profile_space<<6|(e.general_tier_flag?32:0)|e.general_profile_idc,e.general_profile_compatibility_flags[0],e.general_profile_compatibility_flags[1],e.general_profile_compatibility_flags[2],e.general_profile_compatibility_flags[3],e.general_constraint_indicator_flags[0],e.general_constraint_indicator_flags[1],e.general_constraint_indicator_flags[2],e.general_constraint_indicator_flags[3],e.general_constraint_indicator_flags[4],e.general_constraint_indicator_flags[5],e.general_level_idc,240|e.min_spatial_segmentation_idc>>8,255&e.min_spatial_segmentation_idc,252|e.parallelismType,252|e.chroma_format_idc,248|e.bit_depth_luma_minus8,248|e.bit_depth_chroma_minus8,0,parseInt(e.frame_rate.fps),s-1|e.temporal_id_nested<<2|e.num_temporal_layers<<3|(e.frame_rate.fixed?64:0),n.length]);let l=a.length;for(let v=0;v<n.length;v+=1){l+=3;for(let E=0;E<n[v].length;E+=1)l+=2+n[v][E].length}const u=new Uint8Array(l);u.set(a,0),l=a.length;const d=n.length-1;for(let v=0;v<n.length;v+=1){u.set(new Uint8Array([32+v|(v===d?128:0),0,n[v].length]),l),l+=3;for(let E=0;E<n[v].length;E+=1)u.set(new Uint8Array([n[v][E].length>>8,n[v][E].length&255]),l),l+=2,u.set(n[v][E],l),l+=n[v][E].length}const f=j.box(j.types.hvcC,u),h=t.width,g=t.height,y=t.pixelRatio[0],S=t.pixelRatio[1];return j.box(j.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,h>>8&255,h&255,g>>8&255,g&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),f,j.box(j.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),j.box(j.types.pasp,new Uint8Array([y>>24,y>>16&255,y>>8&255,y&255,S>>24,S>>16&255,S>>8&255,S&255])))}}j.types=void 0;j.HDLR_TYPES=void 0;j.STTS=void 0;j.STSC=void 0;j.STCO=void 0;j.STSZ=void 0;j.VMHD=void 0;j.SMHD=void 0;j.STSD=void 0;j.FTYP=void 0;j.DINF=void 0;const uR=9e4;function o0(i,t,e=1,n=!1){const s=i*t*e;return n?Math.round(s):s}function hN(i,t,e=1,n=!1){return o0(i,t,1/e,n)}function al(i,t=!1){return o0(i,1e3,1/uR,t)}function mN(i,t=1){return o0(i,uR,1/t)}const gN=10*1e3,pN=1024,yN=1152,vN=1536;let Da=null,jm=null;function Lx(i,t,e,n){return{duration:t,size:e,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:i?2:1,isNonSync:i?0:1}}}class Zc{constructor(t,e,n,s){if(this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=t,this.config=e,this.typeSupported=n,this.logger=s,this.ISGenerated=!1,Da===null){const l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Da=l?parseInt(l[1]):0}if(jm===null){const a=navigator.userAgent.match(/Safari\/(\d+)/i);jm=a?parseInt(a[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(t){this.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=t}resetNextTimestamp(){this.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(t){let e=!1;const n=t[0].pts,s=t.reduce((a,l)=>{let u=l.pts,d=u-a;return d<-4294967296&&(e=!0,u=Yn(u,n),d=u-a),d>0?a:u},n);return e&&this.logger.debug("PTS rollover detected"),s}remux(t,e,n,s,a,l,u,d){let f,h,g,y,S,v,E=a,x=a;const b=t.pid>-1,D=e.pid>-1,L=e.samples.length,I=t.samples.length>0,_=u&&L>0||L>1;if((!b||I)&&(!D||_)||this.ISGenerated||u){if(this.ISGenerated){var M,k,F,R;const ct=this.videoTrackConfig;(ct&&(e.width!==ct.width||e.height!==ct.height||((M=e.pixelRatio)==null?void 0:M[0])!==((k=ct.pixelRatio)==null?void 0:k[0])||((F=e.pixelRatio)==null?void 0:F[1])!==((R=ct.pixelRatio)==null?void 0:R[1]))||!ct&&_||this.nextAudioPts===null&&I)&&this.resetInitSegment()}this.ISGenerated||(g=this.generateIS(t,e,a,l));const $=this.isVideoContiguous;let Q=-1,ft;if(_&&(Q=SN(e.samples),!$&&this.config.forceKeyFrameOnDiscontinuity))if(v=!0,Q>0){this.logger.warn(`[mp4-remuxer]: Dropped ${Q} out of ${L} video samples due to a missing keyframe`);const ct=this.getVideoStartPts(e.samples);e.samples=e.samples.slice(Q),e.dropped+=Q,x+=(e.samples[0].pts-ct)/e.inputTimeScale,ft=x}else Q===-1&&(this.logger.warn(`[mp4-remuxer]: No keyframe found out of ${L} video samples`),v=!1);if(this.ISGenerated){if(I&&_){const ct=this.getVideoStartPts(e.samples),B=(Yn(t.samples[0].pts,ct)-ct)/e.inputTimeScale;E+=Math.max(0,B),x+=Math.max(0,-B)}if(I){if(t.samplerate||(this.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),g=this.generateIS(t,e,a,l)),h=this.remuxAudio(t,E,this.isAudioContiguous,l,D||_||d===yt.AUDIO?x:void 0),_){const ct=h?h.endPTS-h.startPTS:0;e.inputTimeScale||(this.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),g=this.generateIS(t,e,a,l)),f=this.remuxVideo(e,x,$,ct)}}else _&&(f=this.remuxVideo(e,x,$,0));f&&(f.firstKeyFrame=Q,f.independent=Q!==-1,f.firstKeyFramePTS=ft)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(S=cR(n,a,this._initPTS,this._initDTS)),s.samples.length&&(y=fR(s,a,this._initPTS))),{audio:h,video:f,initSegment:g,independent:v,text:y,id3:S}}generateIS(t,e,n,s){const a=t.samples,l=e.samples,u=this.typeSupported,d={},f=this._initPTS;let h=!f||s,g="audio/mp4",y,S,v,E;if(h&&(y=S=1/0),t.config&&a.length){switch(t.timescale=t.samplerate,t.segmentCodec){case"mp3":u.mpeg?(g="audio/mpeg",t.codec=""):u.mp3&&(t.codec="mp3");break;case"ac3":t.codec="ac-3";break}d.audio={id:"audio",container:g,codec:t.codec,initSegment:t.segmentCodec==="mp3"&&u.mpeg?new Uint8Array(0):j.initSegment([t]),metadata:{channelCount:t.channelCount}},h&&(E=t.id,v=t.inputTimeScale,!f||v!==f.timescale?y=S=a[0].pts-Math.round(v*n):h=!1)}if(e.sps&&e.pps&&l.length){if(e.timescale=e.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:e.codec,initSegment:j.initSegment([e]),metadata:{width:e.width,height:e.height}},h)if(E=e.id,v=e.inputTimeScale,!f||v!==f.timescale){const x=this.getVideoStartPts(l),b=Math.round(v*n);S=Math.min(S,Yn(l[0].dts,x)-b),y=Math.min(y,x-b)}else h=!1;this.videoTrackConfig={width:e.width,height:e.height,pixelRatio:e.pixelRatio}}if(Object.keys(d).length)return this.ISGenerated=!0,h?(this._initPTS={baseTime:y,timescale:v},this._initDTS={baseTime:S,timescale:v}):y=v=void 0,{tracks:d,initPTS:y,timescale:v,trackId:E}}remuxVideo(t,e,n,s){const a=t.inputTimeScale,l=t.samples,u=[],d=l.length,f=this._initPTS;let h=this.nextAvcDts,g=8,y=this.videoSampleDuration,S,v,E=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY,b=!1;if(!n||h===null){const X=e*a,O=l[0].pts-Yn(l[0].dts,l[0].pts);Da&&h!==null&&Math.abs(X-O-h)<15e3?n=!0:h=X-O}const D=f.baseTime*a/f.timescale;for(let X=0;X<d;X++){const O=l[X];O.pts=Yn(O.pts-D,h),O.dts=Yn(O.dts-D,h),O.dts<l[X>0?X-1:X].dts&&(b=!0)}b&&l.sort(function(X,O){const q=X.dts-O.dts,st=X.pts-O.pts;return q||st}),S=l[0].dts,v=l[l.length-1].dts;const L=v-S,I=L?Math.round(L/(d-1)):y||t.inputTimeScale/30;if(n){const X=S-h,O=X>I,q=X<-1;if((O||q)&&(O?this.logger.warn(`${(t.segmentCodec||"").toUpperCase()}: ${al(X,!0)} ms (${X}dts) hole between fragments detected at ${e.toFixed(3)}`):this.logger.warn(`${(t.segmentCodec||"").toUpperCase()}: ${al(-X,!0)} ms (${X}dts) overlapping between fragments detected at ${e.toFixed(3)}`),!q||h>=l[0].pts||Da)){S=h;const st=l[0].pts-X;if(O)l[0].dts=S,l[0].pts=st;else{let at=!0;for(let dt=0;dt<l.length&&!(l[dt].dts>st&&at);dt++){const gt=l[dt].pts;if(l[dt].dts-=X,l[dt].pts-=X,dt<l.length-1){const ht=l[dt+1].pts,Ft=l[dt].pts,Ct=ht<=Ft,Ee=ht<=gt;at=Ct==Ee}}}this.logger.log(`Video: Initial PTS/DTS adjusted: ${al(st,!0)}/${al(S,!0)}, delta: ${al(X,!0)} ms`)}}S=Math.max(0,S);let _=0,P=0,M=S;for(let X=0;X<d;X++){const O=l[X],q=O.units,st=q.length;let at=0;for(let dt=0;dt<st;dt++)at+=q[dt].data.length;P+=at,_+=st,O.length=at,O.dts<M?(O.dts=M,M+=I/4|0||1):M=O.dts,E=Math.min(O.pts,E),x=Math.max(O.pts,x)}v=l[d-1].dts;const k=P+4*_+8;let F;try{F=new Uint8Array(k)}catch(X){this.observer.emit(A.ERROR,A.ERROR,{type:vt.MUX_ERROR,details:z.REMUX_ALLOC_ERROR,fatal:!1,error:X,bytes:k,reason:`fail allocating video mdat ${k}`});return}const R=new DataView(F.buffer);R.setUint32(0,k),F.set(j.types.mdat,4);let $=!1,Q=Number.POSITIVE_INFINITY,ft=Number.POSITIVE_INFINITY,ct=Number.NEGATIVE_INFINITY,it=Number.NEGATIVE_INFINITY;for(let X=0;X<d;X++){const O=l[X],q=O.units;let st=0;for(let gt=0,ht=q.length;gt<ht;gt++){const Ft=q[gt],Ct=Ft.data,Ee=Ft.data.byteLength;R.setUint32(g,Ee),g+=4,F.set(Ct,g),g+=Ee,st+=4+Ee}let at;if(X<d-1)y=l[X+1].dts-O.dts,at=l[X+1].pts-O.pts;else{const gt=this.config,ht=X>0?O.dts-l[X-1].dts:I;if(at=X>0?O.pts-l[X-1].pts:I,gt.stretchShortVideoTrack&&this.nextAudioPts!==null){const Ft=Math.floor(gt.maxBufferHole*a),Ct=(s?E+s*a:this.nextAudioPts)-O.pts;Ct>Ft?(y=Ct-ht,y<0?y=ht:$=!0,this.logger.log(`[mp4-remuxer]: It is approximately ${Ct/90} ms to the next segment; using duration ${y/90} ms for the last video frame.`)):y=ht}else y=ht}const dt=Math.round(O.pts-O.dts);Q=Math.min(Q,y),ct=Math.max(ct,y),ft=Math.min(ft,at),it=Math.max(it,at),u.push(Lx(O.key,y,st,dt))}if(u.length){if(Da){if(Da<70){const X=u[0].flags;X.dependsOn=2,X.isNonSync=0}}else if(jm&&it-ft<ct-Q&&I/ct<.025&&u[0].cts===0){this.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let X=S;for(let O=0,q=u.length;O<q;O++){const st=X+u[O].duration,at=X+u[O].cts;if(O<q-1){const dt=st+u[O+1].cts;u[O].duration=dt-at}else u[O].duration=O?u[O-1].duration:I;u[O].cts=0,X=st}}}y=$||!y?I:y,this.nextAvcDts=h=v+y,this.videoSampleDuration=y,this.isVideoContiguous=!0;const et={data1:j.moof(t.sequenceNumber++,S,Wt(t,{samples:u})),data2:F,startPTS:E/a,endPTS:(x+y)/a,startDTS:S/a,endDTS:h/a,type:"video",hasAudio:!1,hasVideo:!0,nb:u.length,dropped:t.dropped};return t.samples=[],t.dropped=0,et}getSamplesPerFrame(t){switch(t.segmentCodec){case"mp3":return yN;case"ac3":return vN;default:return pN}}remuxAudio(t,e,n,s,a){const l=t.inputTimeScale,u=t.samplerate?t.samplerate:l,d=l/u,f=this.getSamplesPerFrame(t),h=f*d,g=this._initPTS,y=t.segmentCodec==="mp3"&&this.typeSupported.mpeg,S=[],v=a!==void 0;let E=t.samples,x=y?0:8,b=this.nextAudioPts||-1;const D=e*l,L=g.baseTime*l/g.timescale;if(this.isAudioContiguous=n=n||E.length&&b>0&&(s&&Math.abs(D-b)<9e3||Math.abs(Yn(E[0].pts-L,D)-b)<20*h),E.forEach(function(B){B.pts=Yn(B.pts-L,D)}),!n||b<0){if(E=E.filter(B=>B.pts>=0),!E.length)return;a===0?b=0:s&&!v?b=Math.max(0,D):b=E[0].pts}if(t.segmentCodec==="aac"){const B=this.config.maxAudioFramesDrift;for(let H=0,et=b;H<E.length;H++){const X=E[H],O=X.pts,q=O-et,st=Math.abs(1e3*q/l);if(q<=-B*h&&v)H===0&&(this.logger.warn(`Audio frame @ ${(O/l).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*q/l)} ms.`),this.nextAudioPts=b=et=O);else if(q>=B*h&&st<gN&&v){let at=Math.round(q/h);et=O-at*h,et<0&&(at--,et+=h),H===0&&(this.nextAudioPts=b=et),this.logger.warn(`[mp4-remuxer]: Injecting ${at} audio frame @ ${(et/l).toFixed(3)}s due to ${Math.round(1e3*q/l)} ms gap.`);for(let dt=0;dt<at;dt++){const gt=Math.max(et,0);let ht=dN.getSilentFrame(t.parsedCodec||t.manifestCodec||t.codec,t.channelCount);ht||(this.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),ht=X.unit.subarray()),E.splice(H,0,{unit:ht,pts:gt}),et+=h,H++}}X.pts=et,et+=h}}let I=null,_=null,P,M=0,k=E.length;for(;k--;)M+=E[k].unit.byteLength;for(let B=0,H=E.length;B<H;B++){const et=E[B],X=et.unit;let O=et.pts;if(_!==null){const st=S[B-1];st.duration=Math.round((O-_)/d)}else if(n&&t.segmentCodec==="aac"&&(O=b),I=O,M>0){M+=x;try{P=new Uint8Array(M)}catch(st){this.observer.emit(A.ERROR,A.ERROR,{type:vt.MUX_ERROR,details:z.REMUX_ALLOC_ERROR,fatal:!1,error:st,bytes:M,reason:`fail allocating audio mdat ${M}`});return}y||(new DataView(P.buffer).setUint32(0,M),P.set(j.types.mdat,4))}else return;P.set(X,x);const q=X.byteLength;x+=q,S.push(Lx(!0,f,q,0)),_=O}const F=S.length;if(!F)return;const R=S[S.length-1];this.nextAudioPts=b=_+d*R.duration;const $=y?new Uint8Array(0):j.moof(t.sequenceNumber++,I/d,Wt({},t,{samples:S}));t.samples=[];const Q=I/l,ft=b/l,it={data1:$,data2:P,startPTS:Q,endPTS:ft,startDTS:Q,endDTS:ft,type:"audio",hasAudio:!0,hasVideo:!1,nb:F};return this.isAudioContiguous=!0,it}}function Yn(i,t){let e;if(t===null)return i;for(t<i?e=-8589934592:e=8589934592;Math.abs(i-t)>4294967296;)i+=e;return i}function SN(i){for(let t=0;t<i.length;t++)if(i[t].key)return t;return-1}function cR(i,t,e,n){const s=i.samples.length;if(!s)return;const a=i.inputTimeScale;for(let u=0;u<s;u++){const d=i.samples[u];d.pts=Yn(d.pts-e.baseTime*a/e.timescale,t*a)/a,d.dts=Yn(d.dts-n.baseTime*a/n.timescale,t*a)/a}const l=i.samples;return i.samples=[],{samples:l}}function fR(i,t,e){const n=i.samples.length;if(!n)return;const s=i.inputTimeScale;for(let l=0;l<n;l++){const u=i.samples[l];u.pts=Yn(u.pts-e.baseTime*s/e.timescale,t*s)/s}i.samples.sort((l,u)=>l.pts-u.pts);const a=i.samples;return i.samples=[],{samples:a}}class TN{constructor(t,e,n,s){this.logger=void 0,this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1,this.logger=s}destroy(){}resetTimeStamp(t){this.initPTS=t,this.lastEndTime=null}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(t,e,n,s){this.audioCodec=e,this.videoCodec=n,this.generateInitSegment(mk(t,s)),this.emitInitSegment=!0}generateInitSegment(t){let{audioCodec:e,videoCodec:n}=this;if(!(t!=null&&t.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const s=this.initData=T1(t);s.audio&&(e=Cx(s.audio,se.AUDIO,this.logger)),s.video&&(n=Cx(s.video,se.VIDEO,this.logger));const a={};s.audio&&s.video?a.audiovideo={container:"video/mp4",codec:e+","+n,supplemental:s.video.supplemental,initSegment:t,id:"main"}:s.audio?a.audio={container:"audio/mp4",codec:e,initSegment:t,id:"audio"}:s.video?a.video={container:"video/mp4",codec:n,supplemental:s.video.supplemental,initSegment:t,id:"main"}:this.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=a}remux(t,e,n,s,a,l){var u,d;let{initPTS:f,lastEndTime:h}=this;const g={audio:void 0,video:void 0,text:s,id3:n,initSegment:void 0};mt(h)||(h=this.lastEndTime=a||0);const y=e.samples;if(!(y!=null&&y.length))return g;const S={initPTS:void 0,timescale:void 0,trackId:void 0};let v=this.initData;if((u=v)!=null&&u.length||(this.generateInitSegment(y),v=this.initData),!((d=v)!=null&&d.length))return this.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),g;this.emitInitSegment&&(S.tracks=this.initTracks,this.emitInitSegment=!1);const E=gk(y,v,this.logger),x=v.audio?E[v.audio.id]:null,b=v.video?E[v.video.id]:null,D=Pc(b,1/0),L=Pc(x,1/0),I=Pc(b,0,!0),_=Pc(x,0,!0);let P,M=a,k=0;if(x&&(!b||!f&&L<D||f&&f.trackId===v.audio.id)?(S.trackId=v.audio.id,P=x,k=_-L):b&&(S.trackId=v.video.id,P=b,k=I-D),P){const B=P.timescale;M=P.start/B,S.timescale=B,f||(S.initPTS=P.start-a*B,this.initPTS=f={baseTime:S.initPTS,timescale:B,trackId:S.trackId})}(l||!f)&&(EN(f,M,a,k)||S.timescale!==f.timescale)&&(S.initPTS=M-a,f&&f.timescale===1&&this.logger.warn(`Adjusting initPTS @${a} from ${f.baseTime/f.timescale} to ${S.initPTS}`),this.initPTS=f={baseTime:S.initPTS,timescale:1});const F=t?M-f.baseTime/f.timescale:h;pk(v,y,f.baseTime/f.timescale);const R=F+k;k>0?this.lastEndTime=R:(this.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const $=!!v.audio,Q=!!v.video;let ft="";$&&(ft+="audio"),Q&&(ft+="video");const ct={data1:y,startPTS:F,startDTS:F,endPTS:R,endDTS:R,type:ft,hasAudio:$,hasVideo:Q,nb:1,dropped:0};g.audio=$&&!Q?ct:void 0,g.video=Q?ct:void 0;const it=b?.sampleCount;if(it){const B=b.keyFrameIndex,H=B!==-1;ct.nb=it,ct.dropped=B===0||this.isVideoContiguous?0:H?B:it,ct.independent=H,ct.firstKeyFrame=B,H&&b.keyFrameStart&&(ct.firstKeyFramePTS=b.keyFrameStart-f.baseTime/f.timescale),this.isVideoContiguous||(g.independent=H),this.isVideoContiguous||(this.isVideoContiguous=H),ct.dropped&&this.logger.warn(`fmp4 does not start with IDR: firstIDR ${B}/${it} dropped: ${ct.dropped} pts: ${ct.firstKeyFramePTS||"NA"}`)}return g.initSegment=S,g.id3=cR(n,a,f,f),s.samples.length&&(g.text=fR(s,a,f)),g}}function Pc(i,t,e=!1){return i?.start!==void 0?(i.start+(e?i.duration:0))/i.timescale:t}function EN(i,t,e,n){if(i===null)return!0;const s=Math.max(n,1),a=t-i.baseTime/i.timescale;return Math.abs(a-e)>s}function Cx(i,t,e){const n=i?.codec;return n&&n.length>4?n:t===se.AUDIO?n==="ec-3"||n==="ac-3"||n==="alac"?n:n==="fLaC"||n==="Opus"?vf(n,!1):(e.warn(`Unhandled audio codec "${n}" in mp4 MAP`),n||"mp4a"):(e.warn(`Unhandled video codec "${n}" in mp4 MAP`),n||"avc1")}let is;try{is=self.performance.now.bind(self.performance)}catch{is=Date.now}const Jc=[{demux:lN,remux:TN},{demux:Gs,remux:Zc},{demux:sN,remux:Zc},{demux:aN,remux:Zc}];Jc.splice(2,0,{demux:rN,remux:Zc});class _x{constructor(t,e,n,s,a,l){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=t,this.typeSupported=e,this.config=n,this.id=a,this.logger=l}configure(t){this.transmuxConfig=t,this.decrypter&&this.decrypter.reset()}push(t,e,n,s){const a=n.transmuxing;a.executeStart=is();let l=new Uint8Array(t);const{currentTransmuxState:u,transmuxConfig:d}=this;s&&(this.currentTransmuxState=s);const{contiguous:f,discontinuity:h,trackSwitch:g,accurateTimeOffset:y,timeOffset:S,initSegmentChange:v}=s||u,{audioCodec:E,videoCodec:x,defaultInitPts:b,duration:D,initSegmentData:L}=d,I=xN(l,e);if(I&&Ga(I.method)){const k=this.getDecrypter(),F=Zp(I.method);if(k.isSync()){let R=k.softwareDecrypt(l,I.key.buffer,I.iv.buffer,F);if(n.part>-1){const Q=k.flush();R=Q&&Q.buffer}if(!R)return a.executeEnd=is(),Km(n);l=new Uint8Array(R)}else return this.asyncResult=!0,this.decryptionPromise=k.webCryptoDecrypt(l,I.key.buffer,I.iv.buffer,F).then(R=>{const $=this.push(R,null,n);return this.decryptionPromise=null,$}),this.decryptionPromise}const _=this.needsProbing(h,g);if(_){const k=this.configureTransmuxer(l);if(k)return this.logger.warn(`[transmuxer] ${k.message}`),this.observer.emit(A.ERROR,A.ERROR,{type:vt.MEDIA_ERROR,details:z.FRAG_PARSING_ERROR,fatal:!1,error:k,reason:k.message}),a.executeEnd=is(),Km(n)}(h||g||v||_)&&this.resetInitSegment(L,E,x,D,e),(h||v||_)&&this.resetInitialTimestamp(b),f||this.resetContiguity();const P=this.transmux(l,I,S,y,n);this.asyncResult=Ul(P);const M=this.currentTransmuxState;return M.contiguous=!0,M.discontinuity=!1,M.trackSwitch=!1,a.executeEnd=is(),P}flush(t){const e=t.transmuxing;e.executeStart=is();const{decrypter:n,currentTransmuxState:s,decryptionPromise:a}=this;if(a)return this.asyncResult=!0,a.then(()=>this.flush(t));const l=[],{timeOffset:u}=s;if(n){const g=n.flush();g&&l.push(this.push(g.buffer,null,t))}const{demuxer:d,remuxer:f}=this;if(!d||!f){e.executeEnd=is();const g=[Km(t)];return this.asyncResult?Promise.resolve(g):g}const h=d.flush(u);return Ul(h)?(this.asyncResult=!0,h.then(g=>(this.flushRemux(l,g,t),l))):(this.flushRemux(l,h,t),this.asyncResult?Promise.resolve(l):l)}flushRemux(t,e,n){const{audioTrack:s,videoTrack:a,id3Track:l,textTrack:u}=e,{accurateTimeOffset:d,timeOffset:f}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===yt.MAIN?"level":"track"} ${n.level}`);const h=this.remuxer.remux(s,a,l,u,f,d,!0,this.id);t.push({remuxResult:h,chunkMeta:n}),n.transmuxing.executeEnd=is()}resetInitialTimestamp(t){const{demuxer:e,remuxer:n}=this;!e||!n||(e.resetTimeStamp(t),n.resetTimeStamp(t))}resetContiguity(){const{demuxer:t,remuxer:e}=this;!t||!e||(t.resetContiguity(),e.resetNextTimestamp())}resetInitSegment(t,e,n,s,a){const{demuxer:l,remuxer:u}=this;!l||!u||(l.resetInitSegment(t,e,n,s),u.resetInitSegment(t,e,n,a))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(t,e,n,s,a){let l;return e&&e.method==="SAMPLE-AES"?l=this.transmuxSampleAes(t,e,n,s,a):l=this.transmuxUnencrypted(t,n,s,a),l}transmuxUnencrypted(t,e,n,s){const{audioTrack:a,videoTrack:l,id3Track:u,textTrack:d}=this.demuxer.demux(t,e,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(a,l,u,d,e,n,!1,this.id),chunkMeta:s}}transmuxSampleAes(t,e,n,s,a){return this.demuxer.demuxSampleAes(t,e,n).then(l=>({remuxResult:this.remuxer.remux(l.audioTrack,l.videoTrack,l.id3Track,l.textTrack,n,s,!1,this.id),chunkMeta:a}))}configureTransmuxer(t){const{config:e,observer:n,typeSupported:s}=this;let a;for(let g=0,y=Jc.length;g<y;g++){var l;if((l=Jc[g].demux)!=null&&l.probe(t,this.logger)){a=Jc[g];break}}if(!a)return new Error("Failed to find demuxer by probing fragment data");const u=this.demuxer,d=this.remuxer,f=a.remux,h=a.demux;(!d||!(d instanceof f))&&(this.remuxer=new f(n,e,s,this.logger)),(!u||!(u instanceof h))&&(this.demuxer=new h(n,e,s,this.logger),this.probe=h.probe)}needsProbing(t,e){return!this.demuxer||!this.remuxer||t||e}getDecrypter(){let t=this.decrypter;return t||(t=this.decrypter=new Wp(this.config)),t}}function xN(i,t){let e=null;return i.byteLength>0&&t?.key!=null&&t.iv!==null&&t.method!=null&&(e=t),e}const Km=i=>({remuxResult:{},chunkMeta:i});function Ul(i){return"then"in i&&i.then instanceof Function}class bN{constructor(t,e,n,s,a){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=t,this.videoCodec=e,this.initSegmentData=n,this.duration=s,this.defaultInitPts=a||null}}class AN{constructor(t,e,n,s,a,l){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=t,this.contiguous=e,this.accurateTimeOffset=n,this.trackSwitch=s,this.timeOffset=a,this.initSegmentChange=l}}let Dx=0;class dR{constructor(t,e,n,s){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=Dx++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=d=>{const f=d.data,h=this.hls;if(!(!h||!(f!=null&&f.event)||f.instanceNo!==this.instanceNo))switch(f.event){case"init":{var g;const y=(g=this.workerContext)==null?void 0:g.objectURL;y&&self.URL.revokeObjectURL(y);break}case"transmuxComplete":{this.handleTransmuxComplete(f.data);break}case"flush":{this.onFlush(f.data);break}case"workerLog":{h.logger[f.data.logType]&&h.logger[f.data.logType](f.data.message);break}default:{f.data=f.data||{},f.data.frag=this.frag,f.data.part=this.part,f.data.id=this.id,h.trigger(f.event,f.data);break}}},this.onWorkerError=d=>{if(!this.hls)return;const f=new Error(`${d.message}  (${d.filename}:${d.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(A.ERROR,{type:vt.OTHER_ERROR,details:z.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:f})};const a=t.config;this.hls=t,this.id=e,this.useWorker=!!a.enableWorker,this.onTransmuxComplete=n,this.onFlush=s;const l=(d,f)=>{f=f||{},f.frag=this.frag||void 0,d===A.ERROR&&(f=f,f.parent=this.id,f.part=this.part,this.error=f.error),this.hls.trigger(d,f)};this.observer=new e0,this.observer.on(A.FRAG_DECRYPTED,l),this.observer.on(A.ERROR,l);const u=KE(a.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const d=this.hls.logger;if(a.workerPath||I2()){try{a.workerPath?(d.log(`loading Web Worker ${a.workerPath} for "${e}"`),this.workerContext=O2(a.workerPath)):(d.log(`injecting Web Worker for "${e}"`),this.workerContext=w2());const{worker:h}=this.workerContext;h.addEventListener("message",this.onWorkerMessage),h.addEventListener("error",this.onWorkerError),h.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:u,id:e,config:le(a)})}catch(h){d.warn(`Error setting up "${e}" Web Worker, fallback to inline`,h),this.terminateWorker(),this.error=null,this.transmuxer=new _x(this.observer,u,a,"",e,t.logger)}return}}this.transmuxer=new _x(this.observer,u,a,"",e,t.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const t=this.instanceNo;this.instanceNo=Dx++;const e=this.hls.config,n=KE(e.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:t,typeSupported:n,id:this.id,config:le(e)})}}terminateWorker(){if(this.workerContext){const{worker:t}=this.workerContext;this.workerContext=null,t.removeEventListener("message",this.onWorkerMessage),t.removeEventListener("error",this.onWorkerError),M2(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}const t=this.observer;t&&t.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(t,e,n,s,a,l,u,d,f,h){var g,y;f.transmuxing.start=self.performance.now();const{instanceNo:S,transmuxer:v}=this,E=l?l.start:a.start,x=a.decryptdata,b=this.frag,D=!(b&&a.cc===b.cc),L=!(b&&f.level===b.level),I=b?f.sn-b.sn:-1,_=this.part?f.part-this.part.index:-1,P=I===0&&f.id>1&&f.id===b?.stats.chunkCount,M=!L&&(I===1||I===0&&(_===1||P&&_<=0)),k=self.performance.now();(L||I||a.stats.parsing.start===0)&&(a.stats.parsing.start=k),l&&(_||!M)&&(l.stats.parsing.start=k);const F=!(b&&((g=a.initSegment)==null?void 0:g.url)===((y=b.initSegment)==null?void 0:y.url)),R=new AN(D,M,d,L,E,F);if(!M||D||F){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${a.type} sn: ${f.sn}${f.part>-1?" part: "+f.part:""} ${this.id===yt.MAIN?"level":"track"}: ${f.level} id: ${f.id}
        discontinuity: ${D}
        trackSwitch: ${L}
        contiguous: ${M}
        accurateTimeOffset: ${d}
        timeOffset: ${E}
        initSegmentChange: ${F}`);const $=new bN(n,s,e,u,h);this.configureTransmuxer($)}if(this.frag=a,this.part=l,this.workerContext)this.workerContext.worker.postMessage({instanceNo:S,cmd:"demux",data:t,decryptdata:x,chunkMeta:f,state:R},t instanceof ArrayBuffer?[t]:[]);else if(v){const $=v.push(t,x,f,R);Ul($)?$.then(Q=>{this.handleTransmuxComplete(Q)}).catch(Q=>{this.transmuxerError(Q,f,"transmuxer-interface push error")}):this.handleTransmuxComplete($)}}flush(t){t.transmuxing.start=self.performance.now();const{instanceNo:e,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:e,cmd:"flush",chunkMeta:t});else if(n){const s=n.flush(t);Ul(s)?s.then(a=>{this.handleFlushResult(a,t)}).catch(a=>{this.transmuxerError(a,t,"transmuxer-interface flush error")}):this.handleFlushResult(s,t)}}transmuxerError(t,e,n){this.hls&&(this.error=t,this.hls.trigger(A.ERROR,{type:vt.MEDIA_ERROR,details:z.FRAG_PARSING_ERROR,chunkMeta:e,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:t,err:t,reason:n}))}handleFlushResult(t,e){t.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(e)}configureTransmuxer(t){const{instanceNo:e,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:e,cmd:"configure",config:t}):n&&n.configure(t)}handleTransmuxComplete(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t)}}const Ix=100;class RN extends t0{constructor(t,e,n){super(t,e,n,"audio-stream-controller",yt.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:t}=this;t.on(A.LEVEL_LOADED,this.onLevelLoaded,this),t.on(A.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(A.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(A.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(A.BUFFER_RESET,this.onBufferReset,this),t.on(A.BUFFER_CREATED,this.onBufferCreated,this),t.on(A.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(A.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(A.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(A.FRAG_LOADING,this.onFragLoading,this),t.on(A.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:t}=this;t&&(super.unregisterListeners(),t.off(A.LEVEL_LOADED,this.onLevelLoaded,this),t.off(A.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(A.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(A.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(A.BUFFER_RESET,this.onBufferReset,this),t.off(A.BUFFER_CREATED,this.onBufferCreated,this),t.off(A.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(A.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(A.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(A.FRAG_LOADING,this.onFragLoading,this),t.off(A.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(t,{frag:e,id:n,initPTS:s,timescale:a}){if(n===yt.MAIN){const l=e.cc,u=this.fragCurrent;if(this.initPTS[l]={baseTime:s,timescale:a},this.log(`InitPTS for cc: ${l} found from main: ${s}/${a}`),this.mainAnchor=e,this.state===ot.WAITING_INIT_PTS){const d=this.waitingData;(!d&&!this.loadingParts||d&&d.frag.cc!==l)&&this.syncWithAnchor(e,d?.frag)}else!this.hls.hasEnoughToStart&&u&&u.cc!==l?(u.abortRequests(),this.syncWithAnchor(e,u)):this.state===ot.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(t,e){var n;const s=((n=this.mainFragLoading)==null?void 0:n.frag)||null;if(e&&s?.cc===e.cc)return;const a=(s||t).cc,l=this.getLevelDetails(),u=this.getLoadPosition(),d=O1(l,a,u);d&&(this.log(`Waiting fragment cc (${e?.cc}) cancelled because video is at cc ${t.cc}`),this.startFragRequested=!1,this.nextLoadPosition=d.start,this.resetLoadingState(),this.state===ot.IDLE&&this.doTickIdle())}startLoad(t,e){if(!this.levels){this.startPosition=t,this.state=ot.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(Ix),n>0&&t===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),t=n,this.state=ot.IDLE):this.state=ot.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=t+this.timelineOffset,this.startPosition=e?-1:t,this.tick()}doTick(){switch(this.state){case ot.IDLE:this.doTickIdle();break;case ot.WAITING_TRACK:{const{levels:e,trackId:n}=this,s=e?.[n],a=s?.details;if(a&&!this.waitForLive(s)){if(this.waitForCdnTuneIn(a))break;this.state=ot.WAITING_INIT_PTS}break}case ot.FRAG_LOADING_WAITING_RETRY:{var t;const e=performance.now(),n=this.retryDate;if(!n||e>=n||(t=this.media)!=null&&t.seeking){const{levels:s,trackId:a}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(s?.[a]||null),this.state=ot.IDLE}break}case ot.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:n,part:s,cache:a,complete:l}=e,u=this.mainAnchor;if(this.initPTS[n.cc]!==void 0){this.waitingData=null,this.state=ot.FRAG_LOADING;const d=a.flush().buffer,f={frag:n,part:s,payload:d,networkDetails:null};this._handleFragmentLoadProgress(f),l&&super._handleFragmentLoadComplete(f)}else u&&u.cc!==e.frag.cc&&this.syncWithAnchor(u,e.frag)}else this.state=ot.IDLE}}this.onTickEnd()}resetLoadingState(){const t=this.waitingData;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:t}=this;t!=null&&t.readyState&&(this.lastCurrentTime=t.currentTime)}doTickIdle(){var t;const{hls:e,levels:n,media:s,trackId:a}=this,l=e.config;if(!this.buffering||!s&&!this.primaryPrefetch&&(this.startFragRequested||!l.startFragPrefetch)||!(n!=null&&n[a]))return;const u=n[a],d=u.details;if(!d||this.waitForLive(u)||this.waitForCdnTuneIn(d)){this.state=ot.WAITING_TRACK,this.startFragRequested=!1;return}const f=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&f&&(this.bufferFlushed=!1,this.afterBufferFlushed(f,se.AUDIO,yt.AUDIO));const h=this.getFwdBufferInfo(f,yt.AUDIO);if(h===null)return;if(!this.switchingTrack&&this._streamEnded(h,d)){e.trigger(A.BUFFER_EOS,{type:"audio"}),this.state=ot.ENDED;return}const g=h.len,y=e.maxBufferLength,S=d.fragments,v=S[0].start,E=this.getLoadPosition(),x=this.flushing?E:h.end;if(this.switchingTrack&&s){const L=E;d.PTSKnown&&L<v&&(h.end>v||h.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),s.currentTime=v+.05)}if(g>=y&&!this.switchingTrack&&x<S[S.length-1].start)return;let b=this.getNextFragment(x,d);if(b&&this.isLoopLoading(b,x)&&(b=this.getNextFragmentLoopLoading(b,d,h,yt.MAIN,y)),!b){this.bufferFlushed=!0;return}let D=((t=this.mainFragLoading)==null?void 0:t.frag)||null;if(!this.audioOnly&&this.startFragRequested&&D&&He(b)&&!b.endList&&(!d.live||!this.loadingParts&&x<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(D)===ke.OK&&(this.mainFragLoading=D=null),D&&He(D))){if(b.start>D.end){const I=this.fragmentTracker.getFragAtPos(x,yt.MAIN);I&&I.end>D.end&&(D=I,this.mainFragLoading={frag:I,targetBufferTime:null})}if(b.start>D.end)return}this.loadFragment(b,u,x)}onMediaDetaching(t,e){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(t,e)}onAudioTracksUpdated(t,{audioTracks:e}){this.resetTransmuxer(),this.levels=e.map(n=>new Pl(n))}onAudioTrackSwitching(t,e){const n=!!e.url;this.trackId=e.id;const{fragCurrent:s}=this;s&&(s.abortRequests(),this.removeUnbufferedFrags(s.start)),this.resetLoadingState(),n?(this.switchingTrack=e,this.flushAudioIfNeeded(e),this.state!==ot.STOPPED&&(this.setInterval(Ix),this.state=ot.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=e,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(t,e){this.mainDetails=e.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(A.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(t,e){var n;const{levels:s}=this,{details:a,id:l,groupId:u,track:d}=e;if(!s){this.warn(`Audio tracks reset while loading track ${l} "${d.name}" of "${u}"`);return}const f=this.mainDetails;if(!f||a.endCC>f.endCC||f.expired){this.cachedTrackLoadedData=e,this.state!==ot.STOPPED&&(this.state=ot.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${l} "${d.name}" of "${u}" loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`);const h=s[l];let g=0;if(a.live||(n=h.details)!=null&&n.live){if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;if(h.details){var y;g=this.alignPlaylists(a,h.details,(y=this.levelLastLoaded)==null?void 0:y.details)}a.alignedSliding||(z1(a,f),a.alignedSliding||Af(a,f),g=a.fragmentStart)}h.details=a,this.levelLastLoaded=h,this.startFragRequested||this.setStartPosition(f,g),this.hls.trigger(A.AUDIO_TRACK_UPDATED,{details:a,id:l,groupId:e.groupId}),this.state===ot.WAITING_TRACK&&!this.waitForCdnTuneIn(a)&&(this.state=ot.IDLE),this.tick()}_handleFragmentLoadProgress(t){var e;const n=t.frag,{part:s,payload:a}=t,{config:l,trackId:u,levels:d}=this;if(!d){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const f=d[u];if(!f){this.warn("Audio track is undefined on fragment load progress");return}const h=f.details;if(!h){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const g=l.defaultAudioCodec||f.audioCodec||"mp4a.40.2";let y=this.transmuxer;y||(y=this.transmuxer=new dR(this.hls,yt.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const S=this.initPTS[n.cc],v=(e=n.initSegment)==null?void 0:e.data;if(S!==void 0){const x=s?s.index:-1,b=x!==-1,D=new Qp(n.level,n.sn,n.stats.chunkCount,a.byteLength,x,b);y.push(a,v,g,"",n,s,h.totalduration,!1,D,S)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${h.startSN} ,${h.endSN}],track ${u}`);const{cache:E}=this.waitingData=this.waitingData||{frag:n,part:s,cache:new Y1,complete:!1};E.push(new Uint8Array(a)),this.state!==ot.STOPPED&&(this.state=ot.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(t){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(t)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(t,e){this.bufferFlushed=this.flushing=!1;const n=e.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(t,e){!this.audioOnly&&e.frag.type===yt.MAIN&&He(e.frag)&&(this.mainFragLoading=e,this.state===ot.IDLE&&this.tick())}onFragBuffered(t,e){const{frag:n,part:s}=e;if(n.type!==yt.AUDIO){!this.audioOnly&&n.type===yt.MAIN&&!n.elementaryStreams.video&&!n.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${s?" p: "+s.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(He(n)){this.fragPrevious=n;const a=this.switchingTrack;a&&(this.bufferedTrack=a,this.switchingTrack=null,this.hls.trigger(A.AUDIO_TRACK_SWITCHED,zt({},a)))}this.fragBufferedComplete(n,s),this.media&&this.tick()}onError(t,e){var n;if(e.fatal){this.state=ot.ERROR;return}switch(e.details){case z.FRAG_GAP:case z.FRAG_PARSING_ERROR:case z.FRAG_DECRYPT_ERROR:case z.FRAG_LOAD_ERROR:case z.FRAG_LOAD_TIMEOUT:case z.KEY_LOAD_ERROR:case z.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(yt.AUDIO,e);break;case z.AUDIO_TRACK_LOAD_ERROR:case z.AUDIO_TRACK_LOAD_TIMEOUT:case z.LEVEL_PARSING_ERROR:!e.levelRetry&&this.state===ot.WAITING_TRACK&&((n=e.context)==null?void 0:n.type)===Mt.AUDIO_TRACK&&(this.state=ot.IDLE);break;case z.BUFFER_ADD_CODEC_ERROR:case z.BUFFER_APPEND_ERROR:if(e.parent!=="audio")return;this.resetLoadingState();break;case z.BUFFER_FULL_ERROR:if(e.parent!=="audio")return;this.reduceLengthAndFlushBuffer(e)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case z.INTERNAL_EXCEPTION:this.recoverWorkerError(e);break}}onBufferFlushing(t,{type:e}){e!==se.VIDEO&&(this.flushing=!0)}onBufferFlushed(t,{type:e}){if(e!==se.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===ot.ENDED&&(this.state=ot.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,e,yt.AUDIO),this.tick())}}_handleTransmuxComplete(t){var e;const n="audio",{hls:s}=this,{remuxResult:a,chunkMeta:l}=t,u=this.getCurrentContext(l);if(!u){this.resetWhenMissingContext(l);return}const{frag:d,part:f,level:h}=u,{details:g}=h,{audio:y,text:S,id3:v,initSegment:E}=a;if(this.fragContextChanged(d)||!g){this.fragmentTracker.removeFragment(d);return}if(this.state=ot.PARSING,this.switchingTrack&&y&&this.completeAudioSwitch(this.switchingTrack),E!=null&&E.tracks){const x=d.initSegment||d;this._bufferInitSegment(h,E.tracks,x,l),s.trigger(A.FRAG_PARSING_INIT_SEGMENT,{frag:x,id:n,tracks:E.tracks})}if(y){const{startPTS:x,endPTS:b,startDTS:D,endDTS:L}=y;f&&(f.elementaryStreams[se.AUDIO]={startPTS:x,endPTS:b,startDTS:D,endDTS:L}),d.setElementaryStreamInfo(se.AUDIO,x,b,D,L),this.bufferFragmentData(y,d,f,l)}if(v!=null&&(e=v.samples)!=null&&e.length){const x=Wt({id:n,frag:d,details:g},v);s.trigger(A.FRAG_PARSING_METADATA,x)}if(S){const x=Wt({id:n,frag:d,details:g},S);s.trigger(A.FRAG_PARSING_USERDATA,x)}}_bufferInitSegment(t,e,n,s){if(this.state!==ot.PARSING||(e.video&&delete e.video,e.audiovideo&&delete e.audiovideo,!e.audio))return;const a=e.audio;a.id=yt.AUDIO;const l=t.audioCodec;this.log(`Init audio buffer, container:${a.container}, codecs[level/parsed]=[${l}/${a.codec}]`),l&&l.split(",").length===1&&(a.levelCodec=l),this.hls.trigger(A.BUFFER_CODECS,e);const u=a.initSegment;if(u!=null&&u.byteLength){const d={type:"audio",frag:n,part:null,chunkMeta:s,parent:n.type,data:u};this.hls.trigger(A.BUFFER_APPENDING,d)}this.tickImmediate()}loadFragment(t,e,n){const s=this.fragmentTracker.getState(t);if(this.switchingTrack||s===ke.NOT_LOADED||s===ke.PARTIAL){var a;if(!He(t))this._loadInitSegment(t,e);else if((a=e.details)!=null&&a.live&&!this.initPTS[t.cc]){this.log(`Waiting for video PTS in continuity counter ${t.cc} of live stream before loading audio fragment ${t.sn} of level ${this.trackId}`),this.state=ot.WAITING_INIT_PTS;const l=this.mainDetails;l&&l.fragmentStart!==e.details.fragmentStart&&Af(e.details,l)}else super.loadFragment(t,e,n)}else this.clearTrackerIfNeeded(t)}flushAudioIfNeeded(t){if(this.media&&this.bufferedTrack){const{name:e,lang:n,assocLang:s,characteristics:a,audioCodec:l,channels:u}=this.bufferedTrack;Lr({name:e,lang:n,assocLang:s,characteristics:a,audioCodec:l,channels:u},t,Sr)||(Tf(t.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=t)}}completeAudioSwitch(t){const{hls:e}=this;this.flushAudioIfNeeded(t),this.bufferedTrack=t,this.switchingTrack=null,e.trigger(A.AUDIO_TRACK_SWITCHED,zt({},t))}}class l0 extends hs{constructor(t,e){super(e,t.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=t}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(t,e,n){const s=e?.renditionReports;if(s){let a=-1;for(let l=0;l<s.length;l++){const u=s[l];let d;try{d=new self.URL(u.URI,e.url).href}catch(f){this.warn(`Could not construct new URL for Rendition Report: ${f}`),d=u.URI||""}if(d===t){a=l;break}else d===t.substring(0,d.length)&&(a=l)}if(a!==-1){const l=s[a],u=parseInt(l["LAST-MSN"])||e?.lastPartSn;let d=parseInt(l["LAST-PART"])||e?.lastPartIndex;if(this.hls.config.lowLatencyMode){const h=Math.min(e.age-e.partTarget,e.targetduration);d>=0&&h>e.partTarget&&(d+=1)}const f=n&&YE(n);return new qE(u,d>=0?d:void 0,f)}}}loadPlaylist(t){this.clearTimer()}loadingPlaylist(t,e){this.clearTimer()}shouldLoadPlaylist(t){return this.canLoad&&!!t&&!!t.url&&(!t.details||t.details.live)}getUrlWithDirectives(t,e){if(e)try{return e.addDirectives(t)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return t}playlistLoaded(t,e,n){const{details:s,stats:a}=e,l=self.performance.now(),u=a.loading.first?Math.max(0,l-a.loading.first):0;s.advancedDateTime=Date.now()-u;const d=this.hls.config.timelineOffset;if(d!==s.appliedTimelineOffset){const h=Math.max(d||0,0);s.appliedTimelineOffset=h,s.fragments.forEach(g=>{g.start=g.playlistOffset+h})}if(s.live||n!=null&&n.live){const h="levelInfo"in e?e.levelInfo:e.track;if(s.reloaded(n),n&&s.fragments.length>0){T2(n,s);const D=s.playlistParsingError;if(D){this.warn(D);const L=this.hls;if(!L.config.ignorePlaylistParsingErrors){var f;const{networkDetails:I}=e;L.trigger(A.ERROR,{type:vt.NETWORK_ERROR,details:z.LEVEL_PARSING_ERROR,fatal:!1,url:s.url,error:D,reason:D.message,level:e.level||void 0,parent:(f=s.fragments[0])==null?void 0:f.type,networkDetails:I,stats:a});return}s.playlistParsingError=null}}s.requestScheduled===-1&&(s.requestScheduled=a.loading.start);const g=this.hls.mainForwardBufferInfo,y=g?g.end-g.len:0,S=(s.edge-y)*1e3,v=V1(s,S);if(s.requestScheduled+v<l?s.requestScheduled=l:s.requestScheduled+=v,this.log(`live playlist ${t} ${s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:s.updated?"UPDATED":"MISSED"}`),!this.canLoad||!s.live)return;let E,x,b;if(s.canBlockReload&&s.endSN&&s.advanced){const D=this.hls.config.lowLatencyMode,L=s.lastPartSn,I=s.endSN,_=s.lastPartIndex,P=_!==-1,M=L===I;P?M?(x=I+1,b=D?0:_):(x=L,b=D?_+1:s.maxPartIndex):x=I+1;const k=s.age,F=k+s.ageHeader;let R=Math.min(F-s.partTarget,s.targetduration*1.5);if(R>0){if(F>s.targetduration*3)this.log(`Playlist last advanced ${k.toFixed(2)}s ago. Omitting segment and part directives.`),x=void 0,b=void 0;else if(n!=null&&n.tuneInGoal&&F-s.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${R} with playlist age: ${s.age}`),R=0;else{const $=Math.floor(R/s.targetduration);if(x+=$,b!==void 0){const Q=Math.round(R%s.targetduration/s.partTarget);b+=Q}this.log(`CDN Tune-in age: ${s.ageHeader}s last advanced ${k.toFixed(2)}s goal: ${R} skip sn ${$} to part ${b}`)}s.tuneInGoal=R}if(E=this.getDeliveryDirectives(s,e.deliveryDirectives,x,b),D||!M){s.requestScheduled=l,this.loadingPlaylist(h,E);return}}else(s.canBlockReload||s.canSkipUntil)&&(E=this.getDeliveryDirectives(s,e.deliveryDirectives,x,b));E&&x!==void 0&&s.canBlockReload&&(s.requestScheduled=a.loading.first+Math.max(v-u*2,v/2)),this.scheduleLoading(h,E,s)}else this.clearTimer()}scheduleLoading(t,e,n){const s=n||t.details;if(!s){this.loadingPlaylist(t,e);return}const a=self.performance.now(),l=s.requestScheduled;if(a>=l){this.loadingPlaylist(t,e);return}const u=l-a;this.log(`reload live playlist ${t.name||t.bitrate+"bps"} in ${Math.round(u)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(t,e),u)}getDeliveryDirectives(t,e,n,s){let a=YE(t);return e!=null&&e.skip&&t.deltaUpdateFailed&&(n=e.msn,s=e.part,a=Wc.No),new qE(n,s,a)}checkRetry(t){const e=t.details,n=Ef(t),s=t.errorAction,{action:a,retryCount:l=0,retryConfig:u}=s||{},d=!!s&&!!u&&(a===sn.RetryRequest||!s.resolved&&a===sn.SendAlternateToPenaltyBox);if(d){var f;if(l>=u.maxNumRetry)return!1;if(n&&(f=t.context)!=null&&f.deliveryDirectives)this.warn(`Retrying playlist loading ${l+1}/${u.maxNumRetry} after "${e}" without delivery-directives`),this.loadPlaylist();else{const h=Xp(u,l);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),h),this.warn(`Retrying playlist loading ${l+1}/${u.maxNumRetry} after "${e}" in ${h}ms`)}t.levelRetry=!0,s.resolved=!0}return d}}function hR(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;e++)if(!$l(i[e].attrs,t[e].attrs))return!1;return!0}function $l(i,t,e){const n=i["STABLE-RENDITION-ID"];return n&&!e?n===t["STABLE-RENDITION-ID"]:!(e||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(s=>i[s]!==t[s])}function Yg(i,t){return t.label.toLowerCase()===i.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(i.lang||"").toLowerCase())}class LN extends l0{constructor(t){super(t,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:t}=this;t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.MANIFEST_PARSED,this.onManifestParsed,this),t.on(A.LEVEL_LOADING,this.onLevelLoading,this),t.on(A.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(A.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(A.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.MANIFEST_PARSED,this.onManifestParsed,this),t.off(A.LEVEL_LOADING,this.onLevelLoading,this),t.off(A.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(A.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(A.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(t,e){this.tracks=e.audioTracks||[]}onAudioTrackLoaded(t,e){const{id:n,groupId:s,details:a}=e,l=this.tracksInGroup[n];if(!l||l.groupId!==s){this.warn(`Audio track with id:${n} and group:${s} not found in active group ${l?.groupId}`);return}const u=l.details;l.details=e.details,this.log(`Audio track ${n} "${l.name}" lang:${l.lang} group:${s} loaded [${a.startSN}-${a.endSN}]`),n===this.trackId&&this.playlistLoaded(n,e,u)}onLevelLoading(t,e){this.switchLevel(e.level)}onLevelSwitching(t,e){this.switchLevel(e.level)}switchLevel(t){const e=this.hls.levels[t];if(!e)return;const n=e.audioGroups||null,s=this.groupIds;let a=this.currentTrack;if(!n||s?.length!==n?.length||n!=null&&n.some(u=>s?.indexOf(u)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const u=this.tracks.filter(y=>!n||n.indexOf(y.groupId)!==-1);if(u.length)this.selectDefaultTrack&&!u.some(y=>y.default)&&(this.selectDefaultTrack=!1),u.forEach((y,S)=>{y.id=S});else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=u;const d=this.hls.config.audioPreference;if(!a&&d){const y=_i(d,u,Sr);if(y>-1)a=u[y];else{const S=_i(d,this.tracks);a=this.tracks[S]}}let f=this.findTrackId(a);f===-1&&a&&(f=this.findTrackId(null));const h={audioTracks:u};this.log(`Updating audio tracks, ${u.length} track(s) found in group(s): ${n?.join(",")}`),this.hls.trigger(A.AUDIO_TRACKS_UPDATED,h);const g=this.trackId;if(f!==-1&&g===-1)this.setAudioTrack(f);else if(u.length&&g===-1){var l;const y=new Error(`No audio track selected for current audio group-ID(s): ${(l=this.groupIds)==null?void 0:l.join(",")} track count: ${u.length}`);this.warn(y.message),this.hls.trigger(A.ERROR,{type:vt.MEDIA_ERROR,details:z.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:y})}}}onError(t,e){e.fatal||!e.context||e.context.type===Mt.AUDIO_TRACK&&e.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(e.context.groupId)!==-1)&&this.checkRetry(e)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(t){this.selectDefaultTrack=!1,this.setAudioTrack(t)}setAudioOption(t){const e=this.hls;if(e.config.audioPreference=t,t){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const s=this.currentTrack;if(s&&Lr(t,s,Sr))return s;const a=_i(t,this.tracksInGroup,Sr);if(a>-1){const l=this.tracksInGroup[a];return this.setAudioTrack(a),l}else if(s){let l=e.loadLevel;l===-1&&(l=e.firstAutoLevel);const u=$k(t,e.levels,n,l,Sr);if(u===-1)return null;e.nextLoadLevel=u}if(t.channels||t.audioCodec){const l=_i(t,n);if(l>-1)return n[l]}}}return null}setAudioTrack(t){const e=this.tracksInGroup;if(t<0||t>=e.length){this.warn(`Invalid audio track id: ${t}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,s=e[t],a=s.details&&!s.details.live;if(t===this.trackId&&s===n&&a||(this.log(`Switching to audio-track ${t} "${s.name}" lang:${s.lang} group:${s.groupId} channels:${s.channels}`),this.trackId=t,this.currentTrack=s,this.hls.trigger(A.AUDIO_TRACK_SWITCHING,zt({},s)),a))return;const l=this.switchParams(s.url,n?.details,s.details);this.loadPlaylist(l)}findTrackId(t){const e=this.tracksInGroup;for(let n=0;n<e.length;n++){const s=e[n];if(!(this.selectDefaultTrack&&!s.default)&&(!t||Lr(t,s,Sr)))return n}if(t){const{name:n,lang:s,assocLang:a,characteristics:l,audioCodec:u,channels:d}=t;for(let f=0;f<e.length;f++){const h=e[f];if(Lr({name:n,lang:s,assocLang:a,characteristics:l,audioCodec:u,channels:d},h,Sr))return f}for(let f=0;f<e.length;f++){const h=e[f];if($l(t.attrs,h.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return f}for(let f=0;f<e.length;f++){const h=e[f];if($l(t.attrs,h.attrs,["LANGUAGE"]))return f}}return-1}loadPlaylist(t){super.loadPlaylist();const e=this.currentTrack;this.shouldLoadPlaylist(e)&&Tf(e.url,this.hls)&&this.scheduleLoading(e,t)}loadingPlaylist(t,e){super.loadingPlaylist(t,e);const n=t.id,s=t.groupId,a=this.getUrlWithDirectives(t.url,e),l=t.details,u=l?.age;this.log(`Loading audio-track ${n} "${t.name}" lang:${t.lang} group:${s}${e?.msn!==void 0?" at sn "+e.msn+" part "+e.part:""}${u&&l.live?" age "+u.toFixed(1)+(l.type&&" "+l.type||""):""} ${a}`),this.hls.trigger(A.AUDIO_TRACK_LOADING,{url:a,id:n,groupId:s,deliveryDirectives:e||null,track:t})}}class CN{constructor(t){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=t}destroy(){this.tracks=this.queues=null}append(t,e,n){if(this.queues===null||this.tracks===null)return;const s=this.queues[e];s.push(t),s.length===1&&!n&&this.executeNext(e)}appendBlocker(t){return new Promise(e=>{const n={label:"async-blocker",execute:e,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,t)})}prependBlocker(t){return new Promise(e=>{if(this.queues){const n={label:"async-blocker-prepend",execute:e,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[t].unshift(n)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(t=>{var e;const n=(e=t[0])==null?void 0:e.label;(n==="async-blocker"||n==="async-blocker-prepend")&&(t[0].execute(),t.splice(0,1))})}unblockAudio(t){if(this.queues===null)return;this.queues.audio[0]===t&&this.shiftAndExecuteNext("audio")}executeNext(t){if(this.queues===null||this.tracks===null)return;const e=this.queues[t];if(e.length){const s=e[0];try{s.execute()}catch(a){var n;if(s.onError(a),this.queues===null||this.tracks===null)return;const l=(n=this.tracks[t])==null?void 0:n.buffer;l!=null&&l.updating||this.shiftAndExecuteNext(t)}}}shiftAndExecuteNext(t){this.queues!==null&&(this.queues[t].shift(),this.executeNext(t))}current(t){var e;return((e=this.queues)==null?void 0:e[t][0])||null}toString(){const{queues:t,tracks:e}=this;return t===null||e===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(t){var e,n;return(e=this.queues)!=null&&e[t]||(n=this.tracks)!=null&&n[t]?`${t}: (${this.listSbInfo(t)}) ${this.listOps(t)}`:""}listSbInfo(t){var e;const n=(e=this.tracks)==null?void 0:e[t],s=n?.buffer;return s?`SourceBuffer${s.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(t){var e;return((e=this.queues)==null?void 0:e[t].map(n=>n.label).join(", "))||""}}const wx=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,mR="HlsJsTrackRemovedError";class _N extends Error{constructor(t){super(t),this.name=mR}}class DN extends hs{constructor(t,e){super("buffer-controller",t.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=n=>{var s;this.hls&&((s=this.mediaSource)==null?void 0:s.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=n=>{const{media:s,mediaSource:a}=this;n&&this.log("Media source opened"),!(!s||!a)&&(a.removeEventListener("sourceopen",this._onMediaSourceOpen),s.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(A.MEDIA_ATTACHED,{media:s,mediaSource:a}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:s}=this;n!==s&&this.error(`Media element src was set while attaching MediaSource (${s} > ${n})`)},this.hls=t,this.fragmentTracker=e,this.appendSource=sk(js(t.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:t}=this;t.on(A.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.MANIFEST_PARSED,this.onManifestParsed,this),t.on(A.BUFFER_RESET,this.onBufferReset,this),t.on(A.BUFFER_APPENDING,this.onBufferAppending,this),t.on(A.BUFFER_CODECS,this.onBufferCodecs,this),t.on(A.BUFFER_EOS,this.onBufferEos,this),t.on(A.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(A.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(A.FRAG_PARSED,this.onFragParsed,this),t.on(A.FRAG_CHANGED,this.onFragChanged,this),t.on(A.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t.off(A.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.MANIFEST_PARSED,this.onManifestParsed,this),t.off(A.BUFFER_RESET,this.onBufferReset,this),t.off(A.BUFFER_APPENDING,this.onBufferAppending,this),t.off(A.BUFFER_CODECS,this.onBufferCodecs,this),t.off(A.BUFFER_EOS,this.onBufferEos,this),t.off(A.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(A.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(A.FRAG_PARSED,this.onFragParsed,this),t.off(A.FRAG_CHANGED,this.onFragChanged,this),t.off(A.ERROR,this.onError,this)}transferMedia(){const{media:t,mediaSource:e}=this;if(!t)return null;const n={};if(this.operationQueue){const a=this.isUpdating();a||this.operationQueue.removeBlockers();const l=this.isQueued();(a||l)&&this.warn(`Transfering MediaSource with${l?" operations in queue":""}${a?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const s=this.transferData;return!this.sourceBufferCount&&s&&s.mediaSource===e?Wt(n,s.tracks):this.sourceBuffers.forEach(a=>{const[l]=a;l&&(n[l]=Wt({},this.tracks[l]),this.removeBuffer(l)),a[0]=a[1]=null}),{media:t,mediaSource:e,tracks:n}}initTracks(){const t={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=t,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(t,e){var n;let s=2;(e.audio&&!e.video||!e.altAudio)&&(s=1),this.bufferCodecEventsTotal=s,this.log(`${s} bufferCodec event(s) expected.`),(n=this.transferData)!=null&&n.mediaSource&&this.sourceBufferCount&&s&&this.bufferCreated()}onMediaAttaching(t,e){const n=this.media=e.media,s=js(this.appendSource);if(this.transferData=this.overrides=void 0,n&&s){const a=!!e.mediaSource;(a||e.overrides)&&(this.transferData=e,this.overrides=e.overrides);const l=this.mediaSource=e.mediaSource||new s;if(this.assignMediaSource(l),a)this._objectUrl=n.src,this.attachTransferred();else{const u=this._objectUrl=self.URL.createObjectURL(l);if(this.appendSource)try{n.removeAttribute("src");const d=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||d&&l instanceof d,Ox(n),IN(n,u),n.load()}catch{n.src=u}else n.src=u}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(t){var e,n;this.log(`${((e=this.transferData)==null?void 0:e.mediaSource)===t?"transferred":"created"} media source: ${(n=t.constructor)==null?void 0:n.name}`),t.addEventListener("sourceopen",this._onMediaSourceOpen),t.addEventListener("sourceended",this._onMediaSourceEnded),t.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.addEventListener("startstreaming",this._onStartStreaming),t.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const t=this.media,e=this.transferData;if(!e||!t)return;const n=this.tracks,s=e.tracks,a=s?Object.keys(s):null,l=a?a.length:0,u=()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()};if(s&&a&&l){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${le(n,(d,f)=>d==="initSegment"?void 0:f)};
transfer tracks: ${le(s,(d,f)=>d==="initSegment"?void 0:f)}}`),!m1(s,n)){e.mediaSource=null,e.tracks=void 0;const d=t.currentTime,f=this.details,h=Math.max(d,f?.fragments[0].start||0);if(h-d>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${d} -> ${h}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(s)}"->"${Object.keys(n)}") start time: ${h} currentTime: ${d}`),this.onMediaDetaching(A.MEDIA_DETACHING,{}),this.onMediaAttaching(A.MEDIA_ATTACHING,e),t.currentTime=h;return}this.transferData=void 0,a.forEach(d=>{const f=d,h=s[f];if(h){const g=h.buffer;if(g){const y=this.fragmentTracker,S=h.id;if(y.hasFragments(S)||y.hasParts(S)){const x=Lt.getBuffered(g);y.detectEvictedFragments(f,x,S,null,!0)}const v=zm(f),E=[f,g];this.sourceBuffers[v]=E,g.updating&&this.operationQueue&&this.operationQueue.prependBlocker(f),this.trackSourceBuffer(f,h)}}}),u(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),u()}get mediaSourceOpenOrEnded(){var t;const e=(t=this.mediaSource)==null?void 0:t.readyState;return e==="open"||e==="ended"}onMediaDetaching(t,e){const n=!!e.transferMedia;this.transferData=this.overrides=void 0;const{media:s,mediaSource:a,_objectUrl:l}=this;if(a){if(this.log(`media source ${n?"transferring":"detaching"}`),n)this.sourceBuffers.forEach(([u])=>{u&&this.removeBuffer(u)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const u=a.readyState==="open";try{const d=a.sourceBuffers;for(let f=d.length;f--;)u&&d[f].abort(),a.removeSourceBuffer(d[f]);u&&a.endOfStream()}catch(d){this.warn(`onMediaDetaching: ${d.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}a.removeEventListener("sourceopen",this._onMediaSourceOpen),a.removeEventListener("sourceended",this._onMediaSourceEnded),a.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(a.removeEventListener("startstreaming",this._onStartStreaming),a.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}s&&(s.removeEventListener("emptied",this._onMediaEmptied),n||(l&&self.URL.revokeObjectURL(l),this.mediaSrc===l?(s.removeAttribute("src"),this.appendSource&&Ox(s),s.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(A.MEDIA_DETACHED,e)}onBufferReset(){this.sourceBuffers.forEach(([t])=>{t&&this.resetBuffer(t)}),this.initTracks()}resetBuffer(t){var e;const n=(e=this.tracks[t])==null?void 0:e.buffer;if(this.removeBuffer(t),n)try{var s;(s=this.mediaSource)!=null&&s.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(a){this.warn(`onBufferReset ${t}`,a)}delete this.tracks[t]}removeBuffer(t){this.removeBufferListeners(t),this.sourceBuffers[zm(t)]=[null,null];const e=this.tracks[t];e&&(e.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new CN(this.tracks)}onBufferCodecs(t,e){const n=this.tracks,s=Object.keys(e);this.log(`BUFFER_CODECS: "${s}" (current SB count ${this.sourceBufferCount})`);const a="audiovideo"in e&&(n.audio||n.video)||n.audiovideo&&("audio"in e||"video"in e),l=!a&&this.sourceBufferCount&&this.media&&s.some(u=>!n[u]);if(a||l){this.warn(`Unsupported transition between "${Object.keys(n)}" and "${s}" SourceBuffers`);return}s.forEach(u=>{var d,f,h;const g=e[u],{id:y,codec:S,levelCodec:v,container:E,metadata:x,supplemental:b}=g;let D=n[u];const L=(d=this.transferData)==null||(f=d.tracks)==null?void 0:f[u],I=L!=null&&L.buffer?L:D,_=I?.pendingCodec||I?.codec,P=I?.levelCodec;D||(D=n[u]={buffer:void 0,listeners:[],codec:S,supplemental:b,container:E,levelCodec:v,metadata:x,id:y});const M=Xc(_,P),k=M?.replace(wx,"$1");let F=Xc(S,v);const R=(h=F)==null?void 0:h.replace(wx,"$1");F&&M&&k!==R&&(u.slice(0,5)==="audio"&&(F=vf(F,this.appendSource)),this.log(`switching codec ${_} to ${F}`),F!==(D.pendingCodec||D.codec)&&(D.pendingCodec=F),D.container=E,this.appendChangeType(u,E,F))}),(this.tracksReady||this.sourceBufferCount)&&(e.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&this.mediaSourceOpenOrEnded&&this.checkPendingTracks()}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((t,e)=>{const n=this.tracks[e];return t[e]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},t},{})}appendChangeType(t,e,n){const s=`${e};codecs=${n}`,a={label:`change-type=${s}`,execute:()=>{const l=this.tracks[t];if(l){const u=l.buffer;u!=null&&u.changeType&&(this.log(`changing ${t} sourceBuffer type to ${s}`),u.changeType(s),l.codec=n,l.container=e)}this.shiftAndExecuteNext(t)},onStart:()=>{},onComplete:()=>{},onError:l=>{this.warn(`Failed to change ${t} SourceBuffer type`,l)}};this.append(a,t,this.isPending(this.tracks[t]))}blockAudio(t){var e;const n=t.start,s=n+t.duration*.05;if(((e=this.fragmentTracker.getAppendedFrag(n,yt.MAIN))==null?void 0:e.gap)===!0)return;const l={label:"block-audio",execute:()=>{var u;const d=this.tracks.video;(this.lastVideoAppendEnd>s||d!=null&&d.buffer&&Lt.isBuffered(d.buffer,s)||((u=this.fragmentTracker.getAppendedFrag(s,yt.MAIN))==null?void 0:u.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:u=>{this.warn("Error executing block-audio operation",u)}};this.blockedAudioAppend={op:l,frag:t},this.append(l,"audio",!0)}unblockAudio(){const{blockedAudioAppend:t,operationQueue:e}=this;t&&e&&(this.blockedAudioAppend=null,e.unblockAudio(t.op))}onBufferAppending(t,e){const{tracks:n}=this,{data:s,type:a,parent:l,frag:u,part:d,chunkMeta:f}=e,h=f.buffering[a],g=u.sn,y=self.performance.now();h.start=y;const S=u.stats.buffering,v=d?d.stats.buffering:null;S.start===0&&(S.start=y),v&&v.start===0&&(v.start=y);const E=n.audio;let x=!1;a==="audio"&&E?.container==="audio/mpeg"&&(x=!this.lastMpegAudioChunk||f.id===1||this.lastMpegAudioChunk.sn!==f.sn,this.lastMpegAudioChunk=f);const b=this.tracks.video,D=b?.buffer;if(D&&g!=="initSegment"){const _=d||u,P=this.blockedAudioAppend;if(a==="audio"&&l!=="main"&&!this.blockedAudioAppend){const k=_.start+_.duration*.05,F=D.buffered,R=this.currentOp("video");!F.length&&!R?this.blockAudio(_):!R&&!Lt.isBuffered(D,k)&&this.lastVideoAppendEnd<k&&this.blockAudio(_)}else if(a==="video"){const M=_.end;if(P){const k=P.frag.start;(M>k||M<this.lastVideoAppendEnd||Lt.isBuffered(D,k))&&this.unblockAudio()}this.lastVideoAppendEnd=M}}const L=(d||u).start,I={label:`append-${a}`,execute:()=>{if(h.executeStart=self.performance.now(),x){const _=this.tracks[a];if(_){const P=_.buffer;if(P){const M=L-P.timestampOffset;Math.abs(M)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${L} (delta: ${M}) sn: ${g})`),P.timestampOffset=L)}}}this.appendExecutor(s,a)},onStart:()=>{},onComplete:()=>{const _=self.performance.now();h.executeEnd=h.end=_,S.first===0&&(S.first=_),v&&v.first===0&&(v.first=_);const P={};this.sourceBuffers.forEach(([M,k])=>{M&&(P[M]=Lt.getBuffered(k))}),this.appendErrors[a]=0,a==="audio"||a==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(A.BUFFER_APPENDED,{type:a,frag:u,part:d,chunkMeta:f,parent:u.type,timeRanges:P})},onError:_=>{var P;const M={type:vt.MEDIA_ERROR,parent:u.type,details:z.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:u,part:d,chunkMeta:f,error:_,err:_,fatal:!1},k=(P=this.media)==null?void 0:P.error;if(_.code===DOMException.QUOTA_EXCEEDED_ERR)M.details=z.BUFFER_FULL_ERROR;else if(_.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!k)M.errorAction=kl(!0);else if(_.name===mR&&this.sourceBufferCount===0)M.errorAction=kl(!0);else{const F=++this.appendErrors[a];this.warn(`Failed ${F}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer (${k||"no media error"})`),(F>=this.hls.config.appendErrorMaxRetry||k)&&(M.fatal=!0)}this.hls.trigger(A.ERROR,M)}};this.append(I,a,this.isPending(this.tracks[a]))}getFlushOp(t,e,n){return this.log(`queuing "${t}" remove ${e}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(t,e,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(A.BUFFER_FLUSHED,{type:t})},onError:s=>{this.warn(`Failed to remove ${e}-${n} from "${t}" SourceBuffer`,s)}}}onBufferFlushing(t,e){const{type:n,startOffset:s,endOffset:a}=e;n?this.append(this.getFlushOp(n,s,a),n):this.sourceBuffers.forEach(([l])=>{l&&this.append(this.getFlushOp(l,s,a),l)})}onFragParsed(t,e){const{frag:n,part:s}=e,a=[],l=s?s.elementaryStreams:n.elementaryStreams;l[se.AUDIOVIDEO]?a.push("audiovideo"):(l[se.AUDIO]&&a.push("audio"),l[se.VIDEO]&&a.push("video"));const u=()=>{const d=self.performance.now();n.stats.buffering.end=d,s&&(s.stats.buffering.end=d);const f=s?s.stats:n.stats;this.hls.trigger(A.FRAG_BUFFERED,{frag:n,part:s,stats:f,id:n.type})};a.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(u,a).catch(d=>{this.warn(`Fragment buffered callback ${d}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(t,e){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([t])=>{var e,n;return t&&(!((e=this.tracks[t])!=null&&e.ended)||((n=this.tracks[t])==null?void 0:n.ending))})}onBufferEos(t,e){var n;this.sourceBuffers.forEach(([l])=>{if(l){const u=this.tracks[l];(!e.type||e.type===l)&&(u.ending=!0,u.ended||(u.ended=!0,this.log(`${l} buffer reached EOS`)))}});const s=((n=this.overrides)==null?void 0:n.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([l])=>{var u;return l&&!((u=this.tracks[l])!=null&&u.ended)})&&(s?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:l}=this;if(!l||l.readyState!=="open"){l&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${l.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),l.endOfStream(),this.hls.trigger(A.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(A.BUFFERED_TO_END,void 0)))}tracksEnded(){this.sourceBuffers.forEach(([t])=>{if(t!==null){const e=this.tracks[t];e&&(e.ending=!1)}})}onLevelUpdated(t,{details:e}){e.fragments.length&&(this.details=e,this.updateDuration())}updateDuration(){const t=this.getDurationAndRange();t&&this.blockUntilOpen(()=>this.updateMediaSource(t))}onError(t,e){if(e.details===z.BUFFER_APPEND_ERROR&&e.frag){var n;const s=(n=e.errorAction)==null?void 0:n.nextAutoLevel;mt(s)&&s!==e.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:t,details:e,media:n}=this;if(!n||e===null||!this.sourceBufferCount)return;const s=t.config,a=n.currentTime,l=e.levelTargetDuration,u=e.live&&s.liveBackBufferLength!==null?s.liveBackBufferLength:s.backBufferLength;if(mt(u)&&u>=0){const d=Math.max(u,l),f=Math.floor(a/l)*l-d;this.flushBackBuffer(a,l,f)}if(mt(s.frontBufferFlushThreshold)&&s.frontBufferFlushThreshold>0){const d=Math.max(s.maxBufferLength,s.frontBufferFlushThreshold),f=Math.max(d,l),h=Math.floor(a/l)*l+f;this.flushFrontBuffer(a,l,h)}}flushBackBuffer(t,e,n){this.sourceBuffers.forEach(([s,a])=>{if(a){const u=Lt.getBuffered(a);if(u.length>0&&n>u.start(0)){var l;this.hls.trigger(A.BACK_BUFFER_REACHED,{bufferEnd:n});const d=this.tracks[s];if((l=this.details)!=null&&l.live)this.hls.trigger(A.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(d!=null&&d.ended){this.log(`Cannot flush ${s} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(A.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:s})}}})}flushFrontBuffer(t,e,n){this.sourceBuffers.forEach(([s,a])=>{if(a){const l=Lt.getBuffered(a),u=l.length;if(u<2)return;const d=l.start(u-1),f=l.end(u-1);if(n>d||t>=d&&t<=f)return;this.hls.trigger(A.BUFFER_FLUSHING,{startOffset:d,endOffset:1/0,type:s})}})}getDurationAndRange(){var t;const{details:e,mediaSource:n}=this;if(!e||!this.media||n?.readyState!=="open")return null;const s=e.edge;if(e.live&&this.hls.config.liveDurationInfinity){if(e.fragments.length&&e.live&&n.setLiveSeekableRange){const f=Math.max(0,e.fragmentStart),h=Math.max(f,s);return{duration:1/0,start:f,end:h}}return{duration:1/0}}const a=(t=this.overrides)==null?void 0:t.duration;if(a)return mt(a)?{duration:a}:null;const l=this.media.duration,u=mt(n.duration)?n.duration:0;return s>u&&s>l||!mt(l)?{duration:s}:null}updateMediaSource({duration:t,start:e,end:n}){const s=this.mediaSource;!this.media||!s||s.readyState!=="open"||(s.duration!==t&&(mt(t)&&this.log(`Updating MediaSource duration to ${t.toFixed(3)}`),s.duration=t),e!==void 0&&n!==void 0&&(this.log(`MediaSource duration is set to ${s.duration}. Setting seekable range to ${e}-${n}.`),s.setLiveSeekableRange(e,n)))}get tracksReady(){const t=this.pendingTrackCount;return t>0&&(t>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:t,pendingTrackCount:e,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${e} codec events expected: ${t}) ${le(n)}`),this.tracksReady){var s;const a=(s=this.transferData)==null?void 0:s.tracks;a&&Object.keys(a).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const t={};this.sourceBuffers.forEach(([e,n])=>{if(e){const s=this.tracks[e];t[e]={buffer:n,container:s.container,codec:s.codec,supplemental:s.supplemental,levelCodec:s.levelCodec,id:s.id,metadata:s.metadata}}}),this.hls.trigger(A.BUFFER_CREATED,{tracks:t}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([e])=>{this.executeNext(e)})}else{const t=new Error("could not create source buffer for media codec(s)");this.hls.trigger(A.ERROR,{type:vt.MEDIA_ERROR,details:z.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:t,reason:t.message})}}createSourceBuffers(){const{tracks:t,sourceBuffers:e,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const a in t){const l=a,u=t[l];if(this.isPending(u)){const d=this.getTrackCodec(u,l),f=`${u.container};codecs=${d}`;u.codec=d,this.log(`creating sourceBuffer(${f})${this.currentOp(l)?" Queued":""} ${le(u)}`);try{const h=n.addSourceBuffer(f),g=zm(l),y=[l,h];e[g]=y,u.buffer=h}catch(h){var s;this.error(`error while trying to add sourceBuffer: ${h.message}`),this.shiftAndExecuteNext(l),(s=this.operationQueue)==null||s.removeBlockers(),delete this.tracks[l],this.hls.trigger(A.ERROR,{type:vt.MEDIA_ERROR,details:z.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:h,sourceBufferName:l,mimeType:f,parent:u.id});return}this.trackSourceBuffer(l,u)}}this.bufferCreated()}getTrackCodec(t,e){const n=t.supplemental;let s=t.codec;n&&(e==="video"||e==="audiovideo")&&Ug(n,"video")&&(s=Lk(s,n));const a=Xc(s,t.levelCodec);return a?e.slice(0,5)==="audio"?vf(a,this.appendSource):a:""}trackSourceBuffer(t,e){const n=e.buffer;if(!n)return;const s=this.getTrackCodec(e,t);this.tracks[t]={buffer:n,codec:s,container:e.container,levelCodec:e.levelCodec,supplemental:e.supplemental,metadata:e.metadata,id:e.id,listeners:[]},this.removeBufferListeners(t),this.addBufferListener(t,"updatestart",this.onSBUpdateStart),this.addBufferListener(t,"updateend",this.onSBUpdateEnd),this.addBufferListener(t,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(t,"bufferedchange",(a,l)=>{const u=l.removedRanges;u!=null&&u.length&&this.hls.trigger(A.BUFFER_FLUSHED,{type:a})})}get mediaSrc(){var t,e;const n=((t=this.media)==null||(e=t.querySelector)==null?void 0:e.call(t,"source"))||this.media;return n?.src}onSBUpdateStart(t){const e=this.currentOp(t);e&&e.onStart()}onSBUpdateEnd(t){var e;if(((e=this.mediaSource)==null?void 0:e.readyState)==="closed"){this.resetBuffer(t);return}const n=this.currentOp(t);n&&(n.onComplete(),this.shiftAndExecuteNext(t))}onSBUpdateError(t,e){var n;const s=new Error(`${t} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${s}`,e),this.hls.trigger(A.ERROR,{type:vt.MEDIA_ERROR,details:z.BUFFER_APPENDING_ERROR,sourceBufferName:t,error:s,fatal:!1});const a=this.currentOp(t);a&&a.onError(s)}removeExecutor(t,e,n){const{media:s,mediaSource:a}=this,l=this.tracks[t],u=l?.buffer;if(!s||!a||!u){this.warn(`Attempting to remove from the ${t} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(t);return}const d=mt(s.duration)?s.duration:1/0,f=mt(a.duration)?a.duration:1/0,h=Math.max(0,e),g=Math.min(n,d,f);g>h&&(!l.ending||l.ended)?(l.ended=!1,this.log(`Removing [${h},${g}] from the ${t} SourceBuffer`),u.remove(h,g)):this.shiftAndExecuteNext(t)}appendExecutor(t,e){const n=this.tracks[e],s=n?.buffer;if(!s)throw new _N(`Attempting to append to the ${e} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,s.appendBuffer(t)}blockUntilOpen(t){if(this.isUpdating()||this.isQueued())this.blockBuffers(t).catch(e=>{this.warn(`SourceBuffer blocked callback ${e}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{t()}catch(e){this.warn(`Callback run without blocking ${this.operationQueue} ${e}`)}}isUpdating(){return this.sourceBuffers.some(([t,e])=>t&&e.updating)}isQueued(){return this.sourceBuffers.some(([t])=>t&&!!this.currentOp(t))}isPending(t){return!!t&&!t.buffer}blockBuffers(t,e=this.sourceBufferTypes){if(!e.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(t);const{operationQueue:n}=this,s=e.map(l=>this.appendBlocker(l));return e.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(s).then(l=>{n===this.operationQueue&&(t(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(t){t.forEach(e=>{var n;const s=(n=this.tracks[e])==null?void 0:n.buffer;!s||s.updating||this.shiftAndExecuteNext(e)})}append(t,e,n){this.operationQueue&&this.operationQueue.append(t,e,n)}appendBlocker(t){if(this.operationQueue)return this.operationQueue.appendBlocker(t)}currentOp(t){return this.operationQueue?this.operationQueue.current(t):null}executeNext(t){t&&this.operationQueue&&this.operationQueue.executeNext(t)}shiftAndExecuteNext(t){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(t)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((t,e)=>t+(this.isPending(this.tracks[e])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((t,[e])=>t+(e?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([t])=>t).filter(t=>!!t)}addBufferListener(t,e,n){const s=this.tracks[t];if(!s)return;const a=s.buffer;if(!a)return;const l=n.bind(this,t);s.listeners.push({event:e,listener:l}),a.addEventListener(e,l)}removeBufferListeners(t){const e=this.tracks[t];if(!e)return;const n=e.buffer;n&&(e.listeners.forEach(s=>{n.removeEventListener(s.event,s.listener)}),e.listeners.length=0)}}function Ox(i){const t=i.querySelectorAll("source");[].slice.call(t).forEach(e=>{i.removeChild(e)})}function IN(i,t){const e=self.document.createElement("source");e.type="video/mp4",e.src=t,i.appendChild(e)}function zm(i){return i==="audio"?1:0}class u0{constructor(t){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=t,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(t){this.streamController=t}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:t}=this;t.on(A.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.on(A.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(A.MANIFEST_PARSED,this.onManifestParsed,this),t.on(A.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(A.BUFFER_CODECS,this.onBufferCodecs,this),t.on(A.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:t}=this;t.off(A.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.off(A.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(A.MANIFEST_PARSED,this.onManifestParsed,this),t.off(A.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(A.BUFFER_CODECS,this.onBufferCodecs,this),t.off(A.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(t,e){const n=this.hls.levels[e.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(t,e){this.media=e.media instanceof HTMLVideoElement?e.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(t,e){const n=this.hls;this.restrictedLevels=[],this.firstLevel=e.firstLevel,n.config.capLevelToPlayerSize&&e.video&&this.startCapping()}onLevelsUpdated(t,e){this.timer&&mt(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(t,e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const t=this.hls.levels;if(t.length){const e=this.hls,n=this.getMaxLevel(t.length-1);n!==this.autoLevelCapping&&e.logger.log(`Setting autoLevelCapping to ${n}: ${t[n].height}p@${t[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),e.autoLevelCapping=n,e.autoLevelEnabled&&e.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}}getMaxLevel(t){const e=this.hls.levels;if(!e.length)return-1;const n=e.filter((s,a)=>this.isLevelAllowed(s)&&a<=t);return this.clientRect=null,u0.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const t=this.media,e={width:0,height:0};if(t){const n=t.getBoundingClientRect();e.width=n.width,e.height=n.height,!e.width&&!e.height&&(e.width=n.right-n.left||t.width||0,e.height=n.bottom-n.top||t.height||0)}return this.clientRect=e,e}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let t=1;if(!this.hls.config.ignoreDevicePixelRatio)try{t=self.devicePixelRatio}catch{}return Math.min(t,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(t){return!this.restrictedLevels.some(n=>t.bitrate===n.bitrate&&t.width===n.width&&t.height===n.height)}static getMaxLevelByMediaSize(t,e,n){if(!(t!=null&&t.length))return-1;const s=(u,d)=>d?u.width!==d.width||u.height!==d.height:!0;let a=t.length-1;const l=Math.max(e,n);for(let u=0;u<t.length;u+=1){const d=t[u];if((d.width>=l||d.height>=l)&&s(d,t[u+1])){a=u;break}}return a}}const wN={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},mn=wN,ON={HLS:"h"},MN=ON,PN="CMCD-Object",kN="CMCD-Request",NN="CMCD-Session",BN="CMCD-Status",hl={OBJECT:PN,REQUEST:kN,SESSION:NN,STATUS:BN},FN={[hl.OBJECT]:["br","d","ot","tb"],[hl.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[hl.SESSION]:["cid","pr","sf","sid","st","v"],[hl.STATUS]:["bs","rtp"]};class Xa{constructor(t,e){Array.isArray(t)&&(t=t.map(n=>n instanceof Xa?n:new Xa(n))),this.value=t,this.params=e}}const UN="Dict";function $N(i){return Array.isArray(i)?JSON.stringify(i):i instanceof Map?"Map{}":i instanceof Set?"Set{}":typeof i=="object"?JSON.stringify(i):String(i)}function VN(i,t,e,n){return new Error(`failed to ${i} "${$N(t)}" as ${e}`,{cause:n})}function Pi(i,t,e){return VN("serialize",i,t,e)}class gR{constructor(t){this.description=t}}const Mx="Bare Item",GN="Boolean";function HN(i){if(typeof i!="boolean")throw Pi(i,GN);return i?"?1":"?0"}function jN(i){return btoa(String.fromCharCode(...i))}const KN="Byte Sequence";function zN(i){if(ArrayBuffer.isView(i)===!1)throw Pi(i,KN);return`:${jN(i)}:`}const YN="Integer";function qN(i){return i<-999999999999999||999999999999999<i}function pR(i){if(qN(i))throw Pi(i,YN);return i.toString()}function XN(i){return`@${pR(i.getTime()/1e3)}`}function yR(i,t){if(i<0)return-yR(-i,t);const e=Math.pow(10,t);if(Math.abs(i*e%1-.5)<Number.EPSILON){const s=Math.floor(i*e);return(s%2===0?s:s+1)/e}else return Math.round(i*e)/e}const WN="Decimal";function QN(i){const t=yR(i,3);if(Math.floor(Math.abs(t)).toString().length>12)throw Pi(i,WN);const e=t.toString();return e.includes(".")?e:`${e}.0`}const ZN="String",JN=/[\x00-\x1f\x7f]+/;function tB(i){if(JN.test(i))throw Pi(i,ZN);return`"${i.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function eB(i){return i.description||i.toString().slice(7,-1)}const nB="Token";function Px(i){const t=eB(i);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t)===!1)throw Pi(t,nB);return t}function qg(i){switch(typeof i){case"number":if(!mt(i))throw Pi(i,Mx);return Number.isInteger(i)?pR(i):QN(i);case"string":return tB(i);case"symbol":return Px(i);case"boolean":return HN(i);case"object":if(i instanceof Date)return XN(i);if(i instanceof Uint8Array)return zN(i);if(i instanceof gR)return Px(i);default:throw Pi(i,Mx)}}const iB="Key";function Xg(i){if(/^[a-z*][a-z0-9\-_.*]*$/.test(i)===!1)throw Pi(i,iB);return i}function c0(i){return i==null?"":Object.entries(i).map(([t,e])=>e===!0?`;${Xg(t)}`:`;${Xg(t)}=${qg(e)}`).join("")}function vR(i){return i instanceof Xa?`${qg(i.value)}${c0(i.params)}`:qg(i)}function sB(i){return`(${i.value.map(vR).join(" ")})${c0(i.params)}`}function rB(i,t={whitespace:!0}){if(typeof i!="object")throw Pi(i,UN);const e=i instanceof Map?i.entries():Object.entries(i),n=t?.whitespace?" ":"";return Array.from(e).map(([s,a])=>{a instanceof Xa||(a=new Xa(a));let l=Xg(s);return a.value===!0?l+=c0(a.params):(l+="=",Array.isArray(a.value)?l+=sB(a):l+=vR(a)),l}).join(`,${n}`)}function aB(i,t){return rB(i,t)}function oB(i){return i==="ot"||i==="sf"||i==="st"}function lB(i){return typeof i=="number"?mt(i):i!=null&&i!==""&&i!==!1}function uB(i,t){const e=new URL(i),n=new URL(t);if(e.origin!==n.origin)return i;const s=e.pathname.split("/").slice(1),a=n.pathname.split("/").slice(1,-1);for(;s[0]===a[0];)s.shift(),a.shift();for(;a.length;)a.shift(),s.unshift("..");return s.join("/")}const tf=i=>Math.round(i),cB=(i,t)=>(t?.baseUrl&&(i=uB(i,t.baseUrl)),encodeURIComponent(i)),kc=i=>tf(i/100)*100,fB={br:tf,d:tf,bl:kc,dl:kc,mtp:kc,nor:cB,rtp:kc,tb:tf};function dB(i,t){const e={};if(i==null||typeof i!="object")return e;const n=Object.keys(i).sort(),s=Wt({},fB,t?.formatters),a=t?.filter;return n.forEach(l=>{if(a?.(l))return;let u=i[l];const d=s[l];d&&(u=d(u,t)),!(l==="v"&&u===1)&&(l=="pr"&&u===1||lB(u)&&(oB(l)&&typeof u=="string"&&(u=new gR(u)),e[l]=u))}),e}function SR(i,t={}){return i?aB(dB(i,t),Wt({whitespace:!1},t)):""}function hB(i,t={}){const e={};if(!i)return e;const n=Object.entries(i),s=Object.entries(FN).concat(Object.entries(t?.customHeaderMap||{})),a=n.reduce((l,u)=>{var d,f;const[h,g]=u,y=((d=s.find(S=>S[1].includes(h)))===null||d===void 0?void 0:d[0])||hl.REQUEST;return(f=l[y])!==null&&f!==void 0||(l[y]={}),l[y][h]=g,l},{});return Object.entries(a).reduce((l,[u,d])=>(l[u]=SR(d,t),l),e)}function mB(i,t,e){return Wt(i,hB(t,e))}const gB="CMCD";function pB(i,t={}){if(!i)return"";const e=SR(i,t);return`${gB}=${encodeURIComponent(e)}`}const kx=/CMCD=[^&#]+/;function yB(i,t,e){const n=pB(t,e);if(!n)return i;if(kx.test(i))return i.replace(kx,n);const s=i.includes("?")?"&":"?";return`${i}${s}${n}`}class vB{constructor(t){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=s=>{try{this.apply(s,{ot:mn.MANIFEST,su:!this.initialized})}catch(a){this.hls.logger.warn("Could not generate manifest CMCD data.",a)}},this.applyFragmentData=s=>{try{const{frag:a,part:l}=s,u=this.hls.levels[a.level],d=this.getObjectType(a),f={d:(l||a).duration*1e3,ot:d};(d===mn.VIDEO||d===mn.AUDIO||d==mn.MUXED)&&(f.br=u.bitrate/1e3,f.tb=this.getTopBandwidth(d)/1e3,f.bl=this.getBufferLength(d));const h=l?this.getNextPart(l):this.getNextFrag(a);h!=null&&h.url&&h.url!==a.url&&(f.nor=h.url),this.apply(s,f)}catch(a){this.hls.logger.warn("Could not generate segment CMCD data.",a)}},this.hls=t;const e=this.config=t.config,{cmcd:n}=e;n!=null&&(e.pLoader=this.createPlaylistLoader(),e.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||t.sessionId,this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const t=this.hls;t.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(A.MEDIA_DETACHED,this.onMediaDetached,this),t.on(A.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const t=this.hls;t.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(A.MEDIA_DETACHED,this.onMediaDetached,this),t.off(A.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(t,e){this.media=e.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(t,e){var n,s;this.audioBuffer=(n=e.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(s=e.tracks.video)==null?void 0:s.buffer}createData(){var t;return{v:1,sf:MN.HLS,sid:this.sid,cid:this.cid,pr:(t=this.media)==null?void 0:t.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(t,e={}){Wt(e,this.createData());const n=e.ot===mn.INIT||e.ot===mn.VIDEO||e.ot===mn.MUXED;this.starved&&n&&(e.bs=!0,e.su=!0,this.starved=!1),e.su==null&&(e.su=this.buffering);const{includeKeys:s}=this;s&&(e=Object.keys(e).reduce((l,u)=>(s.includes(u)&&(l[u]=e[u]),l),{}));const a={baseUrl:t.url};this.useHeaders?(t.headers||(t.headers={}),mB(t.headers,e,a)):t.url=yB(t.url,e,a)}getNextFrag(t){var e;const n=(e=this.hls.levels[t.level])==null?void 0:e.details;if(n){const s=t.sn-n.startSN;return n.fragments[s+1]}}getNextPart(t){var e,n;const{index:s,fragment:a}=t,l=(e=this.hls.levels[a.level])==null||(n=e.details)==null?void 0:n.partList;if(l){const{sn:u}=a;for(let d=l.length-1;d>=0;d--){const f=l[d];if(f.index===s&&f.fragment.sn===u)return l[d+1]}}}getObjectType(t){const{type:e}=t;if(e==="subtitle")return mn.TIMED_TEXT;if(t.sn==="initSegment")return mn.INIT;if(e==="audio")return mn.AUDIO;if(e==="main")return this.hls.audioTracks.length?mn.VIDEO:mn.MUXED}getTopBandwidth(t){let e=0,n;const s=this.hls;if(t===mn.AUDIO)n=s.audioTracks;else{const a=s.maxAutoLevel,l=a>-1?a+1:s.levels.length;n=s.levels.slice(0,l)}return n.forEach(a=>{a.bitrate>e&&(e=a.bitrate)}),e>0?e:NaN}getBufferLength(t){const e=this.media,n=t===mn.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!e?NaN:Lt.bufferInfo(n,e.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:t}=this.config,e=this.applyPlaylistData,n=t||this.config.loader;return class{constructor(a){this.loader=void 0,this.loader=new n(a)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(a,l,u){e(a),this.loader.load(a,l,u)}}}createFragmentLoader(){const{fLoader:t}=this.config,e=this.applyFragmentData,n=t||this.config.loader;return class{constructor(a){this.loader=void 0,this.loader=new n(a)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(a,l,u){e(a),this.loader.load(a,l,u)}}}}const SB=3e5;class TB extends hs{constructor(t){super("content-steering",t.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=t,this.registerListeners()}registerListeners(){const t=this.hls;t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(A.MANIFEST_PARSED,this.onManifestParsed,this),t.on(A.ERROR,this.onError,this)}unregisterListeners(){const t=this.hls;t&&(t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(A.MANIFEST_PARSED,this.onManifestParsed,this),t.off(A.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((t,e)=>(t.indexOf(e.pathwayId)===-1&&t.push(e.pathwayId),t),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(t){this.updatePathwayPriority(t)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const t=this.timeToLoad*1e3-(performance.now()-this.updated);if(t>0){this.scheduleRefresh(this.uri,t);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(t){const e=this.levels;e&&(this.levels=e.filter(n=>n!==t))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(t,e){const{contentSteering:n}=e;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(t,e){this.audioTracks=e.audioTracks,this.subtitleTracks=e.subtitleTracks}onError(t,e){const{errorAction:n}=e;if(n?.action===sn.SendAlternateToPenaltyBox&&n.flags===oi.MoveAllAlternatesMatchingHost){const s=this.levels;let a=this._pathwayPriority,l=this.pathwayId;if(e.context){const{groupId:u,pathwayId:d,type:f}=e.context;u&&s?l=this.getPathwayForGroupId(u,f,l):d&&(l=d)}l in this.penalizedPathways||(this.penalizedPathways[l]=performance.now()),!a&&s&&(a=this.pathways()),a&&a.length>1&&(this.updatePathwayPriority(a),n.resolved=this.pathwayId!==l),n.resolved||this.warn(`Could not resolve ${e.details} ("${e.error.message}") with content-steering for Pathway: ${l} levels: ${s&&s.length} priorities: ${le(a)} penalized: ${le(this.penalizedPathways)}`)}}filterParsedLevels(t){this.levels=t;let e=this.getLevelsForPathway(this.pathwayId);if(e.length===0){const n=t[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),e=this.getLevelsForPathway(n),this.pathwayId=n}return e.length!==t.length&&this.log(`Found ${e.length}/${t.length} levels in Pathway "${this.pathwayId}"`),e}getLevelsForPathway(t){return this.levels===null?[]:this.levels.filter(e=>t===e.pathwayId)}updatePathwayPriority(t){this._pathwayPriority=t;let e;const n=this.penalizedPathways,s=performance.now();Object.keys(n).forEach(a=>{s-n[a]>SB&&delete n[a]});for(let a=0;a<t.length;a++){const l=t[a];if(l in n)continue;if(l===this.pathwayId)return;const u=this.hls.nextLoadLevel,d=this.hls.levels[u];if(e=this.getLevelsForPathway(l),e.length>0){this.log(`Setting Pathway to "${l}"`),this.pathwayId=l,j1(e),this.hls.trigger(A.LEVELS_UPDATED,{levels:e});const f=this.hls.levels[u];d&&f&&this.levels&&(f.attrs["STABLE-VARIANT-ID"]!==d.attrs["STABLE-VARIANT-ID"]&&f.bitrate!==d.bitrate&&this.log(`Unstable Pathways change from bitrate ${d.bitrate} to ${f.bitrate}`),this.hls.nextLoadLevel=u);break}}}getPathwayForGroupId(t,e,n){const s=this.getLevelsForPathway(n).concat(this.levels||[]);for(let a=0;a<s.length;a++)if(e===Mt.AUDIO_TRACK&&s[a].hasAudioGroup(t)||e===Mt.SUBTITLE_TRACK&&s[a].hasSubtitleGroup(t))return s[a].pathwayId;return n}clonePathways(t){const e=this.levels;if(!e)return;const n={},s={};t.forEach(a=>{const{ID:l,"BASE-ID":u,"URI-REPLACEMENT":d}=a;if(e.some(h=>h.pathwayId===l))return;const f=this.getLevelsForPathway(u).map(h=>{const g=new fe(h.attrs);g["PATHWAY-ID"]=l;const y=g.AUDIO&&`${g.AUDIO}_clone_${l}`,S=g.SUBTITLES&&`${g.SUBTITLES}_clone_${l}`;y&&(n[g.AUDIO]=y,g.AUDIO=y),S&&(s[g.SUBTITLES]=S,g.SUBTITLES=S);const v=TR(h.uri,g["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",d),E=new Pl({attrs:g,audioCodec:h.audioCodec,bitrate:h.bitrate,height:h.height,name:h.name,url:v,videoCodec:h.videoCodec,width:h.width});if(h.audioGroups)for(let x=1;x<h.audioGroups.length;x++)E.addGroupId("audio",`${h.audioGroups[x]}_clone_${l}`);if(h.subtitleGroups)for(let x=1;x<h.subtitleGroups.length;x++)E.addGroupId("text",`${h.subtitleGroups[x]}_clone_${l}`);return E});e.push(...f),Nx(this.audioTracks,n,d,l),Nx(this.subtitleTracks,s,d,l)})}loadSteeringManifest(t){const e=this.hls.config,n=e.loader;this.loader&&this.loader.destroy(),this.loader=new n(e);let s;try{s=new self.URL(t)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${t}`);return}if(s.protocol!=="data:"){const h=(this.hls.bandwidthEstimate||e.abrEwmaDefaultEstimate)|0;s.searchParams.set("_HLS_pathway",this.pathwayId),s.searchParams.set("_HLS_throughput",""+h)}const a={responseType:"json",url:s.href},l=e.steeringManifestLoadPolicy.default,u=l.errorRetry||l.timeoutRetry||{},d={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:u.maxNumRetry||0,retryDelay:u.retryDelayMs||0,maxRetryDelay:u.maxRetryDelayMs||0},f={onSuccess:(h,g,y,S)=>{this.log(`Loaded steering manifest: "${s}"`);const v=h.data;if(v?.VERSION!==1){this.log(`Steering VERSION ${v.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=v.TTL;const{"RELOAD-URI":E,"PATHWAY-CLONES":x,"PATHWAY-PRIORITY":b}=v;if(E)try{this.uri=new self.URL(E,s).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${E}`);return}this.scheduleRefresh(this.uri||y.url),x&&this.clonePathways(x);const D={steeringManifest:v,url:s.toString()};this.hls.trigger(A.STEERING_MANIFEST_LOADED,D),b&&this.updatePathwayPriority(b)},onError:(h,g,y,S)=>{if(this.log(`Error loading steering manifest: ${h.code} ${h.text} (${g.url})`),this.stopLoad(),h.code===410){this.enabled=!1,this.log(`Steering manifest ${g.url} no longer available`);return}let v=this.timeToLoad*1e3;if(h.code===429){const E=this.loader;if(typeof E?.getResponseHeader=="function"){const x=E.getResponseHeader("Retry-After");x&&(v=parseFloat(x)*1e3)}this.log(`Steering manifest ${g.url} rate limited`);return}this.scheduleRefresh(this.uri||g.url,v)},onTimeout:(h,g,y)=>{this.log(`Timeout loading steering manifest (${g.url})`),this.scheduleRefresh(this.uri||g.url)}};this.log(`Requesting steering manifest: ${s}`),this.loader.load(a,d,f)}scheduleRefresh(t,e=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const s=(n=this.hls)==null?void 0:n.media;if(s&&!s.ended){this.loadSteeringManifest(t);return}this.scheduleRefresh(t,this.timeToLoad*1e3)},e)}}function Nx(i,t,e,n){i&&Object.keys(t).forEach(s=>{const a=i.filter(l=>l.groupId===s).map(l=>{const u=Wt({},l);return u.details=void 0,u.attrs=new fe(u.attrs),u.url=u.attrs.URI=TR(l.url,l.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",e),u.groupId=u.attrs["GROUP-ID"]=t[s],u.attrs["PATHWAY-ID"]=n,u});i.push(...a)})}function TR(i,t,e,n){const{HOST:s,PARAMS:a,[e]:l}=n;let u;t&&(u=l?.[t],u&&(i=u));const d=new self.URL(i);return s&&!u&&(d.host=s),a&&Object.keys(a).sort().forEach(f=>{f&&d.searchParams.set(f,a[f])}),d.href}function In(i,t,e){Qn(i,t,e),i.addEventListener(t,e)}function Qn(i,t,e){i.removeEventListener(t,e)}class Ha extends hs{constructor(t){super("eme",t.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=Ha.CDMCleanupPromise?[Ha.CDMCleanupPromise]:[],this.onMediaEncrypted=e=>{const{initDataType:n,initData:s}=e,a=`"${e.type}" event: init data type: "${n}"`;if(this.debug(a),s!==null){if(!this.keyFormatPromise){let l=Object.keys(this.keySystemAccessPromises);l.length||(l=dl(this.config));const u=l.map(Ic).filter(d=>!!d);this.keyFormatPromise=this.getKeyFormatPromise(u)}this.keyFormatPromise.then(l=>{const u=Qc(l);let d,f;if(n==="sinf"){if(u!==Yt.FAIRPLAY){this.warn(`Ignoring unexpected "${e.type}" event with init data type: "${n}" for selected key-system ${u}`);return}const v=Pe(new Uint8Array(s));try{const E=Jp(JSON.parse(v).sinf),x=E1(E);if(!x)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");d=new Uint8Array(x.subarray(8,24)),f=Yt.FAIRPLAY}catch(E){this.warn(`${a} Failed to parse sinf: ${E}`);return}}else{if(u!==Yt.WIDEVINE&&u!==Yt.PLAYREADY){this.warn(`Ignoring unexpected "${e.type}" event with init data type: "${n}" for selected key-system ${u}`);return}const v=xk(s),E=v.filter(b=>!!b.systemId&&Fm(b.systemId)===u);E.length>1&&this.warn(`${a} Using first of ${E.length} pssh found for selected key-system ${u}`);const x=E[0];if(!x){v.length===0||v.some(b=>!b.systemId)?this.warn(`${a} contains incomplete or invalid pssh data`):this.log(`ignoring ${a} for ${v.map(b=>Fm(b.systemId)).join(",")} pssh data in favor of playlist keys`);return}if(f=Fm(x.systemId),x.version===0&&x.data)if(f===Yt.WIDEVINE){const b=x.data.length-22;d=new Uint8Array(x.data.subarray(b,b+16))}else f===Yt.PLAYREADY&&(d=B1(x.data))}if(!f||!d)return;const h=Ei.hexDump(d),{keyIdToKeySessionPromise:g,mediaKeySessions:y}=this;let S=g[h];for(let v=0;v<y.length;v++){const E=y[v],x=E.decryptdata;if(!x.keyId)continue;const b=Ei.hexDump(x.keyId);if(h===b||x.uri.replace(/-/g,"").indexOf(h)!==-1){if(S=g[b],x.pssh)break;delete g[b],x.pssh=new Uint8Array(s),x.keyId=d,S=g[h]=S.then(()=>this.generateRequestWithPreferredKeySession(E,n,s,"encrypted-event-key-match")),S.catch(D=>this.handleError(D));break}}if(!S){if(f!==u){this.log(`Ignoring "${e.type}" event with ${f} init data for selected key-system ${u}`);return}S=g[h]=this.getKeySystemSelectionPromise([f]).then(({keySystem:v,mediaKeys:E})=>{var x;this.throwIfDestroyed();const b=new Nl("ISO-23001-7",h,(x=Ic(v))!=null?x:"");return b.pssh=new Uint8Array(s),b.keyId=d,this.attemptSetMediaKeys(v,E).then(()=>{this.throwIfDestroyed();const D=this.createMediaKeySessionContext({decryptdata:b,keySystem:v,mediaKeys:E});return this.generateRequestWithPreferredKeySession(D,n,s,"encrypted-event-no-match")})}),S.catch(v=>this.handleError(v))}})}},this.onWaitingForKey=e=>{this.log(`"${e.type}" event`)},this.hls=t,this.config=t.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const t=this.config;t.requestMediaKeySystemAccessFunc=null,t.licenseXhrSetup=t.licenseResponseCallback=void 0,t.drmSystems=t.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(A.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(A.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(A.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(A.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(A.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(A.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(A.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(A.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(t){const{drmSystems:e,widevineLicenseUrl:n}=this.config,s=e[t];if(s)return s.licenseUrl;if(t===Yt.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(t){const e=this.getLicenseServerUrl(t);if(e===void 0)throw new Error(`no license server URL configured for key-system "${t}"`);return e}getServerCertificateUrl(t){const{drmSystems:e}=this.config,n=e[t];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${t}"]`)}attemptKeySystemAccess(t){const e=this.hls.levels,n=(l,u,d)=>!!l&&d.indexOf(l)===u,s=e.map(l=>l.audioCodec).filter(n),a=e.map(l=>l.videoCodec).filter(n);return s.length+a.length===0&&a.push("avc1.42e01e"),new Promise((l,u)=>{const d=f=>{const h=f.shift();this.getMediaKeysPromise(h,s,a).then(g=>l({keySystem:h,mediaKeys:g})).catch(g=>{f.length?d(f):g instanceof jn?u(g):u(new jn({type:vt.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_NO_ACCESS,error:g,fatal:!0},g.message))})};d(t)})}requestMediaKeySystemAccess(t,e){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let s=`Configured requestMediaKeySystemAccess is not a function ${n}`;return N1===null&&self.location.protocol==="http:"&&(s=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(s))}return n(t,e)}getMediaKeysPromise(t,e,n){const s=d2(t,e,n,this.config.drmSystemOptions),a=this.keySystemAccessPromises[t];let l=a?.keySystemAccess;if(!l){this.log(`Requesting encrypted media "${t}" key-system access with config: ${le(s)}`),l=this.requestMediaKeySystemAccess(t,s);const u=this.keySystemAccessPromises[t]={keySystemAccess:l};return l.catch(d=>{this.log(`Failed to obtain access to key-system "${t}": ${d}`)}),l.then(d=>{this.log(`Access for key-system "${d.keySystem}" obtained`);const f=this.fetchServerCertificate(t);return this.log(`Create media-keys for "${t}"`),u.mediaKeys=d.createMediaKeys().then(h=>(this.log(`Media-keys created for "${t}"`),u.hasMediaKeys=!0,f.then(g=>g?this.setMediaKeysServerCertificate(h,t,g):h))),u.mediaKeys.catch(h=>{this.error(`Failed to create media-keys for "${t}"}: ${h}`)}),u.mediaKeys})}return l.then(()=>a.mediaKeys)}createMediaKeySessionContext({decryptdata:t,keySystem:e,mediaKeys:n}){this.log(`Creating key-system session "${e}" keyId: ${Ei.hexDump(t.keyId||[])}`);const s=n.createSession(),a={decryptdata:t,keySystem:e,mediaKeys:n,mediaKeysSession:s,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a}renewKeySession(t){const e=t.decryptdata;if(e.pssh){const n=this.createMediaKeySessionContext(t),s=this.getKeyIdString(e),a="cenc";this.keyIdToKeySessionPromise[s]=this.generateRequestWithPreferredKeySession(n,a,e.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(t)}getKeyIdString(t){if(!t)throw new Error("Could not read keyId of undefined decryptdata");if(t.keyId===null)throw new Error("keyId is null");return Ei.hexDump(t.keyId)}updateKeySession(t,e){var n;const s=t.mediaKeysSession;return this.log(`Updating key-session "${s.sessionId}" for keyID ${Ei.hexDump(((n=t.decryptdata)==null?void 0:n.keyId)||[])}
      } (data length: ${e&&e.byteLength})`),s.update(e)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(t=>({keySystem:t,hasMediaKeys:this.keySystemAccessPromises[t].hasMediaKeys})).filter(({hasMediaKeys:t})=>!!t).map(({keySystem:t})=>Ic(t)).filter(t=>!!t)}getKeySystemAccess(t){return this.getKeySystemSelectionPromise(t).then(({keySystem:e,mediaKeys:n})=>this.attemptSetMediaKeys(e,n))}selectKeySystem(t){return new Promise((e,n)=>this.getKeySystemSelectionPromise(t).then(({keySystem:s})=>{const a=Ic(s);a?e(a):n(new Error(`Unable to find format for key-system "${s}"`))}).catch(n))}selectKeySystemFormat(t){const e=Object.keys(t.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${t.sn} ${t.type}: ${t.level}) key formats ${e.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(e)),this.keyFormatPromise}getKeyFormatPromise(t){const e=dl(this.config),n=t.map(Qc).filter(s=>!!s&&e.indexOf(s)!==-1);return this.selectKeySystem(n)}loadKey(t){const e=t.keyInfo.decryptdata,n=this.getKeyIdString(e),s=`(keyId: ${n} format: "${e.keyFormat}" method: ${e.method} uri: ${e.uri})`;this.log(`Starting session for key ${s}`);let a=this.keyIdToKeySessionPromise[n];return a||(a=this.getKeySystemForKeyPromise(e).then(({keySystem:u,mediaKeys:d})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${t.frag.sn} ${t.frag.type}: ${t.frag.level} using key ${s}`),this.attemptSetMediaKeys(u,d).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:u,mediaKeys:d,decryptdata:e}))))),(this.keyIdToKeySessionPromise[n]=a.then(u=>{const d="cenc",f=e.pssh?e.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(u,d,f,"playlist-key")})).catch(u=>this.handleError(u))),a}throwIfDestroyed(t="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(t){this.hls&&(this.error(t.message),t instanceof jn?this.hls.trigger(A.ERROR,t.data):this.hls.trigger(A.ERROR,{type:vt.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_NO_KEYS,error:t,fatal:!0}))}getKeySystemForKeyPromise(t){const e=this.getKeyIdString(t),n=this.keyIdToKeySessionPromise[e];if(!n){const s=Qc(t.keyFormat),a=s?[s]:dl(this.config);return this.attemptKeySystemAccess(a)}return n}getKeySystemSelectionPromise(t){if(t.length||(t=dl(this.config)),t.length===0)throw new jn({type:vt.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${le({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(t)}attemptSetMediaKeys(t,e){if(this.mediaKeys===e)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${t}"`);const s=Promise.all(n).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(e)});return this.mediaKeys=e,this.setMediaKeysQueue.push(s),s.then(()=>{this.log(`Media-keys set for "${t}"`),n.push(s),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(a=>n.indexOf(a)===-1)})}generateRequestWithPreferredKeySession(t,e,n,s){var a,l;const u=(a=this.config.drmSystems)==null||(l=a[t.keySystem])==null?void 0:l.generateRequest;if(u)try{const v=u.call(this.hls,e,n,t);if(!v)throw new Error("Invalid response from configured generateRequest filter");e=v.initDataType,n=v.initData?v.initData:null,t.decryptdata.pssh=n?new Uint8Array(n):null}catch(v){var d;if(this.warn(v.message),(d=this.hls)!=null&&d.config.debug)throw v}if(n===null)return this.log(`Skipping key-session request for "${s}" (no initData)`),Promise.resolve(t);const f=this.getKeyIdString(t.decryptdata);this.log(`Generating key-session request for "${s}": ${f} (init data type: ${e} length: ${n?n.byteLength:null})`);const h=new e0,g=t._onmessage=v=>{const E=t.mediaKeysSession;if(!E){h.emit("error",new Error("invalid state"));return}const{messageType:x,message:b}=v;this.log(`"${x}" message event for session "${E.sessionId}" message size: ${b.byteLength}`),x==="license-request"||x==="license-renewal"?this.renewLicense(t,b).catch(D=>{h.eventNames().length?h.emit("error",D):this.handleError(D)}):x==="license-release"?t.keySystem===Yt.FAIRPLAY&&(this.updateKeySession(t,Gg("acknowledged")),this.removeSession(t)):this.warn(`unhandled media key message type "${x}"`)},y=t._onkeystatuseschange=v=>{if(!t.mediaKeysSession){h.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(t);const x=t.keyStatus;h.emit("keyStatus",x),x==="expired"&&(this.warn(`${t.keySystem} expired for key ${f}`),this.renewKeySession(t))};In(t.mediaKeysSession,"message",g),In(t.mediaKeysSession,"keystatuseschange",y);const S=new Promise((v,E)=>{h.on("error",E),h.on("keyStatus",x=>{x.startsWith("usable")?v():x==="output-restricted"?E(new jn({type:vt.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):x==="internal-error"?E(new jn({type:vt.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${x}"`)):x==="expired"?E(new Error("key expired while generating request")):this.warn(`unhandled key status change "${x}"`)})});return t.mediaKeysSession.generateRequest(e,n).then(()=>{var v;this.log(`Request generated for key-session "${(v=t.mediaKeysSession)==null?void 0:v.sessionId}" keyId: ${f}`)}).catch(v=>{throw new jn({type:vt.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_NO_SESSION,error:v,fatal:!1},`Error generating key-session request: ${v}`)}).then(()=>S).catch(v=>{throw h.removeAllListeners(),this.removeSession(t),v}).then(()=>(h.removeAllListeners(),t))}onKeyStatusChange(t){t.mediaKeysSession.keyStatuses.forEach((e,n)=>{if(typeof n=="string"&&typeof e=="object"){const s=n;n=e,e=s}this.log(`key status change "${e}" for keyStatuses keyId: ${Ei.hexDump("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))} session keyId: ${Ei.hexDump(new Uint8Array(t.decryptdata.keyId||[]))} uri: ${t.decryptdata.uri}`),t.keyStatus=e})}fetchServerCertificate(t){const e=this.config,n=e.loader,s=new n(e),a=this.getServerCertificateUrl(t);return a?(this.log(`Fetching server certificate for "${t}"`),new Promise((l,u)=>{const d={responseType:"arraybuffer",url:a},f=e.certLoadPolicy.default,h={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},g={onSuccess:(y,S,v,E)=>{l(y.data)},onError:(y,S,v,E)=>{u(new jn({type:vt.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:v,response:zt({url:d.url,data:void 0},y)},`"${t}" certificate request failed (${a}). Status: ${y.code} (${y.text})`))},onTimeout:(y,S,v)=>{u(new jn({type:vt.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:v,response:{url:d.url,data:void 0}},`"${t}" certificate request timed out (${a})`))},onAbort:(y,S,v)=>{u(new Error("aborted"))}};s.load(d,h,g)})):Promise.resolve()}setMediaKeysServerCertificate(t,e,n){return new Promise((s,a)=>{t.setServerCertificate(n).then(l=>{this.log(`setServerCertificate ${l?"success":"not supported by CDM"} (${n?.byteLength}) on "${e}"`),s(t)}).catch(l=>{a(new jn({type:vt.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:l,fatal:!0},l.message))})})}renewLicense(t,e){return this.requestLicense(t,new Uint8Array(e)).then(n=>this.updateKeySession(t,new Uint8Array(n)).catch(s=>{throw new jn({type:vt.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:s,fatal:!0},s.message)}))}unpackPlayReadyKeyMessage(t,e){const n=String.fromCharCode.apply(null,new Uint16Array(e.buffer));if(!n.includes("PlayReadyKeyMessage"))return t.setRequestHeader("Content-Type","text/xml; charset=utf-8"),e;const s=new DOMParser().parseFromString(n,"application/xml"),a=s.querySelectorAll("HttpHeader");if(a.length>0){let h;for(let g=0,y=a.length;g<y;g++){var l,u;h=a[g];const S=(l=h.querySelector("name"))==null?void 0:l.textContent,v=(u=h.querySelector("value"))==null?void 0:u.textContent;S&&v&&t.setRequestHeader(S,v)}}const d=s.querySelector("Challenge"),f=d?.textContent;if(!f)throw new Error("Cannot find <Challenge> in key message");return Gg(atob(f))}setupLicenseXHR(t,e,n,s){const a=this.config.licenseXhrSetup;return a?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return a.call(this.hls,t,e,n,s)}).catch(l=>{if(!n.decryptdata)throw l;return t.open("POST",e,!0),a.call(this.hls,t,e,n,s)}).then(l=>(t.readyState||t.open("POST",e,!0),{xhr:t,licenseChallenge:l||s})):(t.open("POST",e,!0),Promise.resolve({xhr:t,licenseChallenge:s}))}requestLicense(t,e){const n=this.config.keyLoadPolicy.default;return new Promise((s,a)=>{const l=this.getLicenseServerUrlOrThrow(t.keySystem);this.log(`Sending license request to URL: ${l}`);const u=new XMLHttpRequest;u.responseType="arraybuffer",u.onreadystatechange=()=>{if(!this.hls||!t.mediaKeysSession)return a(new Error("invalid state"));if(u.readyState===4)if(u.status===200){this._requestLicenseFailureCount=0;let d=u.response;this.log(`License received ${d instanceof ArrayBuffer?d.byteLength:d}`);const f=this.config.licenseResponseCallback;if(f)try{d=f.call(this.hls,u,l,t)}catch(h){this.error(h)}s(d)}else{const d=n.errorRetry,f=d?d.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>f||u.status>=400&&u.status<500)a(new jn({type:vt.KEY_SYSTEM_ERROR,details:z.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:u,response:{url:l,data:void 0,code:u.status,text:u.statusText}},`License Request XHR failed (${l}). Status: ${u.status} (${u.statusText})`));else{const h=f-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${h} attempts left`),this.requestLicense(t,e).then(s,a)}}},t.licenseXhr&&t.licenseXhr.readyState!==XMLHttpRequest.DONE&&t.licenseXhr.abort(),t.licenseXhr=u,this.setupLicenseXHR(u,l,t,e).then(({xhr:d,licenseChallenge:f})=>{t.keySystem==Yt.PLAYREADY&&(f=this.unpackPlayReadyKeyMessage(d,f)),d.send(f)})})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(t,e){if(!this.config.emeEnabled)return;const n=e.media;this.media=n,In(n,"encrypted",this.onMediaEncrypted),In(n,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const t=this.media;t&&(Qn(t,"encrypted",this.onMediaEncrypted),Qn(t,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var t;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const e=this.media,n=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Nl.clearKeyUriToKeyIdMap();const s=n.length;Ha.CDMCleanupPromise=Promise.all(n.map(a=>this.removeSession(a)).concat(e==null||(t=e.setMediaKeys(null))==null?void 0:t.catch(a=>{var l;this.log(`Could not clear media keys: ${a}`),(l=this.hls)==null||l.trigger(A.ERROR,{type:vt.OTHER_ERROR,details:z.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${a}`)})}))).catch(a=>{var l;this.log(`Could not close sessions and clear media keys: ${a}`),(l=this.hls)==null||l.trigger(A.ERROR,{type:vt.OTHER_ERROR,details:z.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${a}`)})}).then(()=>{s&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(t,{sessionKeys:e}){if(!(!e||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=e.reduce((s,a)=>(s.indexOf(a.keyFormat)===-1&&s.push(a.keyFormat),s),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(t){const{mediaKeysSession:e,licenseXhr:n}=t;if(e){this.log(`Remove licenses and keys and close session ${e.sessionId}`),t._onmessage&&(e.removeEventListener("message",t._onmessage),t._onmessage=void 0),t._onkeystatuseschange&&(e.removeEventListener("keystatuseschange",t._onkeystatuseschange),t._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),t.mediaKeysSession=t.decryptdata=t.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(t);s>-1&&this.mediaKeySessions.splice(s,1);const{drmSystemOptions:a}=this.config;return(m2(a)?new Promise((u,d)=>{self.setTimeout(()=>d(new Error("MediaKeySession.remove() timeout")),8e3),e.remove().then(u)}):Promise.resolve()).catch(u=>{var d;this.log(`Could not remove session: ${u}`),(d=this.hls)==null||d.trigger(A.ERROR,{type:vt.OTHER_ERROR,details:z.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${u}`)})}).then(()=>e.close()).catch(u=>{var d;this.log(`Could not close session: ${u}`),(d=this.hls)==null||d.trigger(A.ERROR,{type:vt.OTHER_ERROR,details:z.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${u}`)})})}}}Ha.CDMCleanupPromise=void 0;class jn extends Error{constructor(t,e){super(e),this.data=void 0,t.error||(t.error=new Error(e)),this.data=t,t.err=t.error}}class EB{constructor(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners()}setStreamController(t){this.streamController=t}registerListeners(){this.hls.on(A.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(A.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(A.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(A.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(t,e){const n=this.hls.config;if(n.capLevelOnFPSDrop){const s=e.media instanceof self.HTMLVideoElement?e.media:null;this.media=s,s&&typeof s.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(t,e,n){const s=performance.now();if(e){if(this.lastTime){const a=s-this.lastTime,l=n-this.lastDroppedFrames,u=e-this.lastDecodedFrames,d=1e3*l/a,f=this.hls;if(f.trigger(A.FPS_DROP,{currentDropped:l,currentDecoded:u,totalDroppedFrames:n}),d>0&&l>f.config.fpsDroppedMonitoringThreshold*u){let h=f.currentLevel;f.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+h),h>0&&(f.autoLevelCapping===-1||f.autoLevelCapping>=h)&&(h=h-1,f.trigger(A.FPS_DROP_LEVEL_CAPPING,{level:h,droppedLevel:f.currentLevel}),f.autoLevelCapping=h,this.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=n,this.lastDecodedFrames=e}}checkFPSInterval(){const t=this.media;if(t)if(this.isVideoPlaybackQualityAvailable){const e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)}}function ER(i,t){let e;try{e=new Event("addtrack")}catch{e=document.createEvent("Event"),e.initEvent("addtrack",!1,!1)}e.track=i,t.dispatchEvent(e)}function xR(i,t){const e=i.mode;if(e==="disabled"&&(i.mode="hidden"),i.cues&&!i.cues.getCueById(t.id))try{if(i.addCue(t),!i.cues.getCueById(t.id))throw new Error(`addCue is failed for: ${t}`)}catch(n){Vt.debug(`[texttrack-utils]: ${n}`);try{const s=new self.TextTrackCue(t.startTime,t.endTime,t.text);s.id=t.id,i.addCue(s)}catch(s){Vt.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${s}`)}}e==="disabled"&&(i.mode=e)}function Ma(i,t){const e=i.mode;if(e==="disabled"&&(i.mode="hidden"),i.cues)for(let n=i.cues.length;n--;)t&&i.cues[n].removeEventListener("enter",t),i.removeCue(i.cues[n]);e==="disabled"&&(i.mode=e)}function Wg(i,t,e,n){const s=i.mode;if(s==="disabled"&&(i.mode="hidden"),i.cues&&i.cues.length>0){const a=bB(i.cues,t,e);for(let l=0;l<a.length;l++)(!n||n(a[l]))&&i.removeCue(a[l])}s==="disabled"&&(i.mode=s)}function xB(i,t){if(t<=i[0].startTime)return 0;const e=i.length-1;if(t>i[e].endTime)return-1;let n=0,s=e,a;for(;n<=s;)if(a=Math.floor((s+n)/2),t<i[a].startTime)s=a-1;else if(t>i[a].startTime&&n<e)n=a+1;else return a;return i[n].startTime-t<t-i[s].startTime?n:s}function bB(i,t,e){const n=[],s=xB(i,t);if(s>-1)for(let a=s,l=i.length;a<l;a++){const u=i[a];if(u.startTime>=t&&u.endTime<=e)n.push(u);else if(u.startTime>e)return n}return n}function ef(i){const t=[];for(let e=0;e<i.length;e++){const n=i[e];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&t.push(i[e])}return t}class AB extends l0{constructor(t){super(t,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=null;const n=ef(this.media.textTracks);for(let a=0;a<n.length;a++)if(n[a].mode==="hidden")e=n[a];else if(n[a].mode==="showing"){e=n[a];break}const s=this.findTrackForTextTrack(e);this.subtitleTrack!==s&&this.setSubtitleTrack(s)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(t){this._subtitleDisplay=t,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:t}=this;t.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.MANIFEST_PARSED,this.onManifestParsed,this),t.on(A.LEVEL_LOADING,this.onLevelLoading,this),t.on(A.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(A.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(A.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.MANIFEST_PARSED,this.onManifestParsed,this),t.off(A.LEVEL_LOADING,this.onLevelLoading,this),t.off(A.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(A.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(A.ERROR,this.onError,this)}onMediaAttached(t,e){this.media=e.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,t)}onMediaDetaching(t,e){const n=this.media;if(!n)return;const s=!!e.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,s)return;ef(n.textTracks).forEach(l=>{Ma(l)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(t,e){this.tracks=e.subtitleTracks}onSubtitleTrackLoaded(t,e){const{id:n,groupId:s,details:a}=e,l=this.tracksInGroup[n];if(!l||l.groupId!==s){this.warn(`Subtitle track with id:${n} and group:${s} not found in active group ${l?.groupId}`);return}const u=l.details;l.details=e.details,this.log(`Subtitle track ${n} "${l.name}" lang:${l.lang} group:${s} loaded [${a.startSN}-${a.endSN}]`),n===this.trackId&&this.playlistLoaded(n,e,u)}onLevelLoading(t,e){this.switchLevel(e.level)}onLevelSwitching(t,e){this.switchLevel(e.level)}switchLevel(t){const e=this.hls.levels[t];if(!e)return;const n=e.subtitleGroups||null,s=this.groupIds;let a=this.currentTrack;if(!n||s?.length!==n?.length||n!=null&&n.some(l=>s?.indexOf(l)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const l=this.tracks.filter(h=>!n||n.indexOf(h.groupId)!==-1);if(l.length)this.selectDefaultTrack&&!l.some(h=>h.default)&&(this.selectDefaultTrack=!1),l.forEach((h,g)=>{h.id=g});else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=l;const u=this.hls.config.subtitlePreference;if(!a&&u){this.selectDefaultTrack=!1;const h=_i(u,l);if(h>-1)a=l[h];else{const g=_i(u,this.tracks);a=this.tracks[g]}}let d=this.findTrackId(a);d===-1&&a&&(d=this.findTrackId(null));const f={subtitleTracks:l};this.log(`Updating subtitle tracks, ${l.length} track(s) found in "${n?.join(",")}" group-id`),this.hls.trigger(A.SUBTITLE_TRACKS_UPDATED,f),d!==-1&&this.trackId===-1&&this.setSubtitleTrack(d)}}findTrackId(t){const e=this.tracksInGroup,n=this.selectDefaultTrack;for(let s=0;s<e.length;s++){const a=e[s];if(!(n&&!a.default||!n&&!t)&&(!t||Lr(a,t)))return s}if(t){for(let s=0;s<e.length;s++){const a=e[s];if($l(t.attrs,a.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return s}for(let s=0;s<e.length;s++){const a=e[s];if($l(t.attrs,a.attrs,["LANGUAGE"]))return s}}return-1}findTrackForTextTrack(t){if(t){const e=this.tracksInGroup;for(let n=0;n<e.length;n++){const s=e[n];if(Yg(s,t))return n}}return-1}onError(t,e){e.fatal||!e.context||e.context.type===Mt.SUBTITLE_TRACK&&e.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(e.context.groupId)!==-1)&&this.checkRetry(e)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(t){this.selectDefaultTrack=!1,this.setSubtitleTrack(t)}setSubtitleOption(t){if(this.hls.config.subtitlePreference=t,t){if(t.id===-1)return this.setSubtitleTrack(-1),null;const e=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,e.length){const n=this.currentTrack;if(n&&Lr(t,n))return n;const s=_i(t,this.tracksInGroup);if(s>-1){const a=this.tracksInGroup[s];return this.setSubtitleTrack(s),a}else{if(n)return null;{const a=_i(t,e);if(a>-1)return e[a]}}}}return null}loadPlaylist(t){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,t)}loadingPlaylist(t,e){super.loadingPlaylist(t,e);const n=t.id,s=t.groupId,a=this.getUrlWithDirectives(t.url,e),l=t.details,u=l?.age;this.log(`Loading subtitle ${n} "${t.name}" lang:${t.lang} group:${s}${e?.msn!==void 0?" at sn "+e.msn+" part "+e.part:""}${u&&l.live?" age "+u.toFixed(1)+(l.type&&" "+l.type||""):""} ${a}`),this.hls.trigger(A.SUBTITLE_TRACK_LOADING,{url:a,id:n,groupId:s,deliveryDirectives:e||null,track:t})}toggleTrackModes(){const{media:t}=this;if(!t)return;const e=ef(t.textTracks),n=this.currentTrack;let s;if(n&&(s=e.filter(a=>Yg(n,a))[0],s||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(e).forEach(a=>{a.mode!=="disabled"&&a!==s&&(a.mode="disabled")}),s){const a=this.subtitleDisplay?"showing":"hidden";s.mode!==a&&(s.mode=a)}}setSubtitleTrack(t){const e=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=t;return}if(t<-1||t>=e.length||!mt(t)){this.warn(`Invalid subtitle track id: ${t}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,s=e[t]||null;if(this.trackId=t,this.currentTrack=s,this.toggleTrackModes(),!s){this.hls.trigger(A.SUBTITLE_TRACK_SWITCH,{id:t});return}const a=!!s.details&&!s.details.live;if(t===this.trackId&&s===n&&a)return;this.log(`Switching to subtitle-track ${t}`+(s?` "${s.name}" lang:${s.lang} group:${s.groupId}`:""));const{id:l,groupId:u="",name:d,type:f,url:h}=s;this.hls.trigger(A.SUBTITLE_TRACK_SWITCH,{id:l,groupId:u,name:d,type:f,url:h});const g=this.switchParams(s.url,n?.details,s.details);this.loadPlaylist(g)}}function RB(){try{return crypto.randomUUID()}catch{try{const t=URL.createObjectURL(new Blob),e=t.toString();return URL.revokeObjectURL(t),e.slice(e.lastIndexOf("/")+1)}catch{let e=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const a=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(s=="x"?a:a&3|8).toString(16)})}}}function Sl(i){let t=5381,e=i.length;for(;e;)t=t*33^i.charCodeAt(--e);return(t>>>0).toString()}const ja=.025;let Lf=function(i){return i[i.Point=0]="Point",i[i.Range=1]="Range",i}({});function LB(i,t,e){return`${i.identifier}-${e+1}-${Sl(t)}`}class CB{constructor(t,e){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=e,this.dateRange=t,this.setDateRange(t)}setDateRange(t){this.dateRange=t,this.resumeOffset=t.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=t.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=t.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=t.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var t;this.appendInPlaceStarted=!1,(t=this.assetListLoader)==null||t.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(t){var e;if(t>0&&t>=this.assetList.length)return!0;const n=this.playoutLimit;return t<=0||isNaN(n)?!1:n===0?!0:(((e=this.assetList[t])==null?void 0:e.startOffset)||0)>n}findAssetIndex(t){return this.assetList.indexOf(t)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const t=this.dateRange.startTime;if(this.snapOptions.out){const e=this.dateRange.tagAnchor;if(e)return Ym(t,e)}return t}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const t=this.dateRange.tagAnchor;if(t){const e=this.dateRange.startTime,n=Ym(e,t);return e-n<.1}return!1}get resumptionOffset(){const t=this.resumeOffset,e=mt(t)?t:this.duration;return this.cumulativeDuration+e}get resumeTime(){const t=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const e=this.resumeAnchor;if(e)return Ym(t,e)}return t}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<ja))}set appendInPlace(t){if(this.appendInPlaceStarted){this.resetOnResume=!t;return}this.appendInPlaceDisabled=!t}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(t){this._timelineStart=t}get duration(){const t=this.playoutLimit;let e;return this._duration!==null?e=this._duration:this.dateRange.duration?e=this.dateRange.duration:e=this.dateRange.plannedDuration||0,!isNaN(t)&&t<e&&(e=t),e}set duration(t){this._duration=t}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?Lf.Range:Lf.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return _B(this)}}function Ym(i,t){return i-t.start<t.duration/2&&!(Math.abs(i-(t.start+t.duration))<ja)?t.start:t.start+t.duration}function bR(i,t,e){const n=new self.URL(i,e);return n.protocol!=="data:"&&n.searchParams.set("_HLS_primary_id",t),n}function qm(i,t){for(;(e=i.assetList[++t])!=null&&e.error;)var e;return t}function _B(i){return`["${i.identifier}" ${i.cue.pre?"<pre>":i.cue.post?"<post>":""}${i.timelineStart.toFixed(2)}-${i.resumeTime.toFixed(2)}]`}function Oa(i){const t=i.timelineStart,e=i.duration||0;return`["${i.identifier}" ${t.toFixed(2)}-${(t+e).toFixed(2)}]`}class DB{constructor(t,e,n,s){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls.trigger(A.PLAYOUT_LIMIT_REACHED,{})};const a=this.hls=new t(e);this.interstitial=n,this.assetItem=s;let l=s.uri;try{l=bR(l,e.primarySessionId).href}catch{}a.loadSource(l);const u=()=>{this.hasDetails=!0};a.once(A.LEVEL_LOADED,u),a.once(A.AUDIO_TRACK_LOADED,u),a.once(A.SUBTITLE_TRACK_LOADED,u),a.on(A.MEDIA_ATTACHING,(d,{media:f})=>{this.removeMediaListeners(),this.mediaAttached=f,this.interstitial.playoutLimit&&(f.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&a.on(A.BUFFER_APPENDED,()=>{const g=this.bufferedEnd;this.reachedPlayout(g)&&(this._bufferedEosTime=g,a.trigger(A.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){var t;return((t=this.interstitial)==null?void 0:t.appendInPlace)||!1}bufferedInPlaceToEnd(t){var e;if(!this.appendInPlace)return!1;if((e=this.hls)!=null&&e.bufferedToEnd)return!0;if(!t||!this._bufferedEosTime)return!1;const n=this.timelineOffset,s=Lt.bufferInfo(t,n,0);return this.getAssetTime(s.end)>=this._bufferedEosTime-.02}reachedPlayout(t){const n=this.interstitial.playoutLimit;return this.startOffset+t>=n}get destroyed(){var t;return!((t=this.hls)!=null&&t.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var t;return((t=this.hls)==null?void 0:t.media)||null}get bufferedEnd(){const t=this.media||this.mediaAttached;if(!t)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const e=Lt.bufferInfo(t,t.currentTime,.001);return this.getAssetTime(e.end)}get currentTime(){const t=this.media||this.mediaAttached;return t?this.getAssetTime(t.currentTime):this._currentTime||0}get duration(){const t=this.assetItem.duration;return t||0}get remaining(){const t=this.duration;return t?Math.max(0,t-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var t;return((t=this.hls)==null?void 0:t.config.timelineOffset)||0}set timelineOffset(t){const e=this.timelineOffset;if(t!==e){const n=t-e;if(Math.abs(n)>1/9e4){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=t}}}getAssetTime(t){const e=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,t-e),n)}removeMediaListeners(){const t=this.mediaAttached;t&&(this._currentTime=t.currentTime,this.bufferSnapShot(),t.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var t;(t=this.hls)!=null&&t.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls.destroy(),this.hls=this.interstitial=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(t){this.hls.attachMedia(t)}detachMedia(){this.removeMediaListeners(),this.mediaAttached=null,this.hls.detachMedia()}resumeBuffering(){this.hls.resumeBuffering()}pauseBuffering(){this.hls.pauseBuffering()}transferMedia(){return this.bufferSnapShot(),this.hls.transferMedia()}resetDetails(){const t=this.hls;if(this.hasDetails){t.stopLoad();const e=n=>delete n.details;t.levels.forEach(e),t.allAudioTracks.forEach(e),t.allSubtitleTracks.forEach(e),this.hasDetails=!1}}on(t,e,n){this.hls.on(t,e)}once(t,e,n){this.hls.once(t,e)}off(t,e,n){this.hls.off(t,e)}toString(){var t;return`HlsAssetPlayer: ${Oa(this.assetItem)} ${(t=this.hls)==null?void 0:t.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const Bx=.033;class IB extends hs{constructor(t,e){super("interstitials-sched",e),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=t}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(t=>t.reset()),this.events=this.items=null}resetErrorsInRange(t,e){return this.events?this.events.reduce((n,s)=>t<=s.startOffset&&e>s.startOffset?(delete s.error,n+1):n,0):0}get duration(){const t=this.items;return t?t[t.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(t){return t&&this.eventMap[t]||null}hasEvent(t){return t in this.eventMap}findItemIndex(t,e){if(t.event)return this.findEventIndex(t.event.identifier);let n=-1;t.nextEvent?n=this.findEventIndex(t.nextEvent.identifier)-1:t.previousEvent&&(n=this.findEventIndex(t.previousEvent.identifier)+1);const s=this.items;if(s)for(s[n]||(e===void 0&&(e=t.start),n=this.findItemIndexAtTime(e));n>=0&&(a=s[n])!=null&&a.event;){var a;n--}return n}findItemIndexAtTime(t,e){const n=this.items;if(n)for(let s=0;s<n.length;s++){let a=n[s];if(e&&e!=="primary"&&(a=a[e]),t===a.start||t>a.start&&t<a.end)return s}return-1}findJumpRestrictedIndex(t,e){const n=this.items;if(n)for(let s=t;s<=e&&n[s];s++){const a=n[s].event;if(a!=null&&a.restrictions.jump&&!a.appendInPlace)return s}return-1}findEventIndex(t){const e=this.items;if(e)for(let s=e.length;s--;){var n;if(((n=e[s].event)==null?void 0:n.identifier)===t)return s}return-1}findAssetIndex(t,e){const n=t.assetList,s=n.length;if(s>1)for(let a=0;a<s;a++){const l=n[a];if(!l.error){const u=l.timelineStart;if(e===u||e>u&&e<u+(l.duration||0))return a}}return 0}get assetIdAtEnd(){var t,e;const n=(t=this.items)==null||(e=t[this.length-1])==null?void 0:e.event;if(n){const s=n.assetList,a=s[s.length-1];if(a)return a.identifier}return null}parseInterstitialDateRanges(t,e){const n=t.main.details,{dateRanges:s}=n,a=this.events,l=this.parseDateRanges(s,{url:n.url},e),u=Object.keys(s),d=a?a.filter(f=>!u.includes(f.identifier)):[];l.length&&l.sort((f,h)=>{const g=f.cue.pre,y=f.cue.post,S=h.cue.pre,v=h.cue.post;if(g&&!S)return-1;if(S&&!g||y&&!v)return 1;if(v&&!y)return-1;if(!g&&!S&&!y&&!v){const E=f.startTime,x=h.startTime;if(E!==x)return E-x}return f.dateRange.tagOrder-h.dateRange.tagOrder}),this.events=l,d.forEach(f=>{this.removeEvent(f)}),this.updateSchedule(t,d)}updateSchedule(t,e=[]){const n=this.events||[];if(n.length||e.length||this.length<2){const s=this.items,a=this.parseSchedule(n,t);(e.length||s?.length!==a.length||a.some((u,d)=>Math.abs(u.playout.start-s[d].playout.start)>.005||Math.abs(u.playout.end-s[d].playout.end)>.005))&&(this.items=a,this.onScheduleUpdate(e,s))}}parseDateRanges(t,e,n){const s=[],a=Object.keys(t);for(let l=0;l<a.length;l++){const u=a[l],d=t[u];if(d.isInterstitial){let f=this.eventMap[u];f?f.setDateRange(d):(f=new CB(d,e),this.eventMap[u]=f,n===!1&&(f.appendInPlace=n)),s.push(f)}}return s}parseSchedule(t,e){const n=[],s=e.main.details,a=s.live?1/0:s.edge;let l=0;if(t=t.filter(d=>!d.error&&!(d.cue.once&&d.hasPlayed)),t.length){this.resolveOffsets(t,e);let d=0,f=0;if(t.forEach((h,g)=>{const y=h.cue.pre,S=h.cue.post,v=t[g-1]||null,E=h.appendInPlace,x=S?a:h.startOffset,b=h.duration,D=h.timelineOccupancy===Lf.Range?b:0,L=h.resumptionOffset,I=v?.startTime===x,_=x+h.cumulativeDuration;let P=E?_+b:x+L;if(y||!S&&x<=0){const k=f;f+=D,h.timelineStart=_;const F=l;l+=b,n.push({event:h,start:_,end:P,playout:{start:F,end:l},integrated:{start:k,end:f}})}else if(x<=a){if(!I){const R=x-d;if(R>Bx){const $=d,Q=f;f+=R;const ft=l;l+=R;const ct={previousEvent:t[g-1]||null,nextEvent:h,start:$,end:$+R,playout:{start:ft,end:l},integrated:{start:Q,end:f}};n.push(ct)}else R>0&&v&&(v.cumulativeDuration+=R,n[n.length-1].end=x)}S&&(P=_),h.timelineStart=_;const k=f;f+=D;const F=l;l+=b,n.push({event:h,start:_,end:P,playout:{start:F,end:l},integrated:{start:k,end:f}})}else return;const M=h.resumeTime;S||M>a?d=a:d=M}),d<a){var u;const h=d,g=f,y=a-d;f+=y;const S=l;l+=y,n.push({previousEvent:((u=n[n.length-1])==null?void 0:u.event)||null,nextEvent:null,start:d,end:h+y,playout:{start:S,end:l},integrated:{start:g,end:f}})}this.setDurations(a,l,f)}else n.push({previousEvent:null,nextEvent:null,start:0,end:a,playout:{start:0,end:a},integrated:{start:0,end:a}}),this.setDurations(a,a,a);return n}setDurations(t,e,n){this.durations={primary:t,playout:e,integrated:n}}resolveOffsets(t,e){const n=e.main.details,s=n.live?1/0:n.edge;let a=0,l=-1;t.forEach((u,d)=>{const f=u.cue.pre,h=u.cue.post,g=f?0:h?s:u.startTime;this.updateAssetDurations(u),l===g?u.cumulativeDuration=a:(a=0,l=g),!h&&u.snapOptions.in&&(u.resumeAnchor=wr(null,n.fragments,u.startOffset+u.resumptionOffset,0,0)||void 0),u.appendInPlace&&!u.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(u,e)||(u.appendInPlace=!1)),!u.appendInPlace&&d+1<t.length&&t[d+1].startTime-t[d].resumeTime<Bx&&(t[d+1].appendInPlace=!1,t[d+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${u}`));const S=mt(u.resumeOffset)?u.resumeOffset:u.duration;a+=S})}primaryCanResumeInPlaceAt(t,e){const n=t.resumeTime,s=t.startTime+t.resumptionOffset;return Math.abs(n-s)>ja?(this.log(`"${t.identifier}" resumption ${n} not aligned with estimated timeline end ${s}`),!1):e?!Object.keys(e).some(l=>{const u=e[l].details,d=u.edge;if(n>=d)return this.log(`"${t.identifier}" resumption ${n} past ${l} playlist end ${d}`),!1;const f=wr(null,u.fragments,n);if(!f)return this.log(`"${t.identifier}" resumption ${n} does not align with any fragments in ${l} playlist (${u.fragStart}-${u.fragmentEnd})`),!0;const h=l==="audio"?.175:0;return Math.abs(f.start-n)<ja+h||Math.abs(f.end-n)<ja+h?!1:(this.log(`"${t.identifier}" resumption ${n} not aligned with ${l} fragment bounds (${f.start}-${f.end} sn: ${f.sn} cc: ${f.cc})`),!0)}):(this.log(`"${t.identifier}" resumption ${n} can not be aligned with media (none selected)`),!1)}updateAssetDurations(t){if(!t.assetListLoaded)return;const e=t.timelineStart;let n=0,s=!1,a=!1;t.assetList.forEach((l,u)=>{const d=e+n;l.startOffset=n,l.timelineStart=d,s||(s=l.duration===null),a||(a=!!l.error);const f=l.error?0:l.duration||0;n+=f}),s&&!a?t.duration=Math.max(n,t.duration):t.duration=n}removeEvent(t){t.reset(),delete this.eventMap[t.identifier]}}function Us(i){return`[${i.event?'"'+i.event.identifier+'"':"primary"}: ${i.start.toFixed(2)}-${i.end.toFixed(2)}]`}class wB{constructor(t){this.hls=void 0,this.hls=t}destroy(){this.hls=null}loadAssetList(t,e){const n=t.assetListUrl;let s;try{s=bR(n,this.hls.sessionId,t.baseUrl)}catch(y){const S=this.assignAssetListError(t,z.ASSET_LIST_LOAD_ERROR,y,n);this.hls.trigger(A.ERROR,S);return}e&&s.protocol!=="data:"&&s.searchParams.set("_HLS_start_offset",""+e);const a=this.hls.config,l=a.loader,u=new l(a),d={responseType:"json",url:s.href},f=a.interstitialAssetListLoadPolicy.default,h={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},g={onSuccess:(y,S,v,E)=>{const x=y.data,b=x?.ASSETS;if(!Array.isArray(b)){const D=this.assignAssetListError(t,z.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),v.url,S,E);this.hls.trigger(A.ERROR,D);return}t.assetListResponse=x,this.hls.trigger(A.ASSET_LIST_LOADED,{event:t,assetListResponse:x,networkDetails:E})},onError:(y,S,v,E)=>{const x=this.assignAssetListError(t,z.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${y.code} ${y.text} (${S.url})`),S.url,E,v);this.hls.trigger(A.ERROR,x)},onTimeout:(y,S,v)=>{const E=this.assignAssetListError(t,z.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${S.url})`),S.url,y,v);this.hls.trigger(A.ERROR,E)}};return u.load(d,h,g),this.hls.trigger(A.ASSET_LIST_LOADING,{event:t}),u}assignAssetListError(t,e,n,s,a,l){return t.error=n,{type:vt.NETWORK_ERROR,details:e,fatal:!1,interstitial:t,url:s,error:n,networkDetails:l,stats:a}}}function Fx(i){i?.play().catch(()=>{})}class OB extends hs{constructor(t,e){super("interstitials",t.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled)return;const s=n-this.timelinePos;if(Math.abs(s)<1/7056e5)return;const l=s<=-.01;this.timelinePos=n,this.bufferedPos=n;const u=this.playingItem;if(!u){this.checkBuffer();return}if(l&&this.schedule.resetErrorsInRange(n,n-s)&&this.updateSchedule(),this.checkBuffer(),l&&n<u.start||n>=u.end){var d;const y=this.schedule.findItemIndexAtTime(this.timelinePos);if(!this.isInterstitial(u)&&(d=this.media)!=null&&d.paused&&(this.shouldPlay=!1),!l){const S=this.findItemIndex(u);if(y>S){const v=this.schedule.findJumpRestrictedIndex(S+1,y);if(v>S){this.setSchedulePosition(v);return}}}this.setSchedulePosition(y);return}const f=this.playingAsset;if(!f){if(this.playingLastItem&&this.isInterstitial(u)){const y=u.event.assetList[0];y&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(n,y))}return}const h=f.timelineStart,g=f.duration||0;(l&&n<h||n>=h+g)&&this.setScheduleToAssetAtTime(n,f)},this.onTimeupdate=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled)return;if(n>this.timelinePos)this.timelinePos=n,n>this.bufferedPos&&this.checkBuffer();else return;const s=this.playingItem;if(!s||this.playingLastItem)return;if(n>=s.end){this.timelinePos=s.end;const u=this.findItemIndex(s);this.setSchedulePosition(u+1)}const a=this.playingAsset;if(!a)return;const l=a.timelineStart+(a.duration||0);n>=l&&this.setScheduleToAssetAtTime(n,a)},this.onScheduleUpdate=(n,s)=>{const a=this.schedule,l=this.playingItem,u=a.events||[],d=a.items||[],f=a.durations,h=n.map(v=>v.identifier),g=!!(u.length||h.length);(g||s)&&this.log(`INTERSTITIALS_UPDATED (${u.length}): ${u}
Schedule: ${d.map(v=>Us(v))} pos: ${this.timelinePos}`),h.length&&this.log(`Removed events ${h}`),this.playerQueue.forEach(v=>{if(v.interstitial.appendInPlace){const E=v.assetItem.timelineStart,x=v.timelineOffset-E;if(x)try{v.timelineOffset=E}catch(b){Math.abs(x)>ja&&this.warn(`${b} ("${v.assetId}" ${v.timelineOffset}->${E})`)}}});let y=null;if(l){const v=this.updateItem(l,this.timelinePos);this.itemsMatch(l,v)&&(this.playingItem=v,this.waitingItem=this.endedItem=null,y=()=>this.trimInPlace(v,l))}else this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const S=this.bufferingItem;if(S){const v=this.updateItem(S,this.bufferedPos);this.itemsMatch(S,v)?(this.bufferingItem=v,y||(y=()=>this.trimInPlace(v,S))):S.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(S.event,null))}if(n.forEach(v=>{v.assetList.forEach(E=>{this.clearAssetPlayer(E.identifier,null)})}),g||s){if(this.hls.trigger(A.INTERSTITIALS_UPDATED,{events:u.slice(0),schedule:d.slice(0),durations:f,removedIds:h}),this.isInterstitial(l)&&h.includes(l.event.identifier)){this.warn(`Interstitial "${l.event.identifier}" removed while playing`),this.primaryFallback(l.event);return}y&&y(),this.checkBuffer()}},this.hls=t,this.HlsPlayerClass=e,this.assetListLoader=new wB(t),this.schedule=new IB(this.onScheduleUpdate,t.logger),this.registerListeners()}registerListeners(){const t=this.hls;t.on(A.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(A.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(A.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),t.on(A.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(A.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),t.on(A.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),t.on(A.ASSET_LIST_LOADED,this.onAssetListLoaded,this),t.on(A.BUFFER_APPENDED,this.onBufferAppended,this),t.on(A.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(A.BUFFERED_TO_END,this.onBufferedToEnd,this),t.on(A.MEDIA_ENDED,this.onMediaEnded,this),t.on(A.ERROR,this.onError,this),t.on(A.DESTROYING,this.onDestroying,this)}unregisterListeners(){const t=this.hls;t&&(t.off(A.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(A.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(A.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),t.off(A.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(A.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),t.off(A.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),t.off(A.ASSET_LIST_LOADED,this.onAssetListLoaded,this),t.off(A.BUFFER_CODECS,this.onBufferCodecs,this),t.off(A.BUFFER_APPENDED,this.onBufferAppended,this),t.off(A.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(A.BUFFERED_TO_END,this.onBufferedToEnd,this),t.off(A.MEDIA_ENDED,this.onMediaEnded,this),t.off(A.ERROR,this.onError,this),t.off(A.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var t;(t=this.getBufferingPlayer())==null||t.resumeBuffering()}pauseBuffering(){var t;(t=this.getBufferingPlayer())==null||t.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.manager=null,this.hls=this.HlsPlayerClass=this.schedule=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const t=this.primaryMedia||this.media;t&&this.removeMediaListeners(t)}removeMediaListeners(t){Qn(t,"play",this.onPlay),Qn(t,"pause",this.onPause),Qn(t,"seeking",this.onSeeking),Qn(t,"timeupdate",this.onTimeupdate)}onMediaAttaching(t,e){const n=this.media=e.media;In(n,"seeking",this.onSeeking),In(n,"timeupdate",this.onTimeupdate),In(n,"play",this.onPlay),In(n,"pause",this.onPause)}onMediaAttached(t,e){const n=this.effectivePlayingItem,s=this.detachedData;if(this.detachedData=null,n===null)this.checkStart();else if(!s){this.clearScheduleState();const a=this.findItemIndex(n);this.setSchedulePosition(a)}}clearScheduleState(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(t,e){const n=!!e.transferMedia,s=this.media;if(this.media=null,!n&&(s&&this.removeMediaListeners(s),this.detachedData)){const a=this.getBufferingPlayer();a&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,a.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.manager){if(!this.hls)return null;const t=this,e=()=>t.bufferingItem||t.waitingItem,n=g=>g&&t.getAssetPlayer(g.identifier),s=(g,y,S,v,E)=>{if(g){let x=g[y].start;const b=g.event;if(b){if(y==="playout"||b.timelineOccupancy!==Lf.Point){const D=n(S);D?.interstitial===b&&(x+=D.assetItem.startOffset+D[E])}}else{const D=v==="bufferedPos"?l():t[v];x+=D-g.start}return x}return 0},a=(g,y)=>{if(g!==0&&y!=="primary"&&t.schedule.length){var S;const v=t.schedule.findItemIndexAtTime(g),E=(S=t.schedule.items)==null?void 0:S[v];if(E){const x=E[y].start-E.start;return g+x}}return g},l=()=>{const g=t.bufferedPos;return g===Number.MAX_VALUE?u("primary"):Math.max(g,0)},u=g=>{var y;return(y=t.primaryDetails)!=null&&y.live?t.primaryDetails.edge:t.schedule.durations[g]},d=(g,y)=>{var S,v;const E=t.effectivePlayingItem;if(E!=null&&(S=E.event)!=null&&S.restrictions.skip)return;t.log(`seek to ${g} "${y}"`);const x=t.effectivePlayingItem,b=t.schedule.findItemIndexAtTime(g,y),D=(v=t.schedule.items)==null?void 0:v[b],L=t.getBufferingPlayer(),I=L?.interstitial,_=I?.appendInPlace,P=x&&t.itemsMatch(x,D);if(x&&(_||P)){const k=n(t.playingAsset),F=k?.media||t.primaryMedia;if(F){const R=y==="primary"?F.currentTime:s(x,y,t.playingAsset,"timelinePos","currentTime"),$=g-R,Q=(_?R:F.currentTime)+$;if(Q>=0&&(!k||_||Q<=k.duration)){F.currentTime=Q;return}}}if(D){let k=g;if(y!=="primary"){const R=D[y].start,$=g-R;k=D.start+$}const F=!t.isInterstitial(D);if((!t.isInterstitial(x)||x.event.appendInPlace)&&(F||D.event.appendInPlace)){const R=t.media||(_?L?.media:null);R&&(R.currentTime=k)}else if(x){const R=t.findItemIndex(x);if(b>R){const Q=t.schedule.findJumpRestrictedIndex(R+1,b);if(Q>R){t.setSchedulePosition(Q);return}}let $=0;if(F)t.timelinePos=k,t.checkBuffer();else{var M;const Q=D==null||(M=D.event)==null?void 0:M.assetList;if(Q){const ft=g-(D[y]||D).start;for(let ct=Q.length;ct--;){const it=Q[ct];if(it.duration&&ft>=it.startOffset&&ft<it.startOffset+it.duration){$=ct;break}}}}t.setSchedulePosition(b,$)}}},f=()=>{const g=t.effectivePlayingItem;if(t.isInterstitial(g))return g;const y=e();return t.isInterstitial(y)?y:null},h={get currentTime(){const g=f(),y=t.effectivePlayingItem;return y&&y===g?s(y,"playout",t.effectivePlayingAsset,"timelinePos","currentTime")-y.playout.start:0},set currentTime(g){const y=f(),S=t.effectivePlayingItem;S&&S===y&&d(g+S.playout.start,"playout")},get duration(){const g=f();return g?g.playout.end-g.playout.start:0},get assetPlayers(){var g;const y=(g=f())==null?void 0:g.event.assetList;return y?y.map(S=>t.getAssetPlayer(S.identifier)):[]},get playingIndex(){var g;const y=(g=f())==null?void 0:g.event;return y&&t.effectivePlayingAsset?y.findAssetIndex(t.effectivePlayingAsset):-1},get scheduleItem(){return f()}};this.manager={get events(){var g,y;return((g=t.schedule)==null||(y=g.events)==null?void 0:y.slice(0))||[]},get schedule(){var g,y;return((g=t.schedule)==null||(y=g.items)==null?void 0:y.slice(0))||[]},get interstitialPlayer(){return f()?h:null},get playerQueue(){return t.playerQueue.slice(0)},get bufferingAsset(){return t.bufferingAsset},get bufferingItem(){return e()},get bufferingIndex(){const g=e();return t.findItemIndex(g)},get playingAsset(){return t.effectivePlayingAsset},get playingItem(){return t.effectivePlayingItem},get playingIndex(){const g=t.effectivePlayingItem;return t.findItemIndex(g)},primary:{get bufferedEnd(){return l()},get currentTime(){const g=t.timelinePos;return g>0?g:0},set currentTime(g){d(g,"primary")},get duration(){return u("primary")},get seekableStart(){var g;return((g=t.primaryDetails)==null?void 0:g.fragmentStart)||0}},integrated:{get bufferedEnd(){return s(e(),"integrated",t.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return s(t.effectivePlayingItem,"integrated",t.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(g){d(g,"integrated")},get duration(){return u("integrated")},get seekableStart(){var g;return a(((g=t.primaryDetails)==null?void 0:g.fragmentStart)||0,"integrated")}},skip:()=>{const g=t.effectivePlayingItem,y=g?.event;if(y&&!y.restrictions.skip){const S=t.findItemIndex(g);if(y.appendInPlace){const v=g.playout.start+g.event.duration;d(v+.001,"playout")}else t.advanceAfterAssetEnded(y,S,1/0)}}}}return this.manager}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var t;const e=this.playingItem,n=(t=this.schedule)==null?void 0:t.items;return!this.playbackStarted||!e||!n?!1:this.findItemIndex(e)===n.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var t,e,n;if(this.mediaSelection===null)return;const s=this.waitingItem||this.playingItem;if(this.isInterstitial(s)&&!s.event.appendInPlace)return;let a=this.media;!a&&(t=this.bufferingItem)!=null&&(e=t.event)!=null&&e.appendInPlace&&(a=this.primaryMedia);const l=(n=a)==null?void 0:n.currentTime;if(!(l===void 0||!mt(l)))return l}get primaryMedia(){var t;return this.media||((t=this.detachedData)==null?void 0:t.media)||null}isInterstitial(t){return!!(t!=null&&t.event)}retreiveMediaSource(t,e){const n=this.getAssetPlayer(t);n&&this.transferMediaFromPlayer(n,e)}transferMediaFromPlayer(t,e){const n=t.interstitial.appendInPlace,s=t.media;if(n&&s===this.primaryMedia){if(this.bufferingAsset=null,(!e||this.isInterstitial(e)&&!e.event.appendInPlace)&&e&&s){this.detachedData={media:s};return}const a=t.transferMedia();this.log(`transfer MediaSource from ${t} ${le(a)}`),this.detachedData=a}else e&&s&&(this.shouldPlay||(this.shouldPlay=!s.paused))}transferMediaTo(t,e){var n,s;if(t.media===e)return;let a=null;const l=this.hls,u=t!==l,d=u&&t.interstitial.appendInPlace,f=(n=this.detachedData)==null?void 0:n.mediaSource;let h;if(l.media)d&&(a=l.transferMedia(),this.detachedData=a),h="Primary";else if(f){const S=this.getBufferingPlayer();S?(a=S.transferMedia(),h=`${S}`):h="detached MediaSource"}else h="detached media";if(!a){if(f)a=this.detachedData,this.log(`using detachedData: MediaSource ${le(a)}`);else if(!this.detachedData||l.media===e){const S=this.playerQueue;S.length>1&&S.forEach(v=>{if(u&&v.interstitial.appendInPlace!==d){const E=v.interstitial;this.clearInterstitial(v.interstitial,null),E.appendInPlace=!1,E.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${E}`)}}),this.hls.detachMedia(),this.detachedData={media:e}}}const g=a&&"mediaSource"in a&&((s=a.mediaSource)==null?void 0:s.readyState)!=="closed",y=g&&a?a:e;if(this.log(`${g?"transfering MediaSource":"attaching media"} to ${u?t:"Primary"} from ${h}`),y===a){const S=u&&t.assetId===this.schedule.assetIdAtEnd;y.overrides={duration:this.schedule.duration,endOfStream:!u||S,cueRemoval:!u}}t.attachMedia(y)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const t=this.schedule,e=t.events;if(!e||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const n=this.timelinePos,s=this.effectivePlayingItem;if(n===-1){const a=this.hls.startPosition;if(this.timelinePos=a,e.length&&e[0].cue.pre){const l=t.findEventIndex(e[0].identifier);this.setSchedulePosition(l)}else if(a>=0||!this.primaryLive){const l=this.timelinePos=a>0?a:0,u=t.findItemIndexAtTime(l);this.setSchedulePosition(u)}}else if(s&&!this.playingItem){const a=t.findItemIndex(s);this.setSchedulePosition(a)}}advanceAfterAssetEnded(t,e,n){const s=qm(t,n);if(!t.isAssetPastPlayoutLimit(s))this.setSchedulePosition(e,s);else{const a=this.schedule.items;if(a){const l=e+1,u=a.length;if(l>=u){this.setSchedulePosition(-1);return}const d=t.resumeTime;this.timelinePos<d&&(this.timelinePos=d,this.checkBuffer()),this.setSchedulePosition(l)}}}setScheduleToAssetAtTime(t,e){const n=this.schedule,s=e.parentIdentifier,a=n.getEvent(s);if(a){const l=n.findEventIndex(s),u=n.findAssetIndex(a,t);this.advanceAfterAssetEnded(a,l,u-1)}}setSchedulePosition(t,e){const n=this.schedule.items;if(!n||this.playbackDisabled)return;this.log(`setSchedulePosition ${t}, ${e}`);const s=t>=0?n[t]:null,a=this.playingItem,l=this.playingLastItem;if(this.isInterstitial(a)){var u;const f=a.event,h=this.playingAsset,g=h?.identifier,y=g?this.getAssetPlayer(g):null;if(y&&g&&(!this.eventItemsMatch(a,s)||e!==void 0&&g!==((u=f.assetList)==null?void 0:u[e].identifier))){var d;const S=f.findAssetIndex(h);this.log(`INTERSTITIAL_ASSET_ENDED ${S+1}/${f.assetList.length} ${Oa(h)}`),this.endedAsset=h,this.playingAsset=null,this.hls.trigger(A.INTERSTITIAL_ASSET_ENDED,{asset:h,assetListIndex:S,event:f,schedule:n.slice(0),scheduleIndex:t,player:y}),this.retreiveMediaSource(g,s),y.media&&!((d=this.detachedData)!=null&&d.mediaSource)&&y.detachMedia()}if(!this.eventItemsMatch(a,s)&&(this.endedItem=a,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${f} ${Us(a)}`),f.hasPlayed=!0,this.hls.trigger(A.INTERSTITIAL_ENDED,{event:f,schedule:n.slice(0),scheduleIndex:t}),f.cue.once)){this.updateSchedule();const S=this.schedule.items;if(s&&S){const v=this.schedule.findItemIndex(s);this.advanceSchedule(v,S,e,a,l)}return}}this.advanceSchedule(t,n,e,a,l)}advanceSchedule(t,e,n,s,a){const l=t>=0?e[t]:null,u=this.primaryMedia,d=this.playerQueue;if(d.length&&d.forEach(f=>{const h=f.interstitial,g=this.schedule.findEventIndex(h.identifier);(g<t||g>t+1)&&this.clearInterstitial(h,l)}),this.isInterstitial(l)){this.timelinePos=Math.min(Math.max(this.timelinePos,l.start),l.end);const f=l.event;if(n===void 0){n=this.schedule.findAssetIndex(f,this.timelinePos);const S=qm(f,n-1);if(f.isAssetPastPlayoutLimit(S)){this.advanceAfterAssetEnded(f,t,n);return}n=S}const h=this.waitingItem;this.assetsBuffered(l,u)||this.setBufferingItem(l);let g=this.preloadAssets(f,n);if(this.eventItemsMatch(l,h||s)||(this.waitingItem=l,this.log(`INTERSTITIAL_STARTED ${Us(l)} ${f.appendInPlace?"append in place":""}`),this.hls.trigger(A.INTERSTITIAL_STARTED,{event:f,schedule:e.slice(0),scheduleIndex:t})),!f.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${f}`);return}if(f.assetListLoader&&(f.assetListLoader.destroy(),f.assetListLoader=void 0),!u){this.log(`Waiting for attachMedia to start Interstitial ${f}`);return}this.waitingItem=this.endedItem=null,this.playingItem=l;const y=f.assetList[n];if(!y){const S=e[t+1],v=this.media;S&&v&&!this.isInterstitial(S)&&v.currentTime<S.start&&(v.currentTime=this.timelinePos=S.start),this.advanceAfterAssetEnded(f,t,n||0);return}if(g||(g=this.getAssetPlayer(y.identifier)),g===null||g.destroyed){const S=f.assetList.length;this.warn(`asset ${n+1}/${S} player destroyed ${f}`),g=this.createAssetPlayer(f,y,n)}if(!this.eventItemsMatch(l,this.bufferingItem)&&f.appendInPlace&&this.isAssetBuffered(y))return;this.startAssetPlayer(g,n,e,t,u),this.shouldPlay&&Fx(g.media)}else l!==null?(this.resumePrimary(l,t,s),this.shouldPlay&&Fx(this.hls.media)):a&&this.isInterstitial(s)&&(this.endedItem=null,this.playingItem=s,s.event.appendInPlace||this.attachPrimary(this.schedule.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var t,e;return(t=this.mediaSelection)==null||(e=t.main)==null?void 0:e.details}get primaryLive(){var t;return!!((t=this.primaryDetails)!=null&&t.live)}resumePrimary(t,e,n){var s;if(this.playingItem=t,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(t),this.log(`resuming ${Us(t)}`),!((s=this.detachedData)!=null&&s.mediaSource)){let l=this.timelinePos;(l<t.start||l>=t.end)&&(l=this.getPrimaryResumption(t,e),this.timelinePos=l),this.attachPrimary(l,t)}if(!n)return;const a=this.schedule.items;a&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${Us(t)}`),this.hls.trigger(A.INTERSTITIALS_PRIMARY_RESUMED,{schedule:a.slice(0),scheduleIndex:e}),this.checkBuffer())}getPrimaryResumption(t,e){const n=t.start;if(this.primaryLive){const s=this.primaryDetails;if(e===0)return this.hls.startPosition;if(s&&(n<s.fragmentStart||n>s.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(t){const e=this.getAssetPlayer(t.identifier);return e!=null&&e.hls?e.hls.bufferedToEnd:Lt.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=t.timelineStart+(t.duration||0)}attachPrimary(t,e,n){e?this.setBufferingItem(e):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const s=this.primaryMedia;if(!s)return;const a=this.hls;a.media?this.checkBuffer():(this.transferMediaTo(a,s),n&&this.startLoadingPrimaryAt(t,n)),n||(this.timelinePos=t,this.startLoadingPrimaryAt(t,n))}startLoadingPrimaryAt(t,e){var n;const s=this.hls;!s.loadingEnabled||!s.media||Math.abs((((n=s.mainForwardBufferInfo)==null?void 0:n.start)||s.media.currentTime)-t)>.5?s.startLoad(t,e):s.bufferingEnabled||s.resumeBuffering()}onManifestLoading(){this.stopLoad(),this.schedule.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(A.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(A.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(t,e){if(e.level===-1)return;const n=this.hls.levels[e.level],s=zt(zt({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=s,this.schedule.parseInterstitialDateRanges(s,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(t,e){const n=this.hls.audioTracks[e.id],s=this.mediaSelection;if(!s){this.altSelection=zt(zt({},this.altSelection),{},{audio:n});return}const a=zt(zt({},s),{},{audio:n});this.mediaSelection=a}onSubtitleTrackUpdated(t,e){const n=this.hls.subtitleTracks[e.id],s=this.mediaSelection;if(!s){this.altSelection=zt(zt({},this.altSelection),{},{subtitles:n});return}const a=zt(zt({},s),{},{subtitles:n});this.mediaSelection=a}onAudioTrackSwitching(t,e){const n=WE(e);this.playerQueue.forEach(s=>s.hls.setAudioOption(e)||s.hls.setAudioOption(n))}onSubtitleTrackSwitch(t,e){const n=WE(e);this.playerQueue.forEach(s=>s.hls.setSubtitleOption(e)||e.id!==-1&&s.hls.setSubtitleOption(n))}onBufferCodecs(t,e){const n=e.tracks;n&&(this.requiredTracks=n)}onBufferAppended(t,e){this.checkBuffer()}onBufferFlushed(t,e){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const s=this.timelinePos;this.bufferedPos=s,this.checkBuffer()}}onBufferedToEnd(t){const e=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&e){for(let s=0;s<e.length;s++){const a=e[s];if(a.cue.post){var n;const l=this.schedule.findEventIndex(a.identifier),u=(n=this.schedule.items)==null?void 0:n[l];this.isInterstitial(u)&&this.eventItemsMatch(u,this.bufferingItem)&&this.bufferedToItem(u,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(t){const e=this.playingItem;if(!this.playingLastItem&&e){const n=this.findItemIndex(e);this.setSchedulePosition(n+1)}else this.shouldPlay=!1}updateItem(t,e){const n=this.schedule.items;if(t&&n){const s=this.findItemIndex(t,e);return n[s]||null}return null}trimInPlace(t,e){if(this.isInterstitial(t)&&t.event.appendInPlace&&e.end-t.end>.25){t.event.assetList.forEach((a,l)=>{t.event.isAssetPastPlayoutLimit(l)&&this.clearAssetPlayer(a.identifier,null)});const n=t.end+.25,s=Lt.bufferInfo(this.primaryMedia,n,0);(s.end>n||(s.nextStart||0)>n)&&(this.attachPrimary(n,null),this.flushFrontBuffer(n))}}itemsMatch(t,e){return!!e&&(t===e||t.event&&e.event&&this.eventItemsMatch(t,e)||!t.event&&!e.event&&this.findItemIndex(t)===this.findItemIndex(e))}eventItemsMatch(t,e){var n;return!!e&&(t===e||t.event.identifier===((n=e.event)==null?void 0:n.identifier))}findItemIndex(t,e){return t?this.schedule.findItemIndex(t,e):-1}updateSchedule(){const t=this.mediaSelection;t&&this.schedule.updateSchedule(t,[])}checkBuffer(t){const e=this.schedule.items;if(!e)return;const n=Lt.bufferInfo(this.primaryMedia,this.timelinePos,0);t&&(this.bufferedPos=this.timelinePos),t||(t=n.len<1),this.updateBufferedPos(n.end,e,t)}updateBufferedPos(t,e,n){const s=this.schedule,a=this.bufferingItem;if(this.bufferedPos>t)return;if(e.length===1&&this.itemsMatch(e[0],a)){this.bufferedPos=t;return}const l=this.playingItem,u=this.findItemIndex(l);let d=s.findItemIndexAtTime(t);if(this.bufferedPos<t){var f,h;const g=this.findItemIndex(a),y=Math.min(g+1,e.length-1),S=e[y];if((d===-1&&a&&t>=a.end||(f=S.event)!=null&&f.appendInPlace&&t+.01>=S.start)&&(d=y),y-u>1&&(a==null||(h=a.event)==null?void 0:h.appendInPlace)===!1)return;if(this.bufferedPos=t,d>g&&d>u)this.bufferedToItem(S);else{const v=this.primaryDetails;this.primaryLive&&v&&t>v.edge-v.targetduration&&S.start<v.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(S)&&this.preloadAssets(S.event,0)}}else n&&l&&!this.itemsMatch(l,a)&&(d===u?this.bufferedToItem(l):d===u+1&&this.bufferedToItem(e[d]))}assetsBuffered(t,e){return t.event.assetList.length===0?!1:!t.event.assetList.some(s=>{const a=this.getAssetPlayer(s.identifier);return!(a!=null&&a.bufferedInPlaceToEnd(e))})}setBufferingItem(t){const e=this.bufferingItem,n=this.schedule;if(this.itemsMatch(t,e))this.bufferingItem!==t&&(this.bufferingItem=t);else{const{items:s,events:a}=n;if(!s||!a)return e;const l=this.isInterstitial(t),u=this.getBufferingPlayer();this.bufferingItem=t,this.bufferedPos=Math.max(t.start,Math.min(t.end,this.timelinePos));const d=u?u.remaining:e?e.end-this.timelinePos:0;this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${Us(t)}`+(e?` (${d.toFixed(2)} remaining)`:"")),this.playbackDisabled||(l?t.event.assetList.forEach(f=>{const h=this.getAssetPlayer(f.identifier);h&&h.resumeBuffering()}):(this.hls.resumeBuffering(),this.playerQueue.forEach(f=>f.pauseBuffering()))),this.hls.trigger(A.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:a.slice(0),schedule:s.slice(0),bufferingIndex:this.findItemIndex(t),playingIndex:this.findItemIndex(this.playingItem)})}return e}bufferedToItem(t,e=0){const n=this.setBufferingItem(t);if(!this.playbackDisabled){if(this.isInterstitial(t))this.bufferedToEvent(t,e);else if(n!==null){this.bufferingAsset=null;const s=this.detachedData;s?s.mediaSource?this.attachPrimary(t.start,t,!0):this.preloadPrimary(t):this.preloadPrimary(t)}}}preloadPrimary(t){const e=this.findItemIndex(t),n=this.getPrimaryResumption(t,e);this.startLoadingPrimaryAt(n)}bufferedToEvent(t,e){const n=t.event,s=n.assetList.length===0&&!n.assetListLoader,a=n.cue.once;if(s||!a){const l=this.preloadAssets(n,e);if(l!=null&&l.interstitial.appendInPlace){const u=n.assetList[e],d=this.primaryMedia;u&&d&&this.bufferAssetPlayer(l,d)}}}preloadAssets(t,e){const n=t.assetUrl,s=t.assetList.length,a=s===0&&!t.assetListLoader,l=t.cue.once;if(a){const d=t.timelineStart;if(t.appendInPlace){var u;const y=this.playingItem;!this.isInterstitial(y)&&(y==null||(u=y.nextEvent)==null?void 0:u.identifier)===t.identifier&&this.flushFrontBuffer(d+.25)}let f,h=0;if(!this.playingItem&&this.primaryLive&&(h=this.hls.startPosition,h===-1&&(h=this.hls.liveSyncPosition||0)),h&&!(t.cue.pre||t.cue.post)){const y=h-d;y>0&&(f=Math.round(y*1e3)/1e3)}if(this.log(`Load interstitial asset ${e+1}/${n?1:s} ${t}${f?` live-start: ${h} start-offset: ${f}`:""}`),n)return this.createAsset(t,0,0,d,t.duration,n);const g=this.assetListLoader.loadAssetList(t,f);g&&(t.assetListLoader=g)}else if(!l&&s){for(let d=e;d<s;d++){const f=t.assetList[d],h=this.getAssetPlayerQueueIndex(f.identifier);(h===-1||this.playerQueue[h].destroyed)&&!f.error&&this.createAssetPlayer(t,f,d)}return this.getAssetPlayer(t.assetList[e].identifier)}return null}flushFrontBuffer(t){const e=this.requiredTracks;if(!e)return;this.log(`Removing front buffer starting at ${t}`),Object.keys(e).forEach(s=>{this.hls.trigger(A.BUFFER_FLUSHING,{startOffset:t,endOffset:1/0,type:s})})}getAssetPlayerQueueIndex(t){const e=this.playerQueue;for(let n=0;n<e.length;n++)if(t===e[n].assetId)return n;return-1}getAssetPlayer(t){const e=this.getAssetPlayerQueueIndex(t);return this.playerQueue[e]||null}getBufferingPlayer(){const{playerQueue:t,primaryMedia:e}=this;if(e){for(let n=0;n<t.length;n++)if(t[n].media===e)return t[n]}return null}createAsset(t,e,n,s,a,l){const u={parentIdentifier:t.identifier,identifier:LB(t,l,e),duration:a,startOffset:n,timelineStart:s,uri:l};return this.createAssetPlayer(t,u,e)}createAssetPlayer(t,e,n){const s=this.hls,a=s.userConfig;let l=a.videoPreference;const u=s.loadLevelObj||s.levels[s.currentLevel];(l||u)&&(l=Wt({},l),u.videoCodec&&(l.videoCodec=u.videoCodec),u.videoRange&&(l.allowedVideoRanges=[u.videoRange]));const d=s.audioTracks[s.audioTrack],f=s.subtitleTracks[s.subtitleTrack];let h=0;if(this.primaryLive||t.appendInPlace){const L=this.timelinePos-e.timelineStart;if(L>1){const I=e.duration;I&&L<I&&(h=L)}}const g=e.identifier,y=zt(zt({},a),{},{autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:s.sessionId,assetPlayerId:g,abrEwmaDefaultEstimate:s.bandwidthEstimate,interstitialsController:void 0,startPosition:h,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:l,audioPreference:d||a.audioPreference,subtitlePreference:f||a.subtitlePreference});t.appendInPlace&&(t.appendInPlaceStarted=!0,e.timelineStart&&(y.timelineOffset=e.timelineStart));const S=y.cmcd;S!=null&&S.sessionId&&S.contentId&&(y.cmcd=Wt({},S,{contentId:Sl(e.uri)})),this.getAssetPlayer(g)&&this.warn(`Duplicate date range identifier ${t} and asset ${g}`);const v=new DB(this.HlsPlayerClass,y,t,e);this.playerQueue.push(v),t.assetList[n]=e;const E=L=>{if(L.live){const P=new Error(`Interstitials MUST be VOD assets ${t}`),M={fatal:!0,type:vt.OTHER_ERROR,details:z.INTERSTITIAL_ASSET_ITEM_ERROR,error:P};this.handleAssetItemError(M,t,this.schedule.findEventIndex(t.identifier),n,P.message);return}const I=L.edge-L.fragmentStart,_=e.duration;(_===null||I>_)&&(this.log(`Interstitial asset "${g}" duration change ${_} > ${I}`),e.duration=I,this.updateSchedule())};v.on(A.LEVEL_UPDATED,(L,{details:I})=>E(I)),v.on(A.LEVEL_PTS_UPDATED,(L,{details:I})=>E(I));const x=(L,I)=>{const _=this.getAssetPlayer(g);if(_&&I.tracks){_.off(A.BUFFER_CODECS,x),_.tracks=I.tracks;const P=this.primaryMedia;this.bufferingAsset===_.assetItem&&P&&!_.media&&this.bufferAssetPlayer(_,P)}};v.on(A.BUFFER_CODECS,x);const b=()=>{var L;const I=this.getAssetPlayer(g);if(this.log(`buffered to end of asset ${I}`),!I)return;const _=this.schedule.findEventIndex(t.identifier),P=(L=this.schedule.items)==null?void 0:L[_];if(this.isInterstitial(P)){const k=t.findAssetIndex(e),F=qm(t,k);if(!t.isAssetPastPlayoutLimit(F))this.bufferedToItem(P,F);else{var M;const R=(M=this.schedule.items)==null?void 0:M[_+1];R&&this.bufferedToItem(R)}}};v.on(A.BUFFERED_TO_END,b);const D=L=>()=>{if(!this.getAssetPlayer(g))return;this.shouldPlay=!0;const _=this.schedule.findEventIndex(t.identifier);this.advanceAfterAssetEnded(t,_,L)};return v.once(A.MEDIA_ENDED,D(n)),v.once(A.PLAYOUT_LIMIT_REACHED,D(1/0)),v.on(A.ERROR,(L,I)=>{const _=this.getAssetPlayer(g);if(I.details===z.BUFFER_STALLED_ERROR){if(_!=null&&_.media){const P=_.currentTime,M=_.duration-P;P&&t.appendInPlace&&M/_.media.playbackRate<.5?(this.log(`Advancing buffer past end of asset ${g} ${t} at ${_.media.currentTime}`),b()):(this.warn(`Stalled at ${P} of ${P+M} in asset ${g} ${t}`),this.onTimeupdate(),this.checkBuffer(!0))}return}this.handleAssetItemError(I,t,this.schedule.findEventIndex(t.identifier),n,`Asset player error ${I.error} ${t}`)}),v.on(A.DESTROYING,()=>{if(!this.getAssetPlayer(g))return;const I=new Error(`Asset player destroyed unexpectedly ${g}`),_={fatal:!0,type:vt.OTHER_ERROR,details:z.INTERSTITIAL_ASSET_ITEM_ERROR,error:I};this.handleAssetItemError(_,t,this.schedule.findEventIndex(t.identifier),n,I.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${Oa(e)}`),this.hls.trigger(A.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:e,assetListIndex:n,event:t,player:v}),v}clearInterstitial(t,e){t.assetList.forEach(n=>{this.clearAssetPlayer(n.identifier,e)}),t.reset()}resetAssetPlayer(t){const e=this.getAssetPlayerQueueIndex(t);if(e!==-1){this.log(`reset asset player "${t}" after error`);const n=this.playerQueue[e];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(t,e){const n=this.getAssetPlayerQueueIndex(t);if(n!==-1){this.log(`clear asset player "${t}" toSegment: ${e&&Us(e)}`);const s=this.playerQueue[n];this.transferMediaFromPlayer(s,e),this.playerQueue.splice(n,1),s.destroy()}}emptyPlayerQueue(){let t;for(;t=this.playerQueue.pop();)t.destroy();this.playerQueue=[]}startAssetPlayer(t,e,n,s,a){const{interstitial:l,assetItem:u,assetId:d}=t,f=l.assetList.length,h=this.playingAsset;this.endedAsset=null,this.playingAsset=u,(!h||h.identifier!==d)&&(h&&(this.clearAssetPlayer(h.identifier,n[s]),delete h.error),this.log(`INTERSTITIAL_ASSET_STARTED ${e+1}/${f} ${Oa(u)}`),this.hls.trigger(A.INTERSTITIAL_ASSET_STARTED,{asset:u,assetListIndex:e,event:l,schedule:n.slice(0),scheduleIndex:s,player:t})),this.bufferAssetPlayer(t,a)}bufferAssetPlayer(t,e){var n,s;const{interstitial:a,assetItem:l}=t,u=this.schedule.findEventIndex(a.identifier),d=(n=this.schedule.items)==null?void 0:n[u];if(!d)return;this.setBufferingItem(d),this.bufferingAsset=l;const f=this.getBufferingPlayer();if(f===t)return;const h=a.appendInPlace;if(h&&f?.interstitial.appendInPlace===!1)return;const g=f?.tracks||((s=this.detachedData)==null?void 0:s.tracks)||this.requiredTracks;if(h&&l!==this.playingAsset){if(!t.tracks)return;if(g&&!m1(g,t.tracks)){const y=new Error(`Asset ${Oa(l)} SourceBuffer tracks ('${Object.keys(t.tracks)}') are not compatible with primary content tracks ('${Object.keys(g)}')`),S={fatal:!0,type:vt.OTHER_ERROR,details:z.INTERSTITIAL_ASSET_ITEM_ERROR,error:y},v=a.findAssetIndex(l);this.handleAssetItemError(S,a,u,v,y.message);return}}this.transferMediaTo(t,e)}handleAssetItemError(t,e,n,s,a){if(t.details===z.BUFFER_STALLED_ERROR)return;const l=e.assetList[s];this.warn(`INTERSTITIAL_ASSET_ERROR ${l&&Oa(l)} ${t.error}`);const u=l?.identifier,d=this.getAssetPlayerQueueIndex(u),f=this.playerQueue[d]||null,h=this.schedule.items,g=Wt({},t,{fatal:!1,errorAction:kl(!0),asset:l,assetListIndex:s,event:e,schedule:h,scheduleIndex:n,player:f});if(this.hls.trigger(A.INTERSTITIAL_ASSET_ERROR,g),!t.fatal)return;const y=this.playingAsset,S=new Error(a);if(l&&(this.clearAssetPlayer(u,null),l.error=S),!e.assetList.some(v=>!v.error))e.error=S;else if(e.appendInPlace){for(let v=s;v<e.assetList.length;v++)this.resetAssetPlayer(e.assetList[v].identifier);this.updateSchedule()}e.error?this.primaryFallback(e):y&&y.identifier===u&&this.advanceAfterAssetEnded(e,n,s)}primaryFallback(t){const e=t.timelineStart,n=this.effectivePlayingItem;if(this.updateSchedule(),n){this.log(`Fallback to primary from event "${t.identifier}" start: ${e} pos: ${this.timelinePos} playing: ${n?Us(n):"<none>"} error: ${t.error}`);let s=this.timelinePos;s===-1&&(s=this.hls.startPosition);const a=this.updateItem(n,s);this.itemsMatch(n,a)&&this.clearInterstitial(t,null),t.appendInPlace&&(this.attachPrimary(e,null),this.flushFrontBuffer(e));const l=this.schedule.findItemIndexAtTime(s);this.setSchedulePosition(l)}else this.checkStart()}onAssetListLoaded(t,e){var n;const s=e.event,a=s.identifier,l=e.assetListResponse.ASSETS;if(!this.schedule.hasEvent(a))return;const u=s.timelineStart,d=s.duration;let f=0;l.forEach((v,E)=>{const x=parseFloat(v.DURATION);this.createAsset(s,E,f,u+f,x,v.URI),f+=x}),s.duration=f,this.log(`Loaded asset-list with duration: ${f} (was: ${d}) ${s}`);const h=this.waitingItem,g=h?.event.identifier===a;this.updateSchedule();const y=(n=this.bufferingItem)==null?void 0:n.event;if(g){var S;const v=this.schedule.findEventIndex(a),E=(S=this.schedule.items)==null?void 0:S[v];if(E){if(!this.playingItem&&this.timelinePos>E.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==v){s.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${s}`),this.primaryFallback(s);return}this.setBufferingItem(E)}this.setSchedulePosition(v)}else if(y?.identifier===a&&y.appendInPlace){const v=s.assetList[0],E=this.getAssetPlayer(v.identifier),x=this.primaryMedia;v&&E&&x&&this.bufferAssetPlayer(E,x)}}onError(t,e){switch(e.details){case z.ASSET_LIST_PARSING_ERROR:case z.ASSET_LIST_LOAD_ERROR:case z.ASSET_LIST_LOAD_TIMEOUT:{const n=e.interstitial;n&&this.primaryFallback(n);break}case z.BUFFER_STALLED_ERROR:{this.onTimeupdate(),this.checkBuffer(!0);break}}}}const Ux=500;class MB extends t0{constructor(t,e,n){super(t,e,n,"subtitle-stream-controller",yt.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:t}=this;t.on(A.LEVEL_LOADED,this.onLevelLoaded,this),t.on(A.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(A.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(A.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(A.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(A.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:t}=this;t.off(A.LEVEL_LOADED,this.onLevelLoaded,this),t.off(A.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(A.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(A.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(A.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(A.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(t,e){this.stopLoad(),this.state=ot.IDLE,this.setInterval(Ux),this.nextLoadPosition=this.lastCurrentTime=t+this.timelineOffset,this.startPosition=e?-1:t,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(t,e){this.tracksBuffered=[],super.onMediaDetaching(t,e)}onLevelLoaded(t,e){this.mainDetails=e.details}onSubtitleFragProcessed(t,e){const{frag:n,success:s}=e;if(He(n)&&(this.fragPrevious=n),this.state=ot.IDLE,!s)return;const a=this.tracksBuffered[this.currentTrackId];if(!a)return;let l;const u=n.start;for(let f=0;f<a.length;f++)if(u>=a[f].start&&u<=a[f].end){l=a[f];break}const d=n.start+n.duration;l?l.end=d:(l={start:u,end:d},a.push(l)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(t,e){const{startOffset:n,endOffset:s}=e;if(n===0&&s!==Number.POSITIVE_INFINITY){const a=s-1;if(a<=0)return;e.endOffsetSubtitles=Math.max(0,a),this.tracksBuffered.forEach(l=>{for(let u=0;u<l.length;){if(l[u].end<=a){l.shift();continue}else if(l[u].start<a)l[u].start=a;else break;u++}}),this.fragmentTracker.removeFragmentsInRange(n,a,yt.SUBTITLE)}}onError(t,e){const n=e.frag;n?.type===yt.SUBTITLE&&(e.details===z.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==ot.STOPPED&&(this.state=ot.IDLE))}onSubtitleTracksUpdated(t,{subtitleTracks:e}){if(this.levels&&hR(this.levels,e)){this.levels=e.map(n=>new Pl(n));return}this.tracksBuffered=[],this.levels=e.map(n=>{const s=new Pl(n);return this.tracksBuffered[s.id]=[],s}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,yt.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(t,e){var n;if(this.currentTrackId=e.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const s=this.levels[this.currentTrackId];s!=null&&s.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,s&&this.state!==ot.STOPPED&&this.setInterval(Ux)}onSubtitleTrackLoaded(t,e){var n;const{currentTrackId:s,levels:a}=this,{details:l,id:u}=e;if(!a){this.warn(`Subtitle tracks were reset while loading level ${u}`);return}const d=a[u];if(u>=a.length||!d)return;this.log(`Subtitle track ${u} loaded [${l.startSN},${l.endSN}]${l.lastPartSn?`[part-${l.lastPartSn}-${l.lastPartIndex}]`:""},duration:${l.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let f=0;if(l.live||(n=d.details)!=null&&n.live){const g=this.mainDetails;if(l.deltaUpdateFailed||!g)return;const y=g.fragments[0];if(!d.details)l.hasProgramDateTime&&g.hasProgramDateTime?(Af(l,g),f=l.fragmentStart):y&&(f=y.start,jg(l,f));else{var h;f=this.alignPlaylists(l,d.details,(h=this.levelLastLoaded)==null?void 0:h.details),f===0&&y&&(f=y.start,jg(l,f))}}d.details=l,this.levelLastLoaded=d,u===s&&(this.hls.trigger(A.SUBTITLE_TRACK_UPDATED,{details:l,id:u,groupId:e.groupId}),this.tick(),l.live&&!this.fragCurrent&&this.media&&this.state===ot.IDLE&&(wr(null,l.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),d.details=void 0)))}_handleFragmentLoadComplete(t){const{frag:e,payload:n}=t,s=e.decryptdata,a=this.hls;if(!this.fragContextChanged(e)&&n&&n.byteLength>0&&s!=null&&s.key&&s.iv&&Ga(s.method)){const l=performance.now();this.decrypter.decrypt(new Uint8Array(n),s.key.buffer,s.iv.buffer,Zp(s.method)).catch(u=>{throw a.trigger(A.ERROR,{type:vt.MEDIA_ERROR,details:z.FRAG_DECRYPT_ERROR,fatal:!1,error:u,reason:u.message,frag:e}),u}).then(u=>{const d=performance.now();a.trigger(A.FRAG_DECRYPTED,{frag:e,payload:u,stats:{tstart:l,tdecrypt:d}})}).catch(u=>{this.warn(`${u.name}: ${u.message}`),this.state=ot.IDLE})}}doTick(){if(!this.media){this.state=ot.IDLE;return}if(this.state===ot.IDLE){const{currentTrackId:t,levels:e}=this,n=e?.[t];if(!n||!e.length||!n.details||this.waitForLive(n))return;const{config:s}=this,a=this.getLoadPosition(),l=Lt.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],a,s.maxBufferHole),{end:u,len:d}=l,f=n.details,h=this.hls.maxBufferLength+f.levelTargetDuration;if(d>h)return;const g=f.fragments,y=g.length,S=f.edge;let v=null;const E=this.fragPrevious;if(u<S){const D=s.maxFragLookUpTolerance,L=u>S-D?0:D;v=wr(E,g,Math.max(g[0].start,u),L),!v&&E&&E.start<g[0].start&&(v=g[0])}else v=g[y-1];if(v=this.filterReplacedPrimary(v,n.details),!v)return;const x=v.sn-f.startSN,b=g[x-1];if(b&&b.cc===v.cc&&this.fragmentTracker.getState(b)===ke.NOT_LOADED&&(v=b),this.fragmentTracker.getState(v)===ke.NOT_LOADED){const D=this.mapToInitFragWhenRequired(v);D&&this.loadFragment(D,n,u)}}}loadFragment(t,e,n){He(t)?super.loadFragment(t,e,n):this._loadInitSegment(t,e)}get mediaBufferTimeRanges(){return new PB(this.tracksBuffered[this.currentTrackId]||[])}}class PB{constructor(t){this.buffered=void 0;const e=(n,s,a)=>{if(s=s>>>0,s>a-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${s}) is greater than the maximum bound (${a})`);return t[s][n]};this.buffered={get length(){return t.length},end(n){return e("end",n,t.length)},start(n){return e("start",n,t.length)}}}}const kB={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},AR=i=>String.fromCharCode(kB[i]||i),ri=15,ts=100,NB={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},BB={17:2,18:4,21:6,22:8,23:10,19:13,20:15},FB={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},UB={25:2,26:4,29:6,30:8,31:10,27:13,28:15},$B=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class VB{constructor(){this.time=null,this.verboseLevel=0}log(t,e){if(this.verboseLevel>=t){const n=typeof e=="function"?e():e;Vt.log(`${this.time} [${t}] ${n}`)}}}const gr=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].toString(16));return e};class RR{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(t){const e=["foreground","underline","italics","background","flash"];for(let n=0;n<e.length;n++){const s=e[n];t.hasOwnProperty(s)&&(this[s]=t[s])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash}copy(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class GB{constructor(){this.uchar=" ",this.penState=new RR}reset(){this.uchar=" ",this.penState.reset()}setChar(t,e){this.uchar=t,this.penState.copy(e)}setPenState(t){this.penState.copy(t)}equals(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)}copy(t){this.uchar=t.uchar,this.penState.copy(t.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class HB{constructor(t){this.chars=[],this.pos=0,this.currPenState=new RR,this.cueStartTime=null,this.logger=void 0;for(let e=0;e<ts;e++)this.chars.push(new GB);this.logger=t}equals(t){for(let e=0;e<ts;e++)if(!this.chars[e].equals(t.chars[e]))return!1;return!0}copy(t){for(let e=0;e<ts;e++)this.chars[e].copy(t.chars[e])}isEmpty(){let t=!0;for(let e=0;e<ts;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t}setCursor(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>ts&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=ts)}moveCursor(t){const e=this.pos+t;if(t>1)for(let n=this.pos+1;n<e+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(e)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(t){t>=144&&this.backSpace();const e=AR(t);if(this.pos>=ts){this.logger.log(0,()=>"Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1)}clearFromPos(t){let e;for(e=t;e<ts;e++)this.chars[e].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const t=[];let e=!0;for(let n=0;n<ts;n++){const s=this.chars[n].uchar;s!==" "&&(e=!1),t.push(s)}return e?"":t.join("")}setPenStyles(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)}}class Xm{constructor(t){this.rows=[],this.currRow=ri-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let e=0;e<ri;e++)this.rows.push(new HB(t));this.logger=t}reset(){for(let t=0;t<ri;t++)this.rows[t].clear();this.currRow=ri-1}equals(t){let e=!0;for(let n=0;n<ri;n++)if(!this.rows[n].equals(t.rows[n])){e=!1;break}return e}copy(t){for(let e=0;e<ri;e++)this.rows[e].copy(t.rows[e])}isEmpty(){let t=!0;for(let e=0;e<ri;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(t){this.rows[this.currRow].insertChar(t)}setPen(t){this.rows[this.currRow].setPenStyles(t)}moveCursor(t){this.rows[this.currRow].moveCursor(t)}setCursor(t){this.logger.log(2,"setCursor: "+t),this.rows[this.currRow].setCursor(t)}setPAC(t){this.logger.log(2,()=>"pacData = "+le(t));let e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(let u=0;u<ri;u++)this.rows[u].clear();const a=this.currRow+1-this.nrRollUpRows,l=this.lastOutputScreen;if(l){const u=l.rows[a].cueStartTime,d=this.logger.time;if(u!==null&&d!==null&&u<d)for(let f=0;f<this.nrRollUpRows;f++)this.rows[e-this.nrRollUpRows+f+1].copy(l.rows[a+f])}}this.currRow=e;const n=this.rows[this.currRow];if(t.indent!==null){const a=t.indent,l=Math.max(a-1,0);n.setCursor(t.indent),t.color=n.chars[l].penState.foreground}const s={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(s)}setBkgData(t){this.logger.log(2,()=>"bkgData = "+le(t)),this.backSpace(),this.setPen(t),this.insertChar(32)}setRollUpRows(t){this.nrRollUpRows=t}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),this.logger.log(2,"Rolling up")}getDisplayText(t){t=t||!1;const e=[];let n="",s=-1;for(let a=0;a<ri;a++){const l=this.rows[a].getTextString();l&&(s=a+1,t?e.push("Row "+s+": '"+l+"'"):e.push(l.trim()))}return e.length>0&&(t?n="["+e.join(" | ")+"]":n=e.join(`
`)),n}getTextAndFormat(){return this.rows}}class $x{constructor(t,e,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new Xm(n),this.nonDisplayedMemory=new Xm(n),this.lastOutputScreen=new Xm(n),this.currRollUpRow=this.displayedMemory.rows[ri-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[ri-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(t){this.outputFilter=t}setPAC(t){this.writeScreen.setPAC(t)}setBkgData(t){this.writeScreen.setBkgData(t)}setMode(t){t!==this.mode&&(this.mode=t,this.logger.log(2,()=>"MODE="+t),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)}insertChars(t){for(let n=0;n<t.length;n++)this.writeScreen.insertChar(t[n]);const e=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>e+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(t){this.logger.log(2,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(t){this.logger.log(2,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)}ccMIDROW(t){const e={flash:!1};if(e.underline=t%2===1,e.italics=t>=46,e.italics)e.foreground="white";else{const n=Math.floor(t/2)-16,s=["white","green","blue","cyan","red","yellow","magenta"];e.foreground=s[n]}this.logger.log(2,"MIDROW: "+le(e)),this.writeScreen.setPen(e)}outputDataUpdate(t=!1){const e=this.logger.time;e!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=e:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))}}class Vx{constructor(t,e,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=KB(),this.logger=void 0;const s=this.logger=new VB;this.channels=[null,new $x(t,e,s),new $x(t+1,n,s)]}getHandler(t){return this.channels[t].getHandler()}setHandler(t,e){this.channels[t].setHandler(e)}addData(t,e){this.logger.time=t;for(let n=0;n<e.length;n+=2){const s=e[n]&127,a=e[n+1]&127;let l=!1,u=null;if(s===0&&a===0)continue;this.logger.log(3,()=>"["+gr([e[n],e[n+1]])+"] -> ("+gr([s,a])+")");const d=this.cmdHistory;if(s>=16&&s<=31){if(jB(s,a,d)){Nc(null,null,d),this.logger.log(3,()=>"Repeated command ("+gr([s,a])+") is dropped");continue}Nc(s,a,this.cmdHistory),l=this.parseCmd(s,a),l||(l=this.parseMidrow(s,a)),l||(l=this.parsePAC(s,a)),l||(l=this.parseBackgroundAttributes(s,a))}else Nc(null,null,d);if(!l&&(u=this.parseChars(s,a),u)){const h=this.currentChannel;h&&h>0?this.channels[h].insertChars(u):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!l&&!u&&this.logger.log(2,()=>"Couldn't parse cleaned data "+gr([s,a])+" orig: "+gr([e[n],e[n+1]]))}}parseCmd(t,e){const n=(t===20||t===28||t===21||t===29)&&e>=32&&e<=47,s=(t===23||t===31)&&e>=33&&e<=35;if(!(n||s))return!1;const a=t===20||t===21||t===23?1:2,l=this.channels[a];return t===20||t===21||t===28||t===29?e===32?l.ccRCL():e===33?l.ccBS():e===34?l.ccAOF():e===35?l.ccAON():e===36?l.ccDER():e===37?l.ccRU(2):e===38?l.ccRU(3):e===39?l.ccRU(4):e===40?l.ccFON():e===41?l.ccRDC():e===42?l.ccTR():e===43?l.ccRTD():e===44?l.ccEDM():e===45?l.ccCR():e===46?l.ccENM():e===47&&l.ccEOC():l.ccTO(e-32),this.currentChannel=a,!0}parseMidrow(t,e){let n=0;if((t===17||t===25)&&e>=32&&e<=47){if(t===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const s=this.channels[n];return s?(s.ccMIDROW(e),this.logger.log(3,()=>"MIDROW ("+gr([t,e])+")"),!0):!1}return!1}parsePAC(t,e){let n;const s=(t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127,a=(t===16||t===24)&&e>=64&&e<=95;if(!(s||a))return!1;const l=t<=23?1:2;e>=64&&e<=95?n=l===1?NB[t]:FB[t]:n=l===1?BB[t]:UB[t];const u=this.channels[l];return u?(u.setPAC(this.interpretPAC(n,e)),this.currentChannel=l,!0):!1}interpretPAC(t,e){let n;const s={color:null,italics:!1,indent:null,underline:!1,row:t};return e>95?n=e-96:n=e-64,s.underline=(n&1)===1,n<=13?s.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(s.italics=!0,s.color="white"):s.indent=Math.floor((n-16)/2)*4,s}parseChars(t,e){let n,s=null,a=null;if(t>=25?(n=2,a=t-8):(n=1,a=t),a>=17&&a<=19){let l;a===17?l=e+80:a===18?l=e+112:l=e+144,this.logger.log(2,()=>"Special char '"+AR(l)+"' in channel "+n),s=[l]}else t>=32&&t<=127&&(s=e===0?[t]:[t,e]);return s&&this.logger.log(3,()=>"Char codes =  "+gr(s).join(",")),s}parseBackgroundAttributes(t,e){const n=(t===16||t===24)&&e>=32&&e<=47,s=(t===23||t===31)&&e>=45&&e<=47;if(!(n||s))return!1;let a;const l={};t===16||t===24?(a=Math.floor((e-32)/2),l.background=$B[a],e%2===1&&(l.background=l.background+"_semi")):e===45?l.background="transparent":(l.foreground="black",e===47&&(l.underline=!0));const u=t<=23?1:2;return this.channels[u].setBkgData(l),!0}reset(){for(let t=0;t<Object.keys(this.channels).length;t++){const e=this.channels[t];e&&e.reset()}Nc(null,null,this.cmdHistory)}cueSplitAtTime(t){for(let e=0;e<this.channels.length;e++){const n=this.channels[e];n&&n.cueSplitAtTime(t)}}}function Nc(i,t,e){e.a=i,e.b=t}function jB(i,t,e){return e.a===i&&e.b===t}function KB(){return{a:null,b:null}}var f0=function(){if(bf!=null&&bf.VTTCue)return self.VTTCue;const i=["","lr","rl"],t=["start","middle","end","left","right"];function e(u,d){if(typeof d!="string"||!Array.isArray(u))return!1;const f=d.toLowerCase();return~u.indexOf(f)?f:!1}function n(u){return e(i,u)}function s(u){return e(t,u)}function a(u,...d){let f=1;for(;f<arguments.length;f++){const h=arguments[f];for(const g in h)u[g]=h[g]}return u}function l(u,d,f){const h=this,g={enumerable:!0};h.hasBeenReset=!1;let y="",S=!1,v=u,E=d,x=f,b=null,D="",L=!0,I="auto",_="start",P=50,M="middle",k=50,F="middle";Object.defineProperty(h,"id",a({},g,{get:function(){return y},set:function(R){y=""+R}})),Object.defineProperty(h,"pauseOnExit",a({},g,{get:function(){return S},set:function(R){S=!!R}})),Object.defineProperty(h,"startTime",a({},g,{get:function(){return v},set:function(R){if(typeof R!="number")throw new TypeError("Start time must be set to a number.");v=R,this.hasBeenReset=!0}})),Object.defineProperty(h,"endTime",a({},g,{get:function(){return E},set:function(R){if(typeof R!="number")throw new TypeError("End time must be set to a number.");E=R,this.hasBeenReset=!0}})),Object.defineProperty(h,"text",a({},g,{get:function(){return x},set:function(R){x=""+R,this.hasBeenReset=!0}})),Object.defineProperty(h,"region",a({},g,{get:function(){return b},set:function(R){b=R,this.hasBeenReset=!0}})),Object.defineProperty(h,"vertical",a({},g,{get:function(){return D},set:function(R){const $=n(R);if($===!1)throw new SyntaxError("An invalid or illegal string was specified.");D=$,this.hasBeenReset=!0}})),Object.defineProperty(h,"snapToLines",a({},g,{get:function(){return L},set:function(R){L=!!R,this.hasBeenReset=!0}})),Object.defineProperty(h,"line",a({},g,{get:function(){return I},set:function(R){if(typeof R!="number"&&R!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");I=R,this.hasBeenReset=!0}})),Object.defineProperty(h,"lineAlign",a({},g,{get:function(){return _},set:function(R){const $=s(R);if(!$)throw new SyntaxError("An invalid or illegal string was specified.");_=$,this.hasBeenReset=!0}})),Object.defineProperty(h,"position",a({},g,{get:function(){return P},set:function(R){if(R<0||R>100)throw new Error("Position must be between 0 and 100.");P=R,this.hasBeenReset=!0}})),Object.defineProperty(h,"positionAlign",a({},g,{get:function(){return M},set:function(R){const $=s(R);if(!$)throw new SyntaxError("An invalid or illegal string was specified.");M=$,this.hasBeenReset=!0}})),Object.defineProperty(h,"size",a({},g,{get:function(){return k},set:function(R){if(R<0||R>100)throw new Error("Size must be between 0 and 100.");k=R,this.hasBeenReset=!0}})),Object.defineProperty(h,"align",a({},g,{get:function(){return F},set:function(R){const $=s(R);if(!$)throw new SyntaxError("An invalid or illegal string was specified.");F=$,this.hasBeenReset=!0}})),h.displayState=void 0}return l.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},l}();class zB{decode(t,e){if(!t)return"";if(typeof t!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}function LR(i){function t(n,s,a,l){return(n|0)*3600+(s|0)*60+(a|0)+parseFloat(l||0)}const e=i.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return e?parseFloat(e[2])>59?t(e[2],e[3],0,e[4]):t(e[1],e[2],e[3],e[4]):null}class YB{constructor(){this.values=Object.create(null)}set(t,e){!this.get(t)&&e!==""&&(this.values[t]=e)}get(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e}has(t){return t in this.values}alt(t,e,n){for(let s=0;s<n.length;++s)if(e===n[s]){this.set(t,e);break}}integer(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))}percent(t,e){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(e)){const n=parseFloat(e);if(n>=0&&n<=100)return this.set(t,n),!0}return!1}}function CR(i,t,e,n){const s=n?i.split(n):[i];for(const a in s){if(typeof s[a]!="string")continue;const l=s[a].split(e);if(l.length!==2)continue;const u=l[0],d=l[1];t(u,d)}}const Qg=new f0(0,0,""),Bc=Qg.align==="middle"?"middle":"center";function qB(i,t,e){const n=i;function s(){const u=LR(i);if(u===null)throw new Error("Malformed timestamp: "+n);return i=i.replace(/^[^\sa-zA-Z-]+/,""),u}function a(u,d){const f=new YB;CR(u,function(y,S){let v;switch(y){case"region":for(let E=e.length-1;E>=0;E--)if(e[E].id===S){f.set(y,e[E].region);break}break;case"vertical":f.alt(y,S,["rl","lr"]);break;case"line":v=S.split(","),f.integer(y,v[0]),f.percent(y,v[0])&&f.set("snapToLines",!1),f.alt(y,v[0],["auto"]),v.length===2&&f.alt("lineAlign",v[1],["start",Bc,"end"]);break;case"position":v=S.split(","),f.percent(y,v[0]),v.length===2&&f.alt("positionAlign",v[1],["start",Bc,"end","line-left","line-right","auto"]);break;case"size":f.percent(y,S);break;case"align":f.alt(y,S,["start",Bc,"end","left","right"]);break}},/:/,/\s/),d.region=f.get("region",null),d.vertical=f.get("vertical","");let h=f.get("line","auto");h==="auto"&&Qg.line===-1&&(h=-1),d.line=h,d.lineAlign=f.get("lineAlign","start"),d.snapToLines=f.get("snapToLines",!0),d.size=f.get("size",100),d.align=f.get("align",Bc);let g=f.get("position","auto");g==="auto"&&Qg.position===50&&(g=d.align==="start"||d.align==="left"?0:d.align==="end"||d.align==="right"?100:50),d.position=g}function l(){i=i.replace(/^\s+/,"")}if(l(),t.startTime=s(),l(),i.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);i=i.slice(3),l(),t.endTime=s(),l(),a(i,t)}function _R(i){return i.replace(/<br(?: \/)?>/gi,`
`)}class XB{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new zB,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(t){const e=this;t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));function n(){let a=e.buffer,l=0;for(a=_R(a);l<a.length&&a[l]!=="\r"&&a[l]!==`
`;)++l;const u=a.slice(0,l);return a[l]==="\r"&&++l,a[l]===`
`&&++l,e.buffer=a.slice(l),u}function s(a){CR(a,function(l,u){},/:/)}try{let a="";if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;a=n();const u=a.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(u!=null&&u[0]))throw new Error("Malformed WebVTT signature.");e.state="HEADER"}let l=!1;for(;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(l?l=!1:a=n(),e.state){case"HEADER":/:/.test(a)?s(a):a||(e.state="ID");continue;case"NOTE":a||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){e.state="NOTE";break}if(!a)continue;if(e.cue=new f0(0,0,""),e.state="CUE",a.indexOf("-->")===-1){e.cue.id=a;continue}case"CUE":if(!e.cue){e.state="BADCUE";continue}try{qB(a,e.cue,e.regionList)}catch{e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":{const u=a.indexOf("-->")!==-1;if(!a||u&&(l=!0)){e.oncue&&e.cue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}if(e.cue===null)continue;e.cue.text&&(e.cue.text+=`
`),e.cue.text+=a}continue;case"BADCUE":a||(e.state="ID")}}}catch{e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const t=this;try{if((t.cue||t.state==="HEADER")&&(t.buffer+=`

`,t.parse()),t.state==="INITIAL"||t.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(e){t.onparsingerror&&t.onparsingerror(e)}return t.onflush&&t.onflush(),this}}const WB=/\r\n|\n\r|\n|\r/g,Wm=function(t,e,n=0){return t.slice(n,n+e.length)===e},QB=function(t){let e=parseInt(t.slice(-3));const n=parseInt(t.slice(-6,-4)),s=parseInt(t.slice(-9,-7)),a=t.length>9?parseInt(t.substring(0,t.indexOf(":"))):0;if(!mt(e)||!mt(n)||!mt(s)||!mt(a))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${t}`);return e+=1e3*n,e+=60*1e3*s,e+=60*60*1e3*a,e};function d0(i,t,e){return Sl(i.toString())+Sl(t.toString())+Sl(e)}const ZB=function(t,e,n){let s=t[e],a=t[s.prevCC];if(!a||!a.new&&s.new){t.ccOffset=t.presentationOffset=s.start,s.new=!1;return}for(;(l=a)!=null&&l.new;){var l;t.ccOffset+=s.start-a.start,s.new=!1,s=a,a=t[s.prevCC]}t.presentationOffset=n};function JB(i,t,e,n,s,a,l){const u=new XB,d=Mn(new Uint8Array(i)).trim().replace(WB,`
`).split(`
`),f=[],h=t?mN(t.baseTime,t.timescale):0;let g="00:00.000",y=0,S=0,v,E=!0;u.oncue=function(x){const b=e[n];let D=e.ccOffset;const L=(y-h)/9e4;if(b!=null&&b.new&&(S!==void 0?D=e.ccOffset=b.start:ZB(e,n,L)),L){if(!t){v=new Error("Missing initPTS for VTT MPEGTS");return}D=L-e.presentationOffset}const I=x.endTime-x.startTime,_=Yn((x.startTime+D-S)*9e4,s*9e4)/9e4;x.startTime=Math.max(_,0),x.endTime=Math.max(_+I,0);const P=x.text.trim();x.text=decodeURIComponent(encodeURIComponent(P)),x.id||(x.id=d0(x.startTime,x.endTime,P)),x.endTime>0&&f.push(x)},u.onparsingerror=function(x){v=x},u.onflush=function(){if(v){l(v);return}a(f)},d.forEach(x=>{if(E)if(Wm(x,"X-TIMESTAMP-MAP=")){E=!1,x.slice(16).split(",").forEach(b=>{Wm(b,"LOCAL:")?g=b.slice(6):Wm(b,"MPEGTS:")&&(y=parseInt(b.slice(7)))});try{S=QB(g)/1e3}catch(b){v=b}return}else x===""&&(E=!1);u.parse(x+`
`)}),u.flush()}const Qm="stpp.ttml.im1t",DR=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,IR=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,tF={left:"start",center:"center",right:"end",start:"start",end:"end"};function Gx(i,t,e,n){const s=_t(new Uint8Array(i),["mdat"]);if(s.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const a=s.map(u=>Mn(u)),l=hN(t.baseTime,1,t.timescale);try{a.forEach(u=>e(eF(u,l)))}catch(u){n(u)}}function eF(i,t){const s=new DOMParser().parseFromString(i,"text/xml").getElementsByTagName("tt")[0];if(!s)throw new Error("Invalid ttml");const a={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},l=Object.keys(a).reduce((g,y)=>(g[y]=s.getAttribute(`ttp:${y}`)||a[y],g),{}),u=s.getAttribute("xml:space")!=="preserve",d=Hx(Zm(s,"styling","style")),f=Hx(Zm(s,"layout","region")),h=Zm(s,"body","[begin]");return[].map.call(h,g=>{const y=wR(g,u);if(!y||!g.hasAttribute("begin"))return null;const S=tg(g.getAttribute("begin"),l),v=tg(g.getAttribute("dur"),l);let E=tg(g.getAttribute("end"),l);if(S===null)throw jx(g);if(E===null){if(v===null)throw jx(g);E=S+v}const x=new f0(S-t,E-t,y);x.id=d0(x.startTime,x.endTime,x.text);const b=f[g.getAttribute("region")],D=d[g.getAttribute("style")],L=nF(b,D,d),{textAlign:I}=L;if(I){const _=tF[I];_&&(x.lineAlign=_),x.align=I}return Wt(x,L),x}).filter(g=>g!==null)}function Zm(i,t,e){const n=i.getElementsByTagName(t)[0];return n?[].slice.call(n.querySelectorAll(e)):[]}function Hx(i){return i.reduce((t,e)=>{const n=e.getAttribute("xml:id");return n&&(t[n]=e),t},{})}function wR(i,t){return[].slice.call(i.childNodes).reduce((e,n,s)=>{var a;return n.nodeName==="br"&&s?e+`
`:(a=n.childNodes)!=null&&a.length?wR(n,t):t?e+n.textContent.trim().replace(/\s+/g," "):e+n.textContent},"")}function nF(i,t,e){const n="http://www.w3.org/ns/ttml#styling";let s=null;const a=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],l=i!=null&&i.hasAttribute("style")?i.getAttribute("style"):null;return l&&e.hasOwnProperty(l)&&(s=e[l]),a.reduce((u,d)=>{const f=Jm(t,n,d)||Jm(i,n,d)||Jm(s,n,d);return f&&(u[d]=f),u},{})}function Jm(i,t,e){return i&&i.hasAttributeNS(t,e)?i.getAttributeNS(t,e):null}function jx(i){return new Error(`Could not parse ttml timestamp ${i}`)}function tg(i,t){if(!i)return null;let e=LR(i);return e===null&&(DR.test(i)?e=iF(i,t):IR.test(i)&&(e=sF(i,t))),e}function iF(i,t){const e=DR.exec(i),n=(e[4]|0)+(e[5]|0)/t.subFrameRate;return(e[1]|0)*3600+(e[2]|0)*60+(e[3]|0)+n/t.frameRate}function sF(i,t){const e=IR.exec(i),n=Number(e[1]);switch(e[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/t.frameRate;case"t":return n/t.tickRate}return n}class Fc{constructor(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(t,e,n){(this.startTime===null||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class rF{constructor(t){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=zx(),this.captionsProperties=void 0,this.hls=t,this.config=t.config,this.Cues=t.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},t.on(A.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(A.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(A.FRAG_LOADING,this.onFragLoading,this),t.on(A.FRAG_LOADED,this.onFragLoaded,this),t.on(A.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.on(A.FRAG_DECRYPTED,this.onFragDecrypted,this),t.on(A.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(A.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.on(A.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:t}=this;t.off(A.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(A.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(A.FRAG_LOADING,this.onFragLoading,this),t.off(A.FRAG_LOADED,this.onFragLoaded,this),t.off(A.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.off(A.FRAG_DECRYPTED,this.onFragDecrypted,this),t.off(A.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(A.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.off(A.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const t=new Fc(this,"textTrack1"),e=new Fc(this,"textTrack2"),n=new Fc(this,"textTrack3"),s=new Fc(this,"textTrack4");this.cea608Parser1=new Vx(1,t,e),this.cea608Parser2=new Vx(3,n,s)}addCues(t,e,n,s,a){let l=!1;for(let u=a.length;u--;){const d=a[u],f=aF(d[0],d[1],e,n);if(f>=0&&(d[0]=Math.min(d[0],e),d[1]=Math.max(d[1],n),l=!0,f/(n-e)>.5))return}if(l||a.push([e,n]),this.config.renderTextTracksNatively){const u=this.captionsTracks[t];this.Cues.newCue(u,e,n,s)}else{const u=this.Cues.newCue(null,e,n,s);this.hls.trigger(A.CUES_PARSED,{type:"captions",cues:u,track:t})}}onInitPtsFound(t,{frag:e,id:n,initPTS:s,timescale:a}){const{unparsedVttFrags:l}=this;n===yt.MAIN&&(this.initPTS[e.cc]={baseTime:s,timescale:a}),l.length&&(this.unparsedVttFrags=[],l.forEach(u=>{this.onFragLoaded(A.FRAG_LOADED,u)}))}getExistingTrack(t,e){const{media:n}=this;if(n)for(let s=0;s<n.textTracks.length;s++){const a=n.textTracks[s];if(Kx(a,{name:t,lang:e,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return a}return null}createCaptionsTrack(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)}createNativeTrack(t){if(this.captionsTracks[t])return;const{captionsProperties:e,captionsTracks:n,media:s}=this,{label:a,languageCode:l}=e[t],u=this.getExistingTrack(a,l);if(u)n[t]=u,Ma(n[t]),ER(n[t],s);else{const d=this.createTextTrack("captions",a,l);d&&(d[t]=!0,n[t]=d)}}createNonNativeTrack(t){if(this.nonNativeCaptionsTracks[t])return;const e=this.captionsProperties[t];if(!e)return;const n=e.label,s={_id:t,label:n,kind:"captions",default:e.media?!!e.media.default:!1,closedCaptions:e.media};this.nonNativeCaptionsTracks[t]=s,this.hls.trigger(A.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[s]})}createTextTrack(t,e,n){const s=this.media;if(s)return s.addTextTrack(t,e,n)}onMediaAttaching(t,e){this.media=e.media,e.mediaSource||this._cleanTracks()}onMediaDetaching(t,e){const n=!!e.transferMedia;if(this.media=null,n)return;const{captionsTracks:s}=this;Object.keys(s).forEach(a=>{Ma(s[a]),delete s[a]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=zx(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:t}=this;if(!t)return;const e=t.textTracks;if(e)for(let n=0;n<e.length;n++)Ma(e[n])}onSubtitleTracksUpdated(t,e){const n=e.subtitleTracks||[],s=n.some(a=>a.textCodec===Qm);if(this.config.enableWebVTT||s&&this.config.enableIMSC1){if(hR(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const l=this.media,u=l?ef(l.textTracks):null;if(this.tracks.forEach((d,f)=>{let h;if(u){let g=null;for(let y=0;y<u.length;y++)if(u[y]&&Kx(u[y],d)){g=u[y],u[y]=null;break}g&&(h=g)}if(h)Ma(h);else{const g=OR(d);h=this.createTextTrack(g,d.name,d.lang),h&&(h.mode="disabled")}h&&this.textTracks.push(h)}),u!=null&&u.length){const d=u.filter(f=>f!==null).map(f=>f.label);d.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${d.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const l=this.tracks.map(u=>({label:u.name,kind:u.type.toLowerCase(),default:u.default,subtitleTrack:u}));this.hls.trigger(A.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:l})}}}onManifestLoaded(t,e){this.config.enableCEA708Captions&&e.captions&&e.captions.forEach(n=>{const s=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!s)return;const a=`textTrack${s[1]}`,l=this.captionsProperties[a];l&&(l.label=n.name,n.lang&&(l.languageCode=n.lang),l.media=n)})}closedCaptionsForLevel(t){const e=this.hls.levels[t.level];return e?.attrs["CLOSED-CAPTIONS"]}onFragLoading(t,e){if(this.enabled&&e.frag.type===yt.MAIN){var n,s;const{cea608Parser1:a,cea608Parser2:l,lastSn:u}=this,{cc:d,sn:f}=e.frag,h=(n=(s=e.part)==null?void 0:s.index)!=null?n:-1;a&&l&&(f!==u+1||f===u&&h!==this.lastPartIndex+1||d!==this.lastCc)&&(a.reset(),l.reset()),this.lastCc=d,this.lastSn=f,this.lastPartIndex=h}}onFragLoaded(t,e){const{frag:n,payload:s}=e;if(n.type===yt.SUBTITLE)if(s.byteLength){const a=n.decryptdata,l="stats"in e;if(a==null||!a.encrypted||l){const u=this.tracks[n.level],d=this.vttCCs;d[n.cc]||(d[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),u&&u.textCodec===Qm?this._parseIMSC1(n,s):this._parseVTTs(e)}}else this.hls.trigger(A.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(t,e){const n=this.hls;Gx(e,this.initPTS[t.cc],s=>{this._appendCues(s,t.level),n.trigger(A.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},s=>{n.logger.log(`Failed to parse IMSC1: ${s}`),n.trigger(A.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:s})})}_parseVTTs(t){var e;const{frag:n,payload:s}=t,{initPTS:a,unparsedVttFrags:l}=this,u=a.length-1;if(!a[n.cc]&&u===-1){l.push(t);return}const d=this.hls,f=(e=n.initSegment)!=null&&e.data?Jn(n.initSegment.data,new Uint8Array(s)).buffer:s;JB(f,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,h=>{this._appendCues(h,n.level),d.trigger(A.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},h=>{const g=h.message==="Missing initPTS for VTT MPEGTS";g?l.push(t):this._fallbackToIMSC1(n,s),d.logger.log(`Failed to parse VTT cue: ${h}`),!(g&&u>n.cc)&&d.trigger(A.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:h})})}_fallbackToIMSC1(t,e){const n=this.tracks[t.level];n.textCodec||Gx(e,this.initPTS[t.cc],()=>{n.textCodec=Qm,this._parseIMSC1(t,e)},()=>{n.textCodec="wvtt"})}_appendCues(t,e){const n=this.hls;if(this.config.renderTextTracksNatively){const s=this.textTracks[e];if(!s||s.mode==="disabled")return;t.forEach(a=>xR(s,a))}else{const s=this.tracks[e];if(!s)return;const a=s.default?"default":"subtitles"+e;n.trigger(A.CUES_PARSED,{type:"subtitles",cues:t,track:a})}}onFragDecrypted(t,e){const{frag:n}=e;n.type===yt.SUBTITLE&&this.onFragLoaded(A.FRAG_LOADED,e)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(t,e){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:s}=e;if(!(n.type===yt.MAIN&&this.closedCaptionsForLevel(n)==="NONE"))for(let a=0;a<s.length;a++){const l=s[a].bytes;if(l){this.cea608Parser1||this.initCea608Parsers();const u=this.extractCea608Data(l);this.cea608Parser1.addData(s[a].pts,u[0]),this.cea608Parser2.addData(s[a].pts,u[1])}}}onBufferFlushing(t,{startOffset:e,endOffset:n,endOffsetSubtitles:s,type:a}){const{media:l}=this;if(!(!l||l.currentTime<n)){if(!a||a==="video"){const{captionsTracks:u}=this;Object.keys(u).forEach(d=>Wg(u[d],e,n))}if(this.config.renderTextTracksNatively&&e===0&&s!==void 0){const{textTracks:u}=this;Object.keys(u).forEach(d=>Wg(u[d],e,s))}}}extractCea608Data(t){const e=[[],[]],n=t[0]&31;let s=2;for(let a=0;a<n;a++){const l=t[s++],u=127&t[s++],d=127&t[s++];if(u===0&&d===0)continue;if((4&l)!==0){const h=3&l;(h===0||h===1)&&(e[h].push(u),e[h].push(d))}}return e}}function OR(i){return i.characteristics&&/transcribes-spoken-dialog/gi.test(i.characteristics)&&/describes-music-and-sound/gi.test(i.characteristics)?"captions":"subtitles"}function Kx(i,t){return!!i&&i.kind===OR(t)&&Yg(t,i)}function aF(i,t,e,n){return Math.min(t,n)-Math.max(i,e)}function zx(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const oF=/\s/,lF={newCue(i,t,e,n){const s=[];let a,l,u,d,f;const h=self.VTTCue||self.TextTrackCue;for(let y=0;y<n.rows.length;y++)if(a=n.rows[y],u=!0,d=0,f="",!a.isEmpty()){var g;for(let E=0;E<a.chars.length;E++)oF.test(a.chars[E].uchar)&&u?d++:(f+=a.chars[E].uchar,u=!1);a.cueStartTime=t,t===e&&(e+=1e-4),d>=16?d--:d++;const S=_R(f.trim()),v=d0(t,e,S);i!=null&&(g=i.cues)!=null&&g.getCueById(v)||(l=new h(t,e,S),l.id=v,l.line=y+1,l.align="left",l.position=10+Math.min(80,Math.floor(d*8/32)*10),s.push(l))}return i&&s.length&&(s.sort((y,S)=>y.line==="auto"||S.line==="auto"?0:y.line>8&&S.line>8?S.line-y.line:y.line-S.line),s.forEach(y=>xR(i,y))),s}};function uF(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const cF=/(\d+)-(\d+)\/(\d+)/;class Yx{constructor(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||mF,this.controller=new self.AbortController,this.stats=new Yp}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var t;this.abortInternal(),(t=this.callbacks)!=null&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(t,e,n){const s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();const a=fF(t,this.controller.signal),l=t.responseType==="arraybuffer",u=l?"byteLength":"length",{maxTimeToFirstByteMs:d,maxLoadTimeMs:f}=e.loadPolicy;this.context=t,this.config=e,this.callbacks=n,this.request=this.fetchSetup(t,a),self.clearTimeout(this.requestTimeout),e.timeout=d&&mt(d)?d:f,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,t,this.response))},e.timeout),(Ul(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(g=>{var y;this.response=this.loader=g;const S=Math.max(self.performance.now(),s.loading.start);if(self.clearTimeout(this.requestTimeout),e.timeout=f,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,t,this.response))},f-(S-s.loading.start)),!g.ok){const{status:E,statusText:x}=g;throw new gF(x||"fetch, bad network response",E,g)}s.loading.first=S,s.total=hF(g.headers)||s.total;const v=(y=this.callbacks)==null?void 0:y.onProgress;return v&&mt(e.highWaterMark)?this.loadProgressively(g,s,t,e.highWaterMark,v):l?g.arrayBuffer():t.responseType==="json"?g.json():g.text()}).then(g=>{var y,S;const v=this.response;if(!v)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);const E=g[u];E&&(s.loaded=s.total=E);const x={url:v.url,data:g,code:v.status},b=(y=this.callbacks)==null?void 0:y.onProgress;b&&!mt(e.highWaterMark)&&b(s,t,g,v),(S=this.callbacks)==null||S.onSuccess(x,s,t,v)}).catch(g=>{var y;if(self.clearTimeout(this.requestTimeout),s.aborted)return;const S=g&&g.code||0,v=g?g.message:null;(y=this.callbacks)==null||y.onError({code:S,text:v},t,g?g.details:null,s)})}getCacheAge(){let t=null;if(this.response){const e=this.response.headers.get("age");t=e?parseFloat(e):null}return t}getResponseHeader(t){return this.response?this.response.headers.get(t):null}loadProgressively(t,e,n,s=0,a){const l=new Y1,u=t.body.getReader(),d=()=>u.read().then(f=>{if(f.done)return l.dataLength&&a(e,n,l.flush().buffer,t),Promise.resolve(new ArrayBuffer(0));const h=f.value,g=h.length;return e.loaded+=g,g<s||l.dataLength?(l.push(h),l.dataLength>=s&&a(e,n,l.flush().buffer,t)):a(e,n,h.buffer,t),d()}).catch(()=>Promise.reject());return d()}}function fF(i,t){const e={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(Wt({},i.headers))};return i.rangeEnd&&e.headers.set("Range","bytes="+i.rangeStart+"-"+String(i.rangeEnd-1)),e}function dF(i){const t=cF.exec(i);if(t)return parseInt(t[2])-parseInt(t[1])+1}function hF(i){const t=i.get("Content-Range");if(t){const n=dF(t);if(mt(n))return n}const e=i.get("Content-Length");if(e)return parseInt(e)}function mF(i,t){return new self.Request(i.url,t)}class gF extends Error{constructor(t,e,n){super(t),this.code=void 0,this.details=void 0,this.code=e,this.details=n}}const pF=/^age:\s*[\d.]+\s*$/im;class MR{constructor(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=t&&t.xhrSetup||null,this.stats=new Yp,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,t.readyState!==4&&(this.stats.aborted=!0,t.abort()))}abort(){var t;this.abortInternal(),(t=this.callbacks)!=null&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(t,e,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=e,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:t,context:e}=this;if(!t||!e)return;const n=this.loader=new self.XMLHttpRequest,s=this.stats;s.loading.first=0,s.loaded=0,s.aborted=!1;const a=this.xhrSetup;a?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return a(n,e.url)}).catch(l=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",e.url,!0),a(n,e.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,e,t)}).catch(l=>{var u;(u=this.callbacks)==null||u.onError({code:n.status,text:l.message},e,n,s)}):this.openAndSendXhr(n,e,t)}openAndSendXhr(t,e,n){t.readyState||t.open("GET",e.url,!0);const s=e.headers,{maxTimeToFirstByteMs:a,maxLoadTimeMs:l}=n.loadPolicy;if(s)for(const u in s)t.setRequestHeader(u,s[u]);e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,self.clearTimeout(this.requestTimeout),n.timeout=a&&mt(a)?a:l,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),t.send()}readystatechange(){const{context:t,loader:e,stats:n}=this;if(!t||!e)return;const s=e.readyState,a=this.config;if(!n.aborted&&s>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),a.timeout!==a.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),a.timeout=a.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),s===4)){self.clearTimeout(this.requestTimeout),e.onreadystatechange=null,e.onprogress=null;const f=e.status,h=e.responseType==="text"?e.responseText:null;if(f>=200&&f<300){const v=h??e.response;if(v!=null){var l,u;n.loading.end=Math.max(self.performance.now(),n.loading.first);const E=e.responseType==="arraybuffer"?v.byteLength:v.length;n.loaded=n.total=E,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first);const x=(l=this.callbacks)==null?void 0:l.onProgress;x&&x(n,t,v,e);const b={url:e.responseURL,data:v,code:f};(u=this.callbacks)==null||u.onSuccess(b,n,t,e);return}}const g=a.loadPolicy.errorRetry,y=n.retry,S={url:t.url,data:void 0,code:f};if(xf(g,y,!1,S))this.retry(g);else{var d;Vt.error(`${f} while loading ${t.url}`),(d=this.callbacks)==null||d.onError({code:f,text:e.statusText},t,e,n)}}}loadtimeout(){if(!this.config)return;const t=this.config.loadPolicy.timeoutRetry,e=this.stats.retry;if(xf(t,e,!0))this.retry(t);else{var n;Vt.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const s=this.callbacks;s&&(this.abortInternal(),s.onTimeout(this.stats,this.context,this.loader))}}retry(t){const{context:e,stats:n}=this;this.retryDelay=Xp(t,n.retry),n.retry++,Vt.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${e?.url}, retrying ${n.retry}/${t.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(t){const e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total)}getCacheAge(){let t=null;if(this.loader&&pF.test(this.loader.getAllResponseHeaders())){const e=this.loader.getResponseHeader("age");t=e?parseFloat(e):null}return t}getResponseHeader(t){return this.loader&&new RegExp(`^${t}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(t):null}}const yF={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},vF=zt(zt({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:MR,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Vk,bufferController:DN,capLevelController:u0,errorController:zk,fpsController:EB,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:N1,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:yF},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},SF()),{},{subtitleStreamController:MB,subtitleTrackController:AB,timelineController:rF,audioStreamController:RN,audioTrackController:LN,emeController:Ha,cmcdController:vB,contentSteeringController:TB,interstitialsController:OB});function SF(){return{cueHandler:lF,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function TF(i,t,e){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(t.liveMaxLatencyDurationCount!==void 0&&(t.liveSyncDurationCount===void 0||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(t.liveMaxLatencyDuration!==void 0&&(t.liveSyncDuration===void 0||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=Zg(i),s=["manifest","level","frag"],a=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return s.forEach(l=>{const u=`${l==="level"?"playlist":l}LoadPolicy`,d=t[u]===void 0,f=[];a.forEach(h=>{const g=`${l}Loading${h}`,y=t[g];if(y!==void 0&&d){f.push(g);const S=n[u].default;switch(t[u]={default:S},h){case"TimeOut":S.maxLoadTimeMs=y,S.maxTimeToFirstByteMs=y;break;case"MaxRetry":S.errorRetry.maxNumRetry=y,S.timeoutRetry.maxNumRetry=y;break;case"RetryDelay":S.errorRetry.retryDelayMs=y,S.timeoutRetry.retryDelayMs=y;break;case"MaxRetryTimeout":S.errorRetry.maxRetryDelayMs=y,S.timeoutRetry.maxRetryDelayMs=y;break}}}),f.length&&e.warn(`hls.js config: "${f.join('", "')}" setting(s) are deprecated, use "${u}": ${le(t[u])}`)}),zt(zt({},n),t)}function Zg(i){return i&&typeof i=="object"?Array.isArray(i)?i.map(Zg):Object.keys(i).reduce((t,e)=>(t[e]=Zg(i[e]),t),{}):i}function EF(i,t){const e=i.loader;e!==Yx&&e!==MR?(t.log("[config]: Custom loader detected, cannot enable progressive streaming"),i.progressive=!1):uF()&&(i.loader=Yx,i.progressive=!0,i.enableSoftwareAES=!0,t.log("[config]: Progressive streaming enabled, using FetchLoader"))}const nf=2,xF=.1,bF=.05,AF=100;class RF extends M1{constructor(t,e){super("gap-controller",t.logger),this.hls=null,this.fragmentTracker=null,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var n;(n=this.media)!=null&&n.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var n;this.ended=((n=this.media)==null?void 0:n.currentTime)||1,this.hls.trigger(A.MEDIA_ENDED,{stalled:!1})}},this.hls=t,this.fragmentTracker=e,this.registerListeners()}registerListeners(){const{hls:t}=this;t&&(t.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(A.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:t}=this;t&&(t.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(A.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(t,e){this.setInterval(AF),this.mediaSource=e.mediaSource;const n=this.media=e.media;In(n,"playing",this.onMediaPlaying),In(n,"waiting",this.onMediaWaiting),In(n,"ended",this.onMediaEnded)}onMediaDetaching(t,e){this.clearInterval();const{media:n}=this;n&&(Qn(n,"playing",this.onMediaPlaying),Qn(n,"waiting",this.onMediaWaiting),Qn(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(t,e){this.buffered=e.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var t;if(!((t=this.media)!=null&&t.readyState)||!this.hasBuffered)return;const e=this.media.currentTime;this.poll(e,this.lastCurrentTime),this.lastCurrentTime=e}poll(t,e){var n,s;const a=(n=this.hls)==null?void 0:n.config;if(!a)return;const l=this.media;if(!l)return;const{seeking:u}=l,d=this.seeking&&!u,f=!this.seeking&&u,h=l.paused&&!u||l.ended||l.playbackRate===0;if(this.seeking=u,t!==e){e&&(this.ended=0),this.moved=!0,u||(this.nudgeRetry=0,a.nudgeOnVideoHole&&!h&&t>e&&this.nudgeOnVideoHole(t,e)),this.waiting===0&&this.stallResolved(t);return}if(f||d){d&&this.stallResolved(t);return}if(h){this.nudgeRetry=0,this.stallResolved(t),!this.ended&&l.ended&&this.hls&&(this.ended=t||1,this.hls.trigger(A.MEDIA_ENDED,{stalled:!1}));return}if(!Lt.getBuffered(l).length){this.nudgeRetry=0;return}const g=Lt.bufferInfo(l,t,0),y=g.nextStart||0,S=this.fragmentTracker;if(u&&S&&this.hls){const P=qx(this.hls.inFlightFragments,t),M=g.len>nf,k=!y||P||y-t>nf&&!S.getPartialFragment(t);if(M||k)return;this.moved=!1}const v=(s=this.hls)==null?void 0:s.latestLevelDetails;if(!this.moved&&this.stalled!==null&&S){if(!(g.len>0)&&!y)return;const M=Math.max(y,g.start||0)-t,F=!!(v!=null&&v.live)?v.targetduration*2:nf,R=S.getPartialFragment(t);if(M>0&&(M<=F||R)){l.paused||this._trySkipBufferHole(R);return}}const E=a.detectStallWithCurrentTimeMs,x=self.performance.now(),b=this.waiting;let D=this.stalled;if(D===null)if(b>0&&x-b<E)D=this.stalled=b;else{this.stalled=x;return}const L=x-D;if(!u&&(L>=E||b)&&this.hls){var I;if(((I=this.mediaSource)==null?void 0:I.readyState)==="ended"&&!(v!=null&&v.live)&&Math.abs(t-(v?.edge||0))<1){if(this.ended)return;this.ended=t||1,this.hls.trigger(A.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(g),!this.media||!this.hls)return}const _=Lt.bufferInfo(l,t,a.maxBufferHole);this._tryFixBufferStall(_,L,t)}stallResolved(t){const e=this.stalled;if(e&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-e;this.log(`playback not stuck anymore @${t}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(A.STALL_RESOLVED,{})}}nudgeOnVideoHole(t,e){var n;const s=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(n=this.buffered.audio)!=null&&n.length&&s&&s.length>1&&t>s.end(0)){const a=Lt.bufferedInfo(Lt.timeRangesToArray(this.buffered.audio),t,0);if(a.len>1&&e>=a.start){const l=Lt.timeRangesToArray(s),u=Lt.bufferedInfo(l,e,0).bufferedIndex;if(u>-1&&u<l.length-1){const d=Lt.bufferedInfo(l,t,0).bufferedIndex,f=l[u].end,h=l[u+1].start;if((d===-1||d>u)&&h-f<1&&t-f<2){const g=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${t} hole: ${f} -> ${h} buffered index: ${d}`);this.warn(g.message),this.media.currentTime+=1e-6;const y=this.fragmentTracker.getPartialFragment(t)||void 0,S=Lt.bufferInfo(this.media,t,0);this.hls.trigger(A.ERROR,{type:vt.MEDIA_ERROR,details:z.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:g,reason:g.message,frag:y,buffer:S.len,bufferInfo:S})}}}}}_tryFixBufferStall(t,e,n){var s,a;const{fragmentTracker:l,media:u}=this,d=(s=this.hls)==null?void 0:s.config;if(!u||!l||!d)return;const f=(a=this.hls)==null?void 0:a.latestLevelDetails,h=l.getPartialFragment(n);if((h||f!=null&&f.live&&n<f.fragmentStart)&&(this._trySkipBufferHole(h)||!this.media))return;const g=t.buffered,y=this.adjacentTraversal(t,n);(g&&g.length>1&&t.len>d.maxBufferHole||t.nextStart&&(t.nextStart-n<d.maxBufferHole||y))&&(e>d.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(t))}adjacentTraversal(t,e){const n=this.fragmentTracker,s=t.nextStart;if(n&&s){const a=n.getFragAtPos(e,yt.MAIN),l=n.getFragAtPos(s,yt.MAIN);if(a&&l)return l.sn-a.sn<2}return!1}_reportStall(t){const{hls:e,media:n,stallReported:s,stalled:a}=this;if(!s&&a!==null&&n&&e){this.stallReported=!0;const l=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${le(t)})`);this.warn(l.message),e.trigger(A.ERROR,{type:vt.MEDIA_ERROR,details:z.BUFFER_STALLED_ERROR,fatal:!1,error:l,buffer:t.len,bufferInfo:t,stalled:{start:a}})}}_trySkipBufferHole(t){var e;const{fragmentTracker:n,media:s}=this,a=(e=this.hls)==null?void 0:e.config;if(!s||!n||!a)return 0;const l=s.currentTime,u=Lt.bufferInfo(s,l,0),d=l<u.start?u.start:u.nextStart;if(d&&this.hls){const h=u.len<=a.maxBufferHole,g=u.len>0&&u.len<1&&s.readyState<3,y=d-l;if(y>0&&(h||g)){if(y>a.maxBufferHole){let v=!1;if(l===0){const E=n.getAppendedFrag(0,yt.MAIN);E&&d<E.end&&(v=!0)}if(!v){const E=t||n.getAppendedFrag(l,yt.MAIN);if(E){var f;if(!((f=this.hls.loadLevelObj)!=null&&f.details)||qx(this.hls.inFlightFragments,d))return 0;let b=!1,D=E.end;for(;D<d;){const L=n.getPartialFragment(D);if(L)D+=L.duration;else{b=!0;break}}if(b)return 0}}}const S=Math.max(d+bF,l+xF);if(this.warn(`skipping hole, adjusting currentTime from ${l} to ${S}`),this.moved=!0,s.currentTime=S,!(t!=null&&t.gap)){const v=new Error(`fragment loaded with buffer holes, seeking from ${l} to ${S}`);this.hls.trigger(A.ERROR,{type:vt.MEDIA_ERROR,details:z.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:v,reason:v.message,frag:t||void 0,buffer:u.len,bufferInfo:u})}return S}}return 0}_tryNudgeBuffer(t){const{hls:e,media:n,nudgeRetry:s}=this,a=e?.config;if(!n||!a)return 0;const l=n.currentTime;if(this.nudgeRetry++,s<a.nudgeMaxRetry){const u=l+(s+1)*a.nudgeOffset,d=new Error(`Nudging 'currentTime' from ${l} to ${u}`);this.warn(d.message),n.currentTime=u,e.trigger(A.ERROR,{type:vt.MEDIA_ERROR,details:z.BUFFER_NUDGE_ON_STALL,error:d,fatal:!1,buffer:t.len,bufferInfo:t})}else{const u=new Error(`Playhead still not moving while enough data buffered @${l} after ${a.nudgeMaxRetry} nudges`);this.error(u.message),e.trigger(A.ERROR,{type:vt.MEDIA_ERROR,details:z.BUFFER_STALLED_ERROR,error:u,fatal:!0,buffer:t.len,bufferInfo:t})}}}function qx(i,t){const e=Xx(i.main);if(e&&e.start<=t)return e;const n=Xx(i.audio);return n&&n.start<=t?n:null}function Xx(i){if(!i)return null;switch(i.state){case ot.IDLE:case ot.STOPPED:case ot.ENDED:case ot.ERROR:return null}return i.frag}const LF=.25;function Jg(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function Wx(i,t,e,n,s){let a=new i(t,e,"");try{a.value=n,s&&(a.type=s)}catch{a=new i(t,e,le(s?zt({type:s},n):n))}return a}const Uc=(()=>{const i=Jg();try{i&&new i(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function CF(i){return Uint8Array.from(i.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class _F{constructor(t){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(A.EVENT_CUE_ENTER,{})},this.hls=t,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:t}=this;t.on(A.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(A.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(A.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(A.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}_unregisterListeners(){const{hls:t}=this;t.off(A.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(A.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(A.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(A.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}onMediaAttaching(t,e){var n;this.media=e.media,((n=e.overrides)==null?void 0:n.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){const t=this.hls.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(t,e){this.media=null,!e.transferMedia&&(this.id3Track&&(this.removeCues&&Ma(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(t){const e=this.getID3Track(t.textTracks);return e.mode="hidden",e}getID3Track(t){if(this.media){for(let e=0;e<t.length;e++){const n=t[e];if(n.kind==="metadata"&&n.label==="id3")return ER(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(t,e){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:n,enableID3MetadataCues:s}}}=this;if(!n&&!s)return;const{samples:a}=e;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=Jg();if(l)for(let u=0;u<a.length;u++){const d=a[u].type;if(d===_n.emsg&&!n||!s)continue;const f=tR(a[u].data);if(f){const h=a[u].pts;let g=h+a[u].duration;g>Uc&&(g=Uc),g-h<=0&&(g=h+LF);for(let S=0;S<f.length;S++){const v=f[S];if(!eR(v)){this.updateId3CueEnds(h,d);const E=Wx(l,h,g,v,d);E&&this.id3Track.addCue(E)}}}}}updateId3CueEnds(t,e){var n;const s=(n=this.id3Track)==null?void 0:n.cues;if(s)for(let a=s.length;a--;){const l=s[a];l.type===e&&l.startTime<t&&l.endTime===Uc&&(l.endTime=t)}}onBufferFlushing(t,{startOffset:e,endOffset:n,type:s}){const{id3Track:a,hls:l}=this;if(!l)return;const{config:{enableEmsgMetadataCues:u,enableID3MetadataCues:d}}=l;if(a&&(u||d)){let f;s==="audio"?f=h=>h.type===_n.audioId3&&d:s==="video"?f=h=>h.type===_n.emsg&&u:f=h=>h.type===_n.audioId3&&d||h.type===_n.emsg&&u,Wg(a,e,n,f)}}onLevelUpdated(t,{details:e}){this.updateDateRangeCues(e,!0)}onLevelPtsUpdated(t,e){Math.abs(e.drift)>.01&&this.updateDateRangeCues(e.details)}updateDateRangeCues(t,e){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{id3Track:n}=this,{dateRanges:s}=t,a=Object.keys(s);let l=this.dateRangeCuesAppended;if(n&&e){var u;if((u=n.cues)!=null&&u.length){const h=Object.keys(l).filter(g=>!a.includes(g));for(let g=h.length;g--;){const y=h[g],S=l[y].cues;delete l[y],Object.keys(S).forEach(v=>{try{const E=S[v];E.removeEventListener("enter",this.onEventCueEnter),n.removeCue(E)}catch{}})}}else l=this.dateRangeCuesAppended={}}const d=t.fragments[t.fragments.length-1];if(a.length===0||!mt(d?.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const f=Jg();for(let h=0;h<a.length;h++){const g=a[h],y=s[g],S=y.startTime,v=l[g],E=v?.cues||{};let x=v?.durationKnown||!1,b=Uc;const{duration:D,endDate:L}=y;if(L&&D!==null)b=S+D,x=!0;else if(y.endOnNext&&!x){const _=a.reduce((P,M)=>{if(M!==y.id){const k=s[M];if(k.class===y.class&&k.startDate>y.startDate&&(!P||y.startDate<P.startDate))return k}return P},null);_&&(b=_.startTime,x=!0)}const I=Object.keys(y.attr);for(let _=0;_<I.length;_++){const P=I[_];if(!r2(P))continue;const M=E[P];if(M)x&&!v.durationKnown?M.endTime=b:Math.abs(M.startTime-S)>.01&&(M.startTime=S,M.endTime=b);else if(f){let k=y.attr[P];a2(P)&&(k=CF(k));const R=Wx(f,S,b,{key:P,data:k},_n.dateRange);R&&(R.id=g,this.id3Track.addCue(R),E[P]=R,this.hls.config.interstitialsController&&(P==="X-ASSET-LIST"||P==="X-ASSET-URL")&&R.addEventListener("enter",this.onEventCueEnter))}}l[g]={cues:E,dateRange:y,durationKnown:x}}}}class DF{constructor(t){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:e}=this,n=this.levelDetails;if(!e||!n)return;this.currentTime=e.currentTime;const s=this.computeLatency();if(s===null)return;this._latency=s;const{lowLatencyMode:a,maxLiveSyncPlaybackRate:l}=this.config;if(!a||l===1||!n.live)return;const u=this.targetLatency;if(u===null)return;const d=s-u,f=Math.min(this.maxLatency,u+n.targetduration);if(d<f&&d>.05&&this.forwardBufferLength>1){const g=Math.min(2,Math.max(1,l)),y=Math.round(2/(1+Math.exp(-.75*d-this.edgeStalled))*20)/20,S=Math.min(g,Math.max(1,y));this.changeMediaPlaybackRate(e,S)}else e.playbackRate!==1&&e.playbackRate!==0&&this.changeMediaPlaybackRate(e,1)},this.hls=t,this.config=t.config,this.registerListeners()}get levelDetails(){var t;return((t=this.hls)==null?void 0:t.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:t}=this;if(t.liveMaxLatencyDuration!==void 0)return t.liveMaxLatencyDuration;const e=this.levelDetails;return e?t.liveMaxLatencyDurationCount*e.targetduration:0}get targetLatency(){const t=this.levelDetails;if(t===null||this.hls===null)return null;const{holdBack:e,partHoldBack:n,targetduration:s}=t,{liveSyncDuration:a,liveSyncDurationCount:l,lowLatencyMode:u}=this.config,d=this.hls.userConfig;let f=u&&n||e;(this._targetLatencyUpdated||d.liveSyncDuration||d.liveSyncDurationCount||f===0)&&(f=a!==void 0?a:l*s);const h=s;return f+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,h)}set targetLatency(t){this.stallCount=0,this.config.liveSyncDuration=t,this._targetLatencyUpdated=!0}get liveSyncPosition(){const t=this.estimateLiveEdge(),e=this.targetLatency;if(t===null||e===null)return null;const n=this.levelDetails;if(n===null)return null;const s=n.edge,a=t-e-this.edgeStalled,l=s-n.totalduration,u=s-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(l,a),u)}get drift(){const t=this.levelDetails;return t===null?1:t.drift}get edgeStalled(){const t=this.levelDetails;if(t===null)return 0;const e=(this.config.lowLatencyMode&&t.partTarget||t.targetduration)*3;return Math.max(t.age-e,0)}get forwardBufferLength(){const{media:t}=this,e=this.levelDetails;if(!t||!e)return 0;const n=t.buffered.length;return(n?t.buffered.end(n-1):e.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:t}=this;t&&(t.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(A.ERROR,this.onError,this))}unregisterListeners(){const{hls:t}=this;t&&(t.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(A.ERROR,this.onError,this))}onMediaAttached(t,e){this.media=e.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(t,{details:e}){e.advanced&&this.onTimeupdate(),!e.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(t,e){var n;e.details===z.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(n=this.levelDetails)!=null&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(t,e){var n,s;t.playbackRate!==e&&((n=this.hls)==null||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(s=this.targetLatency)==null?void 0:s.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${t.playbackRate} to ${e}`),t.playbackRate=e)}estimateLiveEdge(){const t=this.levelDetails;return t===null?null:t.edge+t.age}computeLatency(){const t=this.estimateLiveEdge();return t===null?null:t-this.currentTime}}class IF extends l0{constructor(t,e){super(t,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=e,this._registerListeners()}_registerListeners(){const{hls:t}=this;t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(A.LEVEL_LOADED,this.onLevelLoaded,this),t.on(A.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(A.FRAG_BUFFERED,this.onFragBuffered,this),t.on(A.ERROR,this.onError,this)}_unregisterListeners(){const{hls:t}=this;t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(A.LEVEL_LOADED,this.onLevelLoaded,this),t.off(A.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(A.FRAG_BUFFERED,this.onFragBuffered,this),t.off(A.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(e=>{e.loadError=0,e.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(t,e){this.resetLevels()}onManifestLoaded(t,e){const n=this.hls.config.preferManagedMediaSource,s=[],a={},l={};let u=!1,d=!1,f=!1;e.levels.forEach(h=>{const g=h.attrs;let{audioCodec:y,videoCodec:S}=h;y&&(h.audioCodec=y=vf(y,n)||void 0),S&&(S=h.videoCodec=Ck(S));const{width:v,height:E,unknownCodecs:x}=h;let b=x?x.length:0;if(x)for(let R=b;R--;){const $=x[R];this.isAudioSupported($)?(h.audioCodec=y=y?`${y},${$}`:$,b--,Ya.audio[y.substring(0,4)]=2):this.isVideoSupported($)&&(h.videoCodec=S=S?`${S},${$}`:$,b--,Ya.video[S.substring(0,4)]=2)}if(u||(u=!!(v&&E)),d||(d=!!S),f||(f=!!y),b||y&&!this.isAudioSupported(y)||S&&!this.isVideoSupported(S)){this.log(`Some or all CODECS not supported "${g.CODECS}"`);return}const{CODECS:D,"FRAME-RATE":L,"HDCP-LEVEL":I,"PATHWAY-ID":_,RESOLUTION:P,"VIDEO-RANGE":M}=g,F=`${`${_||"."}-`}${h.bitrate}-${P}-${L}-${D}-${M}-${I}`;if(a[F])if(a[F].uri!==h.url&&!h.attrs["PATHWAY-ID"]){const R=l[F]+=1;h.attrs["PATHWAY-ID"]=new Array(R+1).join(".");const $=this.createLevel(h);a[F]=$,s.push($)}else a[F].addGroupId("audio",g.AUDIO),a[F].addGroupId("text",g.SUBTITLES);else{const R=this.createLevel(h);a[F]=R,l[F]=1,s.push(R)}}),this.filterAndSortMediaOptions(s,e,u,d,f)}createLevel(t){const e=new Pl(t),n=t.supplemental;if(n!=null&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const s=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(s.message),e.supportedResult=_1(s,[])}return e}isAudioSupported(t){return Ug(t,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(t){return Ug(t,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(t,e,n,s,a){let l=[],u=[],d=t;if((n||s)&&a&&(d=d.filter(({videoCodec:x,videoRange:b,width:D,height:L})=>(!!x||!!(D&&L))&&Ok(b))),d.length===0){Promise.resolve().then(()=>{if(this.hls){let x="no level with compatible codecs found in manifest",b=x;e.levels.length&&(b=`one or more CODECS in variant not supported: ${le(e.levels.map(L=>L.attrs.CODECS).filter((L,I,_)=>_.indexOf(L)===I))}`,this.warn(b),x+=` (${b})`);const D=new Error(x);this.hls.trigger(A.ERROR,{type:vt.MEDIA_ERROR,details:z.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:e.url,error:D,reason:b})}});return}e.audioTracks&&(l=e.audioTracks.filter(x=>!x.audioCodec||this.isAudioSupported(x.audioCodec)),Qx(l)),e.subtitles&&(u=e.subtitles,Qx(u));const f=d.slice(0);d.sort((x,b)=>{if(x.attrs["HDCP-LEVEL"]!==b.attrs["HDCP-LEVEL"])return(x.attrs["HDCP-LEVEL"]||"")>(b.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&x.height!==b.height)return x.height-b.height;if(x.frameRate!==b.frameRate)return x.frameRate-b.frameRate;if(x.videoRange!==b.videoRange)return Sf.indexOf(x.videoRange)-Sf.indexOf(b.videoRange);if(x.videoCodec!==b.videoCodec){const D=jE(x.videoCodec),L=jE(b.videoCodec);if(D!==L)return L-D}if(x.uri===b.uri&&x.codecSet!==b.codecSet){const D=yf(x.codecSet),L=yf(b.codecSet);if(D!==L)return L-D}return x.averageBitrate!==b.averageBitrate?x.averageBitrate-b.averageBitrate:0});let h=f[0];if(this.steering&&(d=this.steering.filterParsedLevels(d),d.length!==f.length)){for(let x=0;x<f.length;x++)if(f[x].pathwayId===d[0].pathwayId){h=f[x];break}}this._levels=d;for(let x=0;x<d.length;x++)if(d[x]===h){var g;this._firstLevel=x;const b=h.bitrate,D=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${d.length} level(s) found, first bitrate: ${b}`),((g=this.hls.userConfig)==null?void 0:g.abrEwmaDefaultEstimate)===void 0){const L=Math.min(b,this.hls.config.abrEwmaDefaultEstimateMax);L>D&&D===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=L)}break}const y=a&&!s,S=this.hls.config,v=!!(S.audioStreamController&&S.audioTrackController),E={levels:d,audioTracks:l,subtitleTracks:u,sessionData:e.sessionData,sessionKeys:e.sessionKeys,firstLevel:this._firstLevel,stats:e.stats,audio:a,video:s,altAudio:v&&!y&&l.some(x=>!!x.url)};this.hls.trigger(A.MANIFEST_PARSED,E)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(t){const e=this._levels;if(e.length===0)return;if(t<0||t>=e.length){const h=new Error("invalid level idx"),g=t<0;if(this.hls.trigger(A.ERROR,{type:vt.OTHER_ERROR,details:z.LEVEL_SWITCH_ERROR,level:t,fatal:g,error:h,reason:h.message}),g)return;t=Math.min(t,e.length-1)}const n=this.currentLevelIndex,s=this.currentLevel,a=s?s.attrs["PATHWAY-ID"]:void 0,l=e[t],u=l.attrs["PATHWAY-ID"];if(this.currentLevelIndex=t,this.currentLevel=l,n===t&&s&&a===u)return;this.log(`Switching to level ${t} (${l.height?l.height+"p ":""}${l.videoRange?l.videoRange+" ":""}${l.codecSet?l.codecSet+" ":""}@${l.bitrate})${u?" with Pathway "+u:""} from level ${n}${a?" with Pathway "+a:""}`);const d={level:t,attrs:l.attrs,details:l.details,bitrate:l.bitrate,averageBitrate:l.averageBitrate,maxBitrate:l.maxBitrate,realBitrate:l.realBitrate,width:l.width,height:l.height,codecSet:l.codecSet,audioCodec:l.audioCodec,videoCodec:l.videoCodec,audioGroups:l.audioGroups,subtitleGroups:l.subtitleGroups,loaded:l.loaded,loadError:l.loadError,fragmentError:l.fragmentError,name:l.name,id:l.id,uri:l.uri,url:l.url,urlId:0,audioGroupIds:l.audioGroupIds,textGroupIds:l.textGroupIds};this.hls.trigger(A.LEVEL_SWITCHING,d);const f=l.details;if(!f||f.live){const h=this.switchParams(l.uri,s?.details,f);this.loadPlaylist(h)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(t){this.manualLevelIndex=t,this._startLevel===void 0&&(this._startLevel=t),t!==-1&&(this.level=t)}get firstLevel(){return this._firstLevel}set firstLevel(t){this._firstLevel=t}get startLevel(){if(this._startLevel===void 0){const t=this.hls.config.startLevel;return t!==void 0?t:this.hls.firstAutoLevel}return this._startLevel}set startLevel(t){this._startLevel=t}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(t){if(this.steering){const e=this.steering.pathways(),n=t.filter(s=>e.indexOf(s)!==-1);if(t.length<1){this.warn(`pathwayPriority ${t} should contain at least one pathway from list: ${e}`);return}this.steering.pathwayPriority=n}}onError(t,e){e.fatal||!e.context||e.context.type===Mt.LEVEL&&e.context.level===this.level&&this.checkRetry(e)}onFragBuffered(t,{frag:e}){if(e!==void 0&&e.type===yt.MAIN){const n=e.elementaryStreams;if(!Object.keys(n).some(a=>!!n[a]))return;const s=this._levels[e.level];s!=null&&s.loadError&&(this.log(`Resetting level error count of ${s.loadError} on frag buffered`),s.loadError=0)}}onLevelLoaded(t,e){var n;const{level:s,details:a}=e,l=e.levelInfo;if(!l){var u;this.warn(`Invalid level index ${s}`),(u=e.deliveryDirectives)!=null&&u.skip&&(a.deltaUpdateFailed=!0);return}if(l===this.currentLevel||e.withoutMultiVariant){l.fragmentError===0&&(l.loadError=0);let d=l.details;d===e.details&&d.advanced&&(d=void 0),this.playlistLoaded(s,e,d)}else(n=e.deliveryDirectives)!=null&&n.skip&&(a.deltaUpdateFailed=!0)}loadPlaylist(t){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,t)}loadingPlaylist(t,e){super.loadingPlaylist(t,e);const n=this.getUrlWithDirectives(t.uri,e),s=this.currentLevelIndex,a=t.attrs["PATHWAY-ID"],l=t.details,u=l?.age;this.log(`Loading level index ${s}${e?.msn!==void 0?" at sn "+e.msn+" part "+e.part:""}${a?" Pathway "+a:""}${u&&l.live?" age "+u.toFixed(1)+(l.type&&" "+l.type||""):""} ${n}`),this.hls.trigger(A.LEVEL_LOADING,{url:n,level:s,levelInfo:t,pathwayId:t.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(t){this.level=t,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=t)}removeLevel(t){var e;if(this._levels.length===1)return;const n=this._levels.filter((a,l)=>l!==t?!0:(this.steering&&this.steering.removeLevel(a),a===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,a.details&&a.details.fragments.forEach(u=>u.level=-1)),!1));j1(n),this._levels=n,this.currentLevelIndex>-1&&(e=this.currentLevel)!=null&&e.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const s=n.length-1;this._firstLevel=Math.min(this._firstLevel,s),this._startLevel&&(this._startLevel=Math.min(this._startLevel,s)),this.hls.trigger(A.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(t,{levels:e}){this._levels=e}checkMaxAutoUpdated(){const{autoLevelCapping:t,maxAutoLevel:e,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==e&&(this._maxAutoLevel=e,this.hls.trigger(A.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:t,levels:this.levels,maxAutoLevel:e,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function Qx(i){const t={};i.forEach(e=>{const n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++})}function PR(){return self.SourceBuffer||self.WebKitSourceBuffer}function kR(){if(!js())return!1;const t=PR();return!t||t.prototype&&typeof t.prototype.appendBuffer=="function"&&typeof t.prototype.remove=="function"}function wF(){if(!kR())return!1;const i=js();return typeof i?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(t=>i.isTypeSupported(Ml(t,"video")))||["mp4a.40.2","fLaC"].some(t=>i.isTypeSupported(Ml(t,"audio"))))}function OF(){var i;const t=PR();return typeof(t==null||(i=t.prototype)==null?void 0:i.changeType)=="function"}const MF=100;class PF extends t0{constructor(t,e,n){super(t,e,n,"stream-controller",yt.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const s=this.media,a=s?s.currentTime:null;if(a===null||!mt(a)||(this.log(`Media seeked to ${a.toFixed(3)}`),!this.getBufferedFrag(a)))return;const l=this.getFwdBufferInfoAtPos(s,a,yt.MAIN,0);if(l===null||l.len===0){this.warn(`Main forward buffer length at ${a} on "seeked" event ${l?l.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:t}=this;t.on(A.MANIFEST_PARSED,this.onManifestParsed,this),t.on(A.LEVEL_LOADING,this.onLevelLoading,this),t.on(A.LEVEL_LOADED,this.onLevelLoaded,this),t.on(A.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(A.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(A.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(A.BUFFER_CREATED,this.onBufferCreated,this),t.on(A.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(A.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(A.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:t}=this;t.off(A.MANIFEST_PARSED,this.onManifestParsed,this),t.off(A.LEVEL_LOADED,this.onLevelLoaded,this),t.off(A.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(A.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(A.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(A.BUFFER_CREATED,this.onBufferCreated,this),t.off(A.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(A.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(A.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(t,e){if(this.levels){const{lastCurrentTime:n,hls:s}=this;if(this.stopLoad(),this.setInterval(MF),this.level=-1,!this.startFragRequested){let a=s.startLevel;a===-1&&(s.config.testBandwidth&&this.levels.length>1?(a=0,this.bitrateTest=!0):a=s.firstAutoLevel),s.nextLoadLevel=a,this.level=s.loadLevel,this._hasEnoughToStart=!!e}n>0&&t===-1&&!e&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),t=n),this.state=ot.IDLE,this.nextLoadPosition=this.lastCurrentTime=t+this.timelineOffset,this.startPosition=e?-1:t,this.tick()}else this._forceStartLoad=!0,this.state=ot.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case ot.WAITING_LEVEL:{const{levels:e,level:n}=this,s=e?.[n],a=s?.details;if(a&&(!a.live||this.levelLastLoaded===s&&!this.waitForLive(s))){if(this.waitForCdnTuneIn(a))break;this.state=ot.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=ot.IDLE;break}break}case ot.FRAG_LOADING_WAITING_RETRY:{var t;const e=self.performance.now(),n=this.retryDate;if(!n||e>=n||(t=this.media)!=null&&t.seeking){const{levels:s,level:a}=this,l=s?.[a];this.resetStartWhenNotLoaded(l||null),this.state=ot.IDLE}}break}this.state===ot.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var t;super.onTickEnd(),(t=this.media)!=null&&t.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:t,levelLastLoaded:e,levels:n,media:s}=this;if(e===null||!s&&!this.primaryPrefetch&&(this.startFragRequested||!t.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const a=this.buffering?t.nextLoadLevel:t.loadLevel;if(!(n!=null&&n[a]))return;const l=n[a],u=this.getMainFwdBufferInfo();if(u===null)return;const d=this.getLevelDetails();if(d&&this._streamEnded(u,d)){const E={};this.altAudio===2&&(E.type="video"),this.hls.trigger(A.BUFFER_EOS,E),this.state=ot.ENDED;return}if(!this.buffering)return;t.loadLevel!==a&&t.manualLevel===-1&&this.log(`Adapting to level ${a} from level ${this.level}`),this.level=t.nextLoadLevel=a;const f=l.details;if(!f||this.state===ot.WAITING_LEVEL||this.waitForLive(l)){this.level=a,this.state=ot.WAITING_LEVEL,this.startFragRequested=!1;return}const h=u.len,g=this.getMaxBufferLength(l.maxBitrate);if(h>=g)return;this.backtrackFragment&&this.backtrackFragment.start>u.end&&(this.backtrackFragment=null);const y=this.backtrackFragment?this.backtrackFragment.start:u.end;let S=this.getNextFragment(y,f);if(this.couldBacktrack&&!this.fragPrevious&&S&&He(S)&&this.fragmentTracker.getState(S)!==ke.OK){var v;const x=((v=this.backtrackFragment)!=null?v:S).sn-f.startSN,b=f.fragments[x-1];b&&S.cc===b.cc&&(S=b,this.fragmentTracker.removeFragment(b))}else this.backtrackFragment&&u.len&&(this.backtrackFragment=null);if(S&&this.isLoopLoading(S,y)){if(!S.gap){const x=this.audioOnly&&!this.altAudio?se.AUDIO:se.VIDEO,b=(x===se.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;b&&this.afterBufferFlushed(b,x,yt.MAIN)}S=this.getNextFragmentLoopLoading(S,f,u,yt.MAIN,g)}S&&(S.initSegment&&!S.initSegment.data&&!this.bitrateTest&&(S=S.initSegment),this.loadFragment(S,l,y))}loadFragment(t,e,n){const s=this.fragmentTracker.getState(t);s===ke.NOT_LOADED||s===ke.PARTIAL?He(t)?this.bitrateTest?(this.log(`Fragment ${t.sn} of level ${t.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(t,e)):super.loadFragment(t,e,n):this._loadInitSegment(t,e):this.clearTrackerIfNeeded(t)}getBufferedFrag(t){return this.fragmentTracker.getBufferedFrag(t,yt.MAIN)}followingBufferedFrag(t){return t?this.getBufferedFrag(t.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:t,media:e}=this;if(e!=null&&e.readyState){let n;const s=this.getAppendedFrag(e.currentTime);s&&s.start>1&&this.flushMainBuffer(0,s.start-1);const a=this.getLevelDetails();if(a!=null&&a.live){const u=this.getMainFwdBufferInfo();if(!u||u.len<a.targetduration*2)return}if(!e.paused&&t){const u=this.hls.nextLoadLevel,d=t[u],f=this.fragLastKbps;f&&this.fragCurrent?n=this.fragCurrent.duration*d.maxBitrate/(1e3*f)+1:n=0}else n=0;const l=this.getBufferedFrag(e.currentTime+n);if(l){const u=this.followingBufferedFrag(l);if(u){this.abortCurrentFrag();const d=u.maxStartPTS?u.maxStartPTS:u.start,f=u.duration,h=Math.max(l.end,d+Math.min(Math.max(f-this.config.maxFragLookUpTolerance,f*(this.couldBacktrack?.5:.125)),f*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(h,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const t=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,t&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.state){case ot.KEY_LOADING:case ot.FRAG_LOADING:case ot.FRAG_LOADING_WAITING_RETRY:case ot.PARSING:case ot.PARSED:this.state=ot.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(t,e){super.flushMainBuffer(t,e,this.altAudio===2?"video":null)}onMediaAttached(t,e){super.onMediaAttached(t,e);const n=e.media;In(n,"playing",this.onMediaPlaying),In(n,"seeked",this.onMediaSeeked)}onMediaDetaching(t,e){const{media:n}=this;n&&(Qn(n,"playing",this.onMediaPlaying),Qn(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(t,e),!e.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(A.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(t,e){let n=!1,s=!1;e.levels.forEach(a=>{const l=a.audioCodec;l&&(n=n||l.indexOf("mp4a.40.2")!==-1,s=s||l.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=n&&s&&!OF(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1}onLevelLoading(t,e){const{levels:n}=this;if(!n||this.state!==ot.IDLE)return;const s=e.levelInfo;(!s.details||s.details.live&&(this.levelLastLoaded!==s||s.details.expired)||this.waitForCdnTuneIn(s.details))&&(this.state=ot.WAITING_LEVEL)}onLevelLoaded(t,e){var n;const{levels:s,startFragRequested:a}=this,l=e.level,u=e.details,d=u.totalduration;if(!s){this.warn(`Levels were reset while loading level ${l}`);return}this.log(`Level ${l} loaded [${u.startSN},${u.endSN}]${u.lastPartSn?`[part-${u.lastPartSn}-${u.lastPartIndex}]`:""}, cc [${u.startCC}, ${u.endCC}] duration:${d}`);const f=e.levelInfo,h=this.fragCurrent;h&&(this.state===ot.FRAG_LOADING||this.state===ot.FRAG_LOADING_WAITING_RETRY)&&h.level!==e.level&&h.loader&&this.abortCurrentFrag();let g=0;if(u.live||(n=f.details)!=null&&n.live){var y;if(this.checkLiveUpdate(u),u.deltaUpdateFailed)return;g=this.alignPlaylists(u,f.details,(y=this.levelLastLoaded)==null?void 0:y.details)}if(f.details=u,this.levelLastLoaded=f,a||this.setStartPosition(u,g),this.hls.trigger(A.LEVEL_UPDATED,{details:u,level:l}),this.state===ot.WAITING_LEVEL){if(this.waitForCdnTuneIn(u))return;this.state=ot.IDLE}a&&u.live&&this.synchronizeToLiveEdge(u),this.tick()}synchronizeToLiveEdge(t){const{config:e,media:n}=this;if(!n)return;const s=this.hls.liveSyncPosition,a=this.getLoadPosition(),l=t.fragmentStart,u=t.edge,d=a>=l-e.maxFragLookUpTolerance&&a<=u;if(s!==null&&n.duration>s&&(a<s||!d)){const h=e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:e.liveMaxLatencyDurationCount*t.targetduration;if((!d&&n.readyState<4||a<u-h)&&(this._hasEnoughToStart||(this.nextLoadPosition=s),n.readyState))if(this.warn(`Playback: ${a.toFixed(3)} is located too far from the end of live sliding playlist: ${u}, reset currentTime to : ${s.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var f;const g=Lt.bufferInfo(n,s,0);if(!(g!=null&&(f=g.buffered)!=null&&f.length)){n.currentTime=s;return}if(g.start<=a){n.currentTime=s;return}const{nextStart:S}=Lt.bufferedInfo(g.buffered,a,0);S&&(n.currentTime=S)}else n.currentTime=s}}_handleFragmentLoadProgress(t){var e;const n=t.frag,{part:s,payload:a}=t,{levels:l}=this;if(!l){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const u=l[n.level];if(!u){this.warn(`Level ${n.level} not found on progress`);return}const d=u.details;if(!d){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const f=u.videoCodec,h=d.PTSKnown||!d.live,g=(e=n.initSegment)==null?void 0:e.data,y=this._getAudioCodec(u),S=this.transmuxer=this.transmuxer||new dR(this.hls,yt.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),v=s?s.index:-1,E=v!==-1,x=new Qp(n.level,n.sn,n.stats.chunkCount,a.byteLength,v,E),b=this.initPTS[n.cc];S.push(a,g,y,f,n,s,d.totalduration,h,x,b)}onAudioTrackSwitching(t,e){const n=this.hls,s=this.altAudio===2;if(Tf(e.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const l=this.fragCurrent;l&&(this.log("Switching to main audio track, cancel main fragment load"),l.abortRequests(),this.fragmentTracker.removeFragment(l)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(s){this.fragmentTracker.removeAllFragments(),n.once(A.BUFFER_FLUSHED,()=>{var l;(l=this.hls)==null||l.trigger(A.AUDIO_TRACK_SWITCHED,e)}),n.trigger(A.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}n.trigger(A.AUDIO_TRACK_SWITCHED,e)}}onAudioTrackSwitched(t,e){const n=Tf(e.url,this.hls);if(n){const s=this.videoBuffer;s&&this.mediaBuffer!==s&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=n?2:0,this.tick()}onBufferCreated(t,e){const n=e.tracks;let s,a,l=!1;for(const u in n){const d=n[u];if(d.id==="main"){if(a=u,s=d,u==="video"){const f=n[u];f&&(this.videoBuffer=f.buffer)}}else l=!0}l&&s?(this.log(`Alternate track found, use ${a}.buffered to schedule main fragment loading`),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media}onFragBuffered(t,e){const{frag:n,part:s}=e,a=n.type===yt.MAIN;if(a){if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${s?" p: "+s.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===ot.PARSED&&(this.state=ot.IDLE);return}const u=s?s.stats:n.stats;this.fragLastKbps=Math.round(8*u.total/(u.buffering.end-u.loading.first)),He(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,s)}const l=this.media;l&&(!this._hasEnoughToStart&&Lt.getBuffered(l).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),a&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(t,e){var n;if(e.fatal){this.state=ot.ERROR;return}switch(e.details){case z.FRAG_GAP:case z.FRAG_PARSING_ERROR:case z.FRAG_DECRYPT_ERROR:case z.FRAG_LOAD_ERROR:case z.FRAG_LOAD_TIMEOUT:case z.KEY_LOAD_ERROR:case z.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(yt.MAIN,e);break;case z.LEVEL_LOAD_ERROR:case z.LEVEL_LOAD_TIMEOUT:case z.LEVEL_PARSING_ERROR:!e.levelRetry&&this.state===ot.WAITING_LEVEL&&((n=e.context)==null?void 0:n.type)===Mt.LEVEL&&(this.state=ot.IDLE);break;case z.BUFFER_ADD_CODEC_ERROR:case z.BUFFER_APPEND_ERROR:if(e.parent!=="main")return;this.resetLoadingState();break;case z.BUFFER_FULL_ERROR:if(e.parent!=="main")return;this.reduceLengthAndFlushBuffer(e)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case z.INTERNAL_EXCEPTION:this.recoverWorkerError(e);break}}onFragLoadEmergencyAborted(){this.state=ot.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(t,{type:e}){if(e!==se.AUDIO||!this.altAudio){const n=(e===se.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;n&&(this.afterBufferFlushed(n,e,yt.MAIN),this.tick())}}onLevelsUpdated(t,e){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=e.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:t}=this;if(!t)return;const e=t.currentTime;let n=this.startPosition;if(n>=0&&e<n){if(t.seeking){this.log(`could not seek to ${n}, already seeking at ${e}`);return}const s=this.timelineOffset;s&&n&&(n+=s);const a=this.getLevelDetails(),l=Lt.getBuffered(t),u=l.length?l.start(0):0,d=u-n,f=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||d>0&&(d<f||this.loadingParts&&d<2*(a?.partTarget||0)))&&(this.log(`adjusting start position by ${d} to match buffer start`),n+=d,this.startPosition=n),e<n&&(this.log(`seek to target start position ${n} from current time ${e} buffer start ${u}`),t.currentTime=n)}}_getAudioCodec(t){let e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e.indexOf("mp4a.40.5")!==-1?e="mp4a.40.2":e="mp4a.40.5"),e}_loadBitrateTestFrag(t,e){t.bitrateTest=!0,this._doFragLoad(t,e).then(n=>{const{hls:s}=this,a=n?.frag;if(!a||this.fragContextChanged(a))return;e.fragmentError=0,this.state=ot.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const l=a.stats;l.parsing.start=l.parsing.end=l.buffering.start=l.buffering.end=self.performance.now(),s.trigger(A.FRAG_LOADED,n),a.bitrateTest=!1})}_handleTransmuxComplete(t){var e;const n=this.playlistType,{hls:s}=this,{remuxResult:a,chunkMeta:l}=t,u=this.getCurrentContext(l);if(!u){this.resetWhenMissingContext(l);return}const{frag:d,part:f,level:h}=u,{video:g,text:y,id3:S,initSegment:v}=a,{details:E}=h,x=this.altAudio?void 0:a.audio;if(this.fragContextChanged(d)){this.fragmentTracker.removeFragment(d);return}if(this.state=ot.PARSING,v){if(v!=null&&v.tracks){const L=d.initSegment||d;this._bufferInitSegment(h,v.tracks,L,l),s.trigger(A.FRAG_PARSING_INIT_SEGMENT,{frag:L,id:n,tracks:v.tracks})}const b=v.initPTS,D=v.timescale;mt(b)&&(this.initPTS[d.cc]={baseTime:b,timescale:D},s.trigger(A.INIT_PTS_FOUND,{frag:d,id:n,initPTS:b,timescale:D}))}if(g&&E){x&&g.type==="audiovideo"&&this.logMuxedErr(d);const b=E.fragments[d.sn-1-E.startSN],D=d.sn===E.startSN,L=!b||d.cc>b.cc;if(a.independent!==!1){const{startPTS:I,endPTS:_,startDTS:P,endDTS:M}=g;if(f)f.elementaryStreams[g.type]={startPTS:I,endPTS:_,startDTS:P,endDTS:M};else if(g.firstKeyFrame&&g.independent&&l.id===1&&!L&&(this.couldBacktrack=!0),g.dropped&&g.independent){const k=this.getMainFwdBufferInfo(),F=(k?k.end:this.getLoadPosition())+this.config.maxBufferHole,R=g.firstKeyFramePTS?g.firstKeyFramePTS:I;if(!D&&F<R-this.config.maxBufferHole&&!L){this.backtrack(d);return}else L&&(d.gap=!0);d.setElementaryStreamInfo(g.type,d.start,_,d.start,M,!0)}else D&&I-(E.appliedTimelineOffset||0)>nf&&(d.gap=!0);d.setElementaryStreamInfo(g.type,I,_,P,M),this.backtrackFragment&&(this.backtrackFragment=d),this.bufferFragmentData(g,d,f,l,D||L)}else if(D||L)d.gap=!0;else{this.backtrack(d);return}}if(x){const{startPTS:b,endPTS:D,startDTS:L,endDTS:I}=x;f&&(f.elementaryStreams[se.AUDIO]={startPTS:b,endPTS:D,startDTS:L,endDTS:I}),d.setElementaryStreamInfo(se.AUDIO,b,D,L,I),this.bufferFragmentData(x,d,f,l)}if(E&&S!=null&&(e=S.samples)!=null&&e.length){const b={id:n,frag:d,details:E,samples:S.samples};s.trigger(A.FRAG_PARSING_METADATA,b)}if(E&&y){const b={id:n,frag:d,details:E,samples:y.samples};s.trigger(A.FRAG_PARSING_USERDATA,b)}}logMuxedErr(t){this.warn(`${He(t)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${t.url}`)}_bufferInitSegment(t,e,n,s){if(this.state!==ot.PARSING)return;this.audioOnly=!!e.audio&&!e.video,this.altAudio&&!this.audioOnly&&(delete e.audio,e.audiovideo&&this.logMuxedErr(n));const{audio:a,video:l,audiovideo:u}=e;if(a){let f=Xc(a.codec,t.audioCodec);f==="mp4a"&&(f="mp4a.40.5");const h=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){f&&(f.indexOf("mp4a.40.5")!==-1?f="mp4a.40.2":f="mp4a.40.5");const g=a.metadata;g&&"channelCount"in g&&(g.channelCount||1)!==1&&h.indexOf("firefox")===-1&&(f="mp4a.40.5")}f&&f.indexOf("mp4a.40.5")!==-1&&h.indexOf("android")!==-1&&a.container!=="audio/mpeg"&&(f="mp4a.40.2",this.log(`Android: force audio codec to ${f}`)),t.audioCodec&&t.audioCodec!==f&&this.log(`Swapping manifest audio codec "${t.audioCodec}" for "${f}"`),a.levelCodec=f,a.id=yt.MAIN,this.log(`Init audio buffer, container:${a.container}, codecs[selected/level/parsed]=[${f||""}/${t.audioCodec||""}/${a.codec}]`),delete e.audiovideo}if(l){l.levelCodec=t.videoCodec,l.id=yt.MAIN;const f=l.codec;if(f?.length===4)switch(f){case"hvc1":case"hev1":l.codec="hvc1.1.6.L120.90";break;case"av01":l.codec="av01.0.04M.08";break;case"avc1":l.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${l.container}, codecs[level/parsed]=[${t.videoCodec||""}/${f}]${l.codec!==f?" parsed-corrected="+l.codec:""}${l.supplemental?" supplemental="+l.supplemental:""}`),delete e.audiovideo}u&&(this.log(`Init audiovideo buffer, container:${u.container}, codecs[level/parsed]=[${t.codecs}/${u.codec}]`),delete e.video,delete e.audio);const d=Object.keys(e);if(d.length){if(this.hls.trigger(A.BUFFER_CODECS,e),!this.hls)return;d.forEach(f=>{const g=e[f].initSegment;g!=null&&g.byteLength&&this.hls.trigger(A.BUFFER_APPENDING,{type:f,data:g,frag:n,part:null,chunkMeta:s,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const t=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(t,yt.MAIN)}get maxBufferLength(){const{levels:t,level:e}=this,n=t?.[e];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(t){this.couldBacktrack=!0,this.backtrackFragment=t,this.resetTransmuxer(),this.flushBufferGap(t),this.fragmentTracker.removeFragment(t),this.fragPrevious=null,this.nextLoadPosition=t.start,this.state=ot.IDLE}checkFragmentChanged(){const t=this.media;let e=null;if(t&&t.readyState>1&&t.seeking===!1){const n=t.currentTime;if(Lt.isBuffered(t,n)?e=this.getAppendedFrag(n):Lt.isBuffered(t,n+.1)&&(e=this.getAppendedFrag(n+.1)),e){this.backtrackFragment=null;const s=this.fragPlaying,a=e.level;(!s||e.sn!==s.sn||s.level!==a)&&(this.fragPlaying=e,this.hls.trigger(A.FRAG_CHANGED,{frag:e}),(!s||s.level!==a)&&this.hls.trigger(A.LEVEL_SWITCHED,{level:a}))}}}get nextLevel(){const t=this.nextBufferedFrag;return t?t.level:-1}get currentFrag(){var t;if(this.fragPlaying)return this.fragPlaying;const e=((t=this.media)==null?void 0:t.currentTime)||this.lastCurrentTime;return mt(e)?this.getAppendedFrag(e):null}get currentProgramDateTime(){var t;const e=((t=this.media)==null?void 0:t.currentTime)||this.lastCurrentTime;if(mt(e)){const n=this.getLevelDetails(),s=this.currentFrag||(n?wr(null,n.fragments,e):null);if(s){const a=s.programDateTime;if(a!==null){const l=a+(e-s.start)*1e3;return new Date(l)}}}return null}get currentLevel(){const t=this.currentFrag;return t?t.level:-1}get nextBufferedFrag(){const t=this.currentFrag;return t?this.followingBufferedFrag(t):null}get forceStartLoad(){return this._forceStartLoad}}class kF{constructor(t){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=t}abort(t){for(const n in this.keyUriToKeyInfo){const s=this.keyUriToKeyInfo[n].loader;if(s){var e;if(t&&t!==((e=s.context)==null?void 0:e.frag.type))return;s.abort()}}}detach(){for(const t in this.keyUriToKeyInfo){const e=this.keyUriToKeyInfo[t];(e.mediaKeySessionContext||e.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[t]}}destroy(){this.detach();for(const t in this.keyUriToKeyInfo){const e=this.keyUriToKeyInfo[t].loader;e&&e.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(t,e=z.KEY_LOAD_ERROR,n,s,a){return new ns({type:vt.NETWORK_ERROR,details:e,fatal:!1,frag:t,response:a,error:n,networkDetails:s})}loadClear(t,e){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(e.length){const{sn:n,cc:s}=t;for(let a=0;a<e.length;a++){const l=e[a];if(s<=l.cc&&(n==="initSegment"||l.sn==="initSegment"||n<l.sn))return this.emeController.selectKeySystemFormat(l).then(u=>{if(l.setKeyFormat(u),this.emeController&&this.config.requireKeySystemAccessOnStart){const d=Qc(u);if(d)return this.emeController.getKeySystemAccess([d])}})}}else if(this.config.requireKeySystemAccessOnStart){const n=dl(this.config);if(n.length)return this.emeController.getKeySystemAccess(n)}}return null}load(t){return!t.decryptdata&&t.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(t).then(e=>this.loadInternal(t,e)):this.loadInternal(t)}loadInternal(t,e){var n,s;e&&t.setKeyFormat(e);const a=t.decryptdata;if(!a){const f=new Error(e?`Expected frag.decryptdata to be defined after setting format ${e}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(t,z.KEY_LOAD_ERROR,f))}const l=a.uri;if(!l)return Promise.reject(this.createKeyLoadError(t,z.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${l}"`)));let u=this.keyUriToKeyInfo[l];if((n=u)!=null&&n.decryptdata.key)return a.key=u.decryptdata.key,Promise.resolve({frag:t,keyInfo:u});if((s=u)!=null&&s.keyLoadPromise){var d;switch((d=u.mediaKeySessionContext)==null?void 0:d.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return u.keyLoadPromise.then(f=>(a.key=f.keyInfo.decryptdata.key,{frag:t,keyInfo:u}))}}switch(u=this.keyUriToKeyInfo[l]={decryptdata:a,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},a.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return a.keyFormat==="identity"?this.loadKeyHTTP(u,t):this.loadKeyEME(u,t);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(u,t);default:return Promise.reject(this.createKeyLoadError(t,z.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${a.method}"`)))}}loadKeyEME(t,e){const n={frag:e,keyInfo:t};if(this.emeController&&this.config.emeEnabled){const s=this.emeController.loadKey(n);if(s)return(t.keyLoadPromise=s.then(a=>(t.mediaKeySessionContext=a,n))).catch(a=>{throw t.keyLoadPromise=null,a})}return Promise.resolve(n)}loadKeyHTTP(t,e){const n=this.config,s=n.loader,a=new s(n);return e.keyLoader=t.loader=a,t.keyLoadPromise=new Promise((l,u)=>{const d={keyInfo:t,frag:e,responseType:"arraybuffer",url:t.decryptdata.uri},f=n.keyLoadPolicy.default,h={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},g={onSuccess:(y,S,v,E)=>{const{frag:x,keyInfo:b,url:D}=v;if(!x.decryptdata||b!==this.keyUriToKeyInfo[D])return u(this.createKeyLoadError(x,z.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),E));b.decryptdata.key=x.decryptdata.key=new Uint8Array(y.data),x.keyLoader=null,b.loader=null,l({frag:x,keyInfo:b})},onError:(y,S,v,E)=>{this.resetLoader(S),u(this.createKeyLoadError(e,z.KEY_LOAD_ERROR,new Error(`HTTP Error ${y.code} loading key ${y.text}`),v,zt({url:d.url,data:void 0},y)))},onTimeout:(y,S,v)=>{this.resetLoader(S),u(this.createKeyLoadError(e,z.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),v))},onAbort:(y,S,v)=>{this.resetLoader(S),u(this.createKeyLoadError(e,z.INTERNAL_ABORTED,new Error("key loading aborted"),v))}};a.load(d,h,g)})}resetLoader(t){const{frag:e,keyInfo:n,url:s}=t,a=n.loader;e.keyLoader===a&&(e.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[s],a&&a.destroy()}}function Zx(i){const{type:t}=i;switch(t){case Mt.AUDIO_TRACK:return yt.AUDIO;case Mt.SUBTITLE_TRACK:return yt.SUBTITLE;default:return yt.MAIN}}function eg(i,t){let e=i.url;return(e===void 0||e.indexOf("data:")===0)&&(e=t.url),e}class NF{constructor(t){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=t,this.registerListeners()}startLoad(t){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:t}=this;t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.LEVEL_LOADING,this.onLevelLoading,this),t.on(A.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(A.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),t.on(A.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:t}=this;t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.LEVEL_LOADING,this.onLevelLoading,this),t.off(A.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(A.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),t.off(A.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(t){const e=this.hls.config,n=e.pLoader,s=e.loader,a=n||s,l=new a(e);return this.loaders[t.type]=l,l}getInternalLoader(t){return this.loaders[t.type]}resetInternalLoader(t){this.loaders[t]&&delete this.loaders[t]}destroyInternalLoaders(){for(const t in this.loaders){const e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(t,e){const{url:n}=e;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Mt.MANIFEST,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(t,e){const{id:n,level:s,pathwayId:a,url:l,deliveryDirectives:u,levelInfo:d}=e;this.load({id:n,level:s,pathwayId:a,responseType:"text",type:Mt.LEVEL,url:l,deliveryDirectives:u,levelOrTrack:d})}onAudioTrackLoading(t,e){const{id:n,groupId:s,url:a,deliveryDirectives:l,track:u}=e;this.load({id:n,groupId:s,level:null,responseType:"text",type:Mt.AUDIO_TRACK,url:a,deliveryDirectives:l,levelOrTrack:u})}onSubtitleTrackLoading(t,e){const{id:n,groupId:s,url:a,deliveryDirectives:l,track:u}=e;this.load({id:n,groupId:s,level:null,responseType:"text",type:Mt.SUBTITLE_TRACK,url:a,deliveryDirectives:l,levelOrTrack:u})}onLevelsUpdated(t,e){const n=this.loaders[Mt.LEVEL];if(n){const s=n.context;s&&!e.levels.some(a=>a===s.levelOrTrack)&&(n.abort(),delete this.loaders[Mt.LEVEL])}}load(t){var e;const n=this.hls.config;let s=this.getInternalLoader(t);if(s){const f=this.hls.logger,h=s.context;if(h&&h.levelOrTrack===t.levelOrTrack&&(h.url===t.url||h.deliveryDirectives&&!t.deliveryDirectives)){h.url===t.url?f.log(`[playlist-loader]: ignore ${t.url} ongoing request`):f.log(`[playlist-loader]: ignore ${t.url} in favor of ${h.url}`);return}f.log(`[playlist-loader]: aborting previous loader for type: ${t.type}`),s.abort()}let a;if(t.type===Mt.MANIFEST?a=n.manifestLoadPolicy.default:a=Wt({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),s=this.createInternalLoader(t),mt((e=t.deliveryDirectives)==null?void 0:e.part)){let f;if(t.type===Mt.LEVEL&&t.level!==null?f=this.hls.levels[t.level].details:t.type===Mt.AUDIO_TRACK&&t.id!==null?f=this.hls.audioTracks[t.id].details:t.type===Mt.SUBTITLE_TRACK&&t.id!==null&&(f=this.hls.subtitleTracks[t.id].details),f){const h=f.partTarget,g=f.targetduration;if(h&&g){const y=Math.max(h*3,g*.8)*1e3;a=Wt({},a,{maxTimeToFirstByteMs:Math.min(y,a.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(y,a.maxTimeToFirstByteMs)})}}}const l=a.errorRetry||a.timeoutRetry||{},u={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:l.maxNumRetry||0,retryDelay:l.retryDelayMs||0,maxRetryDelay:l.maxRetryDelayMs||0},d={onSuccess:(f,h,g,y)=>{const S=this.getInternalLoader(g);this.resetInternalLoader(g.type);const v=f.data;if(v.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(f,g,new Error("no EXTM3U delimiter"),y||null,h);return}h.parsing.start=performance.now(),Di.isMediaPlaylist(v)||g.type!==Mt.MANIFEST?this.handleTrackOrLevelPlaylist(f,h,g,y||null,S):this.handleMasterPlaylist(f,h,g,y)},onError:(f,h,g,y)=>{this.handleNetworkError(h,g,!1,f,y)},onTimeout:(f,h,g)=>{this.handleNetworkError(h,g,!0,void 0,f)}};s.load(t,u,d)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:t,startPosition:e},forceStartLoad:n}=this.hls;(t||n)&&(this.hls.logger.log(`${t?"auto":"force"} startLoad with configured startPosition ${e}`),this.hls.startLoad(e))}handleMasterPlaylist(t,e,n,s){const a=this.hls,l=t.data,u=eg(t,n),d=Di.parseMasterPlaylist(l,u);if(d.playlistParsingError){this.handleManifestParsingError(t,n,d.playlistParsingError,s,e);return}const{contentSteering:f,levels:h,sessionData:g,sessionKeys:y,startTimeOffset:S,variableList:v}=d;this.variableList=v;const{AUDIO:E=[],SUBTITLES:x,"CLOSED-CAPTIONS":b}=Di.parseMasterPlaylistMedia(l,u,d);E.length&&!E.some(L=>!L.url)&&h[0].audioCodec&&!h[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),E.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new fe({}),bitrate:0,url:""})),a.trigger(A.MANIFEST_LOADED,{levels:h,audioTracks:E,subtitles:x,captions:b,contentSteering:f,url:u,stats:e,networkDetails:s,sessionData:g,sessionKeys:y,startTimeOffset:S,variableList:v})}handleTrackOrLevelPlaylist(t,e,n,s,a){const l=this.hls,{id:u,level:d,type:f}=n,h=eg(t,n),g=mt(d)?d:mt(u)?u:0,y=Zx(n),S=Di.parseLevelPlaylist(t.data,h,g,y,0,this.variableList);if(f===Mt.MANIFEST){const v={attrs:new fe({}),bitrate:0,details:S,name:"",url:h};S.requestScheduled=e.loading.start+V1(S,0),l.trigger(A.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:h,stats:e,networkDetails:s,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}e.parsing.end=performance.now(),n.levelDetails=S,this.handlePlaylistLoaded(S,t,e,n,s,a)}handleManifestParsingError(t,e,n,s,a){this.hls.trigger(A.ERROR,{type:vt.NETWORK_ERROR,details:z.MANIFEST_PARSING_ERROR,fatal:e.type===Mt.MANIFEST,url:t.url,err:n,error:n,reason:n.message,response:t,context:e,networkDetails:s,stats:a})}handleNetworkError(t,e,n=!1,s,a){let l=`A network ${n?"timeout":"error"+(s?" (status "+s.code+")":"")} occurred while loading ${t.type}`;t.type===Mt.LEVEL?l+=`: ${t.level} id: ${t.id}`:(t.type===Mt.AUDIO_TRACK||t.type===Mt.SUBTITLE_TRACK)&&(l+=` id: ${t.id} group-id: "${t.groupId}"`);const u=new Error(l);this.hls.logger.warn(`[playlist-loader]: ${l}`);let d=z.UNKNOWN,f=!1;const h=this.getInternalLoader(t);switch(t.type){case Mt.MANIFEST:d=n?z.MANIFEST_LOAD_TIMEOUT:z.MANIFEST_LOAD_ERROR,f=!0;break;case Mt.LEVEL:d=n?z.LEVEL_LOAD_TIMEOUT:z.LEVEL_LOAD_ERROR,f=!1;break;case Mt.AUDIO_TRACK:d=n?z.AUDIO_TRACK_LOAD_TIMEOUT:z.AUDIO_TRACK_LOAD_ERROR,f=!1;break;case Mt.SUBTITLE_TRACK:d=n?z.SUBTITLE_TRACK_LOAD_TIMEOUT:z.SUBTITLE_LOAD_ERROR,f=!1;break}h&&this.resetInternalLoader(t.type);const g={type:vt.NETWORK_ERROR,details:d,fatal:f,url:t.url,loader:h,context:t,error:u,networkDetails:e,stats:a};if(s){const y=e?.url||t.url;g.response=zt({url:y,data:void 0},s)}this.hls.trigger(A.ERROR,g)}handlePlaylistLoaded(t,e,n,s,a,l){const u=this.hls,{type:d,level:f,id:h,groupId:g,deliveryDirectives:y}=s,S=eg(e,s),v=Zx(s),E=typeof s.level=="number"&&v===yt.MAIN?f:void 0;if(!t.fragments.length){const b=t.playlistParsingError=new Error("No Segments found in Playlist");u.trigger(A.ERROR,{type:vt.NETWORK_ERROR,details:z.LEVEL_EMPTY_ERROR,fatal:!1,url:S,error:b,reason:b.message,response:e,context:s,level:E,parent:v,networkDetails:a,stats:n});return}t.targetduration||(t.playlistParsingError=new Error("Missing Target Duration"));const x=t.playlistParsingError;if(x){if(this.hls.logger.warn(x),!u.config.ignorePlaylistParsingErrors){u.trigger(A.ERROR,{type:vt.NETWORK_ERROR,details:z.LEVEL_PARSING_ERROR,fatal:!1,url:S,error:x,reason:x.message,response:e,context:s,level:E,parent:v,networkDetails:a,stats:n});return}t.playlistParsingError=null}switch(t.live&&l&&(l.getCacheAge&&(t.ageHeader=l.getCacheAge()||0),(!l.getCacheAge||isNaN(t.ageHeader))&&(t.ageHeader=0)),d){case Mt.MANIFEST:case Mt.LEVEL:u.trigger(A.LEVEL_LOADED,{details:t,levelInfo:s.levelOrTrack||u.levels[0],level:E||0,id:h||0,stats:n,networkDetails:a,deliveryDirectives:y,withoutMultiVariant:d===Mt.MANIFEST});break;case Mt.AUDIO_TRACK:u.trigger(A.AUDIO_TRACK_LOADED,{details:t,track:s.levelOrTrack,id:h||0,groupId:g||"",stats:n,networkDetails:a,deliveryDirectives:y});break;case Mt.SUBTITLE_TRACK:u.trigger(A.SUBTITLE_TRACK_LOADED,{details:t,track:s.levelOrTrack,id:h||0,groupId:g||"",stats:n,networkDetails:a,deliveryDirectives:y});break}}}class Li{static get version(){return Bl}static isMSESupported(){return kR()}static isSupported(){return wF()}static getMediaSource(){return js()}static get Events(){return A}static get MetadataSchema(){return _n}static get ErrorTypes(){return vt}static get ErrorDetails(){return z}static get DefaultConfig(){return Li.defaultConfig?Li.defaultConfig:vF}static set DefaultConfig(t){Li.defaultConfig=t}constructor(t={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new e0,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const e=this.logger=ik(t.debug||!1,"Hls instance",t.assetPlayerId),n=this.config=TF(Li.DefaultConfig,t,e);this.userConfig=t,n.progressive&&EF(n,e);const{abrController:s,bufferController:a,capLevelController:l,errorController:u,fpsController:d}=n,f=new u(this),h=this.abrController=new s(this),g=new Yk(this),y=n.interstitialsController,S=y?this.interstitialsController=new y(this,Li):null,v=this.bufferController=new a(this,g),E=this.capLevelController=new l(this),x=new d(this),b=new NF(this),D=n.contentSteeringController,L=D?new D(this):null,I=this.levelController=new IF(this,L),_=new _F(this),P=new kF(this.config),M=this.streamController=new PF(this,g,P),k=this.gapController=new RF(this,g);E.setStreamController(M),x.setStreamController(M);const F=[b,I,M];S&&F.splice(1,0,S),L&&F.splice(1,0,L),this.networkControllers=F;const R=[h,v,k,E,x,_,g];this.audioTrackController=this.createController(n.audioTrackController,F);const $=n.audioStreamController;$&&F.push(this.audioStreamController=new $(this,g,P)),this.subtitleTrackController=this.createController(n.subtitleTrackController,F);const Q=n.subtitleStreamController;Q&&F.push(this.subtititleStreamController=new Q(this,g,P)),this.createController(n.timelineController,R),P.emeController=this.emeController=this.createController(n.emeController,R),this.cmcdController=this.createController(n.cmcdController,R),this.latencyController=this.createController(DF,R),this.coreComponents=R,F.push(f);const ft=f.onErrorOut;typeof ft=="function"&&this.on(A.ERROR,ft,f),this.on(A.MANIFEST_LOADED,b.onManifestLoaded,b)}createController(t,e){if(t){const n=new t(this);return e&&e.push(n),n}return null}on(t,e,n=this){this._emitter.on(t,e,n)}once(t,e,n=this){this._emitter.once(t,e,n)}removeAllListeners(t){this._emitter.removeAllListeners(t)}off(t,e,n=this,s){this._emitter.off(t,e,n,s)}listeners(t){return this._emitter.listeners(t)}emit(t,e,n){return this._emitter.emit(t,e,n)}trigger(t,e){if(this.config.debug)return this.emit(t,t,e);try{return this.emit(t,t,e)}catch(n){if(this.logger.error("An internal error happened while handling event "+t+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const s=t===A.ERROR;this.trigger(A.ERROR,{type:vt.OTHER_ERROR,details:z.INTERNAL_EXCEPTION,fatal:s,event:t,error:n}),this.triggeringException=!1}}return!1}listenerCount(t){return this._emitter.listenerCount(t)}destroy(){this.logger.log("destroy"),this.trigger(A.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(e=>e.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(e=>e.destroy()),this.coreComponents.length=0;const t=this.config;t.xhrSetup=t.fetchSetup=void 0,this.userConfig=null}attachMedia(t){if(!t||"media"in t&&!t.media){const a=new Error(`attachMedia failed: invalid argument (${t})`);this.trigger(A.ERROR,{type:vt.OTHER_ERROR,details:z.ATTACH_MEDIA_ERROR,fatal:!0,error:a});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const e="media"in t,n=e?t.media:t,s=e?t:{media:n};this._media=n,this.trigger(A.MEDIA_ATTACHING,s)}detachMedia(){this.logger.log("detachMedia"),this.trigger(A.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const t=this.bufferController.transferMedia();return this.trigger(A.MEDIA_DETACHING,{transferMedia:t}),t}loadSource(t){this.stopLoad();const e=this.media,n=this._url,s=this._url=zp.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${s}`),e&&n&&(n!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(e)),this.trigger(A.MANIFEST_LOADING,{url:t})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(t=-1,e){this.logger.log(`startLoad(${t+(e?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(t,e),!(!this.started||!this.networkControllers));n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let t=0;t<this.networkControllers.length&&(this.networkControllers[t].stopLoad(),!(this.started||!this.networkControllers));t++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(t=>{t.resumeBuffering&&t.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(t=>{t.pauseBuffering&&t.pauseBuffering()}))}get inFlightFragments(){const t={[yt.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(t[yt.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(t[yt.SUBTITLE]=this.subtititleStreamController.inFlightFrag),t}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const t=this._media,e=t?.currentTime;this.detachMedia(),t&&(this.attachMedia(t),e&&this.startLoad(e))}removeLevel(t){this.levelController.removeLevel(t)}get sessionId(){let t=this._sessionId;return t||(t=this._sessionId=RB()),t}get levels(){const t=this.levelController.levels;return t||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(t){this.logger.log(`set currentLevel:${t}`),this.levelController.manualLevel=t,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(t){this.logger.log(`set nextLevel:${t}`),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(t){this.logger.log(`set loadLevel:${t}`),this.levelController.manualLevel=t}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(t){this.levelController.nextLoadLevel=t}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(t){this.logger.log(`set firstLevel:${t}`),this.levelController.firstLevel=t}get startLevel(){const t=this.levelController.startLevel;return t===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:t}set startLevel(t){this.logger.log(`set startLevel:${t}`),t!==-1&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(t){const e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:t}=this.abrController;return t?t.getEstimate():NaN}set bandwidthEstimate(t){this.abrController.resetEstimator(t)}get abrEwmaDefaultEstimate(){const{bwEstimator:t}=this.abrController;return t?t.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:t}=this.abrController;return t?t.getEstimateTTFB():NaN}set autoLevelCapping(t){this._autoLevelCapping!==t&&(this.logger.log(`set autoLevelCapping:${t}`),this._autoLevelCapping=t,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(t){wk(t)&&this._maxHdcpLevel!==t&&(this._maxHdcpLevel=t,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:t,config:{minAutoBitrate:e}}=this;if(!t)return 0;const n=t.length;for(let s=0;s<n;s++)if(t[s].maxBitrate>=e)return s;return 0}get maxAutoLevel(){const{levels:t,autoLevelCapping:e,maxHdcpLevel:n}=this;let s;if(e===-1&&t!=null&&t.length?s=t.length-1:s=e,n)for(let a=s;a--;){const l=t[a].attrs["HDCP-LEVEL"];if(l&&l<=n)return a}return s}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(t){this.abrController.nextAutoLevel=t}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(t){var e;return((e=this.audioTrackController)==null?void 0:e.setAudioOption(t))||null}setSubtitleOption(t){var e;return((e=this.subtitleTrackController)==null?void 0:e.setSubtitleOption(t))||null}get allAudioTracks(){const t=this.audioTrackController;return t?t.allAudioTracks:[]}get audioTracks(){const t=this.audioTrackController;return t?t.audioTracks:[]}get audioTrack(){const t=this.audioTrackController;return t?t.audioTrack:-1}set audioTrack(t){const e=this.audioTrackController;e&&(e.audioTrack=t)}get allSubtitleTracks(){const t=this.subtitleTrackController;return t?t.allSubtitleTracks:[]}get subtitleTracks(){const t=this.subtitleTrackController;return t?t.subtitleTracks:[]}get subtitleTrack(){const t=this.subtitleTrackController;return t?t.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(t){const e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}get subtitleDisplay(){const t=this.subtitleTrackController;return t?t.subtitleDisplay:!1}set subtitleDisplay(t){const e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(t){this.config.lowLatencyMode=t}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(t){this.latencyController.targetLatency=t}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(t){this.levelController.pathwayPriority=t}get bufferedToEnd(){var t;return!!((t=this.bufferController)!=null&&t.bufferedToEnd)}get interstitialsManager(){var t;return((t=this.interstitialsController)==null?void 0:t.interstitialsManager)||null}getMediaDecodingInfo(t,e=this.allAudioTracks){const n=I1(e);return D1(t,n,navigator.mediaCapabilities)}}Li.defaultConfig=void 0;const h0=d1((i,t)=>({mirrorStreams:[],setMirrorStreams:e=>{const{mirrorStreams:n}=t();i({mirrorStreams:[...n.filter(s=>s.src!==e.src),e]})},resetStreams:()=>{i({mirrorStreams:[]})},progress:{},getProgress:e=>t().progress[e]||0,setProgress:(e,n)=>{i(s=>({progress:{...s.progress,[e]:n}}))}})),BF=({src:i,autoPlay:t=!0,controls:e=!1,onStreamReady:n})=>{const{setProgress:s,getProgress:a}=h0(),l=V.useRef(null),u=V.useRef(null);return V.useEffect(()=>{const d=l.current,f=u.current;if(!d||!f)return;let h=null;if(Li.isSupported())h=new Li,h.loadSource(i),h.attachMedia(d),h.on(Li.Events.MANIFEST_PARSED,()=>{const v=a(i);isNaN(v)||(d.currentTime=v),t&&d.play().catch(E=>{console.warn("Video play failed",E)})});else if(d.canPlayType("application/vnd.apple.mpegurl"))d.src=i,d.currentTime=a(i),t&&d.play().catch(v=>{console.warn("Video play failed",v)});else{console.error("HLS not supported");return}const g=f.getContext("2d");f.width=1280,f.height=720;const y=()=>{d.readyState>=2&&g?.drawImage(d,0,0,f.width,f.height),requestAnimationFrame(y)};y();const S=f.captureStream(30);return n(S),()=>{d&&!d.seeking&&s(i,d.currentTime),S.getTracks().forEach(v=>v.stop()),h?.destroy()}},[i,n,s,a,t]),J.jsxs(J.Fragment,{children:[J.jsx("video",{ref:l,controls:e,autoPlay:t,playsInline:!0,loop:!0,muted:!0,style:{width:"100%",height:"100%",objectFit:"cover"}}),J.jsx("canvas",{style:{opacity:0},ref:u})]})};function NR(i,t){return function(){return i.apply(t,arguments)}}const{toString:FF}=Object.prototype,{getPrototypeOf:m0}=Object,{iterator:Xf,toStringTag:BR}=Symbol,Wf=(i=>t=>{const e=FF.call(t);return i[e]||(i[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),li=i=>(i=i.toLowerCase(),t=>Wf(t)===i),Qf=i=>t=>typeof t===i,{isArray:Ja}=Array,Vl=Qf("undefined");function UF(i){return i!==null&&!Vl(i)&&i.constructor!==null&&!Vl(i.constructor)&&yn(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const FR=li("ArrayBuffer");function $F(i){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(i):t=i&&i.buffer&&FR(i.buffer),t}const VF=Qf("string"),yn=Qf("function"),UR=Qf("number"),Zf=i=>i!==null&&typeof i=="object",GF=i=>i===!0||i===!1,sf=i=>{if(Wf(i)!=="object")return!1;const t=m0(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(BR in i)&&!(Xf in i)},HF=li("Date"),jF=li("File"),KF=li("Blob"),zF=li("FileList"),YF=i=>Zf(i)&&yn(i.pipe),qF=i=>{let t;return i&&(typeof FormData=="function"&&i instanceof FormData||yn(i.append)&&((t=Wf(i))==="formdata"||t==="object"&&yn(i.toString)&&i.toString()==="[object FormData]"))},XF=li("URLSearchParams"),[WF,QF,ZF,JF]=["ReadableStream","Request","Response","Headers"].map(li),tU=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tu(i,t,{allOwnKeys:e=!1}={}){if(i===null||typeof i>"u")return;let n,s;if(typeof i!="object"&&(i=[i]),Ja(i))for(n=0,s=i.length;n<s;n++)t.call(null,i[n],n,i);else{const a=e?Object.getOwnPropertyNames(i):Object.keys(i),l=a.length;let u;for(n=0;n<l;n++)u=a[n],t.call(null,i[u],u,i)}}function $R(i,t){t=t.toLowerCase();const e=Object.keys(i);let n=e.length,s;for(;n-- >0;)if(s=e[n],t===s.toLowerCase())return s;return null}const xr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,VR=i=>!Vl(i)&&i!==xr;function tp(){const{caseless:i}=VR(this)&&this||{},t={},e=(n,s)=>{const a=i&&$R(t,s)||s;sf(t[a])&&sf(n)?t[a]=tp(t[a],n):sf(n)?t[a]=tp({},n):Ja(n)?t[a]=n.slice():t[a]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&tu(arguments[n],e);return t}const eU=(i,t,e,{allOwnKeys:n}={})=>(tu(t,(s,a)=>{e&&yn(s)?i[a]=NR(s,e):i[a]=s},{allOwnKeys:n}),i),nU=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),iU=(i,t,e,n)=>{i.prototype=Object.create(t.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:t.prototype}),e&&Object.assign(i.prototype,e)},sU=(i,t,e,n)=>{let s,a,l;const u={};if(t=t||{},i==null)return t;do{for(s=Object.getOwnPropertyNames(i),a=s.length;a-- >0;)l=s[a],(!n||n(l,i,t))&&!u[l]&&(t[l]=i[l],u[l]=!0);i=e!==!1&&m0(i)}while(i&&(!e||e(i,t))&&i!==Object.prototype);return t},rU=(i,t,e)=>{i=String(i),(e===void 0||e>i.length)&&(e=i.length),e-=t.length;const n=i.indexOf(t,e);return n!==-1&&n===e},aU=i=>{if(!i)return null;if(Ja(i))return i;let t=i.length;if(!UR(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=i[t];return e},oU=(i=>t=>i&&t instanceof i)(typeof Uint8Array<"u"&&m0(Uint8Array)),lU=(i,t)=>{const n=(i&&i[Xf]).call(i);let s;for(;(s=n.next())&&!s.done;){const a=s.value;t.call(i,a[0],a[1])}},uU=(i,t)=>{let e;const n=[];for(;(e=i.exec(t))!==null;)n.push(e);return n},cU=li("HTMLFormElement"),fU=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,s){return n.toUpperCase()+s}),Jx=(({hasOwnProperty:i})=>(t,e)=>i.call(t,e))(Object.prototype),dU=li("RegExp"),GR=(i,t)=>{const e=Object.getOwnPropertyDescriptors(i),n={};tu(e,(s,a)=>{let l;(l=t(s,a,i))!==!1&&(n[a]=l||s)}),Object.defineProperties(i,n)},hU=i=>{GR(i,(t,e)=>{if(yn(i)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=i[e];if(yn(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},mU=(i,t)=>{const e={},n=s=>{s.forEach(a=>{e[a]=!0})};return Ja(i)?n(i):n(String(i).split(t)),e},gU=()=>{},pU=(i,t)=>i!=null&&Number.isFinite(i=+i)?i:t;function yU(i){return!!(i&&yn(i.append)&&i[BR]==="FormData"&&i[Xf])}const vU=i=>{const t=new Array(10),e=(n,s)=>{if(Zf(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[s]=n;const a=Ja(n)?[]:{};return tu(n,(l,u)=>{const d=e(l,s+1);!Vl(d)&&(a[u]=d)}),t[s]=void 0,a}}return n};return e(i,0)},SU=li("AsyncFunction"),TU=i=>i&&(Zf(i)||yn(i))&&yn(i.then)&&yn(i.catch),HR=((i,t)=>i?setImmediate:t?((e,n)=>(xr.addEventListener("message",({source:s,data:a})=>{s===xr&&a===e&&n.length&&n.shift()()},!1),s=>{n.push(s),xr.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",yn(xr.postMessage)),EU=typeof queueMicrotask<"u"?queueMicrotask.bind(xr):typeof process<"u"&&process.nextTick||HR,xU=i=>i!=null&&yn(i[Xf]),tt={isArray:Ja,isArrayBuffer:FR,isBuffer:UF,isFormData:qF,isArrayBufferView:$F,isString:VF,isNumber:UR,isBoolean:GF,isObject:Zf,isPlainObject:sf,isReadableStream:WF,isRequest:QF,isResponse:ZF,isHeaders:JF,isUndefined:Vl,isDate:HF,isFile:jF,isBlob:KF,isRegExp:dU,isFunction:yn,isStream:YF,isURLSearchParams:XF,isTypedArray:oU,isFileList:zF,forEach:tu,merge:tp,extend:eU,trim:tU,stripBOM:nU,inherits:iU,toFlatObject:sU,kindOf:Wf,kindOfTest:li,endsWith:rU,toArray:aU,forEachEntry:lU,matchAll:uU,isHTMLForm:cU,hasOwnProperty:Jx,hasOwnProp:Jx,reduceDescriptors:GR,freezeMethods:hU,toObjectSet:mU,toCamelCase:fU,noop:gU,toFiniteNumber:pU,findKey:$R,global:xr,isContextDefined:VR,isSpecCompliantForm:yU,toJSONObject:vU,isAsyncFn:SU,isThenable:TU,setImmediate:HR,asap:EU,isIterable:xU};function Dt(i,t,e,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}tt.inherits(Dt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:tt.toJSONObject(this.config),code:this.code,status:this.status}}});const jR=Dt.prototype,KR={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{KR[i]={value:i}});Object.defineProperties(Dt,KR);Object.defineProperty(jR,"isAxiosError",{value:!0});Dt.from=(i,t,e,n,s,a)=>{const l=Object.create(jR);return tt.toFlatObject(i,l,function(d){return d!==Error.prototype},u=>u!=="isAxiosError"),Dt.call(l,i.message,t,e,n,s),l.cause=i,l.name=i.name,a&&Object.assign(l,a),l};const bU=null;function ep(i){return tt.isPlainObject(i)||tt.isArray(i)}function zR(i){return tt.endsWith(i,"[]")?i.slice(0,-2):i}function tb(i,t,e){return i?i.concat(t).map(function(s,a){return s=zR(s),!e&&a?"["+s+"]":s}).join(e?".":""):t}function AU(i){return tt.isArray(i)&&!i.some(ep)}const RU=tt.toFlatObject(tt,{},null,function(t){return/^is[A-Z]/.test(t)});function Jf(i,t,e){if(!tt.isObject(i))throw new TypeError("target must be an object");t=t||new FormData,e=tt.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,x){return!tt.isUndefined(x[E])});const n=e.metaTokens,s=e.visitor||h,a=e.dots,l=e.indexes,d=(e.Blob||typeof Blob<"u"&&Blob)&&tt.isSpecCompliantForm(t);if(!tt.isFunction(s))throw new TypeError("visitor must be a function");function f(v){if(v===null)return"";if(tt.isDate(v))return v.toISOString();if(tt.isBoolean(v))return v.toString();if(!d&&tt.isBlob(v))throw new Dt("Blob is not supported. Use a Buffer instead.");return tt.isArrayBuffer(v)||tt.isTypedArray(v)?d&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function h(v,E,x){let b=v;if(v&&!x&&typeof v=="object"){if(tt.endsWith(E,"{}"))E=n?E:E.slice(0,-2),v=JSON.stringify(v);else if(tt.isArray(v)&&AU(v)||(tt.isFileList(v)||tt.endsWith(E,"[]"))&&(b=tt.toArray(v)))return E=zR(E),b.forEach(function(L,I){!(tt.isUndefined(L)||L===null)&&t.append(l===!0?tb([E],I,a):l===null?E:E+"[]",f(L))}),!1}return ep(v)?!0:(t.append(tb(x,E,a),f(v)),!1)}const g=[],y=Object.assign(RU,{defaultVisitor:h,convertValue:f,isVisitable:ep});function S(v,E){if(!tt.isUndefined(v)){if(g.indexOf(v)!==-1)throw Error("Circular reference detected in "+E.join("."));g.push(v),tt.forEach(v,function(b,D){(!(tt.isUndefined(b)||b===null)&&s.call(t,b,tt.isString(D)?D.trim():D,E,y))===!0&&S(b,E?E.concat(D):[D])}),g.pop()}}if(!tt.isObject(i))throw new TypeError("data must be an object");return S(i),t}function eb(i){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function g0(i,t){this._pairs=[],i&&Jf(i,this,t)}const YR=g0.prototype;YR.append=function(t,e){this._pairs.push([t,e])};YR.toString=function(t){const e=t?function(n){return t.call(this,n,eb)}:eb;return this._pairs.map(function(s){return e(s[0])+"="+e(s[1])},"").join("&")};function LU(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function qR(i,t,e){if(!t)return i;const n=e&&e.encode||LU;tt.isFunction(e)&&(e={serialize:e});const s=e&&e.serialize;let a;if(s?a=s(t,e):a=tt.isURLSearchParams(t)?t.toString():new g0(t,e).toString(n),a){const l=i.indexOf("#");l!==-1&&(i=i.slice(0,l)),i+=(i.indexOf("?")===-1?"?":"&")+a}return i}class nb{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){tt.forEach(this.handlers,function(n){n!==null&&t(n)})}}const XR={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},CU=typeof URLSearchParams<"u"?URLSearchParams:g0,_U=typeof FormData<"u"?FormData:null,DU=typeof Blob<"u"?Blob:null,IU={isBrowser:!0,classes:{URLSearchParams:CU,FormData:_U,Blob:DU},protocols:["http","https","file","blob","url","data"]},p0=typeof window<"u"&&typeof document<"u",np=typeof navigator=="object"&&navigator||void 0,wU=p0&&(!np||["ReactNative","NativeScript","NS"].indexOf(np.product)<0),OU=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",MU=p0&&window.location.href||"http://localhost",PU=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:p0,hasStandardBrowserEnv:wU,hasStandardBrowserWebWorkerEnv:OU,navigator:np,origin:MU},Symbol.toStringTag,{value:"Module"})),rn={...PU,...IU};function kU(i,t){return Jf(i,new rn.classes.URLSearchParams,Object.assign({visitor:function(e,n,s,a){return rn.isNode&&tt.isBuffer(e)?(this.append(n,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function NU(i){return tt.matchAll(/\w+|\[(\w*)]/g,i).map(t=>t[0]==="[]"?"":t[1]||t[0])}function BU(i){const t={},e=Object.keys(i);let n;const s=e.length;let a;for(n=0;n<s;n++)a=e[n],t[a]=i[a];return t}function WR(i){function t(e,n,s,a){let l=e[a++];if(l==="__proto__")return!0;const u=Number.isFinite(+l),d=a>=e.length;return l=!l&&tt.isArray(s)?s.length:l,d?(tt.hasOwnProp(s,l)?s[l]=[s[l],n]:s[l]=n,!u):((!s[l]||!tt.isObject(s[l]))&&(s[l]=[]),t(e,n,s[l],a)&&tt.isArray(s[l])&&(s[l]=BU(s[l])),!u)}if(tt.isFormData(i)&&tt.isFunction(i.entries)){const e={};return tt.forEachEntry(i,(n,s)=>{t(NU(n),s,e,0)}),e}return null}function FU(i,t,e){if(tt.isString(i))try{return(t||JSON.parse)(i),tt.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(i)}const eu={transitional:XR,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",s=n.indexOf("application/json")>-1,a=tt.isObject(t);if(a&&tt.isHTMLForm(t)&&(t=new FormData(t)),tt.isFormData(t))return s?JSON.stringify(WR(t)):t;if(tt.isArrayBuffer(t)||tt.isBuffer(t)||tt.isStream(t)||tt.isFile(t)||tt.isBlob(t)||tt.isReadableStream(t))return t;if(tt.isArrayBufferView(t))return t.buffer;if(tt.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return kU(t,this.formSerializer).toString();if((u=tt.isFileList(t))||n.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Jf(u?{"files[]":t}:t,d&&new d,this.formSerializer)}}return a||s?(e.setContentType("application/json",!1),FU(t)):t}],transformResponse:[function(t){const e=this.transitional||eu.transitional,n=e&&e.forcedJSONParsing,s=this.responseType==="json";if(tt.isResponse(t)||tt.isReadableStream(t))return t;if(t&&tt.isString(t)&&(n&&!this.responseType||s)){const l=!(e&&e.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(u){if(l)throw u.name==="SyntaxError"?Dt.from(u,Dt.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rn.classes.FormData,Blob:rn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};tt.forEach(["delete","get","head","post","put","patch"],i=>{eu.headers[i]={}});const UU=tt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$U=i=>{const t={};let e,n,s;return i&&i.split(`
`).forEach(function(l){s=l.indexOf(":"),e=l.substring(0,s).trim().toLowerCase(),n=l.substring(s+1).trim(),!(!e||t[e]&&UU[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},ib=Symbol("internals");function ol(i){return i&&String(i).trim().toLowerCase()}function rf(i){return i===!1||i==null?i:tt.isArray(i)?i.map(rf):String(i)}function VU(i){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(i);)t[n[1]]=n[2];return t}const GU=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function ng(i,t,e,n,s){if(tt.isFunction(n))return n.call(this,t,e);if(s&&(t=e),!!tt.isString(t)){if(tt.isString(n))return t.indexOf(n)!==-1;if(tt.isRegExp(n))return n.test(t)}}function HU(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function jU(i,t){const e=tt.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+e,{value:function(s,a,l){return this[n].call(this,t,s,a,l)},configurable:!0})})}let vn=class{constructor(t){t&&this.set(t)}set(t,e,n){const s=this;function a(u,d,f){const h=ol(d);if(!h)throw new Error("header name must be a non-empty string");const g=tt.findKey(s,h);(!g||s[g]===void 0||f===!0||f===void 0&&s[g]!==!1)&&(s[g||d]=rf(u))}const l=(u,d)=>tt.forEach(u,(f,h)=>a(f,h,d));if(tt.isPlainObject(t)||t instanceof this.constructor)l(t,e);else if(tt.isString(t)&&(t=t.trim())&&!GU(t))l($U(t),e);else if(tt.isObject(t)&&tt.isIterable(t)){let u={},d,f;for(const h of t){if(!tt.isArray(h))throw TypeError("Object iterator must return a key-value pair");u[f=h[0]]=(d=u[f])?tt.isArray(d)?[...d,h[1]]:[d,h[1]]:h[1]}l(u,e)}else t!=null&&a(e,t,n);return this}get(t,e){if(t=ol(t),t){const n=tt.findKey(this,t);if(n){const s=this[n];if(!e)return s;if(e===!0)return VU(s);if(tt.isFunction(e))return e.call(this,s,n);if(tt.isRegExp(e))return e.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=ol(t),t){const n=tt.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||ng(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let s=!1;function a(l){if(l=ol(l),l){const u=tt.findKey(n,l);u&&(!e||ng(n,n[u],u,e))&&(delete n[u],s=!0)}}return tt.isArray(t)?t.forEach(a):a(t),s}clear(t){const e=Object.keys(this);let n=e.length,s=!1;for(;n--;){const a=e[n];(!t||ng(this,this[a],a,t,!0))&&(delete this[a],s=!0)}return s}normalize(t){const e=this,n={};return tt.forEach(this,(s,a)=>{const l=tt.findKey(n,a);if(l){e[l]=rf(s),delete e[a];return}const u=t?HU(a):String(a).trim();u!==a&&delete e[a],e[u]=rf(s),n[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return tt.forEach(this,(n,s)=>{n!=null&&n!==!1&&(e[s]=t&&tt.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[ib]=this[ib]={accessors:{}}).accessors,s=this.prototype;function a(l){const u=ol(l);n[u]||(jU(s,l),n[u]=!0)}return tt.isArray(t)?t.forEach(a):a(t),this}};vn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);tt.reduceDescriptors(vn.prototype,({value:i},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>i,set(n){this[e]=n}}});tt.freezeMethods(vn);function ig(i,t){const e=this||eu,n=t||e,s=vn.from(n.headers);let a=n.data;return tt.forEach(i,function(u){a=u.call(e,a,s.normalize(),t?t.status:void 0)}),s.normalize(),a}function QR(i){return!!(i&&i.__CANCEL__)}function to(i,t,e){Dt.call(this,i??"canceled",Dt.ERR_CANCELED,t,e),this.name="CanceledError"}tt.inherits(to,Dt,{__CANCEL__:!0});function ZR(i,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?i(e):t(new Dt("Request failed with status code "+e.status,[Dt.ERR_BAD_REQUEST,Dt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function KU(i){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return t&&t[1]||""}function zU(i,t){i=i||10;const e=new Array(i),n=new Array(i);let s=0,a=0,l;return t=t!==void 0?t:1e3,function(d){const f=Date.now(),h=n[a];l||(l=f),e[s]=d,n[s]=f;let g=a,y=0;for(;g!==s;)y+=e[g++],g=g%i;if(s=(s+1)%i,s===a&&(a=(a+1)%i),f-l<t)return;const S=h&&f-h;return S?Math.round(y*1e3/S):void 0}}function YU(i,t){let e=0,n=1e3/t,s,a;const l=(f,h=Date.now())=>{e=h,s=null,a&&(clearTimeout(a),a=null),i.apply(null,f)};return[(...f)=>{const h=Date.now(),g=h-e;g>=n?l(f,h):(s=f,a||(a=setTimeout(()=>{a=null,l(s)},n-g)))},()=>s&&l(s)]}const Cf=(i,t,e=3)=>{let n=0;const s=zU(50,250);return YU(a=>{const l=a.loaded,u=a.lengthComputable?a.total:void 0,d=l-n,f=s(d),h=l<=u;n=l;const g={loaded:l,total:u,progress:u?l/u:void 0,bytes:d,rate:f||void 0,estimated:f&&u&&h?(u-l)/f:void 0,event:a,lengthComputable:u!=null,[t?"download":"upload"]:!0};i(g)},e)},sb=(i,t)=>{const e=i!=null;return[n=>t[0]({lengthComputable:e,total:i,loaded:n}),t[1]]},rb=i=>(...t)=>tt.asap(()=>i(...t)),qU=rn.hasStandardBrowserEnv?((i,t)=>e=>(e=new URL(e,rn.origin),i.protocol===e.protocol&&i.host===e.host&&(t||i.port===e.port)))(new URL(rn.origin),rn.navigator&&/(msie|trident)/i.test(rn.navigator.userAgent)):()=>!0,XU=rn.hasStandardBrowserEnv?{write(i,t,e,n,s,a){const l=[i+"="+encodeURIComponent(t)];tt.isNumber(e)&&l.push("expires="+new Date(e).toGMTString()),tt.isString(n)&&l.push("path="+n),tt.isString(s)&&l.push("domain="+s),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read(i){const t=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function WU(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function QU(i,t){return t?i.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):i}function JR(i,t,e){let n=!WU(t);return i&&(n||e==!1)?QU(i,t):t}const ab=i=>i instanceof vn?{...i}:i;function Or(i,t){t=t||{};const e={};function n(f,h,g,y){return tt.isPlainObject(f)&&tt.isPlainObject(h)?tt.merge.call({caseless:y},f,h):tt.isPlainObject(h)?tt.merge({},h):tt.isArray(h)?h.slice():h}function s(f,h,g,y){if(tt.isUndefined(h)){if(!tt.isUndefined(f))return n(void 0,f,g,y)}else return n(f,h,g,y)}function a(f,h){if(!tt.isUndefined(h))return n(void 0,h)}function l(f,h){if(tt.isUndefined(h)){if(!tt.isUndefined(f))return n(void 0,f)}else return n(void 0,h)}function u(f,h,g){if(g in t)return n(f,h);if(g in i)return n(void 0,f)}const d={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:u,headers:(f,h,g)=>s(ab(f),ab(h),g,!0)};return tt.forEach(Object.keys(Object.assign({},i,t)),function(h){const g=d[h]||s,y=g(i[h],t[h],h);tt.isUndefined(y)&&g!==u||(e[h]=y)}),e}const tL=i=>{const t=Or({},i);let{data:e,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:a,headers:l,auth:u}=t;t.headers=l=vn.from(l),t.url=qR(JR(t.baseURL,t.url,t.allowAbsoluteUrls),i.params,i.paramsSerializer),u&&l.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let d;if(tt.isFormData(e)){if(rn.hasStandardBrowserEnv||rn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((d=l.getContentType())!==!1){const[f,...h]=d?d.split(";").map(g=>g.trim()).filter(Boolean):[];l.setContentType([f||"multipart/form-data",...h].join("; "))}}if(rn.hasStandardBrowserEnv&&(n&&tt.isFunction(n)&&(n=n(t)),n||n!==!1&&qU(t.url))){const f=s&&a&&XU.read(a);f&&l.set(s,f)}return t},ZU=typeof XMLHttpRequest<"u",JU=ZU&&function(i){return new Promise(function(e,n){const s=tL(i);let a=s.data;const l=vn.from(s.headers).normalize();let{responseType:u,onUploadProgress:d,onDownloadProgress:f}=s,h,g,y,S,v;function E(){S&&S(),v&&v(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let x=new XMLHttpRequest;x.open(s.method.toUpperCase(),s.url,!0),x.timeout=s.timeout;function b(){if(!x)return;const L=vn.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),_={data:!u||u==="text"||u==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:L,config:i,request:x};ZR(function(M){e(M),E()},function(M){n(M),E()},_),x=null}"onloadend"in x?x.onloadend=b:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(b)},x.onabort=function(){x&&(n(new Dt("Request aborted",Dt.ECONNABORTED,i,x)),x=null)},x.onerror=function(){n(new Dt("Network Error",Dt.ERR_NETWORK,i,x)),x=null},x.ontimeout=function(){let I=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const _=s.transitional||XR;s.timeoutErrorMessage&&(I=s.timeoutErrorMessage),n(new Dt(I,_.clarifyTimeoutError?Dt.ETIMEDOUT:Dt.ECONNABORTED,i,x)),x=null},a===void 0&&l.setContentType(null),"setRequestHeader"in x&&tt.forEach(l.toJSON(),function(I,_){x.setRequestHeader(_,I)}),tt.isUndefined(s.withCredentials)||(x.withCredentials=!!s.withCredentials),u&&u!=="json"&&(x.responseType=s.responseType),f&&([y,v]=Cf(f,!0),x.addEventListener("progress",y)),d&&x.upload&&([g,S]=Cf(d),x.upload.addEventListener("progress",g),x.upload.addEventListener("loadend",S)),(s.cancelToken||s.signal)&&(h=L=>{x&&(n(!L||L.type?new to(null,i,x):L),x.abort(),x=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const D=KU(s.url);if(D&&rn.protocols.indexOf(D)===-1){n(new Dt("Unsupported protocol "+D+":",Dt.ERR_BAD_REQUEST,i));return}x.send(a||null)})},t3=(i,t)=>{const{length:e}=i=i?i.filter(Boolean):[];if(t||e){let n=new AbortController,s;const a=function(f){if(!s){s=!0,u();const h=f instanceof Error?f:this.reason;n.abort(h instanceof Dt?h:new to(h instanceof Error?h.message:h))}};let l=t&&setTimeout(()=>{l=null,a(new Dt(`timeout ${t} of ms exceeded`,Dt.ETIMEDOUT))},t);const u=()=>{i&&(l&&clearTimeout(l),l=null,i.forEach(f=>{f.unsubscribe?f.unsubscribe(a):f.removeEventListener("abort",a)}),i=null)};i.forEach(f=>f.addEventListener("abort",a));const{signal:d}=n;return d.unsubscribe=()=>tt.asap(u),d}},e3=function*(i,t){let e=i.byteLength;if(e<t){yield i;return}let n=0,s;for(;n<e;)s=n+t,yield i.slice(n,s),n=s},n3=async function*(i,t){for await(const e of i3(i))yield*e3(e,t)},i3=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const t=i.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},ob=(i,t,e,n)=>{const s=n3(i,t);let a=0,l,u=d=>{l||(l=!0,n&&n(d))};return new ReadableStream({async pull(d){try{const{done:f,value:h}=await s.next();if(f){u(),d.close();return}let g=h.byteLength;if(e){let y=a+=g;e(y)}d.enqueue(new Uint8Array(h))}catch(f){throw u(f),f}},cancel(d){return u(d),s.return()}},{highWaterMark:2})},td=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",eL=td&&typeof ReadableStream=="function",s3=td&&(typeof TextEncoder=="function"?(i=>t=>i.encode(t))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),nL=(i,...t)=>{try{return!!i(...t)}catch{return!1}},r3=eL&&nL(()=>{let i=!1;const t=new Request(rn.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!t}),lb=64*1024,ip=eL&&nL(()=>tt.isReadableStream(new Response("").body)),_f={stream:ip&&(i=>i.body)};td&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!_f[t]&&(_f[t]=tt.isFunction(i[t])?e=>e[t]():(e,n)=>{throw new Dt(`Response type '${t}' is not supported`,Dt.ERR_NOT_SUPPORT,n)})})})(new Response);const a3=async i=>{if(i==null)return 0;if(tt.isBlob(i))return i.size;if(tt.isSpecCompliantForm(i))return(await new Request(rn.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(tt.isArrayBufferView(i)||tt.isArrayBuffer(i))return i.byteLength;if(tt.isURLSearchParams(i)&&(i=i+""),tt.isString(i))return(await s3(i)).byteLength},o3=async(i,t)=>{const e=tt.toFiniteNumber(i.getContentLength());return e??a3(t)},l3=td&&(async i=>{let{url:t,method:e,data:n,signal:s,cancelToken:a,timeout:l,onDownloadProgress:u,onUploadProgress:d,responseType:f,headers:h,withCredentials:g="same-origin",fetchOptions:y}=tL(i);f=f?(f+"").toLowerCase():"text";let S=t3([s,a&&a.toAbortSignal()],l),v;const E=S&&S.unsubscribe&&(()=>{S.unsubscribe()});let x;try{if(d&&r3&&e!=="get"&&e!=="head"&&(x=await o3(h,n))!==0){let _=new Request(t,{method:"POST",body:n,duplex:"half"}),P;if(tt.isFormData(n)&&(P=_.headers.get("content-type"))&&h.setContentType(P),_.body){const[M,k]=sb(x,Cf(rb(d)));n=ob(_.body,lb,M,k)}}tt.isString(g)||(g=g?"include":"omit");const b="credentials"in Request.prototype;v=new Request(t,{...y,signal:S,method:e.toUpperCase(),headers:h.normalize().toJSON(),body:n,duplex:"half",credentials:b?g:void 0});let D=await fetch(v,y);const L=ip&&(f==="stream"||f==="response");if(ip&&(u||L&&E)){const _={};["status","statusText","headers"].forEach(F=>{_[F]=D[F]});const P=tt.toFiniteNumber(D.headers.get("content-length")),[M,k]=u&&sb(P,Cf(rb(u),!0))||[];D=new Response(ob(D.body,lb,M,()=>{k&&k(),E&&E()}),_)}f=f||"text";let I=await _f[tt.findKey(_f,f)||"text"](D,i);return!L&&E&&E(),await new Promise((_,P)=>{ZR(_,P,{data:I,headers:vn.from(D.headers),status:D.status,statusText:D.statusText,config:i,request:v})})}catch(b){throw E&&E(),b&&b.name==="TypeError"&&/Load failed|fetch/i.test(b.message)?Object.assign(new Dt("Network Error",Dt.ERR_NETWORK,i,v),{cause:b.cause||b}):Dt.from(b,b&&b.code,i,v)}}),sp={http:bU,xhr:JU,fetch:l3};tt.forEach(sp,(i,t)=>{if(i){try{Object.defineProperty(i,"name",{value:t})}catch{}Object.defineProperty(i,"adapterName",{value:t})}});const ub=i=>`- ${i}`,u3=i=>tt.isFunction(i)||i===null||i===!1,iL={getAdapter:i=>{i=tt.isArray(i)?i:[i];const{length:t}=i;let e,n;const s={};for(let a=0;a<t;a++){e=i[a];let l;if(n=e,!u3(e)&&(n=sp[(l=String(e)).toLowerCase()],n===void 0))throw new Dt(`Unknown adapter '${l}'`);if(n)break;s[l||"#"+a]=n}if(!n){const a=Object.entries(s).map(([u,d])=>`adapter ${u} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=t?a.length>1?`since :
`+a.map(ub).join(`
`):" "+ub(a[0]):"as no adapter specified";throw new Dt("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n},adapters:sp};function sg(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new to(null,i)}function cb(i){return sg(i),i.headers=vn.from(i.headers),i.data=ig.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),iL.getAdapter(i.adapter||eu.adapter)(i).then(function(n){return sg(i),n.data=ig.call(i,i.transformResponse,n),n.headers=vn.from(n.headers),n},function(n){return QR(n)||(sg(i),n&&n.response&&(n.response.data=ig.call(i,i.transformResponse,n.response),n.response.headers=vn.from(n.response.headers))),Promise.reject(n)})}const sL="1.10.0",ed={};["object","boolean","number","function","string","symbol"].forEach((i,t)=>{ed[i]=function(n){return typeof n===i||"a"+(t<1?"n ":" ")+i}});const fb={};ed.transitional=function(t,e,n){function s(a,l){return"[Axios v"+sL+"] Transitional option '"+a+"'"+l+(n?". "+n:"")}return(a,l,u)=>{if(t===!1)throw new Dt(s(l," has been removed"+(e?" in "+e:"")),Dt.ERR_DEPRECATED);return e&&!fb[l]&&(fb[l]=!0,console.warn(s(l," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(a,l,u):!0}};ed.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function c3(i,t,e){if(typeof i!="object")throw new Dt("options must be an object",Dt.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let s=n.length;for(;s-- >0;){const a=n[s],l=t[a];if(l){const u=i[a],d=u===void 0||l(u,a,i);if(d!==!0)throw new Dt("option "+a+" must be "+d,Dt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Dt("Unknown option "+a,Dt.ERR_BAD_OPTION)}}const af={assertOptions:c3,validators:ed},Si=af.validators;let Cr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new nb,response:new nb}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Or(this.defaults,e);const{transitional:n,paramsSerializer:s,headers:a}=e;n!==void 0&&af.assertOptions(n,{silentJSONParsing:Si.transitional(Si.boolean),forcedJSONParsing:Si.transitional(Si.boolean),clarifyTimeoutError:Si.transitional(Si.boolean)},!1),s!=null&&(tt.isFunction(s)?e.paramsSerializer={serialize:s}:af.assertOptions(s,{encode:Si.function,serialize:Si.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),af.assertOptions(e,{baseUrl:Si.spelling("baseURL"),withXsrfToken:Si.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let l=a&&tt.merge(a.common,a[e.method]);a&&tt.forEach(["delete","get","head","post","put","patch","common"],v=>{delete a[v]}),e.headers=vn.concat(l,a);const u=[];let d=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(e)===!1||(d=d&&E.synchronous,u.unshift(E.fulfilled,E.rejected))});const f=[];this.interceptors.response.forEach(function(E){f.push(E.fulfilled,E.rejected)});let h,g=0,y;if(!d){const v=[cb.bind(this),void 0];for(v.unshift.apply(v,u),v.push.apply(v,f),y=v.length,h=Promise.resolve(e);g<y;)h=h.then(v[g++],v[g++]);return h}y=u.length;let S=e;for(g=0;g<y;){const v=u[g++],E=u[g++];try{S=v(S)}catch(x){E.call(this,x);break}}try{h=cb.call(this,S)}catch(v){return Promise.reject(v)}for(g=0,y=f.length;g<y;)h=h.then(f[g++],f[g++]);return h}getUri(t){t=Or(this.defaults,t);const e=JR(t.baseURL,t.url,t.allowAbsoluteUrls);return qR(e,t.params,t.paramsSerializer)}};tt.forEach(["delete","get","head","options"],function(t){Cr.prototype[t]=function(e,n){return this.request(Or(n||{},{method:t,url:e,data:(n||{}).data}))}});tt.forEach(["post","put","patch"],function(t){function e(n){return function(a,l,u){return this.request(Or(u||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}Cr.prototype[t]=e(),Cr.prototype[t+"Form"]=e(!0)});let f3=class rL{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(a){e=a});const n=this;this.promise.then(s=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](s);n._listeners=null}),this.promise.then=s=>{let a;const l=new Promise(u=>{n.subscribe(u),a=u}).then(s);return l.cancel=function(){n.unsubscribe(a)},l},t(function(a,l,u){n.reason||(n.reason=new to(a,l,u),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new rL(function(s){t=s}),cancel:t}}};function d3(i){return function(e){return i.apply(null,e)}}function h3(i){return tt.isObject(i)&&i.isAxiosError===!0}const rp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(rp).forEach(([i,t])=>{rp[t]=i});function aL(i){const t=new Cr(i),e=NR(Cr.prototype.request,t);return tt.extend(e,Cr.prototype,t,{allOwnKeys:!0}),tt.extend(e,t,null,{allOwnKeys:!0}),e.create=function(s){return aL(Or(i,s))},e}const Te=aL(eu);Te.Axios=Cr;Te.CanceledError=to;Te.CancelToken=f3;Te.isCancel=QR;Te.VERSION=sL;Te.toFormData=Jf;Te.AxiosError=Dt;Te.Cancel=Te.CanceledError;Te.all=function(t){return Promise.all(t)};Te.spread=d3;Te.isAxiosError=h3;Te.mergeConfig=Or;Te.AxiosHeaders=vn;Te.formToJSON=i=>WR(tt.isHTMLForm(i)?new FormData(i):i);Te.getAdapter=iL.getAdapter;Te.HttpStatusCode=rp;Te.default=Te;const{Axios:w6,AxiosError:O6,CanceledError:M6,isCancel:P6,CancelToken:k6,VERSION:N6,all:B6,Cancel:F6,isAxiosError:U6,spread:$6,toFormData:V6,AxiosHeaders:G6,HttpStatusCode:H6,formToJSON:j6,getAdapter:K6,mergeConfig:z6}=Te,ml="http://localhost:5050/",nd=Te.create({baseURL:ml}),m3=[{url:`${ml}stream1/index.m3u8`,key:"console_big"},{url:`${ml}stream2/index.m3u8`,key:"console_small"},{url:`${ml}stream3/index.m3u8`,key:"Ptz_big"},{url:`${ml}stream4/index.m3u8`,key:"Ptz_small"}],g3=()=>{const i=h0(e=>e.setMirrorStreams),t=V.useCallback((e,n,s)=>{i({mirrorStreeam:e,src:n,key:s})},[i]);return m3.map(e=>J.jsx("div",{className:es.firstPresetItem,children:J.jsx(BF,{onStreamReady:n=>t(n,e.url,e.key),src:e.url})},e.key))},p3=V.memo(g3),y3=({stream:i,autoPlay:t=!0,controls:e=!1})=>{const n=V.useRef(null);return V.useEffect(()=>{n.current&&i&&(n.current.srcObject=i)},[i]),J.jsx("video",{ref:n,autoPlay:t,muted:!0,playsInline:!0,controls:e,style:{width:"100%",height:"100%",objectFit:"cover"}})},Ia=V.memo(y3),v3=({preset:i})=>{const{mirrorStreams:t}=h0();return V.useMemo(()=>{if(i===Ci.second){const n=t.find(a=>a.key==="console_big"),s=t.find(a=>a.key==="Ptz_big");return J.jsxs(J.Fragment,{children:[n&&J.jsx("div",{className:es.fullPresetItem,children:J.jsx(Ia,{stream:n.mirrorStreeam})}),s&&J.jsx("div",{className:es.topRightPresetItem,children:J.jsx(Ia,{stream:s.mirrorStreeam})})]})}else if(i===Ci.third){const n=t.find(a=>a.key==="console_small"),s=t.find(a=>a.key==="Ptz_small");return J.jsxs(J.Fragment,{children:[n&&J.jsx("div",{className:es.fullPresetItem,children:J.jsx(Ia,{stream:n.mirrorStreeam})}),s&&J.jsx("div",{className:es.topRightPresetItem,children:J.jsx(Ia,{stream:s.mirrorStreeam})})]})}else{const n=t.find(a=>a.key==="console_big"),s=t.find(a=>a.key==="Ptz_big");return J.jsxs("div",{className:es.fourPresetWrapper,children:[n&&J.jsx("div",{className:es.fourPresetItem,children:J.jsx(Ia,{stream:n?.mirrorStreeam})}),s&&J.jsx("div",{className:es.fourPresetItem,children:J.jsx(Ia,{stream:s?.mirrorStreeam})})]})}},[i,t])},S3=V.memo(v3),T3=({preset:i})=>J.jsx("div",{className:es.wrapper,children:i===Ci.first?J.jsx(p3,{}):J.jsx(S3,{preset:i})}),db=V.memo(T3),E3=({on:i,setOn:t,disabled:e})=>{const[n,s]=V.useState(!1),a=()=>{e||(s(!0),setTimeout(()=>{s(!1),t(!i)},300))};return J.jsx("div",{className:`switch-wrapper ${i?"on":""} ${i?"gradient":"dark"} `,onClick:a,children:J.jsx("div",{className:`switch-thumb ${n?"stretch":""}`})})},x3="_wrapper_12rdn_2",b3="_managementBlock_12rdn_15",A3="_tvManagement_12rdn_23",R3="_tvManagement__left_12rdn_33",L3="_tvManagement__left__icon_12rdn_37",C3="_tvManagement__left__text_12rdn_47",_3="_smallCamera_12rdn_57",D3="_smallCamera__left_12rdn_67",I3="_smallCamera__left__icon_12rdn_71",w3="_smallCamera__left__text_12rdn_81",O3="_smallCamera__managing_12rdn_84",M3="_cameraBlock_12rdn_92",P3="_miniCameras_12rdn_100",k3="_miniCameras__camera_12rdn_104",N3="_cameraBlock__current_12rdn_132",B3="_cameraBlock__current__hls_12rdn_152",Ae={wrapper:x3,managementBlock:b3,tvManagement:A3,tvManagement__left:R3,tvManagement__left__icon:L3,tvManagement__left__text:C3,smallCamera:_3,smallCamera__left:D3,smallCamera__left__icon:I3,smallCamera__left__text:w3,smallCamera__managing:O3,cameraBlock:M3,miniCameras:P3,miniCameras__camera:k3,cameraBlock__current:N3,cameraBlock__current__hls:B3},$c=i=>Te.isAxiosError(i)?i?.response?.data.message:"Произошла непредвиденная ошибка";async function F3(i){return await new Promise(t=>setTimeout(t,i))}function U3(i){switch(i){case"up":return{x:0,y:.5,z:0};case"down":return{x:0,y:-.5,z:0};case"left":return{x:-.5,y:0,z:0};case"right":return{x:.5,y:0,z:0};default:return{x:0,y:0,z:0}}}const y0=V.createContext({});function v0(i){const t=V.useRef(null);return t.current===null&&(t.current=i()),t.current}const S0=typeof window<"u",oL=S0?V.useLayoutEffect:V.useEffect,id=V.createContext(null);function T0(i,t){i.indexOf(t)===-1&&i.push(t)}function E0(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}const os=(i,t,e)=>e>t?t:e<i?i:e;let x0=()=>{};const ls={},lL=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i);function uL(i){return typeof i=="object"&&i!==null}const cL=i=>/^0[^.\s]+$/u.test(i);function b0(i){let t;return()=>(t===void 0&&(t=i()),t)}const Zn=i=>i,$3=(i,t)=>e=>t(i(e)),nu=(...i)=>i.reduce($3),Gl=(i,t,e)=>{const n=t-i;return n===0?1:(e-i)/n};class A0{constructor(){this.subscriptions=[]}add(t){return T0(this.subscriptions,t),()=>E0(this.subscriptions,t)}notify(t,e,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,e,n);else for(let a=0;a<s;a++){const l=this.subscriptions[a];l&&l(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const wi=i=>i*1e3,Oi=i=>i/1e3;function fL(i,t){return t?i*(1e3/t):0}const dL=(i,t,e)=>(((1-3*e+3*t)*i+(3*e-6*t))*i+3*t)*i,V3=1e-7,G3=12;function H3(i,t,e,n,s){let a,l,u=0;do l=t+(e-t)/2,a=dL(l,n,s)-i,a>0?e=l:t=l;while(Math.abs(a)>V3&&++u<G3);return l}function iu(i,t,e,n){if(i===t&&e===n)return Zn;const s=a=>H3(a,0,1,i,e);return a=>a===0||a===1?a:dL(s(a),t,n)}const hL=i=>t=>t<=.5?i(2*t)/2:(2-i(2*(1-t)))/2,mL=i=>t=>1-i(1-t),gL=iu(.33,1.53,.69,.99),R0=mL(gL),pL=hL(R0),yL=i=>(i*=2)<1?.5*R0(i):.5*(2-Math.pow(2,-10*(i-1))),L0=i=>1-Math.sin(Math.acos(i)),vL=mL(L0),SL=hL(L0),j3=iu(.42,0,1,1),K3=iu(0,0,.58,1),TL=iu(.42,0,.58,1),z3=i=>Array.isArray(i)&&typeof i[0]!="number",EL=i=>Array.isArray(i)&&typeof i[0]=="number",Y3={linear:Zn,easeIn:j3,easeInOut:TL,easeOut:K3,circIn:L0,circInOut:SL,circOut:vL,backIn:R0,backInOut:pL,backOut:gL,anticipate:yL},q3=i=>typeof i=="string",hb=i=>{if(EL(i)){x0(i.length===4);const[t,e,n,s]=i;return iu(t,e,n,s)}else if(q3(i))return Y3[i];return i},Vc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],mb={value:null};function X3(i,t){let e=new Set,n=new Set,s=!1,a=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},d=0;function f(g){l.has(g)&&(h.schedule(g),i()),d++,g(u)}const h={schedule:(g,y=!1,S=!1)=>{const E=S&&s?e:n;return y&&l.add(g),E.has(g)||E.add(g),g},cancel:g=>{n.delete(g),l.delete(g)},process:g=>{if(u=g,s){a=!0;return}s=!0,[e,n]=[n,e],e.forEach(f),t&&mb.value&&mb.value.frameloop[t].push(d),d=0,e.clear(),s=!1,a&&(a=!1,h.process(g))}};return h}const W3=40;function xL(i,t){let e=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>e=!0,l=Vc.reduce((L,I)=>(L[I]=X3(a,t?I:void 0),L),{}),{setup:u,read:d,resolveKeyframes:f,preUpdate:h,update:g,preRender:y,render:S,postRender:v}=l,E=()=>{const L=ls.useManualTiming?s.timestamp:performance.now();e=!1,ls.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(L-s.timestamp,W3),1)),s.timestamp=L,s.isProcessing=!0,u.process(s),d.process(s),f.process(s),h.process(s),g.process(s),y.process(s),S.process(s),v.process(s),s.isProcessing=!1,e&&t&&(n=!1,i(E))},x=()=>{e=!0,n=!0,s.isProcessing||i(E)};return{schedule:Vc.reduce((L,I)=>{const _=l[I];return L[I]=(P,M=!1,k=!1)=>(e||x(),_.schedule(P,M,k)),L},{}),cancel:L=>{for(let I=0;I<Vc.length;I++)l[Vc[I]].cancel(L)},state:s,steps:l}}const{schedule:me,cancel:zs,state:Xe,steps:rg}=xL(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zn,!0);let of;function Q3(){of=void 0}const pn={now:()=>(of===void 0&&pn.set(Xe.isProcessing||ls.useManualTiming?Xe.timestamp:performance.now()),of),set:i=>{of=i,queueMicrotask(Q3)}},bL=i=>t=>typeof t=="string"&&t.startsWith(i),C0=bL("--"),Z3=bL("var(--"),_0=i=>Z3(i)?J3.test(i.split("/*")[0].trim()):!1,J3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,eo={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},Hl={...eo,transform:i=>os(0,1,i)},Gc={...eo,default:1},Tl=i=>Math.round(i*1e5)/1e5,D0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function t$(i){return i==null}const e$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,I0=(i,t)=>e=>!!(typeof e=="string"&&e$.test(e)&&e.startsWith(i)||t&&!t$(e)&&Object.prototype.hasOwnProperty.call(e,t)),AL=(i,t,e)=>n=>{if(typeof n!="string")return n;const[s,a,l,u]=n.match(D0);return{[i]:parseFloat(s),[t]:parseFloat(a),[e]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},n$=i=>os(0,255,i),ag={...eo,transform:i=>Math.round(n$(i))},br={test:I0("rgb","red"),parse:AL("red","green","blue"),transform:({red:i,green:t,blue:e,alpha:n=1})=>"rgba("+ag.transform(i)+", "+ag.transform(t)+", "+ag.transform(e)+", "+Tl(Hl.transform(n))+")"};function i$(i){let t="",e="",n="",s="";return i.length>5?(t=i.substring(1,3),e=i.substring(3,5),n=i.substring(5,7),s=i.substring(7,9)):(t=i.substring(1,2),e=i.substring(2,3),n=i.substring(3,4),s=i.substring(4,5),t+=t,e+=e,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const ap={test:I0("#"),parse:i$,transform:br.transform},su=i=>({test:t=>typeof t=="string"&&t.endsWith(i)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${i}`}),$s=su("deg"),Mi=su("%"),Rt=su("px"),s$=su("vh"),r$=su("vw"),gb={...Mi,parse:i=>Mi.parse(i)/100,transform:i=>Mi.transform(i*100)},Pa={test:I0("hsl","hue"),parse:AL("hue","saturation","lightness"),transform:({hue:i,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(i)+", "+Mi.transform(Tl(t))+", "+Mi.transform(Tl(e))+", "+Tl(Hl.transform(n))+")"},Ie={test:i=>br.test(i)||ap.test(i)||Pa.test(i),parse:i=>br.test(i)?br.parse(i):Pa.test(i)?Pa.parse(i):ap.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?br.transform(i):Pa.transform(i),getAnimatableNone:i=>{const t=Ie.parse(i);return t.alpha=0,Ie.transform(t)}},a$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function o$(i){return isNaN(i)&&typeof i=="string"&&(i.match(D0)?.length||0)+(i.match(a$)?.length||0)>0}const RL="number",LL="color",l$="var",u$="var(",pb="${}",c$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function jl(i){const t=i.toString(),e=[],n={color:[],number:[],var:[]},s=[];let a=0;const u=t.replace(c$,d=>(Ie.test(d)?(n.color.push(a),s.push(LL),e.push(Ie.parse(d))):d.startsWith(u$)?(n.var.push(a),s.push(l$),e.push(d)):(n.number.push(a),s.push(RL),e.push(parseFloat(d))),++a,pb)).split(pb);return{values:e,split:u,indexes:n,types:s}}function CL(i){return jl(i).values}function _L(i){const{split:t,types:e}=jl(i),n=t.length;return s=>{let a="";for(let l=0;l<n;l++)if(a+=t[l],s[l]!==void 0){const u=e[l];u===RL?a+=Tl(s[l]):u===LL?a+=Ie.transform(s[l]):a+=s[l]}return a}}const f$=i=>typeof i=="number"?0:Ie.test(i)?Ie.getAnimatableNone(i):i;function d$(i){const t=CL(i);return _L(i)(t.map(f$))}const Ys={test:o$,parse:CL,createTransformer:_L,getAnimatableNone:d$};function og(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*(2/3-e)*6:i}function h$({hue:i,saturation:t,lightness:e,alpha:n}){i/=360,t/=100,e/=100;let s=0,a=0,l=0;if(!t)s=a=l=e;else{const u=e<.5?e*(1+t):e+t-e*t,d=2*e-u;s=og(d,u,i+1/3),a=og(d,u,i),l=og(d,u,i-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:n}}function Df(i,t){return e=>e>0?t:i}const de=(i,t,e)=>i+(t-i)*e,lg=(i,t,e)=>{const n=i*i,s=e*(t*t-n)+n;return s<0?0:Math.sqrt(s)},m$=[ap,br,Pa],g$=i=>m$.find(t=>t.test(i));function yb(i){const t=g$(i);if(!t)return!1;let e=t.parse(i);return t===Pa&&(e=h$(e)),e}const vb=(i,t)=>{const e=yb(i),n=yb(t);if(!e||!n)return Df(i,t);const s={...e};return a=>(s.red=lg(e.red,n.red,a),s.green=lg(e.green,n.green,a),s.blue=lg(e.blue,n.blue,a),s.alpha=de(e.alpha,n.alpha,a),br.transform(s))},op=new Set(["none","hidden"]);function p$(i,t){return op.has(i)?e=>e<=0?i:t:e=>e>=1?t:i}function y$(i,t){return e=>de(i,t,e)}function w0(i){return typeof i=="number"?y$:typeof i=="string"?_0(i)?Df:Ie.test(i)?vb:T$:Array.isArray(i)?DL:typeof i=="object"?Ie.test(i)?vb:v$:Df}function DL(i,t){const e=[...i],n=e.length,s=i.map((a,l)=>w0(a)(a,t[l]));return a=>{for(let l=0;l<n;l++)e[l]=s[l](a);return e}}function v$(i,t){const e={...i,...t},n={};for(const s in e)i[s]!==void 0&&t[s]!==void 0&&(n[s]=w0(i[s])(i[s],t[s]));return s=>{for(const a in n)e[a]=n[a](s);return e}}function S$(i,t){const e=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],l=i.indexes[a][n[a]],u=i.values[l]??0;e[s]=u,n[a]++}return e}const T$=(i,t)=>{const e=Ys.createTransformer(t),n=jl(i),s=jl(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?op.has(i)&&!s.values.length||op.has(t)&&!n.values.length?p$(i,t):nu(DL(S$(n,s),s.values),e):Df(i,t)};function IL(i,t,e){return typeof i=="number"&&typeof t=="number"&&typeof e=="number"?de(i,t,e):w0(i)(i,t)}const E$=i=>{const t=({timestamp:e})=>i(e);return{start:(e=!0)=>me.update(t,e),stop:()=>zs(t),now:()=>Xe.isProcessing?Xe.timestamp:pn.now()}},wL=(i,t,e=10)=>{let n="";const s=Math.max(Math.round(t/e),2);for(let a=0;a<s;a++)n+=Math.round(i(a/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},If=2e4;function O0(i){let t=0;const e=50;let n=i.next(t);for(;!n.done&&t<If;)t+=e,n=i.next(t);return t>=If?1/0:t}function x$(i,t=100,e){const n=e({...i,keyframes:[0,t]}),s=Math.min(O0(n),If);return{type:"keyframes",ease:a=>n.next(s*a).value/t,duration:Oi(s)}}const b$=5;function OL(i,t,e){const n=Math.max(t-b$,0);return fL(e-i(n),t-n)}const Se={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ug=.001;function A$({duration:i=Se.duration,bounce:t=Se.bounce,velocity:e=Se.velocity,mass:n=Se.mass}){let s,a,l=1-t;l=os(Se.minDamping,Se.maxDamping,l),i=os(Se.minDuration,Se.maxDuration,Oi(i)),l<1?(s=f=>{const h=f*l,g=h*i,y=h-e,S=lp(f,l),v=Math.exp(-g);return ug-y/S*v},a=f=>{const g=f*l*i,y=g*e+e,S=Math.pow(l,2)*Math.pow(f,2)*i,v=Math.exp(-g),E=lp(Math.pow(f,2),l);return(-s(f)+ug>0?-1:1)*((y-S)*v)/E}):(s=f=>{const h=Math.exp(-f*i),g=(f-e)*i+1;return-ug+h*g},a=f=>{const h=Math.exp(-f*i),g=(e-f)*(i*i);return h*g});const u=5/i,d=L$(s,a,u);if(i=wi(i),isNaN(d))return{stiffness:Se.stiffness,damping:Se.damping,duration:i};{const f=Math.pow(d,2)*n;return{stiffness:f,damping:l*2*Math.sqrt(n*f),duration:i}}}const R$=12;function L$(i,t,e){let n=e;for(let s=1;s<R$;s++)n=n-i(n)/t(n);return n}function lp(i,t){return i*Math.sqrt(1-t*t)}const C$=["duration","bounce"],_$=["stiffness","damping","mass"];function Sb(i,t){return t.some(e=>i[e]!==void 0)}function D$(i){let t={velocity:Se.velocity,stiffness:Se.stiffness,damping:Se.damping,mass:Se.mass,isResolvedFromDuration:!1,...i};if(!Sb(i,_$)&&Sb(i,C$))if(i.visualDuration){const e=i.visualDuration,n=2*Math.PI/(e*1.2),s=n*n,a=2*os(.05,1,1-(i.bounce||0))*Math.sqrt(s);t={...t,mass:Se.mass,stiffness:s,damping:a}}else{const e=A$(i);t={...t,...e,mass:Se.mass},t.isResolvedFromDuration=!0}return t}function wf(i=Se.visualDuration,t=Se.bounce){const e=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:t}:i;let{restSpeed:n,restDelta:s}=e;const a=e.keyframes[0],l=e.keyframes[e.keyframes.length-1],u={done:!1,value:a},{stiffness:d,damping:f,mass:h,duration:g,velocity:y,isResolvedFromDuration:S}=D$({...e,velocity:-Oi(e.velocity||0)}),v=y||0,E=f/(2*Math.sqrt(d*h)),x=l-a,b=Oi(Math.sqrt(d/h)),D=Math.abs(x)<5;n||(n=D?Se.restSpeed.granular:Se.restSpeed.default),s||(s=D?Se.restDelta.granular:Se.restDelta.default);let L;if(E<1){const _=lp(b,E);L=P=>{const M=Math.exp(-E*b*P);return l-M*((v+E*b*x)/_*Math.sin(_*P)+x*Math.cos(_*P))}}else if(E===1)L=_=>l-Math.exp(-b*_)*(x+(v+b*x)*_);else{const _=b*Math.sqrt(E*E-1);L=P=>{const M=Math.exp(-E*b*P),k=Math.min(_*P,300);return l-M*((v+E*b*x)*Math.sinh(k)+_*x*Math.cosh(k))/_}}const I={calculatedDuration:S&&g||null,next:_=>{const P=L(_);if(S)u.done=_>=g;else{let M=_===0?v:0;E<1&&(M=_===0?wi(v):OL(L,_,P));const k=Math.abs(M)<=n,F=Math.abs(l-P)<=s;u.done=k&&F}return u.value=u.done?l:P,u},toString:()=>{const _=Math.min(O0(I),If),P=wL(M=>I.next(_*M).value,_,30);return _+"ms "+P},toTransition:()=>{}};return I}wf.applyToOptions=i=>{const t=x$(i,100,wf);return i.ease=t.ease,i.duration=wi(t.duration),i.type="keyframes",i};function up({keyframes:i,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:l,min:u,max:d,restDelta:f=.5,restSpeed:h}){const g=i[0],y={done:!1,value:g},S=k=>u!==void 0&&k<u||d!==void 0&&k>d,v=k=>u===void 0?d:d===void 0||Math.abs(u-k)<Math.abs(d-k)?u:d;let E=e*t;const x=g+E,b=l===void 0?x:l(x);b!==x&&(E=b-g);const D=k=>-E*Math.exp(-k/n),L=k=>b+D(k),I=k=>{const F=D(k),R=L(k);y.done=Math.abs(F)<=f,y.value=y.done?b:R};let _,P;const M=k=>{S(y.value)&&(_=k,P=wf({keyframes:[y.value,v(y.value)],velocity:OL(L,k,y.value),damping:s,stiffness:a,restDelta:f,restSpeed:h}))};return M(0),{calculatedDuration:null,next:k=>{let F=!1;return!P&&_===void 0&&(F=!0,I(k),M(k)),_!==void 0&&k>=_?P.next(k-_):(!F&&I(k),y)}}}function I$(i,t,e){const n=[],s=e||ls.mix||IL,a=i.length-1;for(let l=0;l<a;l++){let u=s(i[l],i[l+1]);if(t){const d=Array.isArray(t)?t[l]||Zn:t;u=nu(d,u)}n.push(u)}return n}function w$(i,t,{clamp:e=!0,ease:n,mixer:s}={}){const a=i.length;if(x0(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const l=i[0]===i[1];i[0]>i[a-1]&&(i=[...i].reverse(),t=[...t].reverse());const u=I$(t,n,s),d=u.length,f=h=>{if(l&&h<i[0])return t[0];let g=0;if(d>1)for(;g<i.length-2&&!(h<i[g+1]);g++);const y=Gl(i[g],i[g+1],h);return u[g](y)};return e?h=>f(os(i[0],i[a-1],h)):f}function O$(i,t){const e=i[i.length-1];for(let n=1;n<=t;n++){const s=Gl(0,t,n);i.push(de(e,1,s))}}function M$(i){const t=[0];return O$(t,i.length-1),t}function P$(i,t){return i.map(e=>e*t)}function k$(i,t){return i.map(()=>t||TL).splice(0,i.length-1)}function El({duration:i=300,keyframes:t,times:e,ease:n="easeInOut"}){const s=z3(n)?n.map(hb):hb(n),a={done:!1,value:t[0]},l=P$(e&&e.length===t.length?e:M$(t),i),u=w$(l,t,{ease:Array.isArray(s)?s:k$(t,s)});return{calculatedDuration:i,next:d=>(a.value=u(d),a.done=d>=i,a)}}const N$=i=>i!==null;function M0(i,{repeat:t,repeatType:e="loop"},n,s=1){const a=i.filter(N$),u=s<0||t&&e!=="loop"&&t%2===1?0:a.length-1;return!u||n===void 0?a[u]:n}const B$={decay:up,inertia:up,tween:El,keyframes:El,spring:wf};function ML(i){typeof i.type=="string"&&(i.type=B$[i.type])}class P0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const F$=i=>i/100;class k0 extends P0{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==pn.now()&&this.tick(pn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;ML(t);const{type:e=El,repeat:n=0,repeatDelay:s=0,repeatType:a,velocity:l=0}=t;let{keyframes:u}=t;const d=e||El;d!==El&&typeof u[0]!="number"&&(this.mixKeyframes=nu(F$,IL(u[0],u[1])),u=[0,100]);const f=d({...t,keyframes:u});a==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...u].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=O0(f));const{calculatedDuration:h}=f;this.calculatedDuration=h,this.resolvedDuration=h+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=f}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:s,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return n.next(0);const{delay:f=0,keyframes:h,repeat:g,repeatType:y,repeatDelay:S,type:v,onUpdate:E,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const b=this.currentTime-f*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?b<0:b>s;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let L=this.currentTime,I=n;if(g){const k=Math.min(this.currentTime,s)/u;let F=Math.floor(k),R=k%1;!R&&k>=1&&(R=1),R===1&&F--,F=Math.min(F,g+1),!!(F%2)&&(y==="reverse"?(R=1-R,S&&(R-=S/u)):y==="mirror"&&(I=l)),L=os(0,1,R)*u}const _=D?{done:!1,value:h[0]}:I.next(L);a&&(_.value=a(_.value));let{done:P}=_;!D&&d!==null&&(P=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return M&&v!==up&&(_.value=M0(h,this.options,x,this.speed)),E&&E(_.value),M&&this.finish(),_}then(t,e){return this.finished.then(t,e)}get duration(){return Oi(this.calculatedDuration)}get time(){return Oi(this.currentTime)}set time(t){t=wi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(pn.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Oi(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=E$,startTime:e}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(pn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function U$(i){for(let t=1;t<i.length;t++)i[t]??(i[t]=i[t-1])}const Ar=i=>i*180/Math.PI,cp=i=>{const t=Ar(Math.atan2(i[1],i[0]));return fp(t)},$$={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate:cp,rotateZ:cp,skewX:i=>Ar(Math.atan(i[1])),skewY:i=>Ar(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},fp=i=>(i=i%360,i<0&&(i+=360),i),Tb=cp,Eb=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),xb=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),V$={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Eb,scaleY:xb,scale:i=>(Eb(i)+xb(i))/2,rotateX:i=>fp(Ar(Math.atan2(i[6],i[5]))),rotateY:i=>fp(Ar(Math.atan2(-i[2],i[0]))),rotateZ:Tb,rotate:Tb,skewX:i=>Ar(Math.atan(i[4])),skewY:i=>Ar(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function dp(i){return i.includes("scale")?1:0}function hp(i,t){if(!i||i==="none")return dp(t);const e=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(e)n=V$,s=e;else{const u=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=$$,s=u}if(!s)return dp(t);const a=n[t],l=s[1].split(",").map(H$);return typeof a=="function"?a(l):l[a]}const G$=(i,t)=>{const{transform:e="none"}=getComputedStyle(i);return hp(e,t)};function H$(i){return parseFloat(i.trim())}const no=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],io=new Set(no),bb=i=>i===eo||i===Rt,j$=new Set(["x","y","z"]),K$=no.filter(i=>!j$.has(i));function z$(i){const t=[];return K$.forEach(e=>{const n=i.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const _r={width:({x:i},{paddingLeft:t="0",paddingRight:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),height:({y:i},{paddingTop:t="0",paddingBottom:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),top:(i,{top:t})=>parseFloat(t),left:(i,{left:t})=>parseFloat(t),bottom:({y:i},{top:t})=>parseFloat(t)+(i.max-i.min),right:({x:i},{left:t})=>parseFloat(t)+(i.max-i.min),x:(i,{transform:t})=>hp(t,"x"),y:(i,{transform:t})=>hp(t,"y")};_r.translateX=_r.x;_r.translateY=_r.y;const Dr=new Set;let mp=!1,gp=!1,pp=!1;function PL(){if(gp){const i=Array.from(Dr).filter(n=>n.needsMeasurement),t=new Set(i.map(n=>n.element)),e=new Map;t.forEach(n=>{const s=z$(n);s.length&&(e.set(n,s),n.render())}),i.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=e.get(n);s&&s.forEach(([a,l])=>{n.getValue(a)?.set(l)})}),i.forEach(n=>n.measureEndState()),i.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}gp=!1,mp=!1,Dr.forEach(i=>i.complete(pp)),Dr.clear()}function kL(){Dr.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(gp=!0)})}function Y$(){pp=!0,kL(),PL(),pp=!1}class N0{constructor(t,e,n,s,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=s,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Dr.add(this),mp||(mp=!0,me.read(kL),me.resolveKeyframes(PL))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:s}=this;if(t[0]===null){const a=s?.get(),l=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&e){const u=n.readValue(e,l);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=l),s&&a===void 0&&s.set(t[0])}U$(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Dr.delete(this)}cancel(){this.state==="scheduled"&&(Dr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const q$=i=>i.startsWith("--");function X$(i,t,e){q$(t)?i.style.setProperty(t,e):i.style[t]=e}const W$=b0(()=>window.ScrollTimeline!==void 0),Q$={};function Z$(i,t){const e=b0(i);return()=>Q$[t]??e()}const NL=Z$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),gl=([i,t,e,n])=>`cubic-bezier(${i}, ${t}, ${e}, ${n})`,Ab={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:gl([0,.65,.55,1]),circOut:gl([.55,0,1,.45]),backIn:gl([.31,.01,.66,-.59]),backOut:gl([.33,1.53,.69,.99])};function BL(i,t){if(i)return typeof i=="function"?NL()?wL(i,t):"ease-out":EL(i)?gl(i):Array.isArray(i)?i.map(e=>BL(e,t)||Ab.easeOut):Ab[i]}function J$(i,t,e,{delay:n=0,duration:s=300,repeat:a=0,repeatType:l="loop",ease:u="easeOut",times:d}={},f=void 0){const h={[t]:e};d&&(h.offset=d);const g=BL(u,s);Array.isArray(g)&&(h.easing=g);const y={delay:n,duration:s,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return f&&(y.pseudoElement=f),i.animate(h,y)}function FL(i){return typeof i=="function"&&"applyToOptions"in i}function t4({type:i,...t}){return FL(i)&&NL()?i.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class e4 extends P0{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:n,keyframes:s,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:u,onComplete:d}=t;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=t,x0(typeof t.type!="string");const f=t4(t);this.animation=J$(e,n,s,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const h=M0(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(h):X$(e,n,h),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Oi(Number(t))}get time(){return Oi(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=wi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&W$()?(this.animation.timeline=t,Zn):e(this)}}const UL={anticipate:yL,backInOut:pL,circInOut:SL};function n4(i){return i in UL}function i4(i){typeof i.ease=="string"&&n4(i.ease)&&(i.ease=UL[i.ease])}const Rb=10;class s4 extends e4{constructor(t){i4(t),ML(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:s,element:a,...l}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const u=new k0({...l,autoplay:!1}),d=wi(this.finishedTime??this.time);e.setWithVelocity(u.sample(d-Rb).value,u.sample(d).value,Rb),u.stop()}}const Lb=(i,t)=>t==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(Ys.test(i)||i==="0")&&!i.startsWith("url("));function r4(i){const t=i[0];if(i.length===1)return!0;for(let e=0;e<i.length;e++)if(i[e]!==t)return!0}function a4(i,t,e,n){const s=i[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=i[i.length-1],l=Lb(s,t),u=Lb(a,t);return!l||!u?!1:r4(i)||(e==="spring"||FL(e))&&n}function B0(i){return uL(i)&&"offsetHeight"in i}const o4=new Set(["opacity","clipPath","filter","transform"]),l4=b0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function u4(i){const{motionValue:t,name:e,repeatDelay:n,repeatType:s,damping:a,type:l}=i;if(!B0(t?.owner?.current))return!1;const{onUpdate:u,transformTemplate:d}=t.owner.getProps();return l4()&&e&&o4.has(e)&&(e!=="transform"||!d)&&!u&&!n&&s!=="mirror"&&a!==0&&l!=="inertia"}const c4=40;class f4 extends P0{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:l="loop",keyframes:u,name:d,motionValue:f,element:h,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=pn.now();const y={autoplay:t,delay:e,type:n,repeat:s,repeatDelay:a,repeatType:l,name:d,motionValue:f,element:h,...g},S=h?.KeyframeResolver||N0;this.keyframeResolver=new S(u,(v,E,x)=>this.onKeyframesResolved(v,E,y,!x),d,f,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,n,s){this.keyframeResolver=void 0;const{name:a,type:l,velocity:u,delay:d,isHandoff:f,onUpdate:h}=n;this.resolvedAt=pn.now(),a4(t,a,l,u)||((ls.instantAnimations||!d)&&h?.(M0(t,n,e)),t[0]=t[t.length-1],n.duration=0,n.repeat=0);const y={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>c4?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},S=!f&&u4(y)?new s4({...y,element:y.motionValue.owner.current}):new k0(y);S.finished.then(()=>this.notifyFinished()).catch(Zn),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Y$()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const d4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function h4(i){const t=d4.exec(i);if(!t)return[,];const[,e,n,s]=t;return[`--${e??n}`,s]}function $L(i,t,e=1){const[n,s]=h4(i);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const l=a.trim();return lL(l)?parseFloat(l):l}return _0(s)?$L(s,t,e+1):s}function F0(i,t){return i?.[t]??i?.default??i}const VL=new Set(["width","height","top","left","right","bottom",...no]),m4={test:i=>i==="auto",parse:i=>i},GL=i=>t=>t.test(i),HL=[eo,Rt,Mi,$s,r$,s$,m4],Cb=i=>HL.find(GL(i));function g4(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||cL(i):!0}const p4=new Set(["brightness","contrast","saturate","opacity"]);function y4(i){const[t,e]=i.slice(0,-1).split("(");if(t==="drop-shadow")return i;const[n]=e.match(D0)||[];if(!n)return i;const s=e.replace(n,"");let a=p4.has(t)?1:0;return n!==e&&(a*=100),t+"("+a+s+")"}const v4=/\b([a-z-]*)\(.*?\)/gu,yp={...Ys,getAnimatableNone:i=>{const t=i.match(v4);return t?t.map(y4).join(" "):i}},_b={...eo,transform:Math.round},S4={rotate:$s,rotateX:$s,rotateY:$s,rotateZ:$s,scale:Gc,scaleX:Gc,scaleY:Gc,scaleZ:Gc,skew:$s,skewX:$s,skewY:$s,distance:Rt,translateX:Rt,translateY:Rt,translateZ:Rt,x:Rt,y:Rt,z:Rt,perspective:Rt,transformPerspective:Rt,opacity:Hl,originX:gb,originY:gb,originZ:Rt},U0={borderWidth:Rt,borderTopWidth:Rt,borderRightWidth:Rt,borderBottomWidth:Rt,borderLeftWidth:Rt,borderRadius:Rt,radius:Rt,borderTopLeftRadius:Rt,borderTopRightRadius:Rt,borderBottomRightRadius:Rt,borderBottomLeftRadius:Rt,width:Rt,maxWidth:Rt,height:Rt,maxHeight:Rt,top:Rt,right:Rt,bottom:Rt,left:Rt,padding:Rt,paddingTop:Rt,paddingRight:Rt,paddingBottom:Rt,paddingLeft:Rt,margin:Rt,marginTop:Rt,marginRight:Rt,marginBottom:Rt,marginLeft:Rt,backgroundPositionX:Rt,backgroundPositionY:Rt,...S4,zIndex:_b,fillOpacity:Hl,strokeOpacity:Hl,numOctaves:_b},T4={...U0,color:Ie,backgroundColor:Ie,outlineColor:Ie,fill:Ie,stroke:Ie,borderColor:Ie,borderTopColor:Ie,borderRightColor:Ie,borderBottomColor:Ie,borderLeftColor:Ie,filter:yp,WebkitFilter:yp},jL=i=>T4[i];function KL(i,t){let e=jL(i);return e!==yp&&(e=Ys),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const E4=new Set(["auto","none","0"]);function x4(i,t,e){let n=0,s;for(;n<i.length&&!s;){const a=i[n];typeof a=="string"&&!E4.has(a)&&jl(a).values.length&&(s=i[n]),n++}if(s&&e)for(const a of t)i[a]=KL(e,s)}class b4 extends N0{constructor(t,e,n,s,a){super(t,e,n,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let f=t[d];if(typeof f=="string"&&(f=f.trim(),_0(f))){const h=$L(f,e.current);h!==void 0&&(t[d]=h),d===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!VL.has(n)||t.length!==2)return;const[s,a]=t,l=Cb(s),u=Cb(a);if(l!==u)if(bb(l)&&bb(u))for(let d=0;d<t.length;d++){const f=t[d];typeof f=="string"&&(t[d]=parseFloat(f))}else _r[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||g4(t[s]))&&n.push(s);n.length&&x4(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_r[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const s=e[e.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(e);s&&s.jump(this.measuredOrigin,!1);const a=n.length-1,l=n[a];n[a]=_r[e](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,d])=>{t.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function A4(i,t,e){if(i instanceof EventTarget)return[i];if(typeof i=="string"){let n=document;const s=e?.[i]??n.querySelectorAll(i);return s?Array.from(s):[]}return Array.from(i)}const zL=(i,t)=>t&&typeof i=="number"?t.transform(i):i,Db=30,R4=i=>!isNaN(parseFloat(i));class L4{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{const a=pn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();s&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=pn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=R4(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new A0);const n=this.events[t].add(e);return t==="change"?()=>{n(),me.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){!e||!this.passiveEffect?this.updateAndNotify(t,e):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=pn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Db)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,Db);return fL(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Wa(i,t){return new L4(i,t)}const{schedule:$0}=xL(queueMicrotask,!1),ai={x:!1,y:!1};function YL(){return ai.x||ai.y}function C4(i){return i==="x"||i==="y"?ai[i]?null:(ai[i]=!0,()=>{ai[i]=!1}):ai.x||ai.y?null:(ai.x=ai.y=!0,()=>{ai.x=ai.y=!1})}function qL(i,t){const e=A4(i),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[e,s,()=>n.abort()]}function Ib(i){return!(i.pointerType==="touch"||YL())}function _4(i,t,e={}){const[n,s,a]=qL(i,e),l=u=>{if(!Ib(u))return;const{target:d}=u,f=t(d,u);if(typeof f!="function"||!d)return;const h=g=>{Ib(g)&&(f(g),d.removeEventListener("pointerleave",h))};d.addEventListener("pointerleave",h,s)};return n.forEach(u=>{u.addEventListener("pointerenter",l,s)}),a}const XL=(i,t)=>t?i===t?!0:XL(i,t.parentElement):!1,V0=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,D4=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function I4(i){return D4.has(i.tagName)||i.tabIndex!==-1}const lf=new WeakSet;function wb(i){return t=>{t.key==="Enter"&&i(t)}}function cg(i,t){i.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const w4=(i,t)=>{const e=i.currentTarget;if(!e)return;const n=wb(()=>{if(lf.has(e))return;cg(e,"down");const s=wb(()=>{cg(e,"up")}),a=()=>cg(e,"cancel");e.addEventListener("keyup",s,t),e.addEventListener("blur",a,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function Ob(i){return V0(i)&&!YL()}function O4(i,t,e={}){const[n,s,a]=qL(i,e),l=u=>{const d=u.currentTarget;if(!Ob(u))return;lf.add(d);const f=t(d,u),h=(S,v)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",y),lf.has(d)&&lf.delete(d),Ob(S)&&typeof f=="function"&&f(S,{success:v})},g=S=>{h(S,d===window||d===document||e.useGlobalTarget||XL(d,S.target))},y=S=>{h(S,!1)};window.addEventListener("pointerup",g,s),window.addEventListener("pointercancel",y,s)};return n.forEach(u=>{(e.useGlobalTarget?window:u).addEventListener("pointerdown",l,s),B0(u)&&(u.addEventListener("focus",f=>w4(f,s)),!I4(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),a}function WL(i){return uL(i)&&"ownerSVGElement"in i}function M4(i){return WL(i)&&i.tagName==="svg"}const an=i=>!!(i&&i.getVelocity),P4=[...HL,Ie,Ys],k4=i=>P4.find(GL(i)),G0=V.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});class N4 extends V.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const n=e.offsetParent,s=B0(n)&&n.offsetWidth||0,a=this.props.sizeRef.current;a.height=e.offsetHeight||0,a.width=e.offsetWidth||0,a.top=e.offsetTop,a.left=e.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function B4({children:i,isPresent:t,anchorX:e}){const n=V.useId(),s=V.useRef(null),a=V.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=V.useContext(G0);return V.useInsertionEffect(()=>{const{width:u,height:d,top:f,left:h,right:g}=a.current;if(t||!s.current||!u||!d)return;const y=e==="left"?`left: ${h}`:`right: ${g}`;s.current.dataset.motionPopId=n;const S=document.createElement("style");return l&&(S.nonce=l),document.head.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${y}px !important;
            top: ${f}px !important;
          }
        `),()=>{document.head.contains(S)&&document.head.removeChild(S)}},[t]),J.jsx(N4,{isPresent:t,childRef:s,sizeRef:a,children:V.cloneElement(i,{ref:s})})}const F4=({children:i,initial:t,isPresent:e,onExitComplete:n,custom:s,presenceAffectsLayout:a,mode:l,anchorX:u})=>{const d=v0(U4),f=V.useId();let h=!0,g=V.useMemo(()=>(h=!1,{id:f,initial:t,isPresent:e,custom:s,onExitComplete:y=>{d.set(y,!0);for(const S of d.values())if(!S)return;n&&n()},register:y=>(d.set(y,!1),()=>d.delete(y))}),[e,d,n]);return a&&h&&(g={...g}),V.useMemo(()=>{d.forEach((y,S)=>d.set(S,!1))},[e]),V.useEffect(()=>{!e&&!d.size&&n&&n()},[e]),l==="popLayout"&&(i=J.jsx(B4,{isPresent:e,anchorX:u,children:i})),J.jsx(id.Provider,{value:g,children:i})};function U4(){return new Map}function QL(i=!0){const t=V.useContext(id);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:s}=t,a=V.useId();V.useEffect(()=>{if(i)return s(a)},[i]);const l=V.useCallback(()=>i&&n&&n(a),[a,n,i]);return!e&&n?[!1,l]:[!0]}const Hc=i=>i.key||"";function Mb(i){const t=[];return V.Children.forEach(i,e=>{V.isValidElement(e)&&t.push(e)}),t}const $4=({children:i,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:a="sync",propagate:l=!1,anchorX:u="left"})=>{const[d,f]=QL(l),h=V.useMemo(()=>Mb(i),[i]),g=l&&!d?[]:h.map(Hc),y=V.useRef(!0),S=V.useRef(h),v=v0(()=>new Map),[E,x]=V.useState(h),[b,D]=V.useState(h);oL(()=>{y.current=!1,S.current=h;for(let _=0;_<b.length;_++){const P=Hc(b[_]);g.includes(P)?v.delete(P):v.get(P)!==!0&&v.set(P,!1)}},[b,g.length,g.join("-")]);const L=[];if(h!==E){let _=[...h];for(let P=0;P<b.length;P++){const M=b[P],k=Hc(M);g.includes(k)||(_.splice(P,0,M),L.push(M))}return a==="wait"&&L.length&&(_=L),D(Mb(_)),x(h),null}const{forceRender:I}=V.useContext(y0);return J.jsx(J.Fragment,{children:b.map(_=>{const P=Hc(_),M=l&&!d?!1:h===b||g.includes(P),k=()=>{if(v.has(P))v.set(P,!0);else return;let F=!0;v.forEach(R=>{R||(F=!1)}),F&&(I?.(),D(S.current),l&&f?.(),n&&n())};return J.jsx(F4,{isPresent:M,initial:!y.current||e?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,onExitComplete:M?void 0:k,anchorX:u,children:_},P)})})},ZL=V.createContext({strict:!1}),Pb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Qa={};for(const i in Pb)Qa[i]={isEnabled:t=>Pb[i].some(e=>!!t[e])};function V4(i){for(const t in i)Qa[t]={...Qa[t],...i[t]}}const G4=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Of(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||G4.has(i)}let JL=i=>!Of(i);function H4(i){typeof i=="function"&&(JL=t=>t.startsWith("on")?!Of(t):i(t))}try{H4(require("@emotion/is-prop-valid").default)}catch{}function j4(i,t,e){const n={};for(const s in i)s==="values"&&typeof i.values=="object"||(JL(s)||e===!0&&Of(s)||!t&&!Of(s)||i.draggable&&s.startsWith("onDrag"))&&(n[s]=i[s]);return n}function K4(i){if(typeof Proxy>"u")return i;const t=new Map,e=(...n)=>i(...n);return new Proxy(e,{get:(n,s)=>s==="create"?i:(t.has(s)||t.set(s,i(s)),t.get(s))})}const sd=V.createContext({});function rd(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function Kl(i){return typeof i=="string"||Array.isArray(i)}const H0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],j0=["initial",...H0];function ad(i){return rd(i.animate)||j0.some(t=>Kl(i[t]))}function tC(i){return!!(ad(i)||i.variants)}function z4(i,t){if(ad(i)){const{initial:e,animate:n}=i;return{initial:e===!1||Kl(e)?e:void 0,animate:Kl(n)?n:void 0}}return i.inherit!==!1?t:{}}function Y4(i){const{initial:t,animate:e}=z4(i,V.useContext(sd));return V.useMemo(()=>({initial:t,animate:e}),[kb(t),kb(e)])}function kb(i){return Array.isArray(i)?i.join(" "):i}const q4=Symbol.for("motionComponentSymbol");function ka(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function X4(i,t,e){return V.useCallback(n=>{n&&i.onMount&&i.onMount(n),t&&(n?t.mount(n):t.unmount()),e&&(typeof e=="function"?e(n):ka(e)&&(e.current=n))},[t])}const K0=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),W4="framerAppearId",eC="data-"+K0(W4),nC=V.createContext({});function Q4(i,t,e,n,s){const{visualElement:a}=V.useContext(sd),l=V.useContext(ZL),u=V.useContext(id),d=V.useContext(G0).reducedMotion,f=V.useRef(null);n=n||l.renderer,!f.current&&n&&(f.current=n(i,{visualState:t,parent:a,props:e,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const h=f.current,g=V.useContext(nC);h&&!h.projection&&s&&(h.type==="html"||h.type==="svg")&&Z4(f.current,e,s,g);const y=V.useRef(!1);V.useInsertionEffect(()=>{h&&y.current&&h.update(e,u)});const S=e[eC],v=V.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return oL(()=>{h&&(y.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),$0.render(h.render),v.current&&h.animationState&&h.animationState.animateChanges())}),V.useEffect(()=>{h&&(!v.current&&h.animationState&&h.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),v.current=!1))}),h}function Z4(i,t,e,n){const{layoutId:s,layout:a,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:f,layoutCrossfade:h}=t;i.projection=new e(i.latestValues,t["data-framer-portal-id"]?void 0:iC(i.parent)),i.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!l||u&&ka(u),visualElement:i,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:h,layoutScroll:d,layoutRoot:f})}function iC(i){if(i)return i.options.allowProjection!==!1?i.projection:iC(i.parent)}function J4({preloadedFeatures:i,createVisualElement:t,useRender:e,useVisualState:n,Component:s}){i&&V4(i);function a(u,d){let f;const h={...V.useContext(G0),...u,layoutId:t5(u)},{isStatic:g}=h,y=Y4(u),S=n(u,g);if(!g&&S0){e5();const v=n5(h);f=v.MeasureLayout,y.visualElement=Q4(s,S,h,t,v.ProjectionNode)}return J.jsxs(sd.Provider,{value:y,children:[f&&y.visualElement?J.jsx(f,{visualElement:y.visualElement,...h}):null,e(s,u,X4(S,y.visualElement,d),S,g,y.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const l=V.forwardRef(a);return l[q4]=s,l}function t5({layoutId:i}){const t=V.useContext(y0).id;return t&&i!==void 0?t+"-"+i:i}function e5(i,t){V.useContext(ZL).strict}function n5(i){const{drag:t,layout:e}=Qa;if(!t&&!e)return{};const n={...t,...e};return{MeasureLayout:t?.isEnabled(i)||e?.isEnabled(i)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const zl={};function i5(i){for(const t in i)zl[t]=i[t],C0(t)&&(zl[t].isCSSVariable=!0)}function sC(i,{layout:t,layoutId:e}){return io.has(i)||i.startsWith("origin")||(t||e!==void 0)&&(!!zl[i]||i==="opacity")}const s5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},r5=no.length;function a5(i,t,e){let n="",s=!0;for(let a=0;a<r5;a++){const l=no[a],u=i[l];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(l.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||e){const f=zL(u,U0[l]);if(!d){s=!1;const h=s5[l]||l;n+=`${h}(${f}) `}e&&(t[l]=f)}}return n=n.trim(),e?n=e(t,s?"":n):s&&(n="none"),n}function z0(i,t,e){const{style:n,vars:s,transformOrigin:a}=i;let l=!1,u=!1;for(const d in t){const f=t[d];if(io.has(d)){l=!0;continue}else if(C0(d)){s[d]=f;continue}else{const h=zL(f,U0[d]);d.startsWith("origin")?(u=!0,a[d]=h):n[d]=h}}if(t.transform||(l||e?n.transform=a5(t,i.transform,e):n.transform&&(n.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:h=0}=a;n.transformOrigin=`${d} ${f} ${h}`}}const Y0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function rC(i,t,e){for(const n in t)!an(t[n])&&!sC(n,e)&&(i[n]=t[n])}function o5({transformTemplate:i},t){return V.useMemo(()=>{const e=Y0();return z0(e,t,i),Object.assign({},e.vars,e.style)},[t])}function l5(i,t){const e=i.style||{},n={};return rC(n,e,i),Object.assign(n,o5(i,t)),n}function u5(i,t){const e={},n=l5(i,t);return i.drag&&i.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(e.tabIndex=0),e.style=n,e}const c5={offset:"stroke-dashoffset",array:"stroke-dasharray"},f5={offset:"strokeDashoffset",array:"strokeDasharray"};function d5(i,t,e=1,n=0,s=!0){i.pathLength=1;const a=s?c5:f5;i[a.offset]=Rt.transform(-n);const l=Rt.transform(t),u=Rt.transform(e);i[a.array]=`${l} ${u}`}function aC(i,{attrX:t,attrY:e,attrScale:n,pathLength:s,pathSpacing:a=1,pathOffset:l=0,...u},d,f,h){if(z0(i,u,f),d){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:g,style:y}=i;g.transform&&(y.transform=g.transform,delete g.transform),(y.transform||g.transformOrigin)&&(y.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),y.transform&&(y.transformBox=h?.transformBox??"fill-box",delete g.transformBox),t!==void 0&&(g.x=t),e!==void 0&&(g.y=e),n!==void 0&&(g.scale=n),s!==void 0&&d5(g,s,a,l,!1)}const oC=()=>({...Y0(),attrs:{}}),lC=i=>typeof i=="string"&&i.toLowerCase()==="svg";function h5(i,t,e,n){const s=V.useMemo(()=>{const a=oC();return aC(a,t,lC(n),i.transformTemplate,i.style),{...a.attrs,style:{...a.style}}},[t]);if(i.style){const a={};rC(a,i.style,i),s.style={...a,...s.style}}return s}const m5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function q0(i){return typeof i!="string"||i.includes("-")?!1:!!(m5.indexOf(i)>-1||/[A-Z]/u.test(i))}function g5(i=!1){return(e,n,s,{latestValues:a},l)=>{const d=(q0(e)?h5:u5)(n,a,l,e),f=j4(n,typeof e=="string",i),h=e!==V.Fragment?{...f,...d,ref:s}:{},{children:g}=n,y=V.useMemo(()=>an(g)?g.get():g,[g]);return V.createElement(e,{...h,children:y})}}function Nb(i){const t=[{},{}];return i?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function X0(i,t,e,n){if(typeof t=="function"){const[s,a]=Nb(n);t=t(e!==void 0?e:i.custom,s,a)}if(typeof t=="string"&&(t=i.variants&&i.variants[t]),typeof t=="function"){const[s,a]=Nb(n);t=t(e!==void 0?e:i.custom,s,a)}return t}function uf(i){return an(i)?i.get():i}function p5({scrapeMotionValuesFromProps:i,createRenderState:t},e,n,s){return{latestValues:y5(e,n,s,i),renderState:t()}}const uC=i=>(t,e)=>{const n=V.useContext(sd),s=V.useContext(id),a=()=>p5(i,t,n,s);return e?a():v0(a)};function y5(i,t,e,n){const s={},a=n(i,{});for(const y in a)s[y]=uf(a[y]);let{initial:l,animate:u}=i;const d=ad(i),f=tC(i);t&&f&&!d&&i.inherit!==!1&&(l===void 0&&(l=t.initial),u===void 0&&(u=t.animate));let h=e?e.initial===!1:!1;h=h||l===!1;const g=h?u:l;if(g&&typeof g!="boolean"&&!rd(g)){const y=Array.isArray(g)?g:[g];for(let S=0;S<y.length;S++){const v=X0(i,y[S]);if(v){const{transitionEnd:E,transition:x,...b}=v;for(const D in b){let L=b[D];if(Array.isArray(L)){const I=h?L.length-1:0;L=L[I]}L!==null&&(s[D]=L)}for(const D in E)s[D]=E[D]}}}return s}function W0(i,t,e){const{style:n}=i,s={};for(const a in n)(an(n[a])||t.style&&an(t.style[a])||sC(a,i)||e?.getValue(a)?.liveStyle!==void 0)&&(s[a]=n[a]);return s}const v5={useVisualState:uC({scrapeMotionValuesFromProps:W0,createRenderState:Y0})};function cC(i,t,e){const n=W0(i,t,e);for(const s in i)if(an(i[s])||an(t[s])){const a=no.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[a]=i[s]}return n}const S5={useVisualState:uC({scrapeMotionValuesFromProps:cC,createRenderState:oC})};function T5(i,t){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const l={...q0(n)?S5:v5,preloadedFeatures:i,useRender:g5(s),createVisualElement:t,Component:n};return J4(l)}}function Yl(i,t,e){const n=i.getProps();return X0(n,t,e!==void 0?e:n.custom,i)}const vp=i=>Array.isArray(i);function E5(i,t,e){i.hasValue(t)?i.getValue(t).set(e):i.addValue(t,Wa(e))}function x5(i){return vp(i)?i[i.length-1]||0:i}function b5(i,t){const e=Yl(i,t);let{transitionEnd:n={},transition:s={},...a}=e||{};a={...a,...n};for(const l in a){const u=x5(a[l]);E5(i,l,u)}}function A5(i){return!!(an(i)&&i.add)}function Sp(i,t){const e=i.getValue("willChange");if(A5(e))return e.add(t);if(!e&&ls.WillChange){const n=new ls.WillChange("auto");i.addValue("willChange",n),n.add(t)}}function fC(i){return i.props[eC]}const R5=i=>i!==null;function L5(i,{repeat:t,repeatType:e="loop"},n){const s=i.filter(R5),a=t&&e!=="loop"&&t%2===1?0:s.length-1;return s[a]}const C5={type:"spring",stiffness:500,damping:25,restSpeed:10},_5=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),D5={type:"keyframes",duration:.8},I5={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},w5=(i,{keyframes:t})=>t.length>2?D5:io.has(i)?i.startsWith("scale")?_5(t[1]):C5:I5;function O5({when:i,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:s,repeat:a,repeatType:l,repeatDelay:u,from:d,elapsed:f,...h}){return!!Object.keys(h).length}const Q0=(i,t,e,n={},s,a)=>l=>{const u=F0(n,i)||{},d=u.delay||n.delay||0;let{elapsed:f=0}=n;f=f-wi(d);const h={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-f,onUpdate:y=>{t.set(y),u.onUpdate&&u.onUpdate(y)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:i,motionValue:t,element:a?void 0:s};O5(u)||Object.assign(h,w5(i,h)),h.duration&&(h.duration=wi(h.duration)),h.repeatDelay&&(h.repeatDelay=wi(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let g=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(g=!0)),(ls.instantAnimations||ls.skipAnimations)&&(g=!0,h.duration=0,h.delay=0),h.allowFlatten=!u.type&&!u.ease,g&&!a&&t.get()!==void 0){const y=L5(h.keyframes,u);if(y!==void 0){me.update(()=>{h.onUpdate(y),h.onComplete()});return}}return u.isSync?new k0(h):new f4(h)};function M5({protectedKeys:i,needsAnimating:t},e){const n=i.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function dC(i,t,{delay:e=0,transitionOverride:n,type:s}={}){let{transition:a=i.getDefaultTransition(),transitionEnd:l,...u}=t;n&&(a=n);const d=[],f=s&&i.animationState&&i.animationState.getState()[s];for(const h in u){const g=i.getValue(h,i.latestValues[h]??null),y=u[h];if(y===void 0||f&&M5(f,h))continue;const S={delay:e,...F0(a||{},h)},v=g.get();if(v!==void 0&&!g.isAnimating&&!Array.isArray(y)&&y===v&&!S.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const b=fC(i);if(b){const D=window.MotionHandoffAnimation(b,h,me);D!==null&&(S.startTime=D,E=!0)}}Sp(i,h),g.start(Q0(h,g,y,i.shouldReduceMotion&&VL.has(h)?{type:!1}:S,i,E));const x=g.animation;x&&d.push(x)}return l&&Promise.all(d).then(()=>{me.update(()=>{l&&b5(i,l)})}),d}function Tp(i,t,e={}){const n=Yl(i,t,e.type==="exit"?i.presenceContext?.custom:void 0);let{transition:s=i.getDefaultTransition()||{}}=n||{};e.transitionOverride&&(s=e.transitionOverride);const a=n?()=>Promise.all(dC(i,n,e)):()=>Promise.resolve(),l=i.variantChildren&&i.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:h,staggerDirection:g}=s;return P5(i,t,f+d,h,g,e)}:()=>Promise.resolve(),{when:u}=s;if(u){const[d,f]=u==="beforeChildren"?[a,l]:[l,a];return d().then(()=>f())}else return Promise.all([a(),l(e.delay)])}function P5(i,t,e=0,n=0,s=1,a){const l=[],u=(i.variantChildren.size-1)*n,d=s===1?(f=0)=>f*n:(f=0)=>u-f*n;return Array.from(i.variantChildren).sort(k5).forEach((f,h)=>{f.notify("AnimationStart",t),l.push(Tp(f,t,{...a,delay:e+d(h)}).then(()=>f.notify("AnimationComplete",t)))}),Promise.all(l)}function k5(i,t){return i.sortNodePosition(t)}function N5(i,t,e={}){i.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(a=>Tp(i,a,e));n=Promise.all(s)}else if(typeof t=="string")n=Tp(i,t,e);else{const s=typeof t=="function"?Yl(i,t,e.custom):t;n=Promise.all(dC(i,s,e))}return n.then(()=>{i.notify("AnimationComplete",t)})}function hC(i,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==i.length)return!1;for(let n=0;n<e;n++)if(t[n]!==i[n])return!1;return!0}const B5=j0.length;function mC(i){if(!i)return;if(!i.isControllingVariants){const e=i.parent?mC(i.parent)||{}:{};return i.props.initial!==void 0&&(e.initial=i.props.initial),e}const t={};for(let e=0;e<B5;e++){const n=j0[e],s=i.props[n];(Kl(s)||s===!1)&&(t[n]=s)}return t}const F5=[...H0].reverse(),U5=H0.length;function $5(i){return t=>Promise.all(t.map(({animation:e,options:n})=>N5(i,e,n)))}function V5(i){let t=$5(i),e=Bb(),n=!0;const s=d=>(f,h)=>{const g=Yl(i,h,d==="exit"?i.presenceContext?.custom:void 0);if(g){const{transition:y,transitionEnd:S,...v}=g;f={...f,...v,...S}}return f};function a(d){t=d(i)}function l(d){const{props:f}=i,h=mC(i.parent)||{},g=[],y=new Set;let S={},v=1/0;for(let x=0;x<U5;x++){const b=F5[x],D=e[b],L=f[b]!==void 0?f[b]:h[b],I=Kl(L),_=b===d?D.isActive:null;_===!1&&(v=x);let P=L===h[b]&&L!==f[b]&&I;if(P&&n&&i.manuallyAnimateOnMount&&(P=!1),D.protectedKeys={...S},!D.isActive&&_===null||!L&&!D.prevProp||rd(L)||typeof L=="boolean")continue;const M=G5(D.prevProp,L);let k=M||b===d&&D.isActive&&!P&&I||x>v&&I,F=!1;const R=Array.isArray(L)?L:[L];let $=R.reduce(s(b),{});_===!1&&($={});const{prevResolvedValues:Q={}}=D,ft={...Q,...$},ct=H=>{k=!0,y.has(H)&&(F=!0,y.delete(H)),D.needsAnimating[H]=!0;const et=i.getValue(H);et&&(et.liveStyle=!1)};for(const H in ft){const et=$[H],X=Q[H];if(S.hasOwnProperty(H))continue;let O=!1;vp(et)&&vp(X)?O=!hC(et,X):O=et!==X,O?et!=null?ct(H):y.add(H):et!==void 0&&y.has(H)?ct(H):D.protectedKeys[H]=!0}D.prevProp=L,D.prevResolvedValues=$,D.isActive&&(S={...S,...$}),n&&i.blockInitialAnimation&&(k=!1),k&&(!(P&&M)||F)&&g.push(...R.map(H=>({animation:H,options:{type:b}})))}if(y.size){const x={};if(typeof f.initial!="boolean"){const b=Yl(i,Array.isArray(f.initial)?f.initial[0]:f.initial);b&&b.transition&&(x.transition=b.transition)}y.forEach(b=>{const D=i.getBaseTarget(b),L=i.getValue(b);L&&(L.liveStyle=!0),x[b]=D??null}),g.push({animation:x})}let E=!!g.length;return n&&(f.initial===!1||f.initial===f.animate)&&!i.manuallyAnimateOnMount&&(E=!1),n=!1,E?t(g):Promise.resolve()}function u(d,f){if(e[d].isActive===f)return Promise.resolve();i.variantChildren?.forEach(g=>g.animationState?.setActive(d,f)),e[d].isActive=f;const h=l(d);for(const g in e)e[g].protectedKeys={};return h}return{animateChanges:l,setActive:u,setAnimateFunction:a,getState:()=>e,reset:()=>{e=Bb(),n=!0}}}function G5(i,t){return typeof t=="string"?t!==i:Array.isArray(t)?!hC(t,i):!1}function pr(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Bb(){return{animate:pr(!0),whileInView:pr(),whileHover:pr(),whileTap:pr(),whileDrag:pr(),whileFocus:pr(),exit:pr()}}class Xs{constructor(t){this.isMounted=!1,this.node=t}update(){}}class H5 extends Xs{constructor(t){super(t),t.animationState||(t.animationState=V5(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();rd(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let j5=0;class K5 extends Xs{constructor(){super(...arguments),this.id=j5++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);e&&!t&&s.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const z5={animation:{Feature:H5},exit:{Feature:K5}};function ql(i,t,e,n={passive:!0}){return i.addEventListener(t,e,n),()=>i.removeEventListener(t,e)}function ru(i){return{point:{x:i.pageX,y:i.pageY}}}const Y5=i=>t=>V0(t)&&i(t,ru(t));function xl(i,t,e,n){return ql(i,t,Y5(e),n)}function gC({top:i,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:i,max:n}}}function q5({x:i,y:t}){return{top:t.min,right:i.max,bottom:t.max,left:i.min}}function X5(i,t){if(!t)return i;const e=t({x:i.left,y:i.top}),n=t({x:i.right,y:i.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}const pC=1e-4,W5=1-pC,Q5=1+pC,yC=.01,Z5=0-yC,J5=0+yC;function ln(i){return i.max-i.min}function t8(i,t,e){return Math.abs(i-t)<=e}function Fb(i,t,e,n=.5){i.origin=n,i.originPoint=de(t.min,t.max,i.origin),i.scale=ln(e)/ln(t),i.translate=de(e.min,e.max,i.origin)-i.originPoint,(i.scale>=W5&&i.scale<=Q5||isNaN(i.scale))&&(i.scale=1),(i.translate>=Z5&&i.translate<=J5||isNaN(i.translate))&&(i.translate=0)}function bl(i,t,e,n){Fb(i.x,t.x,e.x,n?n.originX:void 0),Fb(i.y,t.y,e.y,n?n.originY:void 0)}function Ub(i,t,e){i.min=e.min+t.min,i.max=i.min+ln(t)}function e8(i,t,e){Ub(i.x,t.x,e.x),Ub(i.y,t.y,e.y)}function $b(i,t,e){i.min=t.min-e.min,i.max=i.min+ln(t)}function Al(i,t,e){$b(i.x,t.x,e.x),$b(i.y,t.y,e.y)}const Vb=()=>({translate:0,scale:1,origin:0,originPoint:0}),Na=()=>({x:Vb(),y:Vb()}),Gb=()=>({min:0,max:0}),Re=()=>({x:Gb(),y:Gb()});function zn(i){return[i("x"),i("y")]}function fg(i){return i===void 0||i===1}function Ep({scale:i,scaleX:t,scaleY:e}){return!fg(i)||!fg(t)||!fg(e)}function Tr(i){return Ep(i)||vC(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function vC(i){return Hb(i.x)||Hb(i.y)}function Hb(i){return i&&i!=="0%"}function Mf(i,t,e){const n=i-e,s=t*n;return e+s}function jb(i,t,e,n,s){return s!==void 0&&(i=Mf(i,s,n)),Mf(i,e,n)+t}function xp(i,t=0,e=1,n,s){i.min=jb(i.min,t,e,n,s),i.max=jb(i.max,t,e,n,s)}function SC(i,{x:t,y:e}){xp(i.x,t.translate,t.scale,t.originPoint),xp(i.y,e.translate,e.scale,e.originPoint)}const Kb=.999999999999,zb=1.0000000000001;function n8(i,t,e,n=!1){const s=e.length;if(!s)return;t.x=t.y=1;let a,l;for(let u=0;u<s;u++){a=e[u],l=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Fa(i,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,SC(i,l)),n&&Tr(a.latestValues)&&Fa(i,a.latestValues))}t.x<zb&&t.x>Kb&&(t.x=1),t.y<zb&&t.y>Kb&&(t.y=1)}function Ba(i,t){i.min=i.min+t,i.max=i.max+t}function Yb(i,t,e,n,s=.5){const a=de(i.min,i.max,s);xp(i,t,e,a,n)}function Fa(i,t){Yb(i.x,t.x,t.scaleX,t.scale,t.originX),Yb(i.y,t.y,t.scaleY,t.scale,t.originY)}function TC(i,t){return gC(X5(i.getBoundingClientRect(),t))}function i8(i,t,e){const n=TC(i,e),{scroll:s}=t;return s&&(Ba(n.x,s.offset.x),Ba(n.y,s.offset.y)),n}const EC=({current:i})=>i?i.ownerDocument.defaultView:null,qb=(i,t)=>Math.abs(i-t);function s8(i,t){const e=qb(i.x,t.x),n=qb(i.y,t.y);return Math.sqrt(e**2+n**2)}class xC{constructor(t,e,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=hg(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,S=s8(g.offset,{x:0,y:0})>=3;if(!y&&!S)return;const{point:v}=g,{timestamp:E}=Xe;this.history.push({...v,timestamp:E});const{onStart:x,onMove:b}=this.handlers;y||(x&&x(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=dg(y,this.transformPagePoint),me.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:S,onSessionEnd:v,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=hg(g.type==="pointercancel"?this.lastMoveEventInfo:dg(y,this.transformPagePoint),this.history);this.startEvent&&S&&S(g,x),v&&v(g,x)},!V0(t))return;this.dragSnapToOrigin=a,this.handlers=e,this.transformPagePoint=n,this.contextWindow=s||window;const l=ru(t),u=dg(l,this.transformPagePoint),{point:d}=u,{timestamp:f}=Xe;this.history=[{...d,timestamp:f}];const{onSessionStart:h}=e;h&&h(t,hg(u,this.history)),this.removeListeners=nu(xl(this.contextWindow,"pointermove",this.handlePointerMove),xl(this.contextWindow,"pointerup",this.handlePointerUp),xl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),zs(this.updatePoint)}}function dg(i,t){return t?{point:t(i.point)}:i}function Xb(i,t){return{x:i.x-t.x,y:i.y-t.y}}function hg({point:i},t){return{point:i,delta:Xb(i,bC(t)),offset:Xb(i,r8(t)),velocity:a8(t,.1)}}function r8(i){return i[0]}function bC(i){return i[i.length-1]}function a8(i,t){if(i.length<2)return{x:0,y:0};let e=i.length-1,n=null;const s=bC(i);for(;e>=0&&(n=i[e],!(s.timestamp-n.timestamp>wi(t)));)e--;if(!n)return{x:0,y:0};const a=Oi(s.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const l={x:(s.x-n.x)/a,y:(s.y-n.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function o8(i,{min:t,max:e},n){return t!==void 0&&i<t?i=n?de(t,i,n.min):Math.max(i,t):e!==void 0&&i>e&&(i=n?de(e,i,n.max):Math.min(i,e)),i}function Wb(i,t,e){return{min:t!==void 0?i.min+t:void 0,max:e!==void 0?i.max+e-(i.max-i.min):void 0}}function l8(i,{top:t,left:e,bottom:n,right:s}){return{x:Wb(i.x,e,s),y:Wb(i.y,t,n)}}function Qb(i,t){let e=t.min-i.min,n=t.max-i.max;return t.max-t.min<i.max-i.min&&([e,n]=[n,e]),{min:e,max:n}}function u8(i,t){return{x:Qb(i.x,t.x),y:Qb(i.y,t.y)}}function c8(i,t){let e=.5;const n=ln(i),s=ln(t);return s>n?e=Gl(t.min,t.max-n,i.min):n>s&&(e=Gl(i.min,i.max-s,t.min)),os(0,1,e)}function f8(i,t){const e={};return t.min!==void 0&&(e.min=t.min-i.min),t.max!==void 0&&(e.max=t.max-i.min),e}const bp=.35;function d8(i=bp){return i===!1?i=0:i===!0&&(i=bp),{x:Zb(i,"left","right"),y:Zb(i,"top","bottom")}}function Zb(i,t,e){return{min:Jb(i,t),max:Jb(i,e)}}function Jb(i,t){return typeof i=="number"?i:i[t]||0}const h8=new WeakMap;class m8{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Re(),this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(ru(h).point)},a=(h,g)=>{const{drag:y,dragPropagation:S,onDragStart:v}=this.getProps();if(y&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=C4(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zn(x=>{let b=this.getAxisMotionValue(x).get()||0;if(Mi.test(b)){const{projection:D}=this.visualElement;if(D&&D.layout){const L=D.layout.layoutBox[x];L&&(b=ln(L)*(parseFloat(b)/100))}}this.originPoint[x]=b}),v&&me.postRender(()=>v(h,g)),Sp(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},l=(h,g)=>{const{dragPropagation:y,dragDirectionLock:S,onDirectionLock:v,onDrag:E}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:x}=g;if(S&&this.currentDirection===null){this.currentDirection=g8(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",g.point,x),this.updateAxis("y",g.point,x),this.visualElement.render(),E&&E(h,g)},u=(h,g)=>this.stop(h,g),d=()=>zn(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new xC(t,{onSessionStart:s,onStart:a,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:EC(this.visualElement)})}stop(t,e){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=e;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&me.postRender(()=>a(t,e))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:s}=this.getProps();if(!n||!jc(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let l=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(l=o8(l,this.constraints[t],this.elastic[t])),a.set(l)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&ka(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=l8(n.layoutBox,t):this.constraints=!1,this.elastic=d8(e),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&zn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=f8(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!ka(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=i8(n,s.root,this.visualElement.getTransformPagePoint());let l=u8(s.layout.layoutBox,a);if(e){const u=e(q5(l));this.hasMutatedConstraints=!!u,u&&(l=gC(u))}return l}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:s,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=zn(h=>{if(!jc(h,e,this.currentDirection))return;let g=d&&d[h]||{};l&&(g={min:0,max:0});const y=s?200:1e6,S=s?40:1e7,v={type:"inertia",velocity:n?t[h]:0,bounceStiffness:y,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(h,v)});return Promise.all(f).then(u)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return Sp(this.visualElement,t),n.start(Q0(t,n,0,e,this.visualElement,!1))}stopAnimation(){zn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){zn(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[e];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){zn(e=>{const{drag:n}=this.getProps();if(!jc(e,n,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(e);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[e];a.set(t[e]-de(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!ka(e)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};zn(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();s[l]=c8({min:d,max:d},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),zn(l=>{if(!jc(l,t,null))return;const u=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];u.set(de(d,f,s[l]))})}addListeners(){if(!this.visualElement.current)return;h8.set(this.visualElement,this);const t=this.visualElement.current,e=xl(t,"pointerdown",d=>{const{drag:f,dragListener:h=!0}=this.getProps();f&&h&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();ka(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),me.read(n);const l=ql(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(zn(h=>{const g=this.getAxisMotionValue(h);g&&(this.originPoint[h]+=d[h].translate,g.set(g.get()+d[h].translate))}),this.visualElement.render())});return()=>{l(),e(),a(),u&&u()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:l=bp,dragMomentum:u=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:s,dragConstraints:a,dragElastic:l,dragMomentum:u}}}function jc(i,t,e){return(t===!0||t===i)&&(e===null||e===i)}function g8(i,t=10){let e=null;return Math.abs(i.y)>t?e="y":Math.abs(i.x)>t&&(e="x"),e}class p8 extends Xs{constructor(t){super(t),this.removeGroupControls=Zn,this.removeListeners=Zn,this.controls=new m8(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zn}unmount(){this.removeGroupControls(),this.removeListeners()}}const tA=i=>(t,e)=>{i&&me.postRender(()=>i(t,e))};class y8 extends Xs{constructor(){super(...arguments),this.removePointerDownListener=Zn}onPointerDown(t){this.session=new xC(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:EC(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:tA(t),onStart:tA(e),onMove:n,onEnd:(a,l)=>{delete this.session,s&&me.postRender(()=>s(a,l))}}}mount(){this.removePointerDownListener=xl(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const cf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function eA(i,t){return t.max===t.min?0:i/(t.max-t.min)*100}const ll={correct:(i,t)=>{if(!t.target)return i;if(typeof i=="string")if(Rt.test(i))i=parseFloat(i);else return i;const e=eA(i,t.target.x),n=eA(i,t.target.y);return`${e}% ${n}%`}},v8={correct:(i,{treeScale:t,projectionDelta:e})=>{const n=i,s=Ys.parse(i);if(s.length>5)return n;const a=Ys.createTransformer(i),l=typeof s[0]!="number"?1:0,u=e.x.scale*t.x,d=e.y.scale*t.y;s[0+l]/=u,s[1+l]/=d;const f=de(u,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=f),typeof s[3+l]=="number"&&(s[3+l]/=f),a(s)}};class S8 extends V.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:s}=this.props,{projection:a}=t;i5(T8),a&&(e.group&&e.group.add(a),n&&n.register&&s&&n.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),cf.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:s,isPresent:a}=this.props,{projection:l}=n;return l&&(l.isPresent=a,s||t.layoutDependency!==e||e===void 0||t.isPresent!==a?l.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?l.promote():l.relegate()||me.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),$0.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function AC(i){const[t,e]=QL(),n=V.useContext(y0);return J.jsx(S8,{...i,layoutGroup:n,switchLayoutGroup:V.useContext(nC),isPresent:t,safeToRemove:e})}const T8={borderRadius:{...ll,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ll,borderTopRightRadius:ll,borderBottomLeftRadius:ll,borderBottomRightRadius:ll,boxShadow:v8};function E8(i,t,e){const n=an(i)?i:Wa(i);return n.start(Q0("",n,t,e)),n.animation}const x8=(i,t)=>i.depth-t.depth;class b8{constructor(){this.children=[],this.isDirty=!1}add(t){T0(this.children,t),this.isDirty=!0}remove(t){E0(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(x8),this.isDirty=!1,this.children.forEach(t)}}function A8(i,t){const e=pn.now(),n=({timestamp:s})=>{const a=s-e;a>=t&&(zs(n),i(a-t))};return me.setup(n,!0),()=>zs(n)}const RC=["TopLeft","TopRight","BottomLeft","BottomRight"],R8=RC.length,nA=i=>typeof i=="string"?parseFloat(i):i,iA=i=>typeof i=="number"||Rt.test(i);function L8(i,t,e,n,s,a){s?(i.opacity=de(0,e.opacity??1,C8(n)),i.opacityExit=de(t.opacity??1,0,_8(n))):a&&(i.opacity=de(t.opacity??1,e.opacity??1,n));for(let l=0;l<R8;l++){const u=`border${RC[l]}Radius`;let d=sA(t,u),f=sA(e,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||iA(d)===iA(f)?(i[u]=Math.max(de(nA(d),nA(f),n),0),(Mi.test(f)||Mi.test(d))&&(i[u]+="%")):i[u]=f}(t.rotate||e.rotate)&&(i.rotate=de(t.rotate||0,e.rotate||0,n))}function sA(i,t){return i[t]!==void 0?i[t]:i.borderRadius}const C8=LC(0,.5,vL),_8=LC(.5,.95,Zn);function LC(i,t,e){return n=>n<i?0:n>t?1:e(Gl(i,t,n))}function rA(i,t){i.min=t.min,i.max=t.max}function Kn(i,t){rA(i.x,t.x),rA(i.y,t.y)}function aA(i,t){i.translate=t.translate,i.scale=t.scale,i.originPoint=t.originPoint,i.origin=t.origin}function oA(i,t,e,n,s){return i-=t,i=Mf(i,1/e,n),s!==void 0&&(i=Mf(i,1/s,n)),i}function D8(i,t=0,e=1,n=.5,s,a=i,l=i){if(Mi.test(t)&&(t=parseFloat(t),t=de(l.min,l.max,t/100)-l.min),typeof t!="number")return;let u=de(a.min,a.max,n);i===a&&(u-=t),i.min=oA(i.min,t,e,u,s),i.max=oA(i.max,t,e,u,s)}function lA(i,t,[e,n,s],a,l){D8(i,t[e],t[n],t[s],t.scale,a,l)}const I8=["x","scaleX","originX"],w8=["y","scaleY","originY"];function uA(i,t,e,n){lA(i.x,t,I8,e?e.x:void 0,n?n.x:void 0),lA(i.y,t,w8,e?e.y:void 0,n?n.y:void 0)}function cA(i){return i.translate===0&&i.scale===1}function CC(i){return cA(i.x)&&cA(i.y)}function fA(i,t){return i.min===t.min&&i.max===t.max}function O8(i,t){return fA(i.x,t.x)&&fA(i.y,t.y)}function dA(i,t){return Math.round(i.min)===Math.round(t.min)&&Math.round(i.max)===Math.round(t.max)}function _C(i,t){return dA(i.x,t.x)&&dA(i.y,t.y)}function hA(i){return ln(i.x)/ln(i.y)}function mA(i,t){return i.translate===t.translate&&i.scale===t.scale&&i.originPoint===t.originPoint}class M8{constructor(){this.members=[]}add(t){T0(this.members,t),t.scheduleRender()}remove(t){if(E0(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(s=>t===s);if(e===0)return!1;let n;for(let s=e;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function P8(i,t,e){let n="";const s=i.x.translate/t.x,a=i.y.translate/t.y,l=e?.z||0;if((s||a||l)&&(n=`translate3d(${s}px, ${a}px, ${l}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:f,rotate:h,rotateX:g,rotateY:y,skewX:S,skewY:v}=e;f&&(n=`perspective(${f}px) ${n}`),h&&(n+=`rotate(${h}deg) `),g&&(n+=`rotateX(${g}deg) `),y&&(n+=`rotateY(${y}deg) `),S&&(n+=`skewX(${S}deg) `),v&&(n+=`skewY(${v}deg) `)}const u=i.x.scale*t.x,d=i.y.scale*t.y;return(u!==1||d!==1)&&(n+=`scale(${u}, ${d})`),n||"none"}const mg=["","X","Y","Z"],k8={visibility:"hidden"},N8=1e3;let B8=0;function gg(i,t,e,n){const{latestValues:s}=t;s[i]&&(e[i]=s[i],t.setStaticValue(i,0),n&&(n[i]=0))}function DC(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:t}=i.options;if(!t)return;const e=fC(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:s,layoutId:a}=i.options;window.MotionCancelOptimisedAnimation(e,"transform",me,!(s||a))}const{parent:n}=i;n&&!n.hasCheckedOptimisedAppear&&DC(n)}function IC({attachResizeListener:i,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(l={},u=t?.()){this.id=B8++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach($8),this.nodes.forEach(j8),this.nodes.forEach(K8),this.nodes.forEach(V8)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new b8)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new A0),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=WL(l)&&!M4(l),this.instance=l;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),i){let h;const g=()=>this.root.updateBlockedByResize=!1;i(l,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=A8(g,250),cf.hasAnimatedSinceResize&&(cf.hasAnimatedSinceResize=!1,this.nodes.forEach(yA))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:g,hasRelativeLayoutChanged:y,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||f.getDefaultTransition()||W8,{onLayoutAnimationStart:E,onLayoutAnimationComplete:x}=f.getProps(),b=!this.targetLayout||!_C(this.targetLayout,S),D=!g&&y;if(this.options.layoutRoot||this.resumeFrom||D||g&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const L={...F0(v,"layout"),onPlay:E,onComplete:x};(f.shouldReduceMotion||this.options.layoutRoot)&&(L.delay=0,L.type=!1),this.startAnimation(L),this.setAnimationOrigin(h,D)}else g||yA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),zs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(z8),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&DC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const g=this.path[h];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(pA);return}this.isUpdating||this.nodes.forEach(pA),this.animationCommitId=this.animationId,this.isUpdating=!1,this.nodes.forEach(H8),this.nodes.forEach(F8),this.nodes.forEach(U8),this.clearAllSnapshots();const u=pn.now();Xe.delta=os(0,1e3/60,u-Xe.timestamp),Xe.timestamp=u,Xe.isProcessing=!0,rg.update.process(Xe),rg.preRender.process(Xe),rg.render.process(Xe),Xe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,$0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(G8),this.sharedNodes.forEach(Y8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,me.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){me.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ln(this.snapshot.measuredBox.x)&&!ln(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Re(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const d=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!CC(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,h=f!==this.prevTransformTemplateValue;l&&this.instance&&(u||Tr(this.latestValues)||h)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),Q8(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Re();const u=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Z8))){const{scroll:f}=this.root;f&&(Ba(u.x,f.offset.x),Ba(u.y,f.offset.y))}return u}removeElementScroll(l){const u=Re();if(Kn(u,l),this.scroll?.wasRoot)return u;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:h,options:g}=f;f!==this.root&&h&&g.layoutScroll&&(h.wasRoot&&Kn(u,l),Ba(u.x,h.offset.x),Ba(u.y,h.offset.y))}return u}applyTransform(l,u=!1){const d=Re();Kn(d,l);for(let f=0;f<this.path.length;f++){const h=this.path[f];!u&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Fa(d,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Tr(h.latestValues)&&Fa(d,h.latestValues)}return Tr(this.latestValues)&&Fa(d,this.latestValues),d}removeTransform(l){const u=Re();Kn(u,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Tr(f.latestValues))continue;Ep(f.latestValues)&&f.updateSnapshot();const h=Re(),g=f.measurePageBox();Kn(h,g),uA(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,h)}return Tr(this.latestValues)&&uA(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:g}=this.options;if(!(!this.layout||!(h||g))){if(this.resolvedRelativeTargetAt=Xe.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Re(),this.relativeTargetOrigin=Re(),Al(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Kn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Re(),this.targetWithTransforms=Re()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),e8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Kn(this.target,this.layout.layoutBox),SC(this.target,this.targetDelta)):Kn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Re(),this.relativeTargetOrigin=Re(),Al(this.relativeTargetOrigin,this.target,y.target),Kn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ep(this.parent.latestValues)||vC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Xe.timestamp&&(d=!1),d)return;const{layout:f,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||h))return;Kn(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,y=this.treeScale.y;n8(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Re());const{target:S}=l;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(aA(this.prevProjectionDelta.x,this.projectionDelta.x),aA(this.prevProjectionDelta.y,this.projectionDelta.y)),bl(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==y||!mA(this.projectionDelta.x,this.prevProjectionDelta.x)||!mA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Na(),this.projectionDelta=Na(),this.projectionDeltaWithTransform=Na()}setAnimationOrigin(l,u=!1){const d=this.snapshot,f=d?d.latestValues:{},h={...this.latestValues},g=Na();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const y=Re(),S=d?d.source:void 0,v=this.layout?this.layout.source:void 0,E=S!==v,x=this.getStack(),b=!x||x.members.length<=1,D=!!(E&&!b&&this.options.crossfade===!0&&!this.path.some(X8));this.animationProgress=0;let L;this.mixTargetDelta=I=>{const _=I/1e3;vA(g.x,l.x,_),vA(g.y,l.y,_),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Al(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),q8(this.relativeTarget,this.relativeTargetOrigin,y,_),L&&O8(this.relativeTarget,L)&&(this.isProjectionDirty=!1),L||(L=Re()),Kn(L,this.relativeTarget)),E&&(this.animationValues=h,L8(h,f,this.latestValues,_,D,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(zs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=me.update(()=>{cf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Wa(0)),this.currentAnimation=E8(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(N8),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:h}=l;if(!(!u||!d||!f)){if(this!==l&&this.layout&&f&&wC(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||Re();const g=ln(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+g;const y=ln(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+y}Kn(u,d),Fa(u,h),bl(this.projectionDeltaWithTransform,this.layoutCorrected,u,h)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new M8),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&gg("z",l,f,this.animationValues);for(let h=0;h<mg.length;h++)gg(`rotate${mg[h]}`,l,f,this.animationValues),gg(`skew${mg[h]}`,l,f,this.animationValues);l.render();for(const h in f)l.setStaticValue(h,f[h]),this.animationValues&&(this.animationValues[h]=f[h]);l.scheduleRender()}getProjectionStyles(l){if(!this.instance||this.isSVG)return;if(!this.isVisible)return k8;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=uf(l?.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=uf(l?.pointerEvents)||""),this.hasProjected&&!Tr(this.latestValues)&&(S.transform=d?d({},""):"none",this.hasProjected=!1),S}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=P8(this.projectionDeltaWithTransform,this.treeScale,h),d&&(u.transform=d(h,u.transform));const{x:g,y}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,f.animationValues?u.opacity=f===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const S in zl){if(h[S]===void 0)continue;const{correct:v,applyTo:E,isCSSVariable:x}=zl[S],b=u.transform==="none"?h[S]:v(h[S],f);if(E){const D=E.length;for(let L=0;L<D;L++)u[E[L]]=b}else x?this.options.visualElement.renderState.vars[S]=b:u[S]=b}return this.options.layoutId&&(u.pointerEvents=f===this?uf(l?.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(gA),this.root.sharedNodes.clear()}}}function F8(i){i.updateLayout()}function U8(i){const t=i.resumeFrom?.snapshot||i.snapshot;if(i.isLead()&&i.layout&&t&&i.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:n}=i.layout,{animationType:s}=i.options,a=t.source!==i.layout.source;s==="size"?zn(h=>{const g=a?t.measuredBox[h]:t.layoutBox[h],y=ln(g);g.min=e[h].min,g.max=g.min+y}):wC(s,t.layoutBox,e)&&zn(h=>{const g=a?t.measuredBox[h]:t.layoutBox[h],y=ln(e[h]);g.max=g.min+y,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[h].max=i.relativeTarget[h].min+y)});const l=Na();bl(l,e,t.layoutBox);const u=Na();a?bl(u,i.applyTransform(n,!0),t.measuredBox):bl(u,e,t.layoutBox);const d=!CC(l);let f=!1;if(!i.resumeFrom){const h=i.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:g,layout:y}=h;if(g&&y){const S=Re();Al(S,t.layoutBox,g.layoutBox);const v=Re();Al(v,e,y.layoutBox),_C(S,v)||(f=!0),h.options.layoutRoot&&(i.relativeTarget=v,i.relativeTargetOrigin=S,i.relativeParent=h)}}}i.notifyListeners("didUpdate",{layout:e,snapshot:t,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(i.isLead()){const{onExitComplete:e}=i.options;e&&e()}i.options.transition=void 0}function $8(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function V8(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function G8(i){i.clearSnapshot()}function gA(i){i.clearMeasurements()}function pA(i){i.isLayoutDirty=!1}function H8(i){const{visualElement:t}=i.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),i.resetTransform()}function yA(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function j8(i){i.resolveTargetDelta()}function K8(i){i.calcProjection()}function z8(i){i.resetSkewAndRotation()}function Y8(i){i.removeLeadSnapshot()}function vA(i,t,e){i.translate=de(t.translate,0,e),i.scale=de(t.scale,1,e),i.origin=t.origin,i.originPoint=t.originPoint}function SA(i,t,e,n){i.min=de(t.min,e.min,n),i.max=de(t.max,e.max,n)}function q8(i,t,e,n){SA(i.x,t.x,e.x,n),SA(i.y,t.y,e.y,n)}function X8(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const W8={duration:.45,ease:[.4,0,.1,1]},TA=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),EA=TA("applewebkit/")&&!TA("chrome/")?Math.round:Zn;function xA(i){i.min=EA(i.min),i.max=EA(i.max)}function Q8(i){xA(i.x),xA(i.y)}function wC(i,t,e){return i==="position"||i==="preserve-aspect"&&!t8(hA(t),hA(e),.2)}function Z8(i){return i!==i.root&&i.scroll?.wasRoot}const J8=IC({attachResizeListener:(i,t)=>ql(i,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),pg={current:void 0},OC=IC({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!pg.current){const i=new J8({});i.mount(window),i.setOptions({layoutScroll:!0}),pg.current=i}return pg.current},resetTransform:(i,t)=>{i.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),t6={pan:{Feature:y8},drag:{Feature:p8,ProjectionNode:OC,MeasureLayout:AC}};function bA(i,t,e){const{props:n}=i;i.animationState&&n.whileHover&&i.animationState.setActive("whileHover",e==="Start");const s="onHover"+e,a=n[s];a&&me.postRender(()=>a(t,ru(t)))}class e6 extends Xs{mount(){const{current:t}=this.node;t&&(this.unmount=_4(t,(e,n)=>(bA(this.node,n,"Start"),s=>bA(this.node,s,"End"))))}unmount(){}}class n6 extends Xs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=nu(ql(this.node.current,"focus",()=>this.onFocus()),ql(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function AA(i,t,e){const{props:n}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&n.whileTap&&i.animationState.setActive("whileTap",e==="Start");const s="onTap"+(e==="End"?"":e),a=n[s];a&&me.postRender(()=>a(t,ru(t)))}class i6 extends Xs{mount(){const{current:t}=this.node;t&&(this.unmount=O4(t,(e,n)=>(AA(this.node,n,"Start"),(s,{success:a})=>AA(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ap=new WeakMap,yg=new WeakMap,s6=i=>{const t=Ap.get(i.target);t&&t(i)},r6=i=>{i.forEach(s6)};function a6({root:i,...t}){const e=i||document;yg.has(e)||yg.set(e,{});const n=yg.get(e),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(r6,{root:i,...t})),n[s]}function o6(i,t,e){const n=a6(t);return Ap.set(i,e),n.observe(i),()=>{Ap.delete(i),n.unobserve(i)}}const l6={some:0,all:1};class u6 extends Xs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:s="some",once:a}=t,l={root:e?e.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:l6[s]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:h,onViewportLeave:g}=this.node.getProps(),y=f?h:g;y&&y(d)};return o6(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(c6(t,e))&&this.startObserver()}unmount(){}}function c6({viewport:i={}},{viewport:t={}}={}){return e=>i[e]!==t[e]}const f6={inView:{Feature:u6},tap:{Feature:i6},focus:{Feature:n6},hover:{Feature:e6}},d6={layout:{ProjectionNode:OC,MeasureLayout:AC}},Rp={current:null},MC={current:!1};function h6(){if(MC.current=!0,!!S0)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),t=()=>Rp.current=i.matches;i.addListener(t),t()}else Rp.current=!1}const m6=new WeakMap;function g6(i,t,e){for(const n in t){const s=t[n],a=e[n];if(an(s))i.addValue(n,s);else if(an(a))i.addValue(n,Wa(s,{owner:i}));else if(a!==s)if(i.hasValue(n)){const l=i.getValue(n);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=i.getStaticValue(n);i.addValue(n,Wa(l!==void 0?l:s,{owner:i}))}}for(const n in e)t[n]===void 0&&i.removeValue(n);return t}const RA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class p6{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:a,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=N0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=pn.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,me.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=e.initial?{...d}:{},this.renderState=f,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!a,this.isControllingVariants=ad(e),this.isVariantNode=tC(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...g}=this.scrapeMotionValuesFromProps(e,{},this);for(const y in g){const S=g[y];d[y]!==void 0&&an(S)&&S.set(d[y],!1)}}mount(t){this.current=t,m6.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),MC.current||h6(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Rp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),zs(this.notifyUpdate),zs(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=io.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=e.on("change",u=>{this.latestValues[t]=u,this.props.onUpdate&&me.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),a=e.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{s(),a(),l&&l(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Qa){const e=Qa[t];if(!e)continue;const{isEnabled:n,Feature:s}=e;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Re()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<RA.length;n++){const s=RA[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,l=t[a];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=g6(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=Wa(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(lL(n)||cL(n))?n=parseFloat(n):!k4(n)&&Ys.test(e)&&(n=KL(t,e)),this.setBaseTarget(t,an(n)?n.get():n)),an(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let n;if(typeof e=="string"||typeof e=="object"){const a=X0(this.props,e,this.presenceContext?.custom);a&&(n=a[t])}if(e&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!an(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new A0),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class PC extends p6{constructor(){super(...arguments),this.KeyframeResolver=b4}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;an(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function kC(i,{style:t,vars:e},n,s){Object.assign(i.style,t,s&&s.getProjectionStyles(n));for(const a in e)i.style.setProperty(a,e[a])}function y6(i){return window.getComputedStyle(i)}class v6 extends PC{constructor(){super(...arguments),this.type="html",this.renderInstance=kC}readValueFromInstance(t,e){if(io.has(e))return this.projection?.isProjecting?dp(e):G$(t,e);{const n=y6(t),s=(C0(e)?n.getPropertyValue(e):n[e])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:e}){return TC(t,e)}build(t,e,n){z0(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return W0(t,e,n)}}const NC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function S6(i,t,e,n){kC(i,t,void 0,n);for(const s in t.attrs)i.setAttribute(NC.has(s)?s:K0(s),t.attrs[s])}class T6 extends PC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Re}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(io.has(e)){const n=jL(e);return n&&n.default||0}return e=NC.has(e)?e:K0(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return cC(t,e,n)}build(t,e,n){aC(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,s){S6(t,e,n,s)}mount(t){this.isSVGTag=lC(t.tagName),super.mount(t)}}const E6=(i,t)=>q0(i)?new T6(t):new v6(t,{allowProjection:i!==V.Fragment}),x6=T5({...z5,...f6,...t6,...d6},E6),LA=K4(x6),b6=async i=>{const{data:t}=await nd.post(`api/stream/tv/${i}`);return t},CA=async(i,t)=>{const{data:e}=await nd.post(`api/stream/camera/${t}/move`,i);return e},_A=async i=>{const{data:t}=await nd.post(`api/stream/camera/${i}/stop`);return t},A6=async i=>{const{data:t}=await nd.post(`api/stream/preset/${i}`);return t},DA=[{text:"Эндоскоп 1, Эндоскоп 2, Большая операционная, Малая операционная",type:Ci.first},{text:"Эндоскоп 1, Большая операционная",type:Ci.second},{text:"Эндоскоп 2, Малая операционная",type:Ci.third},{text:"Эндоскоп 1, Большая операционная, малая операционная",type:Ci.fourth}],R6=()=>{const[i,t]=V.useState(!1),{setNotification:e}=h1(),[n,s]=V.useState(null),[a,l]=V.useState({text:"Эндоскоп 1, Эндоскоп 2, Большая операционная, Малая операционная",type:Ci.first}),[u,d]=V.useState(DA.filter(k=>k.type!==Ci.first)),[f,h]=V.useState("neutral"),[g,y]=V.useState("neutral"),[S,v]=V.useState(null),[E,x]=V.useState(null),[b,D]=V.useState(!1),L=async k=>{const F={...a},R=DA.find($=>$.type===k);R&&(s(R),l(R),await F3(500),d($=>$.map(Q=>Q.type===R.type?F:Q)))},I=V.useCallback(async()=>{try{await A6(a.type)}catch(k){console.log(k),e({text:$c(k),type:"error",visible:!0})}},[e,a]);V.useEffect(()=>{I()},[I]);const _=V.useCallback(async(k,F)=>{try{k==="neutral"?await _A(F):await CA({x:0,z:k==="down"?-.5:.5,y:0},F)}catch(R){console.log(R),e({text:$c(R),type:"error",visible:!0})}},[e]),P=V.useCallback(async(k,F)=>{try{k?await CA(U3(k),F):await _A(F)}catch(R){console.log(R),e({text:$c(R),type:"error",visible:!0})}},[e]);V.useEffect(()=>{_(f,"cam1")},[f,_]),V.useEffect(()=>{_(g,"cam2")},[g,_]),V.useEffect(()=>{P(S,"cam1")},[S,P]),V.useEffect(()=>{P(E,"cam2")},[E,P]);const M=V.useCallback(async k=>{try{t(!0),await b6(k?"on":"off"),D(k)}catch(F){e({visible:!0,type:"error",text:$c(F)})}finally{t(!1)}},[e]);return V.useEffect(()=>(M(!0),()=>{M(!1)}),[M]),J.jsxs("div",{className:Ae.wrapper,children:[J.jsxs("div",{className:Ae.managementBlock,children:[J.jsxs("div",{className:Ae.tvManagement,children:[J.jsxs("div",{className:Ae.tvManagement__left,children:[J.jsx("div",{className:Ae.tvManagement__left__icon,children:J.jsx("img",{src:"/icons/desktop.png",alt:"desktop"})}),J.jsxs("div",{className:Ae.tvManagement__left__text,children:[J.jsxs("span",{children:[J.jsx("b",{children:"Телевизор"})," "]}),J.jsx("br",{}),J.jsx("span",{children:"Подключен"})]})]}),J.jsx(E3,{disabled:i,on:b,setOn:M})]}),J.jsxs("div",{className:Ae.smallCamera,children:[J.jsxs("div",{className:Ae.smallCamera__left,children:[J.jsx("div",{className:Ae.smallCamera__left__icon,children:J.jsx("img",{src:"/icons/camera.png",alt:"camera"})}),J.jsxs("div",{className:Ae.smallCamera__left__text,children:[J.jsxs("span",{children:[J.jsx("b",{children:"Малая операционная"})," "]}),J.jsx("br",{}),J.jsx("span",{children:"Камера 1"})]})]}),J.jsxs("div",{className:Ae.smallCamera__managing,children:[J.jsx(BE,{direction:f,setDirection:h}),J.jsx(FE,{isPressed:S,setIsPressed:v})]})]}),J.jsxs("div",{className:Ae.smallCamera,children:[J.jsxs("div",{className:Ae.smallCamera__left,children:[J.jsx("div",{className:Ae.smallCamera__left__icon,children:J.jsx("img",{src:"/icons/camera.png",alt:"camera"})}),J.jsxs("div",{className:Ae.smallCamera__left__text,children:[J.jsxs("span",{children:[J.jsx("b",{children:"Большая операционная"})," "]}),J.jsx("br",{}),J.jsx("span",{children:"Камера 2"})]})]}),J.jsxs("div",{className:Ae.smallCamera__managing,children:[J.jsx(BE,{direction:g,setDirection:y}),J.jsx(FE,{isPressed:E,setIsPressed:x})]})]})]}),J.jsxs("div",{className:Ae.cameraBlock,children:[J.jsx($4,{mode:"wait",children:J.jsxs(LA.div,{initial:{opacity:0,y:-60},animate:{opacity:1,y:0},exit:{opacity:0,x:40},transition:{duration:.5},className:Ae.cameraBlock__current,children:[J.jsx("div",{className:Ae.cameraBlock__current__hls,children:J.jsx(db,{preset:a.type})}),J.jsx("p",{children:a.text})]},a.type)}),J.jsx("div",{className:Ae.miniCameras,children:u.map(k=>J.jsxs(LA.div,{onClick:()=>L(k.type),initial:n?.type===k.type?{opacity:1,y:0}:{opacity:0,y:-40},animate:n?.type===k.type?{opacity:0,y:40}:{opacity:1,y:0},transition:{duration:.4},className:Ae.miniCameras__camera,children:[J.jsx("div",{children:J.jsx(db,{preset:k.type})}),J.jsx("p",{children:k.text})]},k.type))})]})]})};function L6(){return J.jsxs(J.Fragment,{children:[J.jsx(GP,{}),J.jsx(R6,{})]})}aI.createRoot(document.getElementById("root")).render(J.jsx(L6,{}));
